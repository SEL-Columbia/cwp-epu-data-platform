!function(tt){var et={};function __webpack_require__(nt){if(et[nt])return et[nt].exports;var rt=et[nt]={i:nt,l:!1,exports:{}};return tt[nt].call(rt.exports,rt,rt.exports,__webpack_require__),rt.l=!0,rt.exports}__webpack_require__.m=tt,__webpack_require__.c=et,__webpack_require__.d=function(tt,et,nt){__webpack_require__.o(tt,et)||Object.defineProperty(tt,et,{enumerable:!0,get:nt})},__webpack_require__.r=function(tt){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(tt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(tt,"__esModule",{value:!0})},__webpack_require__.t=function(tt,et){if(1&et&&(tt=__webpack_require__(tt)),8&et)return tt;if(4&et&&"object"==typeof tt&&tt&&tt.__esModule)return tt;var nt=Object.create(null);if(__webpack_require__.r(nt),Object.defineProperty(nt,"default",{enumerable:!0,value:tt}),2&et&&"string"!=typeof tt)for(var rt in tt)__webpack_require__.d(nt,rt,function(et){return tt[et]}.bind(null,rt));return nt},__webpack_require__.n=function(tt){var et=tt&&tt.__esModule?function getDefault(){return tt.default}:function getModuleExports(){return tt};return __webpack_require__.d(et,"a",et),et},__webpack_require__.o=function(tt,et){return Object.prototype.hasOwnProperty.call(tt,et)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=152)}([function(tt,et,nt){"use strict";tt.exports=nt(97)},function(tt,et,nt){var rt=nt(21);tt.exports=function(tt){if(!rt(tt))throw TypeError(String(tt)+" is not an object");return tt}},function(tt,et){tt.exports=!1},function(tt,et,nt){var rt=nt(7),it=nt(49).f,ot=nt(23),at=nt(44),st=nt(51),ct=nt(107),pt=nt(71);tt.exports=function(tt,et){var nt,ft,dt,mt,yt,vt=tt.target,Dt=tt.global,Ot=tt.stat;if(nt=Dt?rt:Ot?rt[vt]||st(vt,{}):(rt[vt]||{}).prototype)for(ft in et){if(mt=et[ft],dt=tt.noTargetGet?(yt=it(nt,ft))&&yt.value:nt[ft],!pt(Dt?ft:vt+(Ot?".":"#")+ft,tt.forced)&&void 0!==dt){if(typeof mt==typeof dt)continue;ct(mt,dt)}(tt.sham||dt&&dt.sham)&&ot(mt,"sham",!0),at(nt,ft,mt,tt)}}},function(tt,et,nt){var rt=nt(1),it=nt(122),ot=nt(53),at=nt(10),st=nt(74),ct=nt(125),Result=function(tt,et){this.stopped=tt,this.result=et};(tt.exports=function(tt,et,nt,pt,ft){var dt,mt,yt,vt,Dt,Ot,Rt,Bt=at(et,nt,pt?2:1);if(ft)dt=tt;else{if("function"!=typeof(mt=st(tt)))throw TypeError("Target is not iterable");if(it(mt)){for(yt=0,vt=ot(tt.length);vt>yt;yt++)if((Dt=pt?Bt(rt(Rt=tt[yt])[0],Rt[1]):Bt(tt[yt]))&&Dt instanceof Result)return Dt;return new Result(!1)}dt=mt.call(tt)}for(Ot=dt.next;!(Rt=Ot.call(dt)).done;)if("object"==typeof(Dt=ct(dt,Bt,Rt.value,pt))&&Dt&&Dt instanceof Result)return Dt;return new Result(!1)}).stop=function(tt){return new Result(!0,tt)}},function(tt,et){tt.exports=function(tt){if("function"!=typeof tt)throw TypeError(String(tt)+" is not a function");return tt}},function(tt,et,nt){var rt=nt(40),it=nt(144);"string"==typeof(it=it.__esModule?it.default:it)&&(it=[[tt.i,it,""]]);var ot={insert:"head",singleton:!1},at=(rt(it,ot),it.locals?it.locals:{});tt.exports=at},function(tt,et,nt){(function(et){var check=function(tt){return tt&&tt.Math==Math&&tt};tt.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof et&&et)||Function("return this")()}).call(this,nt(61))},function(tt,et,nt){tt.exports=nt(145)()},function(tt,et,nt){var rt=nt(109),it=nt(7),aFunction=function(tt){return"function"==typeof tt?tt:void 0};tt.exports=function(tt,et){return arguments.length<2?aFunction(rt[tt])||aFunction(it[tt]):rt[tt]&&rt[tt][et]||it[tt]&&it[tt][et]}},function(tt,et,nt){var rt=nt(5);tt.exports=function(tt,et,nt){if(rt(tt),void 0===et)return tt;switch(nt){case 0:return function(){return tt.call(et)};case 1:return function(nt){return tt.call(et,nt)};case 2:return function(nt,rt){return tt.call(et,nt,rt)};case 3:return function(nt,rt,it){return tt.call(et,nt,rt,it)}}return function(){return tt.apply(et,arguments)}}},function(tt,et,nt){"use strict";function _inheritsLoose(tt,et){tt.prototype=Object.create(et.prototype),tt.prototype.constructor=tt,tt.__proto__=et}nt.d(et,"a",(function(){return _inheritsLoose}))},function(tt,et,nt){var rt=nt(7),it=nt(68),ot=nt(16),at=nt(69),st=nt(72),ct=nt(119),pt=it("wks"),ft=rt.Symbol,dt=ct?ft:ft&&ft.withoutSetter||at;tt.exports=function(tt){return ot(pt,tt)||(st&&ot(ft,tt)?pt[tt]=ft[tt]:pt[tt]=dt("Symbol."+tt)),pt[tt]}},function(tt,et,nt){var rt=nt(1),it=nt(5),ot=nt(12)("species");tt.exports=function(tt,et){var nt,at=rt(tt).constructor;return void 0===at||null==(nt=rt(at)[ot])?et:it(nt)}},function(tt,et,nt){var rt=nt(2),it=nt(55);tt.exports=rt?it:function(tt){return Map.prototype.entries.call(tt)}},function(tt,et){tt.exports=function(tt){try{return!!tt()}catch(tt){return!0}}},function(tt,et){var nt={}.hasOwnProperty;tt.exports=function(tt,et){return nt.call(tt,et)}},function(tt,et,nt){var rt=nt(2),it=nt(55);tt.exports=rt?it:function(tt){return Set.prototype.values.call(tt)}},function(tt,et,nt){"use strict";!function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(tt){console.error(tt)}}}(),tt.exports=nt(98)},function(tt,et,nt){
/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */
tt.exports=function(){"use strict";for(var limit=function(tt,et,nt){return void 0===et&&(et=0),void 0===nt&&(nt=1),tt<et?et:tt>nt?nt:tt},tt={},et=0,nt=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];et<nt.length;et+=1){var rt=nt[et];tt["[object "+rt+"]"]=rt.toLowerCase()}var type=function(et){return tt[Object.prototype.toString.call(et)]||"object"},it=Math.PI,ot={clip_rgb:function(tt){tt._clipped=!1,tt._unclipped=tt.slice(0);for(var et=0;et<=3;et++)et<3?((tt[et]<0||tt[et]>255)&&(tt._clipped=!0),tt[et]=limit(tt[et],0,255)):3===et&&(tt[et]=limit(tt[et],0,1));return tt},limit:limit,type:type,unpack:function(tt,et){return void 0===et&&(et=null),tt.length>=3?Array.prototype.slice.call(tt):"object"==type(tt[0])&&et?et.split("").filter((function(et){return void 0!==tt[0][et]})).map((function(et){return tt[0][et]})):tt[0]},last:function(tt){if(tt.length<2)return null;var et=tt.length-1;return"string"==type(tt[et])?tt[et].toLowerCase():null},PI:it,TWOPI:2*it,PITHIRD:it/3,DEG2RAD:it/180,RAD2DEG:180/it},at={format:{},autodetect:[]},st=ot.last,ct=ot.clip_rgb,pt=ot.type,ft=function Color(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=this;if("object"===pt(tt[0])&&tt[0].constructor&&tt[0].constructor===this.constructor)return tt[0];var rt=st(tt),it=!1;if(!rt){it=!0,at.sorted||(at.autodetect=at.autodetect.sort((function(tt,et){return et.p-tt.p})),at.sorted=!0);for(var ot=0,ft=at.autodetect;ot<ft.length;ot+=1){var dt=ft[ot];if(rt=dt.test.apply(dt,tt))break}}if(!at.format[rt])throw new Error("unknown format: "+tt);var mt=at.format[rt].apply(null,it?tt:tt.slice(0,-1));nt._rgb=ct(mt),3===nt._rgb.length&&nt._rgb.push(1)};ft.prototype.toString=function toString(){return"function"==pt(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var dt=ft,chroma=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(chroma.Color,[null].concat(tt)))};chroma.Color=dt,chroma.version="2.1.0";var mt=chroma,yt=ot.unpack,vt=Math.max,rgb2cmyk_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=yt(tt,"rgb"),rt=nt[0],it=nt[1],ot=nt[2],at=1-vt(rt/=255,vt(it/=255,ot/=255)),st=at<1?1/(1-at):0,ct=(1-rt-at)*st,pt=(1-it-at)*st,ft=(1-ot-at)*st;return[ct,pt,ft,at]},Dt=ot.unpack,cmyk2rgb_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=(tt=Dt(tt,"cmyk"))[0],rt=tt[1],it=tt[2],ot=tt[3],at=tt.length>4?tt[4]:1;return 1===ot?[0,0,0,at]:[nt>=1?0:255*(1-nt)*(1-ot),rt>=1?0:255*(1-rt)*(1-ot),it>=1?0:255*(1-it)*(1-ot),at]},Ot=ot.unpack,Rt=ot.type;dt.prototype.cmyk=function(){return rgb2cmyk_1(this._rgb)},mt.cmyk=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["cmyk"])))},at.format.cmyk=cmyk2rgb_1,at.autodetect.push({p:2,test:function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];if(tt=Ot(tt,"cmyk"),"array"===Rt(tt)&&4===tt.length)return"cmyk"}});var Bt=ot.unpack,Ne=ot.last,rnd=function(tt){return Math.round(100*tt)/100},hsl2css_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=Bt(tt,"hsla"),rt=Ne(tt)||"lsa";return nt[0]=rnd(nt[0]||0),nt[1]=rnd(100*nt[1])+"%",nt[2]=rnd(100*nt[2])+"%","hsla"===rt||nt.length>3&&nt[3]<1?(nt[3]=nt.length>3?nt[3]:1,rt="hsla"):nt.length=3,rt+"("+nt.join(",")+")"},rn=ot.unpack,rgb2hsl_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=(tt=rn(tt,"rgba"))[0],rt=tt[1],it=tt[2];nt/=255,rt/=255,it/=255;var ot,at,st=Math.min(nt,rt,it),ct=Math.max(nt,rt,it),pt=(ct+st)/2;return ct===st?(ot=0,at=Number.NaN):ot=pt<.5?(ct-st)/(ct+st):(ct-st)/(2-ct-st),nt==ct?at=(rt-it)/(ct-st):rt==ct?at=2+(it-nt)/(ct-st):it==ct&&(at=4+(nt-rt)/(ct-st)),(at*=60)<0&&(at+=360),tt.length>3&&void 0!==tt[3]?[at,ot,pt,tt[3]]:[at,ot,pt]},vn=ot.unpack,bn=ot.last,Tn=Math.round,rgb2css_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=vn(tt,"rgba"),rt=bn(tt)||"rgb";return"hsl"==rt.substr(0,3)?hsl2css_1(rgb2hsl_1(nt),rt):(nt[0]=Tn(nt[0]),nt[1]=Tn(nt[1]),nt[2]=Tn(nt[2]),("rgba"===rt||nt.length>3&&nt[3]<1)&&(nt[3]=nt.length>3?nt[3]:1,rt="rgba"),rt+"("+nt.slice(0,"rgb"===rt?3:4).join(",")+")")},Cn=ot.unpack,Ln=Math.round,hsl2rgb_1=function(){for(var tt,et=[],nt=arguments.length;nt--;)et[nt]=arguments[nt];var rt,it,ot,at=(et=Cn(et,"hsl"))[0],st=et[1],ct=et[2];if(0===st)rt=it=ot=255*ct;else{var pt=[0,0,0],ft=[0,0,0],dt=ct<.5?ct*(1+st):ct+st-ct*st,mt=2*ct-dt,yt=at/360;pt[0]=yt+1/3,pt[1]=yt,pt[2]=yt-1/3;for(var vt=0;vt<3;vt++)pt[vt]<0&&(pt[vt]+=1),pt[vt]>1&&(pt[vt]-=1),6*pt[vt]<1?ft[vt]=mt+6*(dt-mt)*pt[vt]:2*pt[vt]<1?ft[vt]=dt:3*pt[vt]<2?ft[vt]=mt+(dt-mt)*(2/3-pt[vt])*6:ft[vt]=mt;rt=(tt=[Ln(255*ft[0]),Ln(255*ft[1]),Ln(255*ft[2])])[0],it=tt[1],ot=tt[2]}return et.length>3?[rt,it,ot,et[3]]:[rt,it,ot,1]},In=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Mn=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,zn=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Bn=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Fn=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Nn=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Vn=Math.round,css2rgb=function(tt){var et;if(tt=tt.toLowerCase().trim(),at.format.named)try{return at.format.named(tt)}catch(tt){}if(et=tt.match(In)){for(var nt=et.slice(1,4),rt=0;rt<3;rt++)nt[rt]=+nt[rt];return nt[3]=1,nt}if(et=tt.match(Mn)){for(var it=et.slice(1,5),ot=0;ot<4;ot++)it[ot]=+it[ot];return it}if(et=tt.match(zn)){for(var st=et.slice(1,4),ct=0;ct<3;ct++)st[ct]=Vn(2.55*st[ct]);return st[3]=1,st}if(et=tt.match(Bn)){for(var pt=et.slice(1,5),ft=0;ft<3;ft++)pt[ft]=Vn(2.55*pt[ft]);return pt[3]=+pt[3],pt}if(et=tt.match(Fn)){var dt=et.slice(1,4);dt[1]*=.01,dt[2]*=.01;var mt=hsl2rgb_1(dt);return mt[3]=1,mt}if(et=tt.match(Nn)){var yt=et.slice(1,4);yt[1]*=.01,yt[2]*=.01;var vt=hsl2rgb_1(yt);return vt[3]=+et[4],vt}};css2rgb.test=function(tt){return In.test(tt)||Mn.test(tt)||zn.test(tt)||Bn.test(tt)||Fn.test(tt)||Nn.test(tt)};var Wn=css2rgb,$n=ot.type;dt.prototype.css=function(tt){return rgb2css_1(this._rgb,tt)},mt.css=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["css"])))},at.format.css=Wn,at.autodetect.push({p:5,test:function(tt){for(var et=[],nt=arguments.length-1;nt-- >0;)et[nt]=arguments[nt+1];if(!et.length&&"string"===$n(tt)&&Wn.test(tt))return"css"}});var Yn=ot.unpack;at.format.gl=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=Yn(tt,"rgba");return nt[0]*=255,nt[1]*=255,nt[2]*=255,nt},mt.gl=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["gl"])))},dt.prototype.gl=function(){var tt=this._rgb;return[tt[0]/255,tt[1]/255,tt[2]/255,tt[3]]};var er=ot.unpack,rgb2hcg_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt,rt=er(tt,"rgb"),it=rt[0],ot=rt[1],at=rt[2],st=Math.min(it,ot,at),ct=Math.max(it,ot,at),pt=ct-st,ft=100*pt/255,dt=st/(255-pt)*100;return 0===pt?nt=Number.NaN:(it===ct&&(nt=(ot-at)/pt),ot===ct&&(nt=2+(at-it)/pt),at===ct&&(nt=4+(it-ot)/pt),(nt*=60)<0&&(nt+=360)),[nt,ft,dt]},rr=ot.unpack,vr=Math.floor,hcg2rgb_1=function(){for(var tt,et,nt,rt,it,ot,at=[],st=arguments.length;st--;)at[st]=arguments[st];var ct,pt,ft,dt=(at=rr(at,"hcg"))[0],mt=at[1],yt=at[2];yt*=255;var vt=255*mt;if(0===mt)ct=pt=ft=yt;else{360===dt&&(dt=0),dt>360&&(dt-=360),dt<0&&(dt+=360);var Dt=vr(dt/=60),Ot=dt-Dt,Rt=yt*(1-mt),Bt=Rt+vt*(1-Ot),Ne=Rt+vt*Ot,rn=Rt+vt;switch(Dt){case 0:ct=(tt=[rn,Ne,Rt])[0],pt=tt[1],ft=tt[2];break;case 1:ct=(et=[Bt,rn,Rt])[0],pt=et[1],ft=et[2];break;case 2:ct=(nt=[Rt,rn,Ne])[0],pt=nt[1],ft=nt[2];break;case 3:ct=(rt=[Rt,Bt,rn])[0],pt=rt[1],ft=rt[2];break;case 4:ct=(it=[Ne,Rt,rn])[0],pt=it[1],ft=it[2];break;case 5:ct=(ot=[rn,Rt,Bt])[0],pt=ot[1],ft=ot[2]}}return[ct,pt,ft,at.length>3?at[3]:1]},wr=ot.unpack,Sr=ot.type;dt.prototype.hcg=function(){return rgb2hcg_1(this._rgb)},mt.hcg=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["hcg"])))},at.format.hcg=hcg2rgb_1,at.autodetect.push({p:1,test:function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];if(tt=wr(tt,"hcg"),"array"===Sr(tt)&&3===tt.length)return"hcg"}});var ii=ot.unpack,qi=ot.last,uo=Math.round,rgb2hex_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=ii(tt,"rgba"),rt=nt[0],it=nt[1],ot=nt[2],at=nt[3],st=qi(tt)||"auto";void 0===at&&(at=1),"auto"===st&&(st=at<1?"rgba":"rgb");var ct=(rt=uo(rt))<<16|(it=uo(it))<<8|(ot=uo(ot)),pt="000000"+ct.toString(16);pt=pt.substr(pt.length-6);var ft="0"+uo(255*at).toString(16);switch(ft=ft.substr(ft.length-2),st.toLowerCase()){case"rgba":return"#"+pt+ft;case"argb":return"#"+ft+pt;default:return"#"+pt}},po=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,vo=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,hex2rgb_1=function(tt){if(tt.match(po)){4!==tt.length&&7!==tt.length||(tt=tt.substr(1)),3===tt.length&&(tt=(tt=tt.split(""))[0]+tt[0]+tt[1]+tt[1]+tt[2]+tt[2]);var et=parseInt(tt,16);return[et>>16,et>>8&255,255&et,1]}if(tt.match(vo)){5!==tt.length&&9!==tt.length||(tt=tt.substr(1)),4===tt.length&&(tt=(tt=tt.split(""))[0]+tt[0]+tt[1]+tt[1]+tt[2]+tt[2]+tt[3]+tt[3]);var nt=parseInt(tt,16);return[nt>>24&255,nt>>16&255,nt>>8&255,Math.round((255&nt)/255*100)/100]}throw new Error("unknown hex color: "+tt)},So=ot.type;dt.prototype.hex=function(tt){return rgb2hex_1(this._rgb,tt)},mt.hex=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["hex"])))},at.format.hex=hex2rgb_1,at.autodetect.push({p:4,test:function(tt){for(var et=[],nt=arguments.length-1;nt-- >0;)et[nt]=arguments[nt+1];if(!et.length&&"string"===So(tt)&&[3,4,5,6,7,8,9].indexOf(tt.length)>=0)return"hex"}});var ta=ot.unpack,na=ot.TWOPI,ia=Math.min,sa=Math.sqrt,la=Math.acos,rgb2hsi_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt,rt=ta(tt,"rgb"),it=rt[0],ot=rt[1],at=rt[2],st=ia(it/=255,ot/=255,at/=255),ct=(it+ot+at)/3,pt=ct>0?1-st/ct:0;return 0===pt?nt=NaN:(nt=(it-ot+(it-at))/2,nt/=sa((it-ot)*(it-ot)+(it-at)*(ot-at)),nt=la(nt),at>ot&&(nt=na-nt),nt/=na),[360*nt,pt,ct]},pa=ot.unpack,fa=ot.limit,ga=ot.TWOPI,va=ot.PITHIRD,_a=Math.cos,hsi2rgb_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt,rt,it,ot=(tt=pa(tt,"hsi"))[0],at=tt[1],st=tt[2];return isNaN(ot)&&(ot=0),isNaN(at)&&(at=0),ot>360&&(ot-=360),ot<0&&(ot+=360),(ot/=360)<1/3?rt=1-((it=(1-at)/3)+(nt=(1+at*_a(ga*ot)/_a(va-ga*ot))/3)):ot<2/3?it=1-((nt=(1-at)/3)+(rt=(1+at*_a(ga*(ot-=1/3))/_a(va-ga*ot))/3)):nt=1-((rt=(1-at)/3)+(it=(1+at*_a(ga*(ot-=2/3))/_a(va-ga*ot))/3)),[255*(nt=fa(st*nt*3)),255*(rt=fa(st*rt*3)),255*(it=fa(st*it*3)),tt.length>3?tt[3]:1]},wa=ot.unpack,Aa=ot.type;dt.prototype.hsi=function(){return rgb2hsi_1(this._rgb)},mt.hsi=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["hsi"])))},at.format.hsi=hsi2rgb_1,at.autodetect.push({p:2,test:function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];if(tt=wa(tt,"hsi"),"array"===Aa(tt)&&3===tt.length)return"hsi"}});var os=ot.unpack,as=ot.type;dt.prototype.hsl=function(){return rgb2hsl_1(this._rgb)},mt.hsl=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["hsl"])))},at.format.hsl=hsl2rgb_1,at.autodetect.push({p:2,test:function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];if(tt=os(tt,"hsl"),"array"===as(tt)&&3===tt.length)return"hsl"}});var ss=ot.unpack,us=Math.min,ls=Math.max,rgb2hsv=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt,rt,it,ot=(tt=ss(tt,"rgb"))[0],at=tt[1],st=tt[2],ct=us(ot,at,st),pt=ls(ot,at,st),ft=pt-ct;return it=pt/255,0===pt?(nt=Number.NaN,rt=0):(rt=ft/pt,ot===pt&&(nt=(at-st)/ft),at===pt&&(nt=2+(st-ot)/ft),st===pt&&(nt=4+(ot-at)/ft),(nt*=60)<0&&(nt+=360)),[nt,rt,it]},fs=ot.unpack,gs=Math.floor,hsv2rgb_1=function(){for(var tt,et,nt,rt,it,ot,at=[],st=arguments.length;st--;)at[st]=arguments[st];var ct,pt,ft,dt=(at=fs(at,"hsv"))[0],mt=at[1],yt=at[2];if(yt*=255,0===mt)ct=pt=ft=yt;else{360===dt&&(dt=0),dt>360&&(dt-=360),dt<0&&(dt+=360);var vt=gs(dt/=60),Dt=dt-vt,Ot=yt*(1-mt),Rt=yt*(1-mt*Dt),Bt=yt*(1-mt*(1-Dt));switch(vt){case 0:ct=(tt=[yt,Bt,Ot])[0],pt=tt[1],ft=tt[2];break;case 1:ct=(et=[Rt,yt,Ot])[0],pt=et[1],ft=et[2];break;case 2:ct=(nt=[Ot,yt,Bt])[0],pt=nt[1],ft=nt[2];break;case 3:ct=(rt=[Ot,Rt,yt])[0],pt=rt[1],ft=rt[2];break;case 4:ct=(it=[Bt,Ot,yt])[0],pt=it[1],ft=it[2];break;case 5:ct=(ot=[yt,Ot,Rt])[0],pt=ot[1],ft=ot[2]}}return[ct,pt,ft,at.length>3?at[3]:1]},vs=ot.unpack,xs=ot.type;dt.prototype.hsv=function(){return rgb2hsv(this._rgb)},mt.hsv=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["hsv"])))},at.format.hsv=hsv2rgb_1,at.autodetect.push({p:2,test:function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];if(tt=vs(tt,"hsv"),"array"===xs(tt)&&3===tt.length)return"hsv"}});var Ss=18,Es=.95047,Ps=1,Cs=1.08883,Ls=.137931034,As=.206896552,Ms=.12841855,zs=.008856452,Os=ot.unpack,Rs=Math.pow,rgb_xyz=function(tt){return(tt/=255)<=.04045?tt/12.92:Rs((tt+.055)/1.055,2.4)},xyz_lab=function(tt){return tt>zs?Rs(tt,1/3):tt/Ms+Ls},rgb2xyz=function(tt,et,nt){return tt=rgb_xyz(tt),et=rgb_xyz(et),nt=rgb_xyz(nt),[xyz_lab((.4124564*tt+.3575761*et+.1804375*nt)/Es),xyz_lab((.2126729*tt+.7151522*et+.072175*nt)/Ps),xyz_lab((.0193339*tt+.119192*et+.9503041*nt)/Cs)]},rgb2lab_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=Os(tt,"rgb"),rt=nt[0],it=nt[1],ot=nt[2],at=rgb2xyz(rt,it,ot),st=at[0],ct=at[1],pt=at[2],ft=116*ct-16;return[ft<0?0:ft,500*(st-ct),200*(ct-pt)]},Bs=ot.unpack,Fs=Math.pow,xyz_rgb=function(tt){return 255*(tt<=.00304?12.92*tt:1.055*Fs(tt,1/2.4)-.055)},lab_xyz=function(tt){return tt>As?tt*tt*tt:Ms*(tt-Ls)},lab2rgb_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt,rt,it,ot=(tt=Bs(tt,"lab"))[0],at=tt[1],st=tt[2];return rt=(ot+16)/116,nt=isNaN(at)?rt:rt+at/500,it=isNaN(st)?rt:rt-st/200,rt=Ps*lab_xyz(rt),nt=Es*lab_xyz(nt),it=Cs*lab_xyz(it),[xyz_rgb(3.2404542*nt-1.5371385*rt-.4985314*it),xyz_rgb(-.969266*nt+1.8760108*rt+.041556*it),xyz_rgb(.0556434*nt-.2040259*rt+1.0572252*it),tt.length>3?tt[3]:1]},Ns=ot.unpack,Vs=ot.type;dt.prototype.lab=function(){return rgb2lab_1(this._rgb)},mt.lab=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["lab"])))},at.format.lab=lab2rgb_1,at.autodetect.push({p:2,test:function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];if(tt=Ns(tt,"lab"),"array"===Vs(tt)&&3===tt.length)return"lab"}});var Us=ot.unpack,js=ot.RAD2DEG,Zs=Math.sqrt,Js=Math.atan2,du=Math.round,lab2lch_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=Us(tt,"lab"),rt=nt[0],it=nt[1],ot=nt[2],at=Zs(it*it+ot*ot),st=(Js(ot,it)*js+360)%360;return 0===du(1e4*at)&&(st=Number.NaN),[rt,at,st]},vu=ot.unpack,rgb2lch_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=vu(tt,"rgb"),rt=nt[0],it=nt[1],ot=nt[2],at=rgb2lab_1(rt,it,ot),st=at[0],ct=at[1],pt=at[2];return lab2lch_1(st,ct,pt)},_u=ot.unpack,wu=ot.DEG2RAD,Tu=Math.sin,Fu=Math.cos,lch2lab_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=_u(tt,"lch"),rt=nt[0],it=nt[1],ot=nt[2];return isNaN(ot)&&(ot=0),[rt,Fu(ot*=wu)*it,Tu(ot)*it]},tl=ot.unpack,lch2rgb_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=(tt=tl(tt,"lch"))[0],rt=tt[1],it=tt[2],ot=lch2lab_1(nt,rt,it),at=ot[0],st=ot[1],ct=ot[2],pt=lab2rgb_1(at,st,ct),ft=pt[0],dt=pt[1],mt=pt[2];return[ft,dt,mt,tt.length>3?tt[3]:1]},ol=ot.unpack,hcl2rgb_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=ol(tt,"hcl").reverse();return lch2rgb_1.apply(void 0,nt)},sl=ot.unpack,dl=ot.type;dt.prototype.lch=function(){return rgb2lch_1(this._rgb)},dt.prototype.hcl=function(){return rgb2lch_1(this._rgb).reverse()},mt.lch=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["lch"])))},mt.hcl=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["hcl"])))},at.format.lch=lch2rgb_1,at.format.hcl=hcl2rgb_1,["lch","hcl"].forEach((function(tt){return at.autodetect.push({p:2,test:function(){for(var et=[],nt=arguments.length;nt--;)et[nt]=arguments[nt];if(et=sl(et,tt),"array"===dl(et)&&3===et.length)return tt}})}));var gl={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},yl=ot.type;dt.prototype.name=function(){for(var tt=rgb2hex_1(this._rgb,"rgb"),et=0,nt=Object.keys(gl);et<nt.length;et+=1){var rt=nt[et];if(gl[rt]===tt)return rt.toLowerCase()}return tt},at.format.named=function(tt){if(tt=tt.toLowerCase(),gl[tt])return hex2rgb_1(gl[tt]);throw new Error("unknown color name: "+tt)},at.autodetect.push({p:5,test:function(tt){for(var et=[],nt=arguments.length-1;nt-- >0;)et[nt]=arguments[nt+1];if(!et.length&&"string"===yl(tt)&&gl[tt.toLowerCase()])return"named"}});var vl=ot.unpack,rgb2num_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=vl(tt,"rgb"),rt=nt[0],it=nt[1],ot=nt[2];return(rt<<16)+(it<<8)+ot},_l=ot.type,num2rgb_1=function(tt){if("number"==_l(tt)&&tt>=0&&tt<=16777215)return[tt>>16,tt>>8&255,255&tt,1];throw new Error("unknown num color: "+tt)},xl=ot.type;dt.prototype.num=function(){return rgb2num_1(this._rgb)},mt.num=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["num"])))},at.format.num=num2rgb_1,at.autodetect.push({p:5,test:function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];if(1===tt.length&&"number"===xl(tt[0])&&tt[0]>=0&&tt[0]<=16777215)return"num"}});var bl=ot.unpack,wl=ot.type,Sl=Math.round;dt.prototype.rgb=function(tt){return void 0===tt&&(tt=!0),!1===tt?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Sl)},dt.prototype.rgba=function(tt){return void 0===tt&&(tt=!0),this._rgb.slice(0,4).map((function(et,nt){return nt<3?!1===tt?et:Sl(et):et}))},mt.rgb=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["rgb"])))},at.format.rgb=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=bl(tt,"rgba");return void 0===nt[3]&&(nt[3]=1),nt},at.autodetect.push({p:3,test:function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];if(tt=bl(tt,"rgba"),"array"===wl(tt)&&(3===tt.length||4===tt.length&&"number"==wl(tt[3])&&tt[3]>=0&&tt[3]<=1))return"rgb"}});var Cl=Math.log,temperature2rgb_1=function(tt){var et,nt,rt,it=tt/100;return it<66?(et=255,nt=-155.25485562709179-.44596950469579133*(nt=it-2)+104.49216199393888*Cl(nt),rt=it<20?0:.8274096064007395*(rt=it-10)-254.76935184120902+115.67994401066147*Cl(rt)):(et=351.97690566805693+.114206453784165*(et=it-55)-40.25366309332127*Cl(et),nt=325.4494125711974+.07943456536662342*(nt=it-50)-28.0852963507957*Cl(nt),rt=255),[et,nt,rt,1]},kl=ot.unpack,Il=Math.round,rgb2temperature_1=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];for(var nt,rt=kl(tt,"rgb"),it=rt[0],ot=rt[2],at=1e3,st=4e4,ct=.4;st-at>ct;){var pt=temperature2rgb_1(nt=.5*(st+at));pt[2]/pt[0]>=ot/it?st=nt:at=nt}return Il(nt)};dt.prototype.temp=dt.prototype.kelvin=dt.prototype.temperature=function(){return rgb2temperature_1(this._rgb)},mt.temp=mt.kelvin=mt.temperature=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];return new(Function.prototype.bind.apply(dt,[null].concat(tt,["temp"])))},at.format.temp=at.format.kelvin=at.format.temperature=temperature2rgb_1;var Al=ot.type;dt.prototype.alpha=function(tt,et){return void 0===et&&(et=!1),void 0!==tt&&"number"===Al(tt)?et?(this._rgb[3]=tt,this):new dt([this._rgb[0],this._rgb[1],this._rgb[2],tt],"rgb"):this._rgb[3]},dt.prototype.clipped=function(){return this._rgb._clipped||!1},dt.prototype.darken=function(tt){void 0===tt&&(tt=1);var et=this.lab();return et[0]-=Ss*tt,new dt(et,"lab").alpha(this.alpha(),!0)},dt.prototype.brighten=function(tt){return void 0===tt&&(tt=1),this.darken(-tt)},dt.prototype.darker=dt.prototype.darken,dt.prototype.brighter=dt.prototype.brighten,dt.prototype.get=function(tt){var et=tt.split("."),nt=et[0],rt=et[1],it=this[nt]();if(rt){var ot=nt.indexOf(rt);if(ot>-1)return it[ot];throw new Error("unknown channel "+rt+" in mode "+nt)}return it};var zl=ot.type,Fl=Math.pow;dt.prototype.luminance=function(tt){if(void 0!==tt&&"number"===zl(tt)){if(0===tt)return new dt([0,0,0,this._rgb[3]],"rgb");if(1===tt)return new dt([255,255,255,this._rgb[3]],"rgb");var et=this.luminance(),nt=20,test=function(et,rt){var it=et.interpolate(rt,.5,"rgb"),ot=it.luminance();return Math.abs(tt-ot)<1e-7||!nt--?it:ot>tt?test(et,it):test(it,rt)},rt=(et>tt?test(new dt([0,0,0]),this):test(this,new dt([255,255,255]))).rgb();return new dt(rt.concat([this._rgb[3]]))}return rgb2luminance.apply(void 0,this._rgb.slice(0,3))};var rgb2luminance=function(tt,et,nt){return.2126*(tt=luminance_x(tt))+.7152*(et=luminance_x(et))+.0722*(nt=luminance_x(nt))},luminance_x=function(tt){return(tt/=255)<=.03928?tt/12.92:Fl((tt+.055)/1.055,2.4)},Hl={},ac=ot.type,mix=function(tt,et,nt){void 0===nt&&(nt=.5);for(var rt=[],it=arguments.length-3;it-- >0;)rt[it]=arguments[it+3];var ot=rt[0]||"lrgb";if(Hl[ot]||rt.length||(ot=Object.keys(Hl)[0]),!Hl[ot])throw new Error("interpolation mode "+ot+" is not defined");return"object"!==ac(tt)&&(tt=new dt(tt)),"object"!==ac(et)&&(et=new dt(et)),Hl[ot](tt,et,nt).alpha(tt.alpha()+nt*(et.alpha()-tt.alpha()))};dt.prototype.mix=dt.prototype.interpolate=function(tt,et){void 0===et&&(et=.5);for(var nt=[],rt=arguments.length-2;rt-- >0;)nt[rt]=arguments[rt+2];return mix.apply(void 0,[this,tt,et].concat(nt))},dt.prototype.premultiply=function(tt){void 0===tt&&(tt=!1);var et=this._rgb,nt=et[3];return tt?(this._rgb=[et[0]*nt,et[1]*nt,et[2]*nt,nt],this):new dt([et[0]*nt,et[1]*nt,et[2]*nt,nt],"rgb")},dt.prototype.saturate=function(tt){void 0===tt&&(tt=1);var et=this.lch();return et[1]+=Ss*tt,et[1]<0&&(et[1]=0),new dt(et,"lch").alpha(this.alpha(),!0)},dt.prototype.desaturate=function(tt){return void 0===tt&&(tt=1),this.saturate(-tt)};var pc=ot.type;dt.prototype.set=function(tt,et,nt){void 0===nt&&(nt=!1);var rt=tt.split("."),it=rt[0],ot=rt[1],at=this[it]();if(ot){var st=it.indexOf(ot);if(st>-1){if("string"==pc(et))switch(et.charAt(0)){case"+":case"-":at[st]+=+et;break;case"*":at[st]*=+et.substr(1);break;case"/":at[st]/=+et.substr(1);break;default:at[st]=+et}else{if("number"!==pc(et))throw new Error("unsupported value for Color.set");at[st]=et}var ct=new dt(at,it);return nt?(this._rgb=ct._rgb,this):ct}throw new Error("unknown channel "+ot+" in mode "+it)}return at},Hl.rgb=function(tt,et,nt){var rt=tt._rgb,it=et._rgb;return new dt(rt[0]+nt*(it[0]-rt[0]),rt[1]+nt*(it[1]-rt[1]),rt[2]+nt*(it[2]-rt[2]),"rgb")};var yc=Math.sqrt,_c=Math.pow;Hl.lrgb=function(tt,et,nt){var rt=tt._rgb,it=rt[0],ot=rt[1],at=rt[2],st=et._rgb,ct=st[0],pt=st[1],ft=st[2];return new dt(yc(_c(it,2)*(1-nt)+_c(ct,2)*nt),yc(_c(ot,2)*(1-nt)+_c(pt,2)*nt),yc(_c(at,2)*(1-nt)+_c(ft,2)*nt),"rgb")},Hl.lab=function(tt,et,nt){var rt=tt.lab(),it=et.lab();return new dt(rt[0]+nt*(it[0]-rt[0]),rt[1]+nt*(it[1]-rt[1]),rt[2]+nt*(it[2]-rt[2]),"lab")};var _hsx=function(tt,et,nt,rt){var it,ot,at,st,ct,pt,ft,mt,yt,vt,Dt,Ot;return"hsl"===rt?(at=tt.hsl(),st=et.hsl()):"hsv"===rt?(at=tt.hsv(),st=et.hsv()):"hcg"===rt?(at=tt.hcg(),st=et.hcg()):"hsi"===rt?(at=tt.hsi(),st=et.hsi()):"lch"!==rt&&"hcl"!==rt||(rt="hcl",at=tt.hcl(),st=et.hcl()),"h"===rt.substr(0,1)&&(ct=(it=at)[0],ft=it[1],yt=it[2],pt=(ot=st)[0],mt=ot[1],vt=ot[2]),isNaN(ct)||isNaN(pt)?isNaN(ct)?isNaN(pt)?Ot=Number.NaN:(Ot=pt,1!=yt&&0!=yt||"hsv"==rt||(Dt=mt)):(Ot=ct,1!=vt&&0!=vt||"hsv"==rt||(Dt=ft)):Ot=ct+nt*(pt>ct&&pt-ct>180?pt-(ct+360):pt<ct&&ct-pt>180?pt+360-ct:pt-ct),void 0===Dt&&(Dt=ft+nt*(mt-ft)),new dt([Ot,Dt,yt+nt*(vt-yt)],rt)},lch$1=function(tt,et,nt){return _hsx(tt,et,nt,"lch")};Hl.lch=lch$1,Hl.hcl=lch$1,Hl.num=function(tt,et,nt){var rt=tt.num(),it=et.num();return new dt(rt+nt*(it-rt),"num")},Hl.hcg=function(tt,et,nt){return _hsx(tt,et,nt,"hcg")},Hl.hsi=function(tt,et,nt){return _hsx(tt,et,nt,"hsi")},Hl.hsl=function(tt,et,nt){return _hsx(tt,et,nt,"hsl")},Hl.hsv=function(tt,et,nt){return _hsx(tt,et,nt,"hsv")};var xc=ot.clip_rgb,bc=Math.pow,wc=Math.sqrt,Ec=Math.PI,Cc=Math.cos,kc=Math.sin,Ic=Math.atan2,_average_lrgb=function(tt,et){for(var nt=tt.length,rt=[0,0,0,0],it=0;it<tt.length;it++){var ot=tt[it],at=et[it]/nt,st=ot._rgb;rt[0]+=bc(st[0],2)*at,rt[1]+=bc(st[1],2)*at,rt[2]+=bc(st[2],2)*at,rt[3]+=st[3]*at}return rt[0]=wc(rt[0]),rt[1]=wc(rt[1]),rt[2]=wc(rt[2]),rt[3]>.9999999&&(rt[3]=1),new dt(xc(rt))},Ac=ot.type,zc=Math.pow,scale=function(tt){var et="rgb",nt=mt("#ccc"),rt=0,it=[0,1],ot=[],at=[0,0],st=!1,ct=[],pt=!1,ft=0,dt=1,yt=!1,vt={},Dt=!0,Ot=1,setColors=function(tt){if((tt=tt||["#fff","#000"])&&"string"===Ac(tt)&&mt.brewer&&mt.brewer[tt.toLowerCase()]&&(tt=mt.brewer[tt.toLowerCase()]),"array"===Ac(tt)){1===tt.length&&(tt=[tt[0],tt[0]]),tt=tt.slice(0);for(var et=0;et<tt.length;et++)tt[et]=mt(tt[et]);ot.length=0;for(var nt=0;nt<tt.length;nt++)ot.push(nt/(tt.length-1))}return resetCache(),ct=tt},tMapLightness=function(tt){return tt},tMapDomain=function(tt){return tt},getColor=function(tt,rt){var it,pt;if(null==rt&&(rt=!1),isNaN(tt)||null===tt)return nt;pt=rt?tt:st&&st.length>2?function(tt){if(null!=st){for(var et=st.length-1,nt=0;nt<et&&tt>=st[nt];)nt++;return nt-1}return 0}(tt)/(st.length-2):dt!==ft?(tt-ft)/(dt-ft):1,pt=tMapDomain(pt),rt||(pt=tMapLightness(pt)),1!==Ot&&(pt=zc(pt,Ot)),pt=at[0]+pt*(1-at[0]-at[1]),pt=Math.min(1,Math.max(0,pt));var yt=Math.floor(1e4*pt);if(Dt&&vt[yt])it=vt[yt];else{if("array"===Ac(ct))for(var Rt=0;Rt<ot.length;Rt++){var Bt=ot[Rt];if(pt<=Bt){it=ct[Rt];break}if(pt>=Bt&&Rt===ot.length-1){it=ct[Rt];break}if(pt>Bt&&pt<ot[Rt+1]){pt=(pt-Bt)/(ot[Rt+1]-Bt),it=mt.interpolate(ct[Rt],ct[Rt+1],pt,et);break}}else"function"===Ac(ct)&&(it=ct(pt));Dt&&(vt[yt]=it)}return it},resetCache=function(){return vt={}};setColors(tt);var f=function(tt){var et=mt(getColor(tt));return pt&&et[pt]?et[pt]():et};return f.classes=function(tt){if(null!=tt){if("array"===Ac(tt))st=tt,it=[tt[0],tt[tt.length-1]];else{var et=mt.analyze(it);st=0===tt?[et.min,et.max]:mt.limits(et,"e",tt)}return f}return st},f.domain=function(tt){if(!arguments.length)return it;ft=tt[0],dt=tt[tt.length-1],ot=[];var et=ct.length;if(tt.length===et&&ft!==dt)for(var nt=0,rt=Array.from(tt);nt<rt.length;nt+=1){var at=rt[nt];ot.push((at-ft)/(dt-ft))}else{for(var st=0;st<et;st++)ot.push(st/(et-1));if(tt.length>2){var pt=tt.map((function(et,nt){return nt/(tt.length-1)})),mt=tt.map((function(tt){return(tt-ft)/(dt-ft)}));mt.every((function(tt,et){return pt[et]===tt}))||(tMapDomain=function(tt){if(tt<=0||tt>=1)return tt;for(var et=0;tt>=mt[et+1];)et++;var nt=(tt-mt[et])/(mt[et+1]-mt[et]);return pt[et]+nt*(pt[et+1]-pt[et])})}}return it=[ft,dt],f},f.mode=function(tt){return arguments.length?(et=tt,resetCache(),f):et},f.range=function(tt,et){return setColors(tt),f},f.out=function(tt){return pt=tt,f},f.spread=function(tt){return arguments.length?(rt=tt,f):rt},f.correctLightness=function(tt){return null==tt&&(tt=!0),yt=tt,resetCache(),tMapLightness=yt?function(tt){for(var et=getColor(0,!0).lab()[0],nt=getColor(1,!0).lab()[0],rt=et>nt,it=getColor(tt,!0).lab()[0],ot=et+(nt-et)*tt,at=it-ot,st=0,ct=1,pt=20;Math.abs(at)>.01&&pt-- >0;)rt&&(at*=-1),at<0?(st=tt,tt+=.5*(ct-tt)):(ct=tt,tt+=.5*(st-tt)),it=getColor(tt,!0).lab()[0],at=it-ot;return tt}:function(tt){return tt},f},f.padding=function(tt){return null!=tt?("number"===Ac(tt)&&(tt=[tt,tt]),at=tt,f):at},f.colors=function(et,nt){arguments.length<2&&(nt="hex");var rt=[];if(0===arguments.length)rt=ct.slice(0);else if(1===et)rt=[f(.5)];else if(et>1){var ot=it[0],at=it[1]-ot;rt=__range__(0,et,!1).map((function(tt){return f(ot+tt/(et-1)*at)}))}else{tt=[];var pt=[];if(st&&st.length>2)for(var ft=1,dt=st.length,yt=1<=dt;yt?ft<dt:ft>dt;yt?ft++:ft--)pt.push(.5*(st[ft-1]+st[ft]));else pt=it;rt=pt.map((function(tt){return f(tt)}))}return mt[nt]&&(rt=rt.map((function(tt){return tt[nt]()}))),rt},f.cache=function(tt){return null!=tt?(Dt=tt,f):Dt},f.gamma=function(tt){return null!=tt?(Ot=tt,f):Ot},f.nodata=function(tt){return null!=tt?(nt=mt(tt),f):nt},f};function __range__(tt,et,nt){for(var rt=[],it=tt<et,ot=nt?it?et+1:et-1:et,at=tt;it?at<ot:at>ot;it?at++:at--)rt.push(at);return rt}var bezier=function(tt){var et,nt,rt,it,ot,at,st;if(2===(tt=tt.map((function(tt){return new dt(tt)}))).length)et=tt.map((function(tt){return tt.lab()})),ot=et[0],at=et[1],it=function(tt){var et=[0,1,2].map((function(et){return ot[et]+tt*(at[et]-ot[et])}));return new dt(et,"lab")};else if(3===tt.length)nt=tt.map((function(tt){return tt.lab()})),ot=nt[0],at=nt[1],st=nt[2],it=function(tt){var et=[0,1,2].map((function(et){return(1-tt)*(1-tt)*ot[et]+2*(1-tt)*tt*at[et]+tt*tt*st[et]}));return new dt(et,"lab")};else if(4===tt.length){var ct;rt=tt.map((function(tt){return tt.lab()})),ot=rt[0],at=rt[1],st=rt[2],ct=rt[3],it=function(tt){var et=[0,1,2].map((function(et){return(1-tt)*(1-tt)*(1-tt)*ot[et]+3*(1-tt)*(1-tt)*tt*at[et]+3*(1-tt)*tt*tt*st[et]+tt*tt*tt*ct[et]}));return new dt(et,"lab")}}else if(5===tt.length){var pt=bezier(tt.slice(0,3)),ft=bezier(tt.slice(2,5));it=function(tt){return tt<.5?pt(2*tt):ft(2*(tt-.5))}}return it},blend=function(tt,et,nt){if(!blend[nt])throw new Error("unknown blend mode "+nt);return blend[nt](tt,et)},blend_f=function(tt){return function(et,nt){var rt=mt(nt).rgb(),it=mt(et).rgb();return mt.rgb(tt(rt,it))}},each=function(tt){return function(et,nt){var rt=[];return rt[0]=tt(et[0],nt[0]),rt[1]=tt(et[1],nt[1]),rt[2]=tt(et[2],nt[2]),rt}};blend.normal=blend_f(each((function(tt){return tt}))),blend.multiply=blend_f(each((function(tt,et){return tt*et/255}))),blend.screen=blend_f(each((function(tt,et){return 255*(1-(1-tt/255)*(1-et/255))}))),blend.overlay=blend_f(each((function(tt,et){return et<128?2*tt*et/255:255*(1-2*(1-tt/255)*(1-et/255))}))),blend.darken=blend_f(each((function(tt,et){return tt>et?et:tt}))),blend.lighten=blend_f(each((function(tt,et){return tt>et?tt:et}))),blend.dodge=blend_f(each((function(tt,et){return 255===tt||(tt=et/255*255/(1-tt/255))>255?255:tt}))),blend.burn=blend_f(each((function(tt,et){return 255*(1-(1-et/255)/(tt/255))})));for(var Dc=blend,Bc=ot.type,Fc=ot.clip_rgb,Zc=ot.TWOPI,Hc=Math.pow,Wc=Math.sin,Gc=Math.cos,Xc=Math.floor,$c=Math.random,Yc=Math.log,rp=Math.pow,ip=Math.floor,op=Math.abs,analyze=function(tt,et){void 0===et&&(et=null);var nt={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===type(tt)&&(tt=Object.values(tt)),tt.forEach((function(tt){et&&"object"===type(tt)&&(tt=tt[et]),null==tt||isNaN(tt)||(nt.values.push(tt),nt.sum+=tt,tt<nt.min&&(nt.min=tt),tt>nt.max&&(nt.max=tt),nt.count+=1)})),nt.domain=[nt.min,nt.max],nt.limits=function(tt,et){return limits(nt,tt,et)},nt},limits=function(tt,et,nt){void 0===et&&(et="equal"),void 0===nt&&(nt=7),"array"==type(tt)&&(tt=analyze(tt));var rt=tt.min,it=tt.max,ot=tt.values.sort((function(tt,et){return tt-et}));if(1===nt)return[rt,it];var at=[];if("c"===et.substr(0,1)&&(at.push(rt),at.push(it)),"e"===et.substr(0,1)){at.push(rt);for(var st=1;st<nt;st++)at.push(rt+st/nt*(it-rt));at.push(it)}else if("l"===et.substr(0,1)){if(rt<=0)throw new Error("Logarithmic scales are only possible for values > 0");var ct=Math.LOG10E*Yc(rt),pt=Math.LOG10E*Yc(it);at.push(rt);for(var ft=1;ft<nt;ft++)at.push(rp(10,ct+ft/nt*(pt-ct)));at.push(it)}else if("q"===et.substr(0,1)){at.push(rt);for(var dt=1;dt<nt;dt++){var mt=(ot.length-1)*dt/nt,yt=ip(mt);if(yt===mt)at.push(ot[yt]);else{var vt=mt-yt;at.push(ot[yt]*(1-vt)+ot[yt+1]*vt)}}at.push(it)}else if("k"===et.substr(0,1)){var Dt,Ot=ot.length,Rt=new Array(Ot),Bt=new Array(nt),Ne=!0,rn=0,vn=null;(vn=[]).push(rt);for(var bn=1;bn<nt;bn++)vn.push(rt+bn/nt*(it-rt));for(vn.push(it);Ne;){for(var Tn=0;Tn<nt;Tn++)Bt[Tn]=0;for(var Cn=0;Cn<Ot;Cn++)for(var Ln=ot[Cn],In=Number.MAX_VALUE,Mn=void 0,zn=0;zn<nt;zn++){var Bn=op(vn[zn]-Ln);Bn<In&&(In=Bn,Mn=zn),Bt[Mn]++,Rt[Cn]=Mn}for(var Fn=new Array(nt),Nn=0;Nn<nt;Nn++)Fn[Nn]=null;for(var Vn=0;Vn<Ot;Vn++)null===Fn[Dt=Rt[Vn]]?Fn[Dt]=ot[Vn]:Fn[Dt]+=ot[Vn];for(var Wn=0;Wn<nt;Wn++)Fn[Wn]*=1/Bt[Wn];Ne=!1;for(var $n=0;$n<nt;$n++)if(Fn[$n]!==vn[$n]){Ne=!0;break}vn=Fn,++rn>200&&(Ne=!1)}for(var Yn={},er=0;er<nt;er++)Yn[er]=[];for(var rr=0;rr<Ot;rr++)Yn[Dt=Rt[rr]].push(ot[rr]);for(var vr=[],wr=0;wr<nt;wr++)vr.push(Yn[wr][0]),vr.push(Yn[wr][Yn[wr].length-1]);vr=vr.sort((function(tt,et){return tt-et})),at.push(vr[0]);for(var Sr=1;Sr<vr.length;Sr+=2){var ii=vr[Sr];isNaN(ii)||-1!==at.indexOf(ii)||at.push(ii)}}return at},ap={analyze:analyze,limits:limits},sp=Math.sqrt,up=Math.atan2,lp=Math.abs,cp=Math.cos,pp=Math.PI,hp={cool:function cool(){return scale([mt.hsl(180,1,.9),mt.hsl(250,.7,.4)])},hot:function hot(){return scale(["#000","#f00","#ff0","#fff"]).mode("rgb")}},fp={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},dp=0,mp=Object.keys(fp);dp<mp.length;dp+=1){var gp=mp[dp];fp[gp.toLowerCase()]=fp[gp]}var yp=fp;return mt.average=function(tt,et,nt){void 0===et&&(et="lrgb"),void 0===nt&&(nt=null);var rt=tt.length;nt||(nt=Array.from(new Array(rt)).map((function(){return 1})));var it=rt/nt.reduce((function(tt,et){return tt+et}));if(nt.forEach((function(tt,et){nt[et]*=it})),tt=tt.map((function(tt){return new dt(tt)})),"lrgb"===et)return _average_lrgb(tt,nt);for(var ot=tt.shift(),at=ot.get(et),st=[],ct=0,pt=0,ft=0;ft<at.length;ft++)if(at[ft]=(at[ft]||0)*nt[0],st.push(isNaN(at[ft])?0:nt[0]),"h"===et.charAt(ft)&&!isNaN(at[ft])){var mt=at[ft]/180*Ec;ct+=Cc(mt)*nt[0],pt+=kc(mt)*nt[0]}var yt=ot.alpha()*nt[0];tt.forEach((function(tt,rt){var it=tt.get(et);yt+=tt.alpha()*nt[rt+1];for(var ot=0;ot<at.length;ot++)if(!isNaN(it[ot]))if(st[ot]+=nt[rt+1],"h"===et.charAt(ot)){var ft=it[ot]/180*Ec;ct+=Cc(ft)*nt[rt+1],pt+=kc(ft)*nt[rt+1]}else at[ot]+=it[ot]*nt[rt+1]}));for(var vt=0;vt<at.length;vt++)if("h"===et.charAt(vt)){for(var Dt=Ic(pt/st[vt],ct/st[vt])/Ec*180;Dt<0;)Dt+=360;for(;Dt>=360;)Dt-=360;at[vt]=Dt}else at[vt]=at[vt]/st[vt];return yt/=rt,new dt(at,et).alpha(yt>.99999?1:yt,!0)},mt.bezier=function(tt){var et=bezier(tt);return et.scale=function(){return scale(et)},et},mt.blend=Dc,mt.cubehelix=function(tt,et,nt,rt,it){void 0===tt&&(tt=300),void 0===et&&(et=-1.5),void 0===nt&&(nt=1),void 0===rt&&(rt=1),void 0===it&&(it=[0,1]);var ot,at=0;"array"===Bc(it)?ot=it[1]-it[0]:(ot=0,it=[it,it]);var f=function(st){var ct=Zc*((tt+120)/360+et*st),pt=Hc(it[0]+ot*st,rt),ft=(0!==at?nt[0]+st*at:nt)*pt*(1-pt)/2,dt=Gc(ct),yt=Wc(ct);return mt(Fc([255*(pt+ft*(-.14861*dt+1.78277*yt)),255*(pt+ft*(-.29227*dt-.90649*yt)),255*(pt+ft*(1.97294*dt)),1]))};return f.start=function(et){return null==et?tt:(tt=et,f)},f.rotations=function(tt){return null==tt?et:(et=tt,f)},f.gamma=function(tt){return null==tt?rt:(rt=tt,f)},f.hue=function(tt){return null==tt?nt:("array"===Bc(nt=tt)?0==(at=nt[1]-nt[0])&&(nt=nt[1]):at=0,f)},f.lightness=function(tt){return null==tt?it:("array"===Bc(tt)?(it=tt,ot=tt[1]-tt[0]):(it=[tt,tt],ot=0),f)},f.scale=function(){return mt.scale(f)},f.hue(nt),f},mt.mix=mt.interpolate=mix,mt.random=function(){for(var tt="#",et=0;et<6;et++)tt+="0123456789abcdef".charAt(Xc(16*$c()));return new dt(tt,"hex")},mt.scale=scale,mt.analyze=ap.analyze,mt.contrast=function(tt,et){tt=new dt(tt),et=new dt(et);var nt=tt.luminance(),rt=et.luminance();return nt>rt?(nt+.05)/(rt+.05):(rt+.05)/(nt+.05)},mt.deltaE=function(tt,et,nt,rt){void 0===nt&&(nt=1),void 0===rt&&(rt=1),tt=new dt(tt),et=new dt(et);for(var it=Array.from(tt.lab()),ot=it[0],at=it[1],st=it[2],ct=Array.from(et.lab()),pt=ct[0],ft=ct[1],mt=ct[2],yt=sp(at*at+st*st),vt=sp(ft*ft+mt*mt),Dt=ot<16?.511:.040975*ot/(1+.01765*ot),Ot=.0638*yt/(1+.0131*yt)+.638,Rt=yt<1e-6?0:180*up(st,at)/pp;Rt<0;)Rt+=360;for(;Rt>=360;)Rt-=360;var Bt=Rt>=164&&Rt<=345?.56+lp(.2*cp(pp*(Rt+168)/180)):.36+lp(.4*cp(pp*(Rt+35)/180)),Ne=yt*yt*yt*yt,rn=sp(Ne/(Ne+1900)),vn=Ot*(rn*Bt+1-rn),bn=yt-vt,Tn=at-ft,Cn=st-mt,Ln=(ot-pt)/(nt*Dt),In=bn/(rt*Ot);return sp(Ln*Ln+In*In+(Tn*Tn+Cn*Cn-bn*bn)/(vn*vn))},mt.distance=function(tt,et,nt){void 0===nt&&(nt="lab"),tt=new dt(tt),et=new dt(et);var rt=tt.get(nt),it=et.get(nt),ot=0;for(var at in rt){var st=(rt[at]||0)-(it[at]||0);ot+=st*st}return Math.sqrt(ot)},mt.limits=ap.limits,mt.valid=function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];try{return new(Function.prototype.bind.apply(dt,[null].concat(tt))),!0}catch(tt){return!1}},mt.scales=hp,mt.colors=gl,mt.brewer=yp,mt}()},function(tt,et){var nt={}.toString;tt.exports=function(tt){return nt.call(tt).slice(8,-1)}},function(tt,et){tt.exports=function(tt){return"object"==typeof tt?null!==tt:"function"==typeof tt}},function(tt,et,nt){var rt=nt(15);tt.exports=!rt((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(tt,et,nt){var rt=nt(22),it=nt(43),ot=nt(62);tt.exports=rt?function(tt,et,nt){return it.f(tt,et,ot(1,nt))}:function(tt,et,nt){return tt[et]=nt,tt}},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(142);rt({target:"Set",proto:!0,real:!0,forced:it},{addAll:function addAll(){return ot.apply(this,arguments)}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(79);rt({target:"Set",proto:!0,real:!0,forced:it},{deleteAll:function deleteAll(){return ot.apply(this,arguments)}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(13),pt=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{difference:function difference(tt){var et=at(this),nt=new(ct(et,ot("Set")))(et),rt=st(nt.delete);return pt(tt,(function(tt){rt.call(nt,tt)})),nt}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(10),st=nt(17),ct=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{every:function every(tt){var et=ot(this),nt=st(et),rt=at(tt,arguments.length>1?arguments[1]:void 0,3);return!ct(nt,(function(tt){if(!rt(tt,tt,et))return ct.stop()}),void 0,!1,!0).stopped}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(10),pt=nt(13),ft=nt(17),dt=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{filter:function filter(tt){var et=at(this),nt=ft(et),rt=ct(tt,arguments.length>1?arguments[1]:void 0,3),it=new(pt(et,ot("Set"))),mt=st(it.add);return dt(nt,(function(tt){rt(tt,tt,et)&&mt.call(it,tt)}),void 0,!1,!0),it}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(10),st=nt(17),ct=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{find:function find(tt){var et=ot(this),nt=st(et),rt=at(tt,arguments.length>1?arguments[1]:void 0,3);return ct(nt,(function(tt){if(rt(tt,tt,et))return ct.stop(tt)}),void 0,!1,!0).result}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(13),pt=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{intersection:function intersection(tt){var et=at(this),nt=new(ct(et,ot("Set"))),rt=st(et.has),it=st(nt.add);return pt(tt,(function(tt){rt.call(et,tt)&&it.call(nt,tt)})),nt}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(5),st=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{isDisjointFrom:function isDisjointFrom(tt){var et=ot(this),nt=at(et.has);return!st(tt,(function(tt){if(!0===nt.call(et,tt))return st.stop()})).stopped}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(55),pt=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{isSubsetOf:function isSubsetOf(tt){var et=ct(this),nt=at(tt),rt=nt.has;return"function"!=typeof rt&&(nt=new(ot("Set"))(tt),rt=st(nt.has)),!pt(et,(function(tt){if(!1===rt.call(nt,tt))return pt.stop()}),void 0,!1,!0).stopped}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(5),st=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{isSupersetOf:function isSupersetOf(tt){var et=ot(this),nt=at(et.has);return!st(tt,(function(tt){if(!1===nt.call(et,tt))return st.stop()})).stopped}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(17),st=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{join:function join(tt){var et=ot(this),nt=at(et),rt=void 0===tt?",":String(tt),it=[];return st(nt,it.push,it,!1,!0),it.join(rt)}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(10),pt=nt(13),ft=nt(17),dt=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{map:function map(tt){var et=at(this),nt=ft(et),rt=ct(tt,arguments.length>1?arguments[1]:void 0,3),it=new(pt(et,ot("Set"))),mt=st(it.add);return dt(nt,(function(tt){mt.call(it,rt(tt,tt,et))}),void 0,!1,!0),it}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(5),st=nt(17),ct=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{reduce:function reduce(tt){var et=ot(this),nt=st(et),rt=arguments.length<2,it=rt?void 0:arguments[1];if(at(tt),ct(nt,(function(nt){rt?(rt=!1,it=nt):it=tt(it,nt,nt,et)}),void 0,!1,!0),rt)throw TypeError("Reduce of empty set with no initial value");return it}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(10),st=nt(17),ct=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{some:function some(tt){var et=ot(this),nt=st(et),rt=at(tt,arguments.length>1?arguments[1]:void 0,3);return ct(nt,(function(tt){if(rt(tt,tt,et))return ct.stop()}),void 0,!1,!0).stopped}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(13),pt=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{symmetricDifference:function symmetricDifference(tt){var et=at(this),nt=new(ct(et,ot("Set")))(et),rt=st(nt.delete),it=st(nt.add);return pt(tt,(function(tt){rt.call(nt,tt)||it.call(nt,tt)})),nt}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(13),pt=nt(4);rt({target:"Set",proto:!0,real:!0,forced:it},{union:function union(tt){var et=at(this),nt=new(ct(et,ot("Set")))(et);return pt(tt,st(nt.add),nt),nt}})},function(tt,et,nt){"use strict";var rt=function isOldIE(){var tt;return function memorize(){return void 0===tt&&(tt=Boolean(window&&document&&document.all&&!window.atob)),tt}}(),it=function getTarget(){var tt={};return function memorize(et){if(void 0===tt[et]){var nt=document.querySelector(et);if(window.HTMLIFrameElement&&nt instanceof window.HTMLIFrameElement)try{nt=nt.contentDocument.head}catch(tt){nt=null}tt[et]=nt}return tt[et]}}(),ot=[];function getIndexByIdentifier(tt){for(var et=-1,nt=0;nt<ot.length;nt++)if(ot[nt].identifier===tt){et=nt;break}return et}function modulesToDom(tt,et){for(var nt={},rt=[],it=0;it<tt.length;it++){var at=tt[it],st=et.base?at[0]+et.base:at[0],ct=nt[st]||0,pt="".concat(st," ").concat(ct);nt[st]=ct+1;var ft=getIndexByIdentifier(pt),dt={css:at[1],media:at[2],sourceMap:at[3]};-1!==ft?(ot[ft].references++,ot[ft].updater(dt)):ot.push({identifier:pt,updater:addStyle(dt,et),references:1}),rt.push(pt)}return rt}function insertStyleElement(tt){var et=document.createElement("style"),rt=tt.attributes||{};if(void 0===rt.nonce){var ot=nt.nc;ot&&(rt.nonce=ot)}if(Object.keys(rt).forEach((function(tt){et.setAttribute(tt,rt[tt])})),"function"==typeof tt.insert)tt.insert(et);else{var at=it(tt.insert||"head");if(!at)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");at.appendChild(et)}return et}var at=function replaceText(){var tt=[];return function replace(et,nt){return tt[et]=nt,tt.filter(Boolean).join("\n")}}();function applyToSingletonTag(tt,et,nt,rt){var it=nt?"":rt.media?"@media ".concat(rt.media," {").concat(rt.css,"}"):rt.css;if(tt.styleSheet)tt.styleSheet.cssText=at(et,it);else{var ot=document.createTextNode(it),st=tt.childNodes;st[et]&&tt.removeChild(st[et]),st.length?tt.insertBefore(ot,st[et]):tt.appendChild(ot)}}function applyToTag(tt,et,nt){var rt=nt.css,it=nt.media,ot=nt.sourceMap;if(it?tt.setAttribute("media",it):tt.removeAttribute("media"),ot&&btoa&&(rt+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(ot))))," */")),tt.styleSheet)tt.styleSheet.cssText=rt;else{for(;tt.firstChild;)tt.removeChild(tt.firstChild);tt.appendChild(document.createTextNode(rt))}}var st=null,ct=0;function addStyle(tt,et){var nt,rt,it;if(et.singleton){var ot=ct++;nt=st||(st=insertStyleElement(et)),rt=applyToSingletonTag.bind(null,nt,ot,!1),it=applyToSingletonTag.bind(null,nt,ot,!0)}else nt=insertStyleElement(et),rt=applyToTag.bind(null,nt,et),it=function remove(){!function removeStyleElement(tt){if(null===tt.parentNode)return!1;tt.parentNode.removeChild(tt)}(nt)};return rt(tt),function updateStyle(et){if(et){if(et.css===tt.css&&et.media===tt.media&&et.sourceMap===tt.sourceMap)return;rt(tt=et)}else it()}}tt.exports=function(tt,et){(et=et||{}).singleton||"boolean"==typeof et.singleton||(et.singleton=rt());var nt=modulesToDom(tt=tt||[],et);return function update(tt){if(tt=tt||[],"[object Array]"===Object.prototype.toString.call(tt)){for(var rt=0;rt<nt.length;rt++){var it=getIndexByIdentifier(nt[rt]);ot[it].references--}for(var at=modulesToDom(tt,et),st=0;st<nt.length;st++){var ct=getIndexByIdentifier(nt[st]);0===ot[ct].references&&(ot[ct].updater(),ot.splice(ct,1))}nt=at}}}},function(tt,et,nt){"use strict";tt.exports=function(tt){var et=[];return et.toString=function toString(){return this.map((function(et){var nt=function cssWithMappingToString(tt,et){var nt=tt[1]||"",rt=tt[3];if(!rt)return nt;if(et&&"function"==typeof btoa){var it=function toComment(tt){var et=btoa(unescape(encodeURIComponent(JSON.stringify(tt)))),nt="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(et);return"/*# ".concat(nt," */")}(rt),ot=rt.sources.map((function(tt){return"/*# sourceURL=".concat(rt.sourceRoot||"").concat(tt," */")}));return[nt].concat(ot).concat([it]).join("\n")}return[nt].join("\n")}(et,tt);return et[2]?"@media ".concat(et[2]," {").concat(nt,"}"):nt})).join("")},et.i=function(tt,nt,rt){"string"==typeof tt&&(tt=[[null,tt,""]]);var it={};if(rt)for(var ot=0;ot<this.length;ot++){var at=this[ot][0];null!=at&&(it[at]=!0)}for(var st=0;st<tt.length;st++){var ct=[].concat(tt[st]);rt&&it[ct[0]]||(nt&&(ct[2]?ct[2]="".concat(nt," and ").concat(ct[2]):ct[2]=nt),et.push(ct))}},et}},function(tt,et){tt.exports=function(tt){if(null==tt)throw TypeError("Can't call method on "+tt);return tt}},function(tt,et,nt){var rt=nt(22),it=nt(64),ot=nt(1),at=nt(63),st=Object.defineProperty;et.f=rt?st:function defineProperty(tt,et,nt){if(ot(tt),et=at(et,!0),ot(nt),it)try{return st(tt,et,nt)}catch(tt){}if("get"in nt||"set"in nt)throw TypeError("Accessors not supported");return"value"in nt&&(tt[et]=nt.value),tt}},function(tt,et,nt){var rt=nt(7),it=nt(23),ot=nt(16),at=nt(51),st=nt(52),ct=nt(67),pt=ct.get,ft=ct.enforce,dt=String(String).split("String");(tt.exports=function(tt,et,nt,st){var ct=!!st&&!!st.unsafe,pt=!!st&&!!st.enumerable,mt=!!st&&!!st.noTargetGet;"function"==typeof nt&&("string"!=typeof et||ot(nt,"name")||it(nt,"name",et),ft(nt).source=dt.join("string"==typeof et?et:"")),tt!==rt?(ct?!mt&&tt[et]&&(pt=!0):delete tt[et],pt?tt[et]=nt:it(tt,et,nt)):pt?tt[et]=nt:at(et,nt)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&pt(this).source||st(this)}))},function(tt,et){var nt=Math.ceil,rt=Math.floor;tt.exports=function(tt){return isNaN(tt=+tt)?0:(tt>0?rt:nt)(tt)}},function(tt,et,nt){tt.exports=function(){"use strict";var tt,et,nt;function define(rt,it){if(tt)if(et){var ot="var sharedChunk = {}; ("+tt+")(sharedChunk); ("+et+")(sharedChunk);",at={};tt(at),nt=it(at),"undefined"!=typeof window&&(nt.workerUrl=window.URL.createObjectURL(new Blob([ot],{type:"text/javascript"})))}else et=it;else tt=it}return define(0,(function(tt){function e(tt,et){return tt(et={exports:{}},et.exports),et.exports}var et=n;function n(tt,et,nt,rt){this.cx=3*tt,this.bx=3*(nt-tt)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*et,this.by=3*(rt-et)-this.cy,this.ay=1-this.cy-this.by,this.p1x=tt,this.p1y=rt,this.p2x=nt,this.p2y=rt}n.prototype.sampleCurveX=function(tt){return((this.ax*tt+this.bx)*tt+this.cx)*tt},n.prototype.sampleCurveY=function(tt){return((this.ay*tt+this.by)*tt+this.cy)*tt},n.prototype.sampleCurveDerivativeX=function(tt){return(3*this.ax*tt+2*this.bx)*tt+this.cx},n.prototype.solveCurveX=function(tt,et){var nt,rt,it,ot,at;for(void 0===et&&(et=1e-6),it=tt,at=0;at<8;at++){if(ot=this.sampleCurveX(it)-tt,Math.abs(ot)<et)return it;var st=this.sampleCurveDerivativeX(it);if(Math.abs(st)<1e-6)break;it-=ot/st}if((it=tt)<(nt=0))return nt;if(it>(rt=1))return rt;for(;nt<rt;){if(ot=this.sampleCurveX(it),Math.abs(ot-tt)<et)return it;tt>ot?nt=it:rt=it,it=.5*(rt-nt)+nt}return it},n.prototype.solve=function(tt,et){return this.sampleCurveY(this.solveCurveX(tt,et))};var nt=a;function a(tt,et){this.x=tt,this.y=et}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(tt){return this.clone()._add(tt)},sub:function(tt){return this.clone()._sub(tt)},multByPoint:function(tt){return this.clone()._multByPoint(tt)},divByPoint:function(tt){return this.clone()._divByPoint(tt)},mult:function(tt){return this.clone()._mult(tt)},div:function(tt){return this.clone()._div(tt)},rotate:function(tt){return this.clone()._rotate(tt)},rotateAround:function(tt,et){return this.clone()._rotateAround(tt,et)},matMult:function(tt){return this.clone()._matMult(tt)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(tt){return this.x===tt.x&&this.y===tt.y},dist:function(tt){return Math.sqrt(this.distSqr(tt))},distSqr:function(tt){var et=tt.x-this.x,nt=tt.y-this.y;return et*et+nt*nt},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(tt){return Math.atan2(this.y-tt.y,this.x-tt.x)},angleWith:function(tt){return this.angleWithSep(tt.x,tt.y)},angleWithSep:function(tt,et){return Math.atan2(this.x*et-this.y*tt,this.x*tt+this.y*et)},_matMult:function(tt){var et=tt[2]*this.x+tt[3]*this.y;return this.x=tt[0]*this.x+tt[1]*this.y,this.y=et,this},_add:function(tt){return this.x+=tt.x,this.y+=tt.y,this},_sub:function(tt){return this.x-=tt.x,this.y-=tt.y,this},_mult:function(tt){return this.x*=tt,this.y*=tt,this},_div:function(tt){return this.x/=tt,this.y/=tt,this},_multByPoint:function(tt){return this.x*=tt.x,this.y*=tt.y,this},_divByPoint:function(tt){return this.x/=tt.x,this.y/=tt.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var tt=this.y;return this.y=this.x,this.x=-tt,this},_rotate:function(tt){var et=Math.cos(tt),nt=Math.sin(tt),rt=nt*this.x+et*this.y;return this.x=et*this.x-nt*this.y,this.y=rt,this},_rotateAround:function(tt,et){var nt=Math.cos(tt),rt=Math.sin(tt),it=et.y+rt*(this.x-et.x)+nt*(this.y-et.y);return this.x=et.x+nt*(this.x-et.x)-rt*(this.y-et.y),this.y=it,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(tt){return tt instanceof a?tt:Array.isArray(tt)?new a(tt[0],tt[1]):tt};var rt="undefined"!=typeof self?self:{};function s(tt,nt,rt,it){var ot=new et(tt,nt,rt,it);return function(tt){return ot.solve(tt)}}var it=s(.25,.1,.25,1);function l(tt,et,nt){return Math.min(nt,Math.max(et,tt))}function p(tt,et,nt){var rt=nt-et,it=((tt-et)%rt+rt)%rt+et;return it===et?nt:it}function c(tt){for(var et=[],nt=arguments.length-1;nt-- >0;)et[nt]=arguments[nt+1];for(var rt=0,it=et;rt<it.length;rt+=1){var ot=it[rt];for(var at in ot)tt[at]=ot[at]}return tt}var ot=1;function f(){return ot++}function y(){return function t(tt){return tt?(tt^16*Math.random()>>tt/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function d(tt){return!!tt&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(tt)}function m(tt,et){tt.forEach((function(tt){et[tt]&&(et[tt]=et[tt].bind(et))}))}function v(tt,et){return-1!==tt.indexOf(et,tt.length-et.length)}function g(tt,et,nt){var rt={};for(var it in tt)rt[it]=et.call(nt||this,tt[it],it,tt);return rt}function x(tt,et,nt){var rt={};for(var it in tt)et.call(nt||this,tt[it],it,tt)&&(rt[it]=tt[it]);return rt}function b(tt){return Array.isArray(tt)?tt.map(b):"object"==typeof tt&&tt?g(tt,b):tt}var at={};function _(tt){at[tt]||("undefined"!=typeof console&&console.warn(tt),at[tt]=!0)}function A(tt,et,nt){return(nt.y-tt.y)*(et.x-tt.x)>(et.y-tt.y)*(nt.x-tt.x)}function S(tt){for(var et=0,nt=0,rt=tt.length,it=rt-1,ot=void 0,at=void 0;nt<rt;it=nt++)et+=((at=tt[it]).x-(ot=tt[nt]).x)*(ot.y+at.y);return et}function k(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(tt){var et={};if(tt.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(tt,nt,rt,it){var ot=rt||it;return et[nt]=!ot||ot.toLowerCase(),""})),et["max-age"]){var nt=parseInt(et["max-age"],10);isNaN(nt)?delete et["max-age"]:et["max-age"]=nt}return et}var st=null;function C(tt){if(null==st){var et=tt.navigator?tt.navigator.userAgent:null;st=!!tt.safari||!(!et||!(/\b(iPad|iPhone|iPod)\b/.test(et)||et.match("Safari")&&!et.match("Chrome")))}return st}function M(tt){try{var et=rt[tt];return et.setItem("_mapbox_test_",1),et.removeItem("_mapbox_test_"),!0}catch(tt){return!1}}var ct,pt,ft,dt,mt=rt.performance&&rt.performance.now?rt.performance.now.bind(rt.performance):Date.now.bind(Date),yt=rt.requestAnimationFrame||rt.mozRequestAnimationFrame||rt.webkitRequestAnimationFrame||rt.msRequestAnimationFrame,vt=rt.cancelAnimationFrame||rt.mozCancelAnimationFrame||rt.webkitCancelAnimationFrame||rt.msCancelAnimationFrame,Dt={now:mt,frame:function(tt){var et=yt(tt);return{cancel:function(){return vt(et)}}},getImageData:function(tt,et){void 0===et&&(et=0);var nt=rt.document.createElement("canvas"),it=nt.getContext("2d");if(!it)throw new Error("failed to create canvas 2d context");return nt.width=tt.width,nt.height=tt.height,it.drawImage(tt,0,0,tt.width,tt.height),it.getImageData(-et,-et,tt.width+2*et,tt.height+2*et)},resolveURL:function(tt){return ct||(ct=rt.document.createElement("a")),ct.href=tt,ct.href},hardwareConcurrency:rt.navigator&&rt.navigator.hardwareConcurrency||4,get devicePixelRatio(){return rt.devicePixelRatio},get prefersReducedMotion(){return!!rt.matchMedia&&(null==pt&&(pt=rt.matchMedia("(prefers-reduced-motion: reduce)")),pt.matches)}},Ot={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Rt={supported:!1,testSupport:function(tt){!Bt&&dt&&(Ne?q(tt):ft=tt)}},Bt=!1,Ne=!1;function q(tt){var et=tt.createTexture();tt.bindTexture(tt.TEXTURE_2D,et);try{if(tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,tt.RGBA,tt.UNSIGNED_BYTE,dt),tt.isContextLost())return;Rt.supported=!0}catch(tt){}tt.deleteTexture(et),Bt=!0}rt.document&&((dt=rt.document.createElement("img")).onload=function(){ft&&q(ft),ft=null,Ne=!0},dt.onerror=function(){Bt=!0,ft=null},dt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var rn="01",K=function(tt,et){this._transformRequestFn=tt,this._customAccessToken=et,this._createSkuToken()};function G(tt){return 0===tt.indexOf("mapbox:")}K.prototype._createSkuToken=function(){var tt=function(){for(var tt="",et=0;et<10;et++)tt+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",rn,tt].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=tt.token,this._skuTokenExpiresAt=tt.tokenExpiresAt},K.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},K.prototype.transformRequest=function(tt,et){return this._transformRequestFn&&this._transformRequestFn(tt,et)||{url:tt}},K.prototype.normalizeStyleURL=function(tt,et){if(!G(tt))return tt;var nt=H(tt);return nt.path="/styles/v1"+nt.path,this._makeAPIURL(nt,this._customAccessToken||et)},K.prototype.normalizeGlyphsURL=function(tt,et){if(!G(tt))return tt;var nt=H(tt);return nt.path="/fonts/v1"+nt.path,this._makeAPIURL(nt,this._customAccessToken||et)},K.prototype.normalizeSourceURL=function(tt,et){if(!G(tt))return tt;var nt=H(tt);return nt.path="/v4/"+nt.authority+".json",nt.params.push("secure"),this._makeAPIURL(nt,this._customAccessToken||et)},K.prototype.normalizeSpriteURL=function(tt,et,nt,rt){var it=H(tt);return G(tt)?(it.path="/styles/v1"+it.path+"/sprite"+et+nt,this._makeAPIURL(it,this._customAccessToken||rt)):(it.path+=""+et+nt,Y(it))},K.prototype.normalizeTileURL=function(tt,et){if(this._isSkuTokenExpired()&&this._createSkuToken(),tt&&!G(tt))return tt;var nt=H(tt);nt.path=nt.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Dt.devicePixelRatio>=2||512===et?"@2x":"")+(Rt.supported?".webp":"$1")),nt.path=nt.path.replace(/^.+\/v4\//,"/"),nt.path="/v4"+nt.path;var rt=this._customAccessToken||function(tt){for(var et=0,nt=tt;et<nt.length;et+=1){var rt=nt[et].match(/^access_token=(.*)$/);if(rt)return rt[1]}return null}(nt.params)||Ot.ACCESS_TOKEN;return Ot.REQUIRE_ACCESS_TOKEN&&rt&&this._skuToken&&nt.params.push("sku="+this._skuToken),this._makeAPIURL(nt,rt)},K.prototype.canonicalizeTileURL=function(tt,et){var nt=H(tt);if(!nt.path.match(/(^\/v4\/)/)||!nt.path.match(/\.[\w]+$/))return tt;var rt="mapbox://tiles/";rt+=nt.path.replace("/v4/","");var it=nt.params;return et&&(it=it.filter((function(tt){return!tt.match(/^access_token=/)}))),it.length&&(rt+="?"+it.join("&")),rt},K.prototype.canonicalizeTileset=function(tt,et){for(var nt=!!et&&G(et),rt=[],it=0,ot=tt.tiles||[];it<ot.length;it+=1){var at=ot[it];X(at)?rt.push(this.canonicalizeTileURL(at,nt)):rt.push(at)}return rt},K.prototype._makeAPIURL=function(tt,et){var nt="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",rt=H(Ot.API_URL);if(tt.protocol=rt.protocol,tt.authority=rt.authority,"/"!==rt.path&&(tt.path=""+rt.path+tt.path),!Ot.REQUIRE_ACCESS_TOKEN)return Y(tt);if(!(et=et||Ot.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+nt);if("s"===et[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+nt);return tt.params=tt.params.filter((function(tt){return-1===tt.indexOf("access_token")})),tt.params.push("access_token="+et),Y(tt)};var vn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function X(tt){return vn.test(tt)}var bn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function H(tt){var et=tt.match(bn);if(!et)throw new Error("Unable to parse URL object");return{protocol:et[1],authority:et[2],path:et[3]||"/",params:et[4]?et[4].split("&"):[]}}function Y(tt){var et=tt.params.length?"?"+tt.params.join("&"):"";return tt.protocol+"://"+tt.authority+tt.path+et}function $(tt){if(!tt)return null;var et=tt.split(".");if(!et||3!==et.length)return null;try{return JSON.parse(decodeURIComponent(rt.atob(et[1]).split("").map((function(tt){return"%"+("00"+tt.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(tt){return null}}var W=function(tt){this.type=tt,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};W.prototype.getStorageKey=function(tt){var et,nt=$(Ot.ACCESS_TOKEN);return et=nt&&nt.u?rt.btoa(encodeURIComponent(nt.u).replace(/%([0-9A-F]{2})/g,(function(tt,et){return String.fromCharCode(Number("0x"+et))}))):Ot.ACCESS_TOKEN||"",tt?"mapbox.eventData."+tt+":"+et:"mapbox.eventData:"+et},W.prototype.fetchEventData=function(){var tt=M("localStorage"),et=this.getStorageKey(),nt=this.getStorageKey("uuid");if(tt)try{var it=rt.localStorage.getItem(et);it&&(this.eventData=JSON.parse(it));var ot=rt.localStorage.getItem(nt);ot&&(this.anonId=ot)}catch(tt){_("Unable to read from LocalStorage")}},W.prototype.saveEventData=function(){var tt=M("localStorage"),et=this.getStorageKey(),nt=this.getStorageKey("uuid");if(tt)try{rt.localStorage.setItem(nt,this.anonId),Object.keys(this.eventData).length>=1&&rt.localStorage.setItem(et,JSON.stringify(this.eventData))}catch(tt){_("Unable to write to LocalStorage")}},W.prototype.processRequests=function(tt){},W.prototype.postEvent=function(tt,et,nt,rt){var it=this;if(Ot.EVENTS_URL){var ot=H(Ot.EVENTS_URL);ot.params.push("access_token="+(rt||Ot.ACCESS_TOKEN||""));var at={event:this.type,created:new Date(tt).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.11.0",skuId:rn,userId:this.anonId},st=et?c(at,et):at,ct={url:Y(ot),headers:{"Content-Type":"text/plain"},body:JSON.stringify([st])};this.pendingRequest=bt(ct,(function(tt){it.pendingRequest=null,nt(tt),it.saveEventData(),it.processRequests(rt)}))}},W.prototype.queueRequest=function(tt,et){this.queue.push(tt),this.processRequests(et)};var Tn,Cn,Ln=function(tt){function e(){tt.call(this,"map.load"),this.success={},this.skuToken=""}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(tt,et,nt,rt){this.skuToken=nt,(Ot.EVENTS_URL&&rt||Ot.ACCESS_TOKEN&&Array.isArray(tt)&&tt.some((function(tt){return G(tt)||X(tt)})))&&this.queueRequest({id:et,timestamp:Date.now()},rt)},e.prototype.processRequests=function(tt){var et=this;if(!this.pendingRequest&&0!==this.queue.length){var nt=this.queue.shift(),rt=nt.id,it=nt.timestamp;rt&&this.success[rt]||(this.anonId||this.fetchEventData(),d(this.anonId)||(this.anonId=y()),this.postEvent(it,{skuToken:this.skuToken},(function(tt){tt||rt&&(et.success[rt]=!0)}),tt))}},e}(W),In=new(function(tt){function e(et){tt.call(this,"appUserTurnstile"),this._customAccessToken=et}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(tt,et){Ot.EVENTS_URL&&Ot.ACCESS_TOKEN&&Array.isArray(tt)&&tt.some((function(tt){return G(tt)||X(tt)}))&&this.queueRequest(Date.now(),et)},e.prototype.processRequests=function(tt){var et=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var nt=$(Ot.ACCESS_TOKEN),rt=nt?nt.u:Ot.ACCESS_TOKEN,it=rt!==this.eventData.tokenU;d(this.anonId)||(this.anonId=y(),it=!0);var ot=this.queue.shift();if(this.eventData.lastSuccess){var at=new Date(this.eventData.lastSuccess),st=new Date(ot),ct=(ot-this.eventData.lastSuccess)/864e5;it=it||ct>=1||ct<-1||at.getDate()!==st.getDate()}else it=!0;if(!it)return this.processRequests();this.postEvent(ot,{"enabled.telemetry":!1},(function(tt){tt||(et.eventData.lastSuccess=ot,et.eventData.tokenU=rt)}),tt)}},e}(W)),Mn=In.postTurnstileEvent.bind(In),zn=new Ln,Bn=zn.postMapLoadEvent.bind(zn),Fn=500,Nn=50;function ut(){rt.caches&&!Tn&&(Tn=rt.caches.open("mapbox-tiles"))}function lt(tt){var et=tt.indexOf("?");return et<0?tt:tt.slice(0,et)}var Vn,Wn=1/0;function ht(){return null==Vn&&(Vn=rt.OffscreenCanvas&&new rt.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof rt.createImageBitmap),Vn}var $n={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze($n);var Yn,er,rr=function(tt){function e(et,nt,rt){401===nt&&X(rt)&&(et+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),tt.call(this,et),this.status=nt,this.url=rt,this.name=this.constructor.name,this.message=et}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),vr=k()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===rt.location.protocol?rt.parent:rt).location.href},gt=function(tt,et){if(!(/^file:/.test(nt=tt.url)||/^file:/.test(vr())&&!/^\w+:/.test(nt))){if(rt.fetch&&rt.Request&&rt.AbortController&&rt.Request.prototype.hasOwnProperty("signal"))return function(tt,et){var nt,it=new rt.AbortController,ot=new rt.Request(tt.url,{method:tt.method||"GET",body:tt.body,credentials:tt.credentials,headers:tt.headers,referrer:vr(),signal:it.signal}),at=!1,st=!1,ct=(nt=ot.url).indexOf("sku=")>0&&X(nt);"json"===tt.type&&ot.headers.set("Accept","application/json");var l=function(nt,it,at){if(!st){if(nt&&"SecurityError"!==nt.message&&_(nt),it&&at)return p(it);var pt=Date.now();rt.fetch(ot).then((function(nt){if(nt.ok){var rt=ct?nt.clone():null;return p(nt,rt,pt)}return et(new rr(nt.statusText,nt.status,tt.url))})).catch((function(tt){20!==tt.code&&et(new Error(tt.message))}))}},p=function(nt,it,ct){("arrayBuffer"===tt.type?nt.arrayBuffer():"json"===tt.type?nt.json():nt.text()).then((function(tt){st||(it&&ct&&function(tt,et,nt){if(ut(),Tn){var it={status:et.status,statusText:et.statusText,headers:new rt.Headers};et.headers.forEach((function(tt,et){return it.headers.set(et,tt)}));var ot=I(et.headers.get("Cache-Control")||"");ot["no-store"]||(ot["max-age"]&&it.headers.set("Expires",new Date(nt+1e3*ot["max-age"]).toUTCString()),new Date(it.headers.get("Expires")).getTime()-nt<42e4||function(tt,et){if(void 0===Cn)try{new Response(new ReadableStream),Cn=!0}catch(tt){Cn=!1}Cn?et(tt.body):tt.blob().then(et)}(et,(function(et){var nt=new rt.Response(et,it);ut(),Tn&&Tn.then((function(et){return et.put(lt(tt.url),nt)})).catch((function(tt){return _(tt.message)}))})))}}(ot,it,ct),at=!0,et(null,tt,nt.headers.get("Cache-Control"),nt.headers.get("Expires")))})).catch((function(tt){st||et(new Error(tt.message))}))};return ct?function(tt,et){if(ut(),!Tn)return et(null);var nt=lt(tt.url);Tn.then((function(tt){tt.match(nt).then((function(rt){var it=function(tt){if(!tt)return!1;var et=new Date(tt.headers.get("Expires")||0),nt=I(tt.headers.get("Cache-Control")||"");return et>Date.now()&&!nt["no-cache"]}(rt);tt.delete(nt),it&&tt.put(nt,rt.clone()),et(null,rt,it)})).catch(et)})).catch(et)}(ot,l):l(null,null),{cancel:function(){st=!0,at||it.abort()}}}(tt,et);if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",tt,et,void 0,!0)}var nt;return function(tt,et){var nt=new rt.XMLHttpRequest;for(var it in nt.open(tt.method||"GET",tt.url,!0),"arrayBuffer"===tt.type&&(nt.responseType="arraybuffer"),tt.headers)nt.setRequestHeader(it,tt.headers[it]);return"json"===tt.type&&(nt.responseType="text",nt.setRequestHeader("Accept","application/json")),nt.withCredentials="include"===tt.credentials,nt.onerror=function(){et(new Error(nt.statusText))},nt.onload=function(){if((nt.status>=200&&nt.status<300||0===nt.status)&&null!==nt.response){var rt=nt.response;if("json"===tt.type)try{rt=JSON.parse(nt.response)}catch(tt){return et(tt)}et(null,rt,nt.getResponseHeader("Cache-Control"),nt.getResponseHeader("Expires"))}else et(new rr(nt.statusText,nt.status,tt.url))},nt.send(tt.body),{cancel:function(){return nt.abort()}}}(tt,et)},xt=function(tt,et){return gt(c(tt,{type:"arrayBuffer"}),et)},bt=function(tt,et){return gt(c(tt,{method:"POST"}),et)};Yn=[],er=0;var wt=function(tt,et){if(Rt.supported&&(tt.headers||(tt.headers={}),tt.headers.accept="image/webp,*/*"),er>=Ot.MAX_PARALLEL_IMAGE_REQUESTS){var nt={requestParameters:tt,callback:et,cancelled:!1,cancel:function(){this.cancelled=!0}};return Yn.push(nt),nt}er++;var it=!1,i=function(){if(!it)for(it=!0,er--;Yn.length&&er<Ot.MAX_PARALLEL_IMAGE_REQUESTS;){var tt=Yn.shift();tt.cancelled||(tt.cancel=wt(tt.requestParameters,tt.callback).cancel)}},ot=xt(tt,(function(tt,nt,it,ot){i(),tt?et(tt):nt&&(ht()?function(tt,et){var nt=new rt.Blob([new Uint8Array(tt)],{type:"image/png"});rt.createImageBitmap(nt).then((function(tt){et(null,tt)})).catch((function(tt){et(new Error("Could not load image because of "+tt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(nt,et):function(tt,et,nt,it){var ot=new rt.Image,at=rt.URL;ot.onload=function(){et(null,ot),at.revokeObjectURL(ot.src)},ot.onerror=function(){return et(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var st=new rt.Blob([new Uint8Array(tt)],{type:"image/png"});ot.cacheControl=nt,ot.expires=it,ot.src=tt.byteLength?at.createObjectURL(st):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(nt,et,it,ot))}));return{cancel:function(){ot.cancel(),i()}}};function _t(tt,et,nt){nt[tt]&&-1!==nt[tt].indexOf(et)||(nt[tt]=nt[tt]||[],nt[tt].push(et))}function At(tt,et,nt){if(nt&&nt[tt]){var rt=nt[tt].indexOf(et);-1!==rt&&nt[tt].splice(rt,1)}}var St=function(tt,et){void 0===et&&(et={}),c(this,et),this.type=tt},wr=function(tt){function e(et,nt){void 0===nt&&(nt={}),tt.call(this,"error",c({error:et},nt))}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e}(St),It=function(){};It.prototype.on=function(tt,et){return this._listeners=this._listeners||{},_t(tt,et,this._listeners),this},It.prototype.off=function(tt,et){return At(tt,et,this._listeners),At(tt,et,this._oneTimeListeners),this},It.prototype.once=function(tt,et){return this._oneTimeListeners=this._oneTimeListeners||{},_t(tt,et,this._oneTimeListeners),this},It.prototype.fire=function(tt,et){"string"==typeof tt&&(tt=new St(tt,et||{}));var nt=tt.type;if(this.listens(nt)){tt.target=this;for(var rt=0,it=this._listeners&&this._listeners[nt]?this._listeners[nt].slice():[];rt<it.length;rt+=1)it[rt].call(this,tt);for(var ot=0,at=this._oneTimeListeners&&this._oneTimeListeners[nt]?this._oneTimeListeners[nt].slice():[];ot<at.length;ot+=1){var st=at[ot];At(nt,st,this._oneTimeListeners),st.call(this,tt)}var ct=this._eventedParent;ct&&(c(tt,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),ct.fire(tt))}else tt instanceof wr&&console.error(tt.error);return this},It.prototype.listens=function(tt){return this._listeners&&this._listeners[tt]&&this._listeners[tt].length>0||this._oneTimeListeners&&this._oneTimeListeners[tt]&&this._oneTimeListeners[tt].length>0||this._eventedParent&&this._eventedParent.listens(tt)},It.prototype.setEventedParent=function(tt,et){return this._eventedParent=tt,this._eventedParentData=et,this};var Sr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ct=function(tt,et,nt,rt){this.message=(tt?tt+": ":"")+nt,rt&&(this.identifier=rt),null!=et&&et.__line__&&(this.line=et.__line__)};function Mt(tt){var et=tt.value;return et?[new Ct(tt.key,et,"constants have been deprecated as of v8")]:[]}function Et(tt){for(var et=[],nt=arguments.length-1;nt-- >0;)et[nt]=arguments[nt+1];for(var rt=0,it=et;rt<it.length;rt+=1){var ot=it[rt];for(var at in ot)tt[at]=ot[at]}return tt}function Tt(tt){return tt instanceof Number||tt instanceof String||tt instanceof Boolean?tt.valueOf():tt}function Pt(tt){if(Array.isArray(tt))return tt.map(Pt);if(tt instanceof Object&&!(tt instanceof Number||tt instanceof String||tt instanceof Boolean)){var et={};for(var nt in tt)et[nt]=Pt(tt[nt]);return et}return Tt(tt)}var ii=function(tt){function e(et,nt){tt.call(this,nt),this.message=nt,this.key=et}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e}(Error),Vt=function(tt,et){void 0===et&&(et=[]),this.parent=tt,this.bindings={};for(var nt=0,rt=et;nt<rt.length;nt+=1){var it=rt[nt];this.bindings[it[0]]=it[1]}};Vt.prototype.concat=function(tt){return new Vt(this,tt)},Vt.prototype.get=function(tt){if(this.bindings[tt])return this.bindings[tt];if(this.parent)return this.parent.get(tt);throw new Error(tt+" not found in scope.")},Vt.prototype.has=function(tt){return!!this.bindings[tt]||!!this.parent&&this.parent.has(tt)};var qi={kind:"null"},uo={kind:"number"},po={kind:"string"},vo={kind:"boolean"},So={kind:"color"},ta={kind:"object"},na={kind:"value"},ia={kind:"collator"},sa={kind:"formatted"},la={kind:"resolvedImage"};function Gt(tt,et){return{kind:"array",itemType:tt,N:et}}function Zt(tt){if("array"===tt.kind){var et=Zt(tt.itemType);return"number"==typeof tt.N?"array<"+et+", "+tt.N+">":"value"===tt.itemType.kind?"array":"array<"+et+">"}return tt.kind}var pa=[qi,uo,po,vo,So,sa,ta,Gt(na),la];function Jt(tt,et){if("error"===et.kind)return null;if("array"===tt.kind){if("array"===et.kind&&(0===et.N&&"value"===et.itemType.kind||!Jt(tt.itemType,et.itemType))&&("number"!=typeof tt.N||tt.N===et.N))return null}else{if(tt.kind===et.kind)return null;if("value"===tt.kind)for(var nt=0,rt=pa;nt<rt.length;nt+=1)if(!Jt(rt[nt],et))return null}return"Expected "+Zt(tt)+" but found "+Zt(et)+" instead."}function Ht(tt,et){return et.some((function(et){return et.kind===tt.kind}))}function Yt(tt,et){return et.some((function(et){return"null"===et?null===tt:"array"===et?Array.isArray(tt):"object"===et?tt&&!Array.isArray(tt)&&"object"==typeof tt:et===typeof tt}))}var fa=e((function(tt,et){var nt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(tt){return(tt=Math.round(tt))<0?0:tt>255?255:tt}function i(tt){return n("%"===tt[tt.length-1]?parseFloat(tt)/100*255:parseInt(tt))}function a(tt){return(et="%"===tt[tt.length-1]?parseFloat(tt)/100:parseFloat(tt))<0?0:et>1?1:et;var et}function o(tt,et,nt){return nt<0?nt+=1:nt>1&&(nt-=1),6*nt<1?tt+(et-tt)*nt*6:2*nt<1?et:3*nt<2?tt+(et-tt)*(2/3-nt)*6:tt}try{et.parseCSSColor=function(tt){var et,rt=tt.replace(/ /g,"").toLowerCase();if(rt in nt)return nt[rt].slice();if("#"===rt[0])return 4===rt.length?(et=parseInt(rt.substr(1),16))>=0&&et<=4095?[(3840&et)>>4|(3840&et)>>8,240&et|(240&et)>>4,15&et|(15&et)<<4,1]:null:7===rt.length&&(et=parseInt(rt.substr(1),16))>=0&&et<=16777215?[(16711680&et)>>16,(65280&et)>>8,255&et,1]:null;var it=rt.indexOf("("),ot=rt.indexOf(")");if(-1!==it&&ot+1===rt.length){var at=rt.substr(0,it),st=rt.substr(it+1,ot-(it+1)).split(","),ct=1;switch(at){case"rgba":if(4!==st.length)return null;ct=a(st.pop());case"rgb":return 3!==st.length?null:[i(st[0]),i(st[1]),i(st[2]),ct];case"hsla":if(4!==st.length)return null;ct=a(st.pop());case"hsl":if(3!==st.length)return null;var pt=(parseFloat(st[0])%360+360)%360/360,ft=a(st[1]),dt=a(st[2]),mt=dt<=.5?dt*(ft+1):dt+ft-dt*ft,yt=2*dt-mt;return[n(255*o(yt,mt,pt+1/3)),n(255*o(yt,mt,pt)),n(255*o(yt,mt,pt-1/3)),ct];default:return null}}return null}}catch(tt){}})).parseCSSColor,Wt=function(tt,et,nt,rt){void 0===rt&&(rt=1),this.r=tt,this.g=et,this.b=nt,this.a=rt};Wt.parse=function(tt){if(tt){if(tt instanceof Wt)return tt;if("string"==typeof tt){var et=fa(tt);if(et)return new Wt(et[0]/255*et[3],et[1]/255*et[3],et[2]/255*et[3],et[3])}}},Wt.prototype.toString=function(){var tt=this.toArray(),et=tt[1],nt=tt[2],rt=tt[3];return"rgba("+Math.round(tt[0])+","+Math.round(et)+","+Math.round(nt)+","+rt+")"},Wt.prototype.toArray=function(){var tt=this.a;return 0===tt?[0,0,0,0]:[255*this.r/tt,255*this.g/tt,255*this.b/tt,tt]},Wt.black=new Wt(0,0,0,1),Wt.white=new Wt(1,1,1,1),Wt.transparent=new Wt(0,0,0,0),Wt.red=new Wt(1,0,0,1);var Qt=function(tt,et,nt){this.sensitivity=tt?et?"variant":"case":et?"accent":"base",this.locale=nt,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Qt.prototype.compare=function(tt,et){return this.collator.compare(tt,et)},Qt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var te=function(tt,et,nt,rt,it){this.text=tt,this.image=et,this.scale=nt,this.fontStack=rt,this.textColor=it},ee=function(tt){this.sections=tt};ee.fromString=function(tt){return new ee([new te(tt,null,null,null,null)])},ee.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(tt){return 0!==tt.text.length||tt.image&&0!==tt.image.name.length}))},ee.factory=function(tt){return tt instanceof ee?tt:ee.fromString(tt)},ee.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(tt){return tt.text})).join("")},ee.prototype.serialize=function(){for(var tt=["format"],et=0,nt=this.sections;et<nt.length;et+=1){var rt=nt[et];if(rt.image)tt.push(["image",rt.image.name]);else{tt.push(rt.text);var it={};rt.fontStack&&(it["text-font"]=["literal",rt.fontStack.split(",")]),rt.scale&&(it["font-scale"]=rt.scale),rt.textColor&&(it["text-color"]=["rgba"].concat(rt.textColor.toArray())),tt.push(it)}}return tt};var re=function(tt){this.name=tt.name,this.available=tt.available};function ne(tt,et,nt,rt){return"number"==typeof tt&&tt>=0&&tt<=255&&"number"==typeof et&&et>=0&&et<=255&&"number"==typeof nt&&nt>=0&&nt<=255?void 0===rt||"number"==typeof rt&&rt>=0&&rt<=1?null:"Invalid rgba value ["+[tt,et,nt,rt].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof rt?[tt,et,nt,rt]:[tt,et,nt]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ie(tt){if(null===tt)return!0;if("string"==typeof tt)return!0;if("boolean"==typeof tt)return!0;if("number"==typeof tt)return!0;if(tt instanceof Wt)return!0;if(tt instanceof Qt)return!0;if(tt instanceof ee)return!0;if(tt instanceof re)return!0;if(Array.isArray(tt)){for(var et=0,nt=tt;et<nt.length;et+=1)if(!ie(nt[et]))return!1;return!0}if("object"==typeof tt){for(var rt in tt)if(!ie(tt[rt]))return!1;return!0}return!1}function ae(tt){if(null===tt)return qi;if("string"==typeof tt)return po;if("boolean"==typeof tt)return vo;if("number"==typeof tt)return uo;if(tt instanceof Wt)return So;if(tt instanceof Qt)return ia;if(tt instanceof ee)return sa;if(tt instanceof re)return la;if(Array.isArray(tt)){for(var et,nt=tt.length,rt=0,it=tt;rt<it.length;rt+=1){var ot=ae(it[rt]);if(et){if(et===ot)continue;et=na;break}et=ot}return Gt(et||na,nt)}return ta}function oe(tt){var et=typeof tt;return null===tt?"":"string"===et||"number"===et||"boolean"===et?String(tt):tt instanceof Wt||tt instanceof ee||tt instanceof re?tt.toString():JSON.stringify(tt)}re.prototype.toString=function(){return this.name},re.fromString=function(tt){return tt?new re({name:tt,available:!1}):null},re.prototype.serialize=function(){return["image",this.name]};var se=function(tt,et){this.type=tt,this.value=et};se.parse=function(tt,et){if(2!==tt.length)return et.error("'literal' expression requires exactly one argument, but found "+(tt.length-1)+" instead.");if(!ie(tt[1]))return et.error("invalid value");var nt=tt[1],rt=ae(nt),it=et.expectedType;return"array"!==rt.kind||0!==rt.N||!it||"array"!==it.kind||"number"==typeof it.N&&0!==it.N||(rt=it),new se(rt,nt)},se.prototype.evaluate=function(){return this.value},se.prototype.eachChild=function(){},se.prototype.outputDefined=function(){return!0},se.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Wt?["rgba"].concat(this.value.toArray()):this.value instanceof ee?this.value.serialize():this.value};var ue=function(tt){this.name="ExpressionEvaluationError",this.message=tt};ue.prototype.toJSON=function(){return this.message};var ga={string:po,number:uo,boolean:vo,object:ta},pe=function(tt,et){this.type=tt,this.args=et};pe.parse=function(tt,et){if(tt.length<2)return et.error("Expected at least one argument.");var nt,rt=1,it=tt[0];if("array"===it){var ot,at;if(tt.length>2){var st=tt[1];if("string"!=typeof st||!(st in ga)||"object"===st)return et.error('The item type argument of "array" must be one of string, number, boolean',1);ot=ga[st],rt++}else ot=na;if(tt.length>3){if(null!==tt[2]&&("number"!=typeof tt[2]||tt[2]<0||tt[2]!==Math.floor(tt[2])))return et.error('The length argument to "array" must be a positive integer literal',2);at=tt[2],rt++}nt=Gt(ot,at)}else nt=ga[it];for(var ct=[];rt<tt.length;rt++){var pt=et.parse(tt[rt],rt,na);if(!pt)return null;ct.push(pt)}return new pe(nt,ct)},pe.prototype.evaluate=function(tt){for(var et=0;et<this.args.length;et++){var nt=this.args[et].evaluate(tt);if(!Jt(this.type,ae(nt)))return nt;if(et===this.args.length-1)throw new ue("Expected value to be of type "+Zt(this.type)+", but found "+Zt(ae(nt))+" instead.")}return null},pe.prototype.eachChild=function(tt){this.args.forEach(tt)},pe.prototype.outputDefined=function(){return this.args.every((function(tt){return tt.outputDefined()}))},pe.prototype.serialize=function(){var tt=this.type,et=[tt.kind];if("array"===tt.kind){var nt=tt.itemType;if("string"===nt.kind||"number"===nt.kind||"boolean"===nt.kind){et.push(nt.kind);var rt=tt.N;("number"==typeof rt||this.args.length>1)&&et.push(rt)}}return et.concat(this.args.map((function(tt){return tt.serialize()})))};var ce=function(tt){this.type=sa,this.sections=tt};ce.parse=function(tt,et){if(tt.length<2)return et.error("Expected at least one argument.");var nt=tt[1];if(!Array.isArray(nt)&&"object"==typeof nt)return et.error("First argument must be an image or text section.");for(var rt=[],it=!1,ot=1;ot<=tt.length-1;++ot){var at=tt[ot];if(it&&"object"==typeof at&&!Array.isArray(at)){it=!1;var st=null;if(at["font-scale"]&&!(st=et.parse(at["font-scale"],1,uo)))return null;var ct=null;if(at["text-font"]&&!(ct=et.parse(at["text-font"],1,Gt(po))))return null;var pt=null;if(at["text-color"]&&!(pt=et.parse(at["text-color"],1,So)))return null;var ft=rt[rt.length-1];ft.scale=st,ft.font=ct,ft.textColor=pt}else{var dt=et.parse(tt[ot],1,na);if(!dt)return null;var mt=dt.type.kind;if("string"!==mt&&"value"!==mt&&"null"!==mt&&"resolvedImage"!==mt)return et.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");it=!0,rt.push({content:dt,scale:null,font:null,textColor:null})}}return new ce(rt)},ce.prototype.evaluate=function(tt){return new ee(this.sections.map((function(et){var nt=et.content.evaluate(tt);return ae(nt)===la?new te("",nt,null,null,null):new te(oe(nt),null,et.scale?et.scale.evaluate(tt):null,et.font?et.font.evaluate(tt).join(","):null,et.textColor?et.textColor.evaluate(tt):null)})))},ce.prototype.eachChild=function(tt){for(var et=0,nt=this.sections;et<nt.length;et+=1){var rt=nt[et];tt(rt.content),rt.scale&&tt(rt.scale),rt.font&&tt(rt.font),rt.textColor&&tt(rt.textColor)}},ce.prototype.outputDefined=function(){return!1},ce.prototype.serialize=function(){for(var tt=["format"],et=0,nt=this.sections;et<nt.length;et+=1){var rt=nt[et];tt.push(rt.content.serialize());var it={};rt.scale&&(it["font-scale"]=rt.scale.serialize()),rt.font&&(it["text-font"]=rt.font.serialize()),rt.textColor&&(it["text-color"]=rt.textColor.serialize()),tt.push(it)}return tt};var he=function(tt){this.type=la,this.input=tt};he.parse=function(tt,et){if(2!==tt.length)return et.error("Expected two arguments.");var nt=et.parse(tt[1],1,po);return nt?new he(nt):et.error("No image name provided.")},he.prototype.evaluate=function(tt){var et=this.input.evaluate(tt),nt=re.fromString(et);return nt&&tt.availableImages&&(nt.available=tt.availableImages.indexOf(et)>-1),nt},he.prototype.eachChild=function(tt){tt(this.input)},he.prototype.outputDefined=function(){return!1},he.prototype.serialize=function(){return["image",this.input.serialize()]};var va={"to-boolean":vo,"to-color":So,"to-number":uo,"to-string":po},ye=function(tt,et){this.type=tt,this.args=et};ye.parse=function(tt,et){if(tt.length<2)return et.error("Expected at least one argument.");var nt=tt[0];if(("to-boolean"===nt||"to-string"===nt)&&2!==tt.length)return et.error("Expected one argument.");for(var rt=va[nt],it=[],ot=1;ot<tt.length;ot++){var at=et.parse(tt[ot],ot,na);if(!at)return null;it.push(at)}return new ye(rt,it)},ye.prototype.evaluate=function(tt){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(tt));if("color"===this.type.kind){for(var et,nt,rt=0,it=this.args;rt<it.length;rt+=1){if(nt=null,(et=it[rt].evaluate(tt))instanceof Wt)return et;if("string"==typeof et){var ot=tt.parseColor(et);if(ot)return ot}else if(Array.isArray(et)&&!(nt=et.length<3||et.length>4?"Invalid rbga value "+JSON.stringify(et)+": expected an array containing either three or four numeric values.":ne(et[0],et[1],et[2],et[3])))return new Wt(et[0]/255,et[1]/255,et[2]/255,et[3])}throw new ue(nt||"Could not parse color from value '"+("string"==typeof et?et:String(JSON.stringify(et)))+"'")}if("number"===this.type.kind){for(var at=null,st=0,ct=this.args;st<ct.length;st+=1){if(null===(at=ct[st].evaluate(tt)))return 0;var pt=Number(at);if(!isNaN(pt))return pt}throw new ue("Could not convert "+JSON.stringify(at)+" to number.")}return"formatted"===this.type.kind?ee.fromString(oe(this.args[0].evaluate(tt))):"resolvedImage"===this.type.kind?re.fromString(oe(this.args[0].evaluate(tt))):oe(this.args[0].evaluate(tt))},ye.prototype.eachChild=function(tt){this.args.forEach(tt)},ye.prototype.outputDefined=function(){return this.args.every((function(tt){return tt.outputDefined()}))},ye.prototype.serialize=function(){if("formatted"===this.type.kind)return new ce([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new he(this.args[0]).serialize();var tt=["to-"+this.type.kind];return this.eachChild((function(et){tt.push(et.serialize())})),tt};var _a=["Unknown","Point","LineString","Polygon"],me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?_a[this.feature.type]:this.feature.type:null},me.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},me.prototype.canonicalID=function(){return this.canonical},me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},me.prototype.parseColor=function(tt){var et=this._parseColorCache[tt];return et||(et=this._parseColorCache[tt]=Wt.parse(tt)),et};var ve=function(tt,et,nt,rt){this.name=tt,this.type=et,this._evaluate=nt,this.args=rt};ve.prototype.evaluate=function(tt){return this._evaluate(tt,this.args)},ve.prototype.eachChild=function(tt){this.args.forEach(tt)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){return[this.name].concat(this.args.map((function(tt){return tt.serialize()})))},ve.parse=function(tt,et){var nt,rt=tt[0],it=ve.definitions[rt];if(!it)return et.error('Unknown expression "'+rt+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ot=Array.isArray(it)?it[0]:it.type,at=Array.isArray(it)?[[it[1],it[2]]]:it.overloads,st=at.filter((function(et){var nt=et[0];return!Array.isArray(nt)||nt.length===tt.length-1})),ct=null,pt=0,ft=st;pt<ft.length;pt+=1){var dt=ft[pt],mt=dt[0],yt=dt[1];ct=new Oe(et.registry,et.path,null,et.scope);for(var vt=[],Dt=!1,Ot=1;Ot<tt.length;Ot++){var Rt=tt[Ot],Bt=Array.isArray(mt)?mt[Ot-1]:mt.type,Ne=ct.parse(Rt,1+vt.length,Bt);if(!Ne){Dt=!0;break}vt.push(Ne)}if(!Dt)if(Array.isArray(mt)&&mt.length!==vt.length)ct.error("Expected "+mt.length+" arguments, but found "+vt.length+" instead.");else{for(var rn=0;rn<vt.length;rn++){var vn=Array.isArray(mt)?mt[rn]:mt.type,bn=vt[rn];ct.concat(rn+1).checkSubtype(vn,bn.type)}if(0===ct.errors.length)return new ve(rt,ot,yt,vt)}}if(1===st.length)(nt=et.errors).push.apply(nt,ct.errors);else{for(var Tn=(st.length?st:at).map((function(tt){var et;return et=tt[0],Array.isArray(et)?"("+et.map(Zt).join(", ")+")":"("+Zt(et.type)+"...)"})).join(" | "),Cn=[],Ln=1;Ln<tt.length;Ln++){var In=et.parse(tt[Ln],1+Cn.length);if(!In)return null;Cn.push(Zt(In.type))}et.error("Expected arguments of type "+Tn+", but found ("+Cn.join(", ")+") instead.")}return null},ve.register=function(tt,et){for(var nt in ve.definitions=et,et)tt[nt]=ve};var ge=function(tt,et,nt){this.type=ia,this.locale=nt,this.caseSensitive=tt,this.diacriticSensitive=et};function xe(tt,et){tt[0]=Math.min(tt[0],et[0]),tt[1]=Math.min(tt[1],et[1]),tt[2]=Math.max(tt[2],et[0]),tt[3]=Math.max(tt[3],et[1])}function be(tt,et){return!(tt[0]<=et[0]||tt[2]>=et[2]||tt[1]<=et[1]||tt[3]>=et[3])}function we(tt,et){var nt=(180+tt[0])/360,rt=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+tt[1]*Math.PI/360)))/360,it=Math.pow(2,et.z);return[Math.round(nt*it*8192),Math.round(rt*it*8192)]}function _e(tt,et,nt){return et[1]>tt[1]!=nt[1]>tt[1]&&tt[0]<(nt[0]-et[0])*(tt[1]-et[1])/(nt[1]-et[1])+et[0]}function Ae(tt,et){for(var nt,rt,it,ot,at,st,ct,pt=!1,ft=0,dt=et.length;ft<dt;ft++)for(var mt=et[ft],yt=0,vt=mt.length;yt<vt-1;yt++){if((ot=(nt=tt)[0]-(rt=mt[yt])[0])*(ct=nt[1]-(it=mt[yt+1])[1])-(st=nt[0]-it[0])*(at=nt[1]-rt[1])==0&&ot*st<=0&&at*ct<=0)return!1;_e(tt,mt[yt],mt[yt+1])&&(pt=!pt)}return pt}function Se(tt,et){for(var nt=0;nt<et.length;nt++)if(Ae(tt,et[nt]))return!0;return!1}function ke(tt,et,nt,rt){var it=rt[0]-nt[0],ot=rt[1]-nt[1],at=(tt[0]-nt[0])*ot-it*(tt[1]-nt[1]),st=(et[0]-nt[0])*ot-it*(et[1]-nt[1]);return at>0&&st<0||at<0&&st>0}function Ie(tt,et,nt){for(var rt=0,it=nt;rt<it.length;rt+=1)for(var ot=it[rt],at=0;at<ot.length-1;++at)if(0!=(dt=[(ft=ot[at+1])[0]-(pt=ot[at])[0],ft[1]-pt[1]])[0]*(mt=[(ct=et)[0]-(st=tt)[0],ct[1]-st[1]])[1]-dt[1]*mt[0]&&ke(st,ct,pt,ft)&&ke(pt,ft,st,ct))return!0;var st,ct,pt,ft,dt,mt;return!1}function ze(tt,et){for(var nt=0;nt<tt.length;++nt)if(!Ae(tt[nt],et))return!1;for(var rt=0;rt<tt.length-1;++rt)if(Ie(tt[rt],tt[rt+1],et))return!1;return!0}function Ce(tt,et){for(var nt=0;nt<et.length;nt++)if(ze(tt,et[nt]))return!0;return!1}function Me(tt,et,nt){for(var rt=[],it=0;it<tt.length;it++){for(var ot=[],at=0;at<tt[it].length;at++){var st=we(tt[it][at],nt);xe(et,st),ot.push(st)}rt.push(ot)}return rt}function Ee(tt,et,nt){for(var rt=[],it=0;it<tt.length;it++){var ot=Me(tt[it],et,nt);rt.push(ot)}return rt}function Te(tt,et,nt,rt){if(tt[0]<nt[0]||tt[0]>nt[2]){var it=.5*rt,ot=tt[0]-nt[0]>it?-rt:nt[0]-tt[0]>it?rt:0;0===ot&&(ot=tt[0]-nt[2]>it?-rt:nt[2]-tt[0]>it?rt:0),tt[0]+=ot}xe(et,tt)}function Pe(tt,et,nt,rt){for(var it=8192*Math.pow(2,rt.z),ot=[8192*rt.x,8192*rt.y],at=[],st=0,ct=tt;st<ct.length;st+=1)for(var pt=0,ft=ct[st];pt<ft.length;pt+=1){var dt=ft[pt],mt=[dt.x+ot[0],dt.y+ot[1]];Te(mt,et,nt,it),at.push(mt)}return at}function Be(tt,et,nt,rt){for(var it,ot=8192*Math.pow(2,rt.z),at=[8192*rt.x,8192*rt.y],st=[],ct=0,pt=tt;ct<pt.length;ct+=1){for(var ft=[],dt=0,mt=pt[ct];dt<mt.length;dt+=1){var yt=mt[dt],vt=[yt.x+at[0],yt.y+at[1]];xe(et,vt),ft.push(vt)}st.push(ft)}if(et[2]-et[0]<=ot/2){(it=et)[0]=it[1]=1/0,it[2]=it[3]=-1/0;for(var Dt=0,Ot=st;Dt<Ot.length;Dt+=1)for(var Rt=0,Bt=Ot[Dt];Rt<Bt.length;Rt+=1)Te(Bt[Rt],et,nt,ot)}return st}ge.parse=function(tt,et){if(2!==tt.length)return et.error("Expected one argument.");var nt=tt[1];if("object"!=typeof nt||Array.isArray(nt))return et.error("Collator options argument must be an object.");var rt=et.parse(void 0!==nt["case-sensitive"]&&nt["case-sensitive"],1,vo);if(!rt)return null;var it=et.parse(void 0!==nt["diacritic-sensitive"]&&nt["diacritic-sensitive"],1,vo);if(!it)return null;var ot=null;return nt.locale&&!(ot=et.parse(nt.locale,1,po))?null:new ge(rt,it,ot)},ge.prototype.evaluate=function(tt){return new Qt(this.caseSensitive.evaluate(tt),this.diacriticSensitive.evaluate(tt),this.locale?this.locale.evaluate(tt):null)},ge.prototype.eachChild=function(tt){tt(this.caseSensitive),tt(this.diacriticSensitive),this.locale&&tt(this.locale)},ge.prototype.outputDefined=function(){return!1},ge.prototype.serialize=function(){var tt={};return tt["case-sensitive"]=this.caseSensitive.serialize(),tt["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(tt.locale=this.locale.serialize()),["collator",tt]};var Ve=function(tt,et){this.type=vo,this.geojson=tt,this.geometries=et};function Fe(tt){if(tt instanceof ve){if("get"===tt.name&&1===tt.args.length)return!1;if("feature-state"===tt.name)return!1;if("has"===tt.name&&1===tt.args.length)return!1;if("properties"===tt.name||"geometry-type"===tt.name||"id"===tt.name)return!1;if(/^filter-/.test(tt.name))return!1}if(tt instanceof Ve)return!1;var et=!0;return tt.eachChild((function(tt){et&&!Fe(tt)&&(et=!1)})),et}function De(tt){if(tt instanceof ve&&"feature-state"===tt.name)return!1;var et=!0;return tt.eachChild((function(tt){et&&!De(tt)&&(et=!1)})),et}function Le(tt,et){if(tt instanceof ve&&et.indexOf(tt.name)>=0)return!1;var nt=!0;return tt.eachChild((function(tt){nt&&!Le(tt,et)&&(nt=!1)})),nt}Ve.parse=function(tt,et){if(2!==tt.length)return et.error("'within' expression requires exactly one argument, but found "+(tt.length-1)+" instead.");if(ie(tt[1])){var nt=tt[1];if("FeatureCollection"===nt.type)for(var rt=0;rt<nt.features.length;++rt){var it=nt.features[rt].geometry.type;if("Polygon"===it||"MultiPolygon"===it)return new Ve(nt,nt.features[rt].geometry)}else if("Feature"===nt.type){var ot=nt.geometry.type;if("Polygon"===ot||"MultiPolygon"===ot)return new Ve(nt,nt.geometry)}else if("Polygon"===nt.type||"MultiPolygon"===nt.type)return new Ve(nt,nt)}return et.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ve.prototype.evaluate=function(tt){if(null!=tt.geometry()&&null!=tt.canonicalID()){if("Point"===tt.geometryType())return function(tt,et){var nt=[1/0,1/0,-1/0,-1/0],rt=[1/0,1/0,-1/0,-1/0],it=tt.canonicalID();if("Polygon"===et.type){var ot=Me(et.coordinates,rt,it),at=Pe(tt.geometry(),nt,rt,it);if(!be(nt,rt))return!1;for(var st=0,ct=at;st<ct.length;st+=1)if(!Ae(ct[st],ot))return!1}if("MultiPolygon"===et.type){var pt=Ee(et.coordinates,rt,it),ft=Pe(tt.geometry(),nt,rt,it);if(!be(nt,rt))return!1;for(var dt=0,mt=ft;dt<mt.length;dt+=1)if(!Se(mt[dt],pt))return!1}return!0}(tt,this.geometries);if("LineString"===tt.geometryType())return function(tt,et){var nt=[1/0,1/0,-1/0,-1/0],rt=[1/0,1/0,-1/0,-1/0],it=tt.canonicalID();if("Polygon"===et.type){var ot=Me(et.coordinates,rt,it),at=Be(tt.geometry(),nt,rt,it);if(!be(nt,rt))return!1;for(var st=0,ct=at;st<ct.length;st+=1)if(!ze(ct[st],ot))return!1}if("MultiPolygon"===et.type){var pt=Ee(et.coordinates,rt,it),ft=Be(tt.geometry(),nt,rt,it);if(!be(nt,rt))return!1;for(var dt=0,mt=ft;dt<mt.length;dt+=1)if(!Ce(mt[dt],pt))return!1}return!0}(tt,this.geometries)}return!1},Ve.prototype.eachChild=function(){},Ve.prototype.outputDefined=function(){return!0},Ve.prototype.serialize=function(){return["within",this.geojson]};var Re=function(tt,et){this.type=et.type,this.name=tt,this.boundExpression=et};Re.parse=function(tt,et){if(2!==tt.length||"string"!=typeof tt[1])return et.error("'var' expression requires exactly one string literal argument.");var nt=tt[1];return et.scope.has(nt)?new Re(nt,et.scope.get(nt)):et.error('Unknown variable "'+nt+'". Make sure "'+nt+'" has been bound in an enclosing "let" expression before using it.',1)},Re.prototype.evaluate=function(tt){return this.boundExpression.evaluate(tt)},Re.prototype.eachChild=function(){},Re.prototype.outputDefined=function(){return!1},Re.prototype.serialize=function(){return["var",this.name]};var Oe=function(tt,et,nt,rt,it){void 0===et&&(et=[]),void 0===rt&&(rt=new Vt),void 0===it&&(it=[]),this.registry=tt,this.path=et,this.key=et.map((function(tt){return"["+tt+"]"})).join(""),this.scope=rt,this.errors=it,this.expectedType=nt};function Ue(tt,et){for(var nt,rt=tt.length-1,it=0,ot=rt,at=0;it<=ot;)if((nt=tt[at=Math.floor((it+ot)/2)])<=et){if(at===rt||et<tt[at+1])return at;it=at+1}else{if(!(nt>et))throw new ue("Input is not a number.");ot=at-1}return 0}Oe.prototype.parse=function(tt,et,nt,rt,it){return void 0===it&&(it={}),et?this.concat(et,nt,rt)._parse(tt,it):this._parse(tt,it)},Oe.prototype._parse=function(tt,et){function r(tt,et,nt){return"assert"===nt?new pe(et,[tt]):"coerce"===nt?new ye(et,[tt]):tt}if(null!==tt&&"string"!=typeof tt&&"boolean"!=typeof tt&&"number"!=typeof tt||(tt=["literal",tt]),Array.isArray(tt)){if(0===tt.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var nt=tt[0];if("string"!=typeof nt)return this.error("Expression name must be a string, but found "+typeof nt+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var rt=this.registry[nt];if(rt){var it=rt.parse(tt,this);if(!it)return null;if(this.expectedType){var ot=this.expectedType,at=it.type;if("string"!==ot.kind&&"number"!==ot.kind&&"boolean"!==ot.kind&&"object"!==ot.kind&&"array"!==ot.kind||"value"!==at.kind)if("color"!==ot.kind&&"formatted"!==ot.kind&&"resolvedImage"!==ot.kind||"value"!==at.kind&&"string"!==at.kind){if(this.checkSubtype(ot,at))return null}else it=r(it,ot,et.typeAnnotation||"coerce");else it=r(it,ot,et.typeAnnotation||"assert")}if(!(it instanceof se)&&"resolvedImage"!==it.type.kind&&function t(tt){if(tt instanceof Re)return t(tt.boundExpression);if(tt instanceof ve&&"error"===tt.name)return!1;if(tt instanceof ge)return!1;if(tt instanceof Ve)return!1;var et=tt instanceof ye||tt instanceof pe,nt=!0;return tt.eachChild((function(tt){nt=et?nt&&t(tt):nt&&tt instanceof se})),!!nt&&Fe(tt)&&Le(tt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(it)){var st=new me;try{it=new se(it.type,it.evaluate(st))}catch(tt){return this.error(tt.message),null}}return it}return this.error('Unknown expression "'+nt+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===tt?"'undefined' value invalid. Use null instead.":"object"==typeof tt?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof tt+" instead.")},Oe.prototype.concat=function(tt,et,nt){var rt="number"==typeof tt?this.path.concat(tt):this.path,it=nt?this.scope.concat(nt):this.scope;return new Oe(this.registry,rt,et||null,it,this.errors)},Oe.prototype.error=function(tt){for(var et=[],nt=arguments.length-1;nt-- >0;)et[nt]=arguments[nt+1];var rt=""+this.key+et.map((function(tt){return"["+tt+"]"})).join("");this.errors.push(new ii(rt,tt))},Oe.prototype.checkSubtype=function(tt,et){var nt=Jt(tt,et);return nt&&this.error(nt),nt};var je=function(tt,et,nt){this.type=tt,this.input=et,this.labels=[],this.outputs=[];for(var rt=0,it=nt;rt<it.length;rt+=1){var ot=it[rt],at=ot[1];this.labels.push(ot[0]),this.outputs.push(at)}};function qe(tt,et,nt){return tt*(1-nt)+et*nt}je.parse=function(tt,et){if(tt.length-1<4)return et.error("Expected at least 4 arguments, but found only "+(tt.length-1)+".");if((tt.length-1)%2!=0)return et.error("Expected an even number of arguments.");var nt=et.parse(tt[1],1,uo);if(!nt)return null;var rt=[],it=null;et.expectedType&&"value"!==et.expectedType.kind&&(it=et.expectedType);for(var ot=1;ot<tt.length;ot+=2){var at=1===ot?-1/0:tt[ot],st=tt[ot+1],ct=ot,pt=ot+1;if("number"!=typeof at)return et.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(rt.length&&rt[rt.length-1][0]>=at)return et.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var ft=et.parse(st,pt,it);if(!ft)return null;it=it||ft.type,rt.push([at,ft])}return new je(it,nt,rt)},je.prototype.evaluate=function(tt){var et=this.labels,nt=this.outputs;if(1===et.length)return nt[0].evaluate(tt);var rt=this.input.evaluate(tt);if(rt<=et[0])return nt[0].evaluate(tt);var it=et.length;return rt>=et[it-1]?nt[it-1].evaluate(tt):nt[Ue(et,rt)].evaluate(tt)},je.prototype.eachChild=function(tt){tt(this.input);for(var et=0,nt=this.outputs;et<nt.length;et+=1)tt(nt[et])},je.prototype.outputDefined=function(){return this.outputs.every((function(tt){return tt.outputDefined()}))},je.prototype.serialize=function(){for(var tt=["step",this.input.serialize()],et=0;et<this.labels.length;et++)et>0&&tt.push(this.labels[et]),tt.push(this.outputs[et].serialize());return tt};var wa=Object.freeze({__proto__:null,number:qe,color:function(tt,et,nt){return new Wt(qe(tt.r,et.r,nt),qe(tt.g,et.g,nt),qe(tt.b,et.b,nt),qe(tt.a,et.a,nt))},array:function(tt,et,nt){return tt.map((function(tt,rt){return qe(tt,et[rt],nt)}))}}),Aa=6/29*3*(6/29),os=Math.PI/180,as=180/Math.PI;function Xe(tt){return tt>.008856451679035631?Math.pow(tt,1/3):tt/Aa+4/29}function Je(tt){return tt>6/29?tt*tt*tt:Aa*(tt-4/29)}function He(tt){return 255*(tt<=.0031308?12.92*tt:1.055*Math.pow(tt,1/2.4)-.055)}function Ye(tt){return(tt/=255)<=.04045?tt/12.92:Math.pow((tt+.055)/1.055,2.4)}function $e(tt){var et=Ye(tt.r),nt=Ye(tt.g),rt=Ye(tt.b),it=Xe((.4124564*et+.3575761*nt+.1804375*rt)/.95047),ot=Xe((.2126729*et+.7151522*nt+.072175*rt)/1);return{l:116*ot-16,a:500*(it-ot),b:200*(ot-Xe((.0193339*et+.119192*nt+.9503041*rt)/1.08883)),alpha:tt.a}}function We(tt){var et=(tt.l+16)/116,nt=isNaN(tt.a)?et:et+tt.a/500,rt=isNaN(tt.b)?et:et-tt.b/200;return et=1*Je(et),nt=.95047*Je(nt),rt=1.08883*Je(rt),new Wt(He(3.2404542*nt-1.5371385*et-.4985314*rt),He(-.969266*nt+1.8760108*et+.041556*rt),He(.0556434*nt-.2040259*et+1.0572252*rt),tt.alpha)}function Qe(tt,et,nt){var rt=et-tt;return tt+nt*(rt>180||rt<-180?rt-360*Math.round(rt/360):rt)}var ss={forward:$e,reverse:We,interpolate:function(tt,et,nt){return{l:qe(tt.l,et.l,nt),a:qe(tt.a,et.a,nt),b:qe(tt.b,et.b,nt),alpha:qe(tt.alpha,et.alpha,nt)}}},us={forward:function(tt){var et=$e(tt),nt=et.l,rt=et.a,it=et.b,ot=Math.atan2(it,rt)*as;return{h:ot<0?ot+360:ot,c:Math.sqrt(rt*rt+it*it),l:nt,alpha:tt.a}},reverse:function(tt){var et=tt.h*os,nt=tt.c;return We({l:tt.l,a:Math.cos(et)*nt,b:Math.sin(et)*nt,alpha:tt.alpha})},interpolate:function(tt,et,nt){return{h:Qe(tt.h,et.h,nt),c:qe(tt.c,et.c,nt),l:qe(tt.l,et.l,nt),alpha:qe(tt.alpha,et.alpha,nt)}}},ls=Object.freeze({__proto__:null,lab:ss,hcl:us}),nr=function(tt,et,nt,rt,it){this.type=tt,this.operator=et,this.interpolation=nt,this.input=rt,this.labels=[],this.outputs=[];for(var ot=0,at=it;ot<at.length;ot+=1){var st=at[ot],ct=st[1];this.labels.push(st[0]),this.outputs.push(ct)}};function ir(tt,et,nt,rt){var it=rt-nt,ot=tt-nt;return 0===it?0:1===et?ot/it:(Math.pow(et,ot)-1)/(Math.pow(et,it)-1)}nr.interpolationFactor=function(tt,nt,rt,it){var ot=0;if("exponential"===tt.name)ot=ir(nt,tt.base,rt,it);else if("linear"===tt.name)ot=ir(nt,1,rt,it);else if("cubic-bezier"===tt.name){var at=tt.controlPoints;ot=new et(at[0],at[1],at[2],at[3]).solve(ir(nt,1,rt,it))}return ot},nr.parse=function(tt,et){var nt=tt[0],rt=tt[1],it=tt[2],ot=tt.slice(3);if(!Array.isArray(rt)||0===rt.length)return et.error("Expected an interpolation type expression.",1);if("linear"===rt[0])rt={name:"linear"};else if("exponential"===rt[0]){var at=rt[1];if("number"!=typeof at)return et.error("Exponential interpolation requires a numeric base.",1,1);rt={name:"exponential",base:at}}else{if("cubic-bezier"!==rt[0])return et.error("Unknown interpolation type "+String(rt[0]),1,0);var st=rt.slice(1);if(4!==st.length||st.some((function(tt){return"number"!=typeof tt||tt<0||tt>1})))return et.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);rt={name:"cubic-bezier",controlPoints:st}}if(tt.length-1<4)return et.error("Expected at least 4 arguments, but found only "+(tt.length-1)+".");if((tt.length-1)%2!=0)return et.error("Expected an even number of arguments.");if(!(it=et.parse(it,2,uo)))return null;var ct=[],pt=null;"interpolate-hcl"===nt||"interpolate-lab"===nt?pt=So:et.expectedType&&"value"!==et.expectedType.kind&&(pt=et.expectedType);for(var ft=0;ft<ot.length;ft+=2){var dt=ot[ft],mt=ot[ft+1],yt=ft+3,vt=ft+4;if("number"!=typeof dt)return et.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',yt);if(ct.length&&ct[ct.length-1][0]>=dt)return et.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',yt);var Dt=et.parse(mt,vt,pt);if(!Dt)return null;pt=pt||Dt.type,ct.push([dt,Dt])}return"number"===pt.kind||"color"===pt.kind||"array"===pt.kind&&"number"===pt.itemType.kind&&"number"==typeof pt.N?new nr(pt,nt,rt,it,ct):et.error("Type "+Zt(pt)+" is not interpolatable.")},nr.prototype.evaluate=function(tt){var et=this.labels,nt=this.outputs;if(1===et.length)return nt[0].evaluate(tt);var rt=this.input.evaluate(tt);if(rt<=et[0])return nt[0].evaluate(tt);var it=et.length;if(rt>=et[it-1])return nt[it-1].evaluate(tt);var ot=Ue(et,rt),at=nr.interpolationFactor(this.interpolation,rt,et[ot],et[ot+1]),st=nt[ot].evaluate(tt),ct=nt[ot+1].evaluate(tt);return"interpolate"===this.operator?wa[this.type.kind.toLowerCase()](st,ct,at):"interpolate-hcl"===this.operator?us.reverse(us.interpolate(us.forward(st),us.forward(ct),at)):ss.reverse(ss.interpolate(ss.forward(st),ss.forward(ct),at))},nr.prototype.eachChild=function(tt){tt(this.input);for(var et=0,nt=this.outputs;et<nt.length;et+=1)tt(nt[et])},nr.prototype.outputDefined=function(){return this.outputs.every((function(tt){return tt.outputDefined()}))},nr.prototype.serialize=function(){var tt;tt="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var et=[this.operator,tt,this.input.serialize()],nt=0;nt<this.labels.length;nt++)et.push(this.labels[nt],this.outputs[nt].serialize());return et};var ar=function(tt,et){this.type=tt,this.args=et};ar.parse=function(tt,et){if(tt.length<2)return et.error("Expectected at least one argument.");var nt=null,rt=et.expectedType;rt&&"value"!==rt.kind&&(nt=rt);for(var it=[],ot=0,at=tt.slice(1);ot<at.length;ot+=1){var st=et.parse(at[ot],1+it.length,nt,void 0,{typeAnnotation:"omit"});if(!st)return null;nt=nt||st.type,it.push(st)}var ct=rt&&it.some((function(tt){return Jt(rt,tt.type)}));return new ar(ct?na:nt,it)},ar.prototype.evaluate=function(tt){for(var et,nt=null,rt=0,it=0,ot=this.args;it<ot.length&&(rt++,(nt=ot[it].evaluate(tt))&&nt instanceof re&&!nt.available&&(et||(et=nt.name),nt=null,rt===this.args.length&&(nt=et)),null===nt);it+=1);return nt},ar.prototype.eachChild=function(tt){this.args.forEach(tt)},ar.prototype.outputDefined=function(){return this.args.every((function(tt){return tt.outputDefined()}))},ar.prototype.serialize=function(){var tt=["coalesce"];return this.eachChild((function(et){tt.push(et.serialize())})),tt};var or=function(tt,et){this.type=et.type,this.bindings=[].concat(tt),this.result=et};or.prototype.evaluate=function(tt){return this.result.evaluate(tt)},or.prototype.eachChild=function(tt){for(var et=0,nt=this.bindings;et<nt.length;et+=1)tt(nt[et][1]);tt(this.result)},or.parse=function(tt,et){if(tt.length<4)return et.error("Expected at least 3 arguments, but found "+(tt.length-1)+" instead.");for(var nt=[],rt=1;rt<tt.length-1;rt+=2){var it=tt[rt];if("string"!=typeof it)return et.error("Expected string, but found "+typeof it+" instead.",rt);if(/[^a-zA-Z0-9_]/.test(it))return et.error("Variable names must contain only alphanumeric characters or '_'.",rt);var ot=et.parse(tt[rt+1],rt+1);if(!ot)return null;nt.push([it,ot])}var at=et.parse(tt[tt.length-1],tt.length-1,et.expectedType,nt);return at?new or(nt,at):null},or.prototype.outputDefined=function(){return this.result.outputDefined()},or.prototype.serialize=function(){for(var tt=["let"],et=0,nt=this.bindings;et<nt.length;et+=1){var rt=nt[et];tt.push(rt[0],rt[1].serialize())}return tt.push(this.result.serialize()),tt};var sr=function(tt,et,nt){this.type=tt,this.index=et,this.input=nt};sr.parse=function(tt,et){if(3!==tt.length)return et.error("Expected 2 arguments, but found "+(tt.length-1)+" instead.");var nt=et.parse(tt[1],1,uo),rt=et.parse(tt[2],2,Gt(et.expectedType||na));return nt&&rt?new sr(rt.type.itemType,nt,rt):null},sr.prototype.evaluate=function(tt){var et=this.index.evaluate(tt),nt=this.input.evaluate(tt);if(et<0)throw new ue("Array index out of bounds: "+et+" < 0.");if(et>=nt.length)throw new ue("Array index out of bounds: "+et+" > "+(nt.length-1)+".");if(et!==Math.floor(et))throw new ue("Array index must be an integer, but found "+et+" instead.");return nt[et]},sr.prototype.eachChild=function(tt){tt(this.index),tt(this.input)},sr.prototype.outputDefined=function(){return!1},sr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ur=function(tt,et){this.type=vo,this.needle=tt,this.haystack=et};ur.parse=function(tt,et){if(3!==tt.length)return et.error("Expected 2 arguments, but found "+(tt.length-1)+" instead.");var nt=et.parse(tt[1],1,na),rt=et.parse(tt[2],2,na);return nt&&rt?Ht(nt.type,[vo,po,uo,qi,na])?new ur(nt,rt):et.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(nt.type)+" instead"):null},ur.prototype.evaluate=function(tt){var et=this.needle.evaluate(tt),nt=this.haystack.evaluate(tt);if(!nt)return!1;if(!Yt(et,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+Zt(ae(et))+" instead.");if(!Yt(nt,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+Zt(ae(nt))+" instead.");return nt.indexOf(et)>=0},ur.prototype.eachChild=function(tt){tt(this.needle),tt(this.haystack)},ur.prototype.outputDefined=function(){return!0},ur.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var lr=function(tt,et,nt){this.type=uo,this.needle=tt,this.haystack=et,this.fromIndex=nt};lr.parse=function(tt,et){if(tt.length<=2||tt.length>=5)return et.error("Expected 3 or 4 arguments, but found "+(tt.length-1)+" instead.");var nt=et.parse(tt[1],1,na),rt=et.parse(tt[2],2,na);if(!nt||!rt)return null;if(!Ht(nt.type,[vo,po,uo,qi,na]))return et.error("Expected first argument to be of type boolean, string, number or null, but found "+Zt(nt.type)+" instead");if(4===tt.length){var it=et.parse(tt[3],3,uo);return it?new lr(nt,rt,it):null}return new lr(nt,rt)},lr.prototype.evaluate=function(tt){var et=this.needle.evaluate(tt),nt=this.haystack.evaluate(tt);if(!Yt(et,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+Zt(ae(et))+" instead.");if(!Yt(nt,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+Zt(ae(nt))+" instead.");if(this.fromIndex){var rt=this.fromIndex.evaluate(tt);return nt.indexOf(et,rt)}return nt.indexOf(et)},lr.prototype.eachChild=function(tt){tt(this.needle),tt(this.haystack),this.fromIndex&&tt(this.fromIndex)},lr.prototype.outputDefined=function(){return!1},lr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var tt=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),tt]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var pr=function(tt,et,nt,rt,it,ot){this.inputType=tt,this.type=et,this.input=nt,this.cases=rt,this.outputs=it,this.otherwise=ot};pr.parse=function(tt,et){if(tt.length<5)return et.error("Expected at least 4 arguments, but found only "+(tt.length-1)+".");if(tt.length%2!=1)return et.error("Expected an even number of arguments.");var nt,rt;et.expectedType&&"value"!==et.expectedType.kind&&(rt=et.expectedType);for(var it={},ot=[],at=2;at<tt.length-1;at+=2){var st=tt[at],ct=tt[at+1];Array.isArray(st)||(st=[st]);var pt=et.concat(at);if(0===st.length)return pt.error("Expected at least one branch label.");for(var ft=0,dt=st;ft<dt.length;ft+=1){var mt=dt[ft];if("number"!=typeof mt&&"string"!=typeof mt)return pt.error("Branch labels must be numbers or strings.");if("number"==typeof mt&&Math.abs(mt)>Number.MAX_SAFE_INTEGER)return pt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof mt&&Math.floor(mt)!==mt)return pt.error("Numeric branch labels must be integer values.");if(nt){if(pt.checkSubtype(nt,ae(mt)))return null}else nt=ae(mt);if(void 0!==it[String(mt)])return pt.error("Branch labels must be unique.");it[String(mt)]=ot.length}var yt=et.parse(ct,at,rt);if(!yt)return null;rt=rt||yt.type,ot.push(yt)}var vt=et.parse(tt[1],1,na);if(!vt)return null;var Dt=et.parse(tt[tt.length-1],tt.length-1,rt);return Dt?"value"!==vt.type.kind&&et.concat(1).checkSubtype(nt,vt.type)?null:new pr(nt,rt,vt,it,ot,Dt):null},pr.prototype.evaluate=function(tt){var et=this.input.evaluate(tt);return(ae(et)===this.inputType&&this.outputs[this.cases[et]]||this.otherwise).evaluate(tt)},pr.prototype.eachChild=function(tt){tt(this.input),this.outputs.forEach(tt),tt(this.otherwise)},pr.prototype.outputDefined=function(){return this.outputs.every((function(tt){return tt.outputDefined()}))&&this.otherwise.outputDefined()},pr.prototype.serialize=function(){for(var tt=this,et=["match",this.input.serialize()],nt=[],rt={},it=0,ot=Object.keys(this.cases).sort();it<ot.length;it+=1){var at=ot[it];void 0===(ft=rt[this.cases[at]])?(rt[this.cases[at]]=nt.length,nt.push([this.cases[at],[at]])):nt[ft][1].push(at)}for(var s=function(et){return"number"===tt.inputType.kind?Number(et):et},st=0,ct=nt;st<ct.length;st+=1){var pt=ct[st],ft=pt[0],dt=pt[1];et.push(1===dt.length?s(dt[0]):dt.map(s)),et.push(this.outputs[outputIndex$1].serialize())}return et.push(this.otherwise.serialize()),et};var cr=function(tt,et,nt){this.type=tt,this.branches=et,this.otherwise=nt};cr.parse=function(tt,et){if(tt.length<4)return et.error("Expected at least 3 arguments, but found only "+(tt.length-1)+".");if(tt.length%2!=0)return et.error("Expected an odd number of arguments.");var nt;et.expectedType&&"value"!==et.expectedType.kind&&(nt=et.expectedType);for(var rt=[],it=1;it<tt.length-1;it+=2){var ot=et.parse(tt[it],it,vo);if(!ot)return null;var at=et.parse(tt[it+1],it+1,nt);if(!at)return null;rt.push([ot,at]),nt=nt||at.type}var st=et.parse(tt[tt.length-1],tt.length-1,nt);return st?new cr(nt,rt,st):null},cr.prototype.evaluate=function(tt){for(var et=0,nt=this.branches;et<nt.length;et+=1){var rt=nt[et],it=rt[1];if(rt[0].evaluate(tt))return it.evaluate(tt)}return this.otherwise.evaluate(tt)},cr.prototype.eachChild=function(tt){for(var et=0,nt=this.branches;et<nt.length;et+=1){var rt=nt[et],it=rt[1];tt(rt[0]),tt(it)}tt(this.otherwise)},cr.prototype.outputDefined=function(){return this.branches.every((function(tt){return tt[1].outputDefined()}))&&this.otherwise.outputDefined()},cr.prototype.serialize=function(){var tt=["case"];return this.eachChild((function(et){tt.push(et.serialize())})),tt};var hr=function(tt,et,nt,rt){this.type=tt,this.input=et,this.beginIndex=nt,this.endIndex=rt};function fr(tt,et){return"=="===tt||"!="===tt?"boolean"===et.kind||"string"===et.kind||"number"===et.kind||"null"===et.kind||"value"===et.kind:"string"===et.kind||"number"===et.kind||"value"===et.kind}function yr(tt,et,nt,rt){return 0===rt.compare(et,nt)}function dr(tt,et,nt){var rt="=="!==tt&&"!="!==tt;return function(){function i(tt,et,nt){this.type=vo,this.lhs=tt,this.rhs=et,this.collator=nt,this.hasUntypedArgument="value"===tt.type.kind||"value"===et.type.kind}return i.parse=function(tt,et){if(3!==tt.length&&4!==tt.length)return et.error("Expected two or three arguments.");var nt=tt[0],it=et.parse(tt[1],1,na);if(!it)return null;if(!fr(nt,it.type))return et.concat(1).error('"'+nt+"\" comparisons are not supported for type '"+Zt(it.type)+"'.");var ot=et.parse(tt[2],2,na);if(!ot)return null;if(!fr(nt,ot.type))return et.concat(2).error('"'+nt+"\" comparisons are not supported for type '"+Zt(ot.type)+"'.");if(it.type.kind!==ot.type.kind&&"value"!==it.type.kind&&"value"!==ot.type.kind)return et.error("Cannot compare types '"+Zt(it.type)+"' and '"+Zt(ot.type)+"'.");rt&&("value"===it.type.kind&&"value"!==ot.type.kind?it=new pe(ot.type,[it]):"value"!==it.type.kind&&"value"===ot.type.kind&&(ot=new pe(it.type,[ot])));var at=null;if(4===tt.length){if("string"!==it.type.kind&&"string"!==ot.type.kind&&"value"!==it.type.kind&&"value"!==ot.type.kind)return et.error("Cannot use collator to compare non-string types.");if(!(at=et.parse(tt[3],3,ia)))return null}return new i(it,ot,at)},i.prototype.evaluate=function(it){var ot=this.lhs.evaluate(it),at=this.rhs.evaluate(it);if(rt&&this.hasUntypedArgument){var st=ae(ot),ct=ae(at);if(st.kind!==ct.kind||"string"!==st.kind&&"number"!==st.kind)throw new ue('Expected arguments for "'+tt+'" to be (string, string) or (number, number), but found ('+st.kind+", "+ct.kind+") instead.")}if(this.collator&&!rt&&this.hasUntypedArgument){var pt=ae(ot),ft=ae(at);if("string"!==pt.kind||"string"!==ft.kind)return et(it,ot,at)}return this.collator?nt(it,ot,at,this.collator.evaluate(it)):et(it,ot,at)},i.prototype.eachChild=function(tt){tt(this.lhs),tt(this.rhs),this.collator&&tt(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var et=[tt];return this.eachChild((function(tt){et.push(tt.serialize())})),et},i}()}hr.parse=function(tt,et){if(tt.length<=2||tt.length>=5)return et.error("Expected 3 or 4 arguments, but found "+(tt.length-1)+" instead.");var nt=et.parse(tt[1],1,na),rt=et.parse(tt[2],2,uo);if(!nt||!rt)return null;if(!Ht(nt.type,[Gt(na),po,na]))return et.error("Expected first argument to be of type array or string, but found "+Zt(nt.type)+" instead");if(4===tt.length){var it=et.parse(tt[3],3,uo);return it?new hr(nt.type,nt,rt,it):null}return new hr(nt.type,nt,rt)},hr.prototype.evaluate=function(tt){var et=this.input.evaluate(tt),nt=this.beginIndex.evaluate(tt);if(!Yt(et,["string","array"]))throw new ue("Expected first argument to be of type array or string, but found "+Zt(ae(et))+" instead.");if(this.endIndex){var rt=this.endIndex.evaluate(tt);return et.slice(nt,rt)}return et.slice(nt)},hr.prototype.eachChild=function(tt){tt(this.input),tt(this.beginIndex),this.endIndex&&tt(this.endIndex)},hr.prototype.outputDefined=function(){return!1},hr.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var tt=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),tt]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var fs=dr("==",(function(tt,et,nt){return et===nt}),yr),gs=dr("!=",(function(tt,et,nt){return et!==nt}),(function(tt,et,nt,rt){return!yr(0,et,nt,rt)})),vs=dr("<",(function(tt,et,nt){return et<nt}),(function(tt,et,nt,rt){return rt.compare(et,nt)<0})),xs=dr(">",(function(tt,et,nt){return et>nt}),(function(tt,et,nt,rt){return rt.compare(et,nt)>0})),Ss=dr("<=",(function(tt,et,nt){return et<=nt}),(function(tt,et,nt,rt){return rt.compare(et,nt)<=0})),Es=dr(">=",(function(tt,et,nt){return et>=nt}),(function(tt,et,nt,rt){return rt.compare(et,nt)>=0})),_r=function(tt,et,nt,rt,it){this.type=po,this.number=tt,this.locale=et,this.currency=nt,this.minFractionDigits=rt,this.maxFractionDigits=it};_r.parse=function(tt,et){if(3!==tt.length)return et.error("Expected two arguments.");var nt=et.parse(tt[1],1,uo);if(!nt)return null;var rt=tt[2];if("object"!=typeof rt||Array.isArray(rt))return et.error("NumberFormat options argument must be an object.");var it=null;if(rt.locale&&!(it=et.parse(rt.locale,1,po)))return null;var ot=null;if(rt.currency&&!(ot=et.parse(rt.currency,1,po)))return null;var at=null;if(rt["min-fraction-digits"]&&!(at=et.parse(rt["min-fraction-digits"],1,uo)))return null;var st=null;return rt["max-fraction-digits"]&&!(st=et.parse(rt["max-fraction-digits"],1,uo))?null:new _r(nt,it,ot,at,st)},_r.prototype.evaluate=function(tt){return new Intl.NumberFormat(this.locale?this.locale.evaluate(tt):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(tt):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(tt):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(tt):void 0}).format(this.number.evaluate(tt))},_r.prototype.eachChild=function(tt){tt(this.number),this.locale&&tt(this.locale),this.currency&&tt(this.currency),this.minFractionDigits&&tt(this.minFractionDigits),this.maxFractionDigits&&tt(this.maxFractionDigits)},_r.prototype.outputDefined=function(){return!1},_r.prototype.serialize=function(){var tt={};return this.locale&&(tt.locale=this.locale.serialize()),this.currency&&(tt.currency=this.currency.serialize()),this.minFractionDigits&&(tt["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(tt["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),tt]};var Ar=function(tt){this.type=uo,this.input=tt};Ar.parse=function(tt,et){if(2!==tt.length)return et.error("Expected 1 argument, but found "+(tt.length-1)+" instead.");var nt=et.parse(tt[1],1);return nt?"array"!==nt.type.kind&&"string"!==nt.type.kind&&"value"!==nt.type.kind?et.error("Expected argument of type string or array, but found "+Zt(nt.type)+" instead."):new Ar(nt):null},Ar.prototype.evaluate=function(tt){var et=this.input.evaluate(tt);if("string"==typeof et)return et.length;if(Array.isArray(et))return et.length;throw new ue("Expected value to be of type string or array, but found "+Zt(ae(et))+" instead.")},Ar.prototype.eachChild=function(tt){tt(this.input)},Ar.prototype.outputDefined=function(){return!1},Ar.prototype.serialize=function(){var tt=["length"];return this.eachChild((function(et){tt.push(et.serialize())})),tt};var Ps={"==":fs,"!=":gs,">":xs,"<":vs,">=":Es,"<=":Ss,array:pe,at:sr,boolean:pe,case:cr,coalesce:ar,collator:ge,format:ce,image:he,in:ur,"index-of":lr,interpolate:nr,"interpolate-hcl":nr,"interpolate-lab":nr,length:Ar,let:or,literal:se,match:pr,number:pe,"number-format":_r,object:pe,slice:hr,step:je,string:pe,"to-boolean":ye,"to-color":ye,"to-number":ye,"to-string":ye,var:Re,within:Ve};function kr(tt,et){var nt=et[0],rt=et[1],it=et[2],ot=et[3];nt=nt.evaluate(tt),rt=rt.evaluate(tt),it=it.evaluate(tt);var at=ot?ot.evaluate(tt):1,st=ne(nt,rt,it,at);if(st)throw new ue(st);return new Wt(nt/255*at,rt/255*at,it/255*at,at)}function Ir(tt,et){return tt in et}function zr(tt,et){var nt=et[tt];return void 0===nt?null:nt}function Cr(tt){return{type:tt}}function Mr(tt){return{result:"success",value:tt}}function Er(tt){return{result:"error",value:tt}}function Tr(tt){return"data-driven"===tt["property-type"]||"cross-faded-data-driven"===tt["property-type"]}function Pr(tt){return!!tt.expression&&tt.expression.parameters.indexOf("zoom")>-1}function Br(tt){return!!tt.expression&&tt.expression.interpolated}function Vr(tt){return tt instanceof Number?"number":tt instanceof String?"string":tt instanceof Boolean?"boolean":Array.isArray(tt)?"array":null===tt?"null":typeof tt}function Fr(tt){return"object"==typeof tt&&null!==tt&&!Array.isArray(tt)}function Dr(tt){return tt}function Lr(tt,et,nt){return void 0!==tt?tt:void 0!==et?et:void 0!==nt?nt:void 0}function Rr(tt,et,nt,rt,it){return Lr(typeof nt===it?rt[nt]:void 0,tt.default,et.default)}function Or(tt,et,nt){if("number"!==Vr(nt))return Lr(tt.default,et.default);var rt=tt.stops.length;if(1===rt)return tt.stops[0][1];if(nt<=tt.stops[0][0])return tt.stops[0][1];if(nt>=tt.stops[rt-1][0])return tt.stops[rt-1][1];var it=Ue(tt.stops.map((function(tt){return tt[0]})),nt);return tt.stops[it][1]}function Ur(tt,et,nt){var rt=void 0!==tt.base?tt.base:1;if("number"!==Vr(nt))return Lr(tt.default,et.default);var it=tt.stops.length;if(1===it)return tt.stops[0][1];if(nt<=tt.stops[0][0])return tt.stops[0][1];if(nt>=tt.stops[it-1][0])return tt.stops[it-1][1];var ot=Ue(tt.stops.map((function(tt){return tt[0]})),nt),at=function(tt,et,nt,rt){var it=rt-nt,ot=tt-nt;return 0===it?0:1===et?ot/it:(Math.pow(et,ot)-1)/(Math.pow(et,it)-1)}(nt,rt,tt.stops[ot][0],tt.stops[ot+1][0]),st=tt.stops[ot][1],ct=tt.stops[ot+1][1],pt=wa[et.type]||Dr;if(tt.colorSpace&&"rgb"!==tt.colorSpace){var ft=ls[tt.colorSpace];pt=function(tt,et){return ft.reverse(ft.interpolate(ft.forward(tt),ft.forward(et),at))}}return"function"==typeof st.evaluate?{evaluate:function(){for(var tt=[],et=arguments.length;et--;)tt[et]=arguments[et];var nt=st.evaluate.apply(void 0,tt),rt=ct.evaluate.apply(void 0,tt);if(void 0!==nt&&void 0!==rt)return pt(nt,rt,at)}}:pt(st,ct,at)}function jr(tt,et,nt){return"color"===et.type?nt=Wt.parse(nt):"formatted"===et.type?nt=ee.fromString(nt.toString()):"resolvedImage"===et.type?nt=re.fromString(nt.toString()):Vr(nt)===et.type||"enum"===et.type&&et.values[nt]||(nt=void 0),Lr(nt,tt.default,et.default)}ve.register(Ps,{error:[{kind:"error"},[po],function(tt,et){throw new ue(et[0].evaluate(tt))}],typeof:[po,[na],function(tt,et){return Zt(ae(et[0].evaluate(tt)))}],"to-rgba":[Gt(uo,4),[So],function(tt,et){return et[0].evaluate(tt).toArray()}],rgb:[So,[uo,uo,uo],kr],rgba:[So,[uo,uo,uo,uo],kr],has:{type:vo,overloads:[[[po],function(tt,et){return Ir(et[0].evaluate(tt),tt.properties())}],[[po,ta],function(tt,et){var nt=et[1];return Ir(et[0].evaluate(tt),nt.evaluate(tt))}]]},get:{type:na,overloads:[[[po],function(tt,et){return zr(et[0].evaluate(tt),tt.properties())}],[[po,ta],function(tt,et){var nt=et[1];return zr(et[0].evaluate(tt),nt.evaluate(tt))}]]},"feature-state":[na,[po],function(tt,et){return zr(et[0].evaluate(tt),tt.featureState||{})}],properties:[ta,[],function(tt){return tt.properties()}],"geometry-type":[po,[],function(tt){return tt.geometryType()}],id:[na,[],function(tt){return tt.id()}],zoom:[uo,[],function(tt){return tt.globals.zoom}],"heatmap-density":[uo,[],function(tt){return tt.globals.heatmapDensity||0}],"line-progress":[uo,[],function(tt){return tt.globals.lineProgress||0}],accumulated:[na,[],function(tt){return void 0===tt.globals.accumulated?null:tt.globals.accumulated}],"+":[uo,Cr(uo),function(tt,et){for(var nt=0,rt=0,it=et;rt<it.length;rt+=1)nt+=it[rt].evaluate(tt);return nt}],"*":[uo,Cr(uo),function(tt,et){for(var nt=1,rt=0,it=et;rt<it.length;rt+=1)nt*=it[rt].evaluate(tt);return nt}],"-":{type:uo,overloads:[[[uo,uo],function(tt,et){var nt=et[1];return et[0].evaluate(tt)-nt.evaluate(tt)}],[[uo],function(tt,et){return-et[0].evaluate(tt)}]]},"/":[uo,[uo,uo],function(tt,et){var nt=et[1];return et[0].evaluate(tt)/nt.evaluate(tt)}],"%":[uo,[uo,uo],function(tt,et){var nt=et[1];return et[0].evaluate(tt)%nt.evaluate(tt)}],ln2:[uo,[],function(){return Math.LN2}],pi:[uo,[],function(){return Math.PI}],e:[uo,[],function(){return Math.E}],"^":[uo,[uo,uo],function(tt,et){var nt=et[1];return Math.pow(et[0].evaluate(tt),nt.evaluate(tt))}],sqrt:[uo,[uo],function(tt,et){return Math.sqrt(et[0].evaluate(tt))}],log10:[uo,[uo],function(tt,et){return Math.log(et[0].evaluate(tt))/Math.LN10}],ln:[uo,[uo],function(tt,et){return Math.log(et[0].evaluate(tt))}],log2:[uo,[uo],function(tt,et){return Math.log(et[0].evaluate(tt))/Math.LN2}],sin:[uo,[uo],function(tt,et){return Math.sin(et[0].evaluate(tt))}],cos:[uo,[uo],function(tt,et){return Math.cos(et[0].evaluate(tt))}],tan:[uo,[uo],function(tt,et){return Math.tan(et[0].evaluate(tt))}],asin:[uo,[uo],function(tt,et){return Math.asin(et[0].evaluate(tt))}],acos:[uo,[uo],function(tt,et){return Math.acos(et[0].evaluate(tt))}],atan:[uo,[uo],function(tt,et){return Math.atan(et[0].evaluate(tt))}],min:[uo,Cr(uo),function(tt,et){return Math.min.apply(Math,et.map((function(et){return et.evaluate(tt)})))}],max:[uo,Cr(uo),function(tt,et){return Math.max.apply(Math,et.map((function(et){return et.evaluate(tt)})))}],abs:[uo,[uo],function(tt,et){return Math.abs(et[0].evaluate(tt))}],round:[uo,[uo],function(tt,et){var nt=et[0].evaluate(tt);return nt<0?-Math.round(-nt):Math.round(nt)}],floor:[uo,[uo],function(tt,et){return Math.floor(et[0].evaluate(tt))}],ceil:[uo,[uo],function(tt,et){return Math.ceil(et[0].evaluate(tt))}],"filter-==":[vo,[po,na],function(tt,et){var nt=et[0],rt=et[1];return tt.properties()[nt.value]===rt.value}],"filter-id-==":[vo,[na],function(tt,et){var nt=et[0];return tt.id()===nt.value}],"filter-type-==":[vo,[po],function(tt,et){var nt=et[0];return tt.geometryType()===nt.value}],"filter-<":[vo,[po,na],function(tt,et){var nt=et[0],rt=et[1],it=tt.properties()[nt.value],ot=rt.value;return typeof it==typeof ot&&it<ot}],"filter-id-<":[vo,[na],function(tt,et){var nt=et[0],rt=tt.id(),it=nt.value;return typeof rt==typeof it&&rt<it}],"filter->":[vo,[po,na],function(tt,et){var nt=et[0],rt=et[1],it=tt.properties()[nt.value],ot=rt.value;return typeof it==typeof ot&&it>ot}],"filter-id->":[vo,[na],function(tt,et){var nt=et[0],rt=tt.id(),it=nt.value;return typeof rt==typeof it&&rt>it}],"filter-<=":[vo,[po,na],function(tt,et){var nt=et[0],rt=et[1],it=tt.properties()[nt.value],ot=rt.value;return typeof it==typeof ot&&it<=ot}],"filter-id-<=":[vo,[na],function(tt,et){var nt=et[0],rt=tt.id(),it=nt.value;return typeof rt==typeof it&&rt<=it}],"filter->=":[vo,[po,na],function(tt,et){var nt=et[0],rt=et[1],it=tt.properties()[nt.value],ot=rt.value;return typeof it==typeof ot&&it>=ot}],"filter-id->=":[vo,[na],function(tt,et){var nt=et[0],rt=tt.id(),it=nt.value;return typeof rt==typeof it&&rt>=it}],"filter-has":[vo,[na],function(tt,et){return et[0].value in tt.properties()}],"filter-has-id":[vo,[],function(tt){return null!==tt.id()&&void 0!==tt.id()}],"filter-type-in":[vo,[Gt(po)],function(tt,et){return et[0].value.indexOf(tt.geometryType())>=0}],"filter-id-in":[vo,[Gt(na)],function(tt,et){return et[0].value.indexOf(tt.id())>=0}],"filter-in-small":[vo,[po,Gt(na)],function(tt,et){var nt=et[0];return et[1].value.indexOf(tt.properties()[nt.value])>=0}],"filter-in-large":[vo,[po,Gt(na)],function(tt,et){var nt=et[0],rt=et[1];return function(tt,et,nt,rt){for(;nt<=rt;){var it=nt+rt>>1;if(et[it]===tt)return!0;et[it]>tt?rt=it-1:nt=it+1}return!1}(tt.properties()[nt.value],rt.value,0,rt.value.length-1)}],all:{type:vo,overloads:[[[vo,vo],function(tt,et){var nt=et[1];return et[0].evaluate(tt)&&nt.evaluate(tt)}],[Cr(vo),function(tt,et){for(var nt=0,rt=et;nt<rt.length;nt+=1)if(!rt[nt].evaluate(tt))return!1;return!0}]]},any:{type:vo,overloads:[[[vo,vo],function(tt,et){var nt=et[1];return et[0].evaluate(tt)||nt.evaluate(tt)}],[Cr(vo),function(tt,et){for(var nt=0,rt=et;nt<rt.length;nt+=1)if(rt[nt].evaluate(tt))return!0;return!1}]]},"!":[vo,[vo],function(tt,et){return!et[0].evaluate(tt)}],"is-supported-script":[vo,[po],function(tt,et){var nt=tt.globals&&tt.globals.isSupportedScript;return!nt||nt(et[0].evaluate(tt))}],upcase:[po,[po],function(tt,et){return et[0].evaluate(tt).toUpperCase()}],downcase:[po,[po],function(tt,et){return et[0].evaluate(tt).toLowerCase()}],concat:[po,Cr(na),function(tt,et){return et.map((function(et){return oe(et.evaluate(tt))})).join("")}],"resolved-locale":[po,[ia],function(tt,et){return et[0].evaluate(tt).resolvedLocale()}]});var qr=function(tt,et){this.expression=tt,this._warningHistory={},this._evaluator=new me,this._defaultValue=et?function(tt){return"color"===tt.type&&Fr(tt.default)?new Wt(0,0,0,0):"color"===tt.type?Wt.parse(tt.default)||null:void 0===tt.default?null:tt.default}(et):null,this._enumValues=et&&"enum"===et.type?et.values:null};function Nr(tt){return Array.isArray(tt)&&tt.length>0&&"string"==typeof tt[0]&&tt[0]in Ps}function Kr(tt,et){var nt=new Oe(Ps,[],et?function(tt){var et={color:So,string:po,number:uo,enum:po,boolean:vo,formatted:sa,resolvedImage:la};return"array"===tt.type?Gt(et[tt.value]||na,tt.length):et[tt.type]}(et):void 0),rt=nt.parse(tt,void 0,void 0,void 0,et&&"string"===et.type?{typeAnnotation:"coerce"}:void 0);return rt?Mr(new qr(rt,et)):Er(nt.errors)}qr.prototype.evaluateWithoutErrorHandling=function(tt,et,nt,rt,it,ot){return this._evaluator.globals=tt,this._evaluator.feature=et,this._evaluator.featureState=nt,this._evaluator.canonical=rt,this._evaluator.availableImages=it||null,this._evaluator.formattedSection=ot,this.expression.evaluate(this._evaluator)},qr.prototype.evaluate=function(tt,et,nt,rt,it,ot){this._evaluator.globals=tt,this._evaluator.feature=et||null,this._evaluator.featureState=nt||null,this._evaluator.canonical=rt,this._evaluator.availableImages=it||null,this._evaluator.formattedSection=ot||null;try{var at=this.expression.evaluate(this._evaluator);if(null==at||"number"==typeof at&&at!=at)return this._defaultValue;if(this._enumValues&&!(at in this._enumValues))throw new ue("Expected value to be one of "+Object.keys(this._enumValues).map((function(tt){return JSON.stringify(tt)})).join(", ")+", but found "+JSON.stringify(at)+" instead.");return at}catch(tt){return this._warningHistory[tt.message]||(this._warningHistory[tt.message]=!0,"undefined"!=typeof console&&console.warn(tt.message)),this._defaultValue}};var Gr=function(tt,et){this.kind=tt,this._styleExpression=et,this.isStateDependent="constant"!==tt&&!De(et.expression)};Gr.prototype.evaluateWithoutErrorHandling=function(tt,et,nt,rt,it,ot){return this._styleExpression.evaluateWithoutErrorHandling(tt,et,nt,rt,it,ot)},Gr.prototype.evaluate=function(tt,et,nt,rt,it,ot){return this._styleExpression.evaluate(tt,et,nt,rt,it,ot)};var Zr=function(tt,et,nt,rt){this.kind=tt,this.zoomStops=nt,this._styleExpression=et,this.isStateDependent="camera"!==tt&&!De(et.expression),this.interpolationType=rt};function Xr(tt,et){if("error"===(tt=Kr(tt,et)).result)return tt;var nt=tt.value.expression,rt=Fe(nt);if(!rt&&!Tr(et))return Er([new ii("","data expressions not supported")]);var it=Le(nt,["zoom"]);if(!it&&!Pr(et))return Er([new ii("","zoom expressions not supported")]);var ot=function t(tt){var et=null;if(tt instanceof or)et=t(tt.result);else if(tt instanceof ar)for(var nt=0,rt=tt.args;nt<rt.length&&!(et=t(rt[nt]));nt+=1);else(tt instanceof je||tt instanceof nr)&&tt.input instanceof ve&&"zoom"===tt.input.name&&(et=tt);return et instanceof ii||tt.eachChild((function(tt){var nt=t(tt);nt instanceof ii?et=nt:!et&&nt?et=new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):et&&nt&&et!==nt&&(et=new ii("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),et}(nt);return ot||it?ot instanceof ii?Er([ot]):ot instanceof nr&&!Br(et)?Er([new ii("",'"interpolate" expressions cannot be used with this property')]):Mr(ot?new Zr(rt?"camera":"composite",tt.value,ot.labels,ot instanceof nr?ot.interpolation:void 0):new Gr(rt?"constant":"source",tt.value)):Er([new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Zr.prototype.evaluateWithoutErrorHandling=function(tt,et,nt,rt,it,ot){return this._styleExpression.evaluateWithoutErrorHandling(tt,et,nt,rt,it,ot)},Zr.prototype.evaluate=function(tt,et,nt,rt,it,ot){return this._styleExpression.evaluate(tt,et,nt,rt,it,ot)},Zr.prototype.interpolationFactor=function(tt,et,nt){return this.interpolationType?nr.interpolationFactor(this.interpolationType,tt,et,nt):0};var Jr=function(tt,et){this._parameters=tt,this._specification=et,Et(this,function t(tt,et){var nt,rt,it,ot="color"===et.type,at=tt.stops&&"object"==typeof tt.stops[0][0],st=at||!(at||void 0!==tt.property),ct=tt.type||(Br(et)?"exponential":"interval");if(ot&&((tt=Et({},tt)).stops&&(tt.stops=tt.stops.map((function(tt){return[tt[0],Wt.parse(tt[1])]}))),tt.default=Wt.parse(tt.default?tt.default:et.default)),tt.colorSpace&&"rgb"!==tt.colorSpace&&!ls[tt.colorSpace])throw new Error("Unknown color space: "+tt.colorSpace);if("exponential"===ct)nt=Ur;else if("interval"===ct)nt=Or;else if("categorical"===ct){nt=Rr,rt=Object.create(null);for(var pt=0,ft=tt.stops;pt<ft.length;pt+=1){var dt=ft[pt];rt[dt[0]]=dt[1]}it=typeof tt.stops[0][0]}else{if("identity"!==ct)throw new Error('Unknown function type "'+ct+'"');nt=jr}if(at){for(var mt={},yt=[],vt=0;vt<tt.stops.length;vt++){var Dt=tt.stops[vt],Ot=Dt[0].zoom;void 0===mt[Ot]&&(mt[Ot]={zoom:Ot,type:tt.type,property:tt.property,default:tt.default,stops:[]},yt.push(Ot)),mt[Ot].stops.push([Dt[0].value,Dt[1]])}for(var Rt=[],Bt=0,Ne=yt;Bt<Ne.length;Bt+=1){var rn=Ne[Bt];Rt.push([mt[rn].zoom,t(mt[rn],et)])}var vn={name:"linear"};return{kind:"composite",interpolationType:vn,interpolationFactor:nr.interpolationFactor.bind(void 0,vn),zoomStops:Rt.map((function(tt){return tt[0]})),evaluate:function(nt,rt){var it=nt.zoom;return Ur({stops:Rt,base:tt.base},et,it).evaluate(it,rt)}}}if(st){var bn="exponential"===ct?{name:"exponential",base:void 0!==tt.base?tt.base:1}:null;return{kind:"camera",interpolationType:bn,interpolationFactor:nr.interpolationFactor.bind(void 0,bn),zoomStops:tt.stops.map((function(tt){return tt[0]})),evaluate:function(ot){return nt(tt,et,ot.zoom,rt,it)}}}return{kind:"source",evaluate:function(ot,at){var st=at&&at.properties?at.properties[tt.property]:void 0;return void 0===st?Lr(tt.default,et.default):nt(tt,et,st,rt,it)}}}(this._parameters,this._specification))};function Hr(tt){var et=tt.key,nt=tt.value,rt=tt.valueSpec||{},it=tt.objectElementValidators||{},ot=tt.style,at=tt.styleSpec,st=[],ct=Vr(nt);if("object"!==ct)return[new Ct(et,nt,"object expected, "+ct+" found")];for(var pt in nt){var ft=pt.split(".")[0],dt=rt[ft]||rt["*"],mt=void 0;if(it[ft])mt=it[ft];else if(rt[ft])mt=wn;else if(it["*"])mt=it["*"];else{if(!rt["*"]){st.push(new Ct(et,nt[pt],'unknown property "'+pt+'"'));continue}mt=wn}st=st.concat(mt({key:(et?et+".":et)+pt,value:nt[pt],valueSpec:dt,style:ot,styleSpec:at,object:nt,objectKey:pt},nt))}for(var yt in rt)it[yt]||rt[yt].required&&void 0===rt[yt].default&&void 0===nt[yt]&&st.push(new Ct(et,nt,'missing required property "'+yt+'"'));return st}function Yr(tt){var et=tt.value,nt=tt.valueSpec,rt=tt.style,it=tt.styleSpec,ot=tt.key,at=tt.arrayElementValidator||wn;if("array"!==Vr(et))return[new Ct(ot,et,"array expected, "+Vr(et)+" found")];if(nt.length&&et.length!==nt.length)return[new Ct(ot,et,"array length "+nt.length+" expected, length "+et.length+" found")];if(nt["min-length"]&&et.length<nt["min-length"])return[new Ct(ot,et,"array length at least "+nt["min-length"]+" expected, length "+et.length+" found")];var st={type:nt.value,values:nt.values};it.$version<7&&(st.function=nt.function),"object"===Vr(nt.value)&&(st=nt.value);for(var ct=[],pt=0;pt<et.length;pt++)ct=ct.concat(at({array:et,arrayIndex:pt,value:et[pt],valueSpec:st,style:rt,styleSpec:it,key:ot+"["+pt+"]"}));return ct}function $r(tt){var et=tt.key,nt=tt.value,rt=tt.valueSpec,it=Vr(nt);return"number"===it&&nt!=nt&&(it="NaN"),"number"!==it?[new Ct(et,nt,"number expected, "+it+" found")]:"minimum"in rt&&nt<rt.minimum?[new Ct(et,nt,nt+" is less than the minimum value "+rt.minimum)]:"maximum"in rt&&nt>rt.maximum?[new Ct(et,nt,nt+" is greater than the maximum value "+rt.maximum)]:[]}function Wr(tt){var et,nt,rt,it=tt.valueSpec,ot=Tt(tt.value.type),at={},st="categorical"!==ot&&void 0===tt.value.property,ct=!st,pt="array"===Vr(tt.value.stops)&&"array"===Vr(tt.value.stops[0])&&"object"===Vr(tt.value.stops[0][0]),ft=Hr({key:tt.key,value:tt.value,valueSpec:tt.styleSpec.function,style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{stops:function(tt){if("identity"===ot)return[new Ct(tt.key,tt.value,'identity function may not have a "stops" property')];var et=[],nt=tt.value;return et=et.concat(Yr({key:tt.key,value:nt,valueSpec:tt.valueSpec,style:tt.style,styleSpec:tt.styleSpec,arrayElementValidator:c})),"array"===Vr(nt)&&0===nt.length&&et.push(new Ct(tt.key,nt,"array must have at least one stop")),et},default:function(tt){return wn({key:tt.key,value:tt.value,valueSpec:it,style:tt.style,styleSpec:tt.styleSpec})}}});return"identity"===ot&&st&&ft.push(new Ct(tt.key,tt.value,'missing required property "property"')),"identity"===ot||tt.value.stops||ft.push(new Ct(tt.key,tt.value,'missing required property "stops"')),"exponential"===ot&&tt.valueSpec.expression&&!Br(tt.valueSpec)&&ft.push(new Ct(tt.key,tt.value,"exponential functions not supported")),tt.styleSpec.$version>=8&&(ct&&!Tr(tt.valueSpec)?ft.push(new Ct(tt.key,tt.value,"property functions not supported")):st&&!Pr(tt.valueSpec)&&ft.push(new Ct(tt.key,tt.value,"zoom functions not supported"))),"categorical"!==ot&&!pt||void 0!==tt.value.property||ft.push(new Ct(tt.key,tt.value,'"property" property is required')),ft;function c(tt){var et=[],ot=tt.value,st=tt.key;if("array"!==Vr(ot))return[new Ct(st,ot,"array expected, "+Vr(ot)+" found")];if(2!==ot.length)return[new Ct(st,ot,"array length 2 expected, length "+ot.length+" found")];if(pt){if("object"!==Vr(ot[0]))return[new Ct(st,ot,"object expected, "+Vr(ot[0])+" found")];if(void 0===ot[0].zoom)return[new Ct(st,ot,"object stop key must have zoom")];if(void 0===ot[0].value)return[new Ct(st,ot,"object stop key must have value")];if(rt&&rt>Tt(ot[0].zoom))return[new Ct(st,ot[0].zoom,"stop zoom values must appear in ascending order")];Tt(ot[0].zoom)!==rt&&(rt=Tt(ot[0].zoom),nt=void 0,at={}),et=et.concat(Hr({key:st+"[0]",value:ot[0],valueSpec:{zoom:{}},style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{zoom:$r,value:h}}))}else et=et.concat(h({key:st+"[0]",value:ot[0],valueSpec:{},style:tt.style,styleSpec:tt.styleSpec},ot));return Nr(Pt(ot[1]))?et.concat([new Ct(st+"[1]",ot[1],"expressions are not allowed in function stops.")]):et.concat(wn({key:st+"[1]",value:ot[1],valueSpec:it,style:tt.style,styleSpec:tt.styleSpec}))}function h(tt,rt){var st=Vr(tt.value),ct=Tt(tt.value),pt=null!==tt.value?tt.value:rt;if(et){if(st!==et)return[new Ct(tt.key,pt,st+" stop domain type must match previous stop domain type "+et)]}else et=st;if("number"!==st&&"string"!==st&&"boolean"!==st)return[new Ct(tt.key,pt,"stop domain value must be a number, string, or boolean")];if("number"!==st&&"categorical"!==ot){var ft="number expected, "+st+" found";return Tr(it)&&void 0===ot&&(ft+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ct(tt.key,pt,ft)]}return"categorical"!==ot||"number"!==st||isFinite(ct)&&Math.floor(ct)===ct?"categorical"!==ot&&"number"===st&&void 0!==nt&&ct<nt?[new Ct(tt.key,pt,"stop domain values must appear in ascending order")]:(nt=ct,"categorical"===ot&&ct in at?[new Ct(tt.key,pt,"stop domain values must be unique")]:(at[ct]=!0,[])):[new Ct(tt.key,pt,"integer expected, found "+ct)]}}function Qr(tt){var et=("property"===tt.expressionContext?Xr:Kr)(Pt(tt.value),tt.valueSpec);if("error"===et.result)return et.value.map((function(et){return new Ct(""+tt.key+et.key,tt.value,et.message)}));var nt=et.value.expression||et.value._styleExpression.expression;if("property"===tt.expressionContext&&"text-font"===tt.propertyKey&&!nt.outputDefined())return[new Ct(tt.key,tt.value,'Invalid data expression for "'+tt.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===tt.expressionContext&&"layout"===tt.propertyType&&!De(nt))return[new Ct(tt.key,tt.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===tt.expressionContext&&!De(nt))return[new Ct(tt.key,tt.value,'"feature-state" data expressions are not supported with filters.')];if(tt.expressionContext&&0===tt.expressionContext.indexOf("cluster")){if(!Le(nt,["zoom","feature-state"]))return[new Ct(tt.key,tt.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===tt.expressionContext&&!Fe(nt))return[new Ct(tt.key,tt.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tn(tt){var et=tt.key,nt=tt.value,rt=tt.valueSpec,it=[];return Array.isArray(rt.values)?-1===rt.values.indexOf(Tt(nt))&&it.push(new Ct(et,nt,"expected one of ["+rt.values.join(", ")+"], "+JSON.stringify(nt)+" found")):-1===Object.keys(rt.values).indexOf(Tt(nt))&&it.push(new Ct(et,nt,"expected one of ["+Object.keys(rt.values).join(", ")+"], "+JSON.stringify(nt)+" found")),it}function en(tt){if(!0===tt||!1===tt)return!0;if(!Array.isArray(tt)||0===tt.length)return!1;switch(tt[0]){case"has":return tt.length>=2&&"$id"!==tt[1]&&"$type"!==tt[1];case"in":return tt.length>=3&&("string"!=typeof tt[1]||Array.isArray(tt[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==tt.length||Array.isArray(tt[1])||Array.isArray(tt[2]);case"any":case"all":for(var et=0,nt=tt.slice(1);et<nt.length;et+=1){var rt=nt[et];if(!en(rt)&&"boolean"!=typeof rt)return!1}return!0;default:return!0}}Jr.deserialize=function(tt){return new Jr(tt._parameters,tt._specification)},Jr.serialize=function(tt){return{_parameters:tt._parameters,_specification:tt._specification}};var Cs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nn(tt){if(null==tt)return{filter:function(){return!0},needGeometry:!1};en(tt)||(tt=on(tt));var et=Kr(tt,Cs);if("error"===et.result)throw new Error(et.value.map((function(tt){return tt.key+": "+tt.message})).join(", "));return{filter:function(tt,nt,rt){return et.value.evaluate(tt,nt,{},rt)},needGeometry:function t(tt){if(!Array.isArray(tt))return!1;if("within"===tt[0])return!0;for(var et=1;et<tt.length;et++)if(t(tt[et]))return!0;return!1}(tt)}}function an(tt,et){return tt<et?-1:tt>et?1:0}function on(tt){if(!tt)return!0;var et,nt=tt[0];return tt.length<=1?"any"!==nt:"=="===nt?sn(tt[1],tt[2],"=="):"!="===nt?pn(sn(tt[1],tt[2],"==")):"<"===nt||">"===nt||"<="===nt||">="===nt?sn(tt[1],tt[2],nt):"any"===nt?(et=tt.slice(1),["any"].concat(et.map(on))):"all"===nt?["all"].concat(tt.slice(1).map(on)):"none"===nt?["all"].concat(tt.slice(1).map(on).map(pn)):"in"===nt?un(tt[1],tt.slice(2)):"!in"===nt?pn(un(tt[1],tt.slice(2))):"has"===nt?ln(tt[1]):"!has"===nt?pn(ln(tt[1])):"within"!==nt||tt}function sn(tt,et,nt){switch(tt){case"$type":return["filter-type-"+nt,et];case"$id":return["filter-id-"+nt,et];default:return["filter-"+nt,tt,et]}}function un(tt,et){if(0===et.length)return!1;switch(tt){case"$type":return["filter-type-in",["literal",et]];case"$id":return["filter-id-in",["literal",et]];default:return et.length>200&&!et.some((function(tt){return typeof tt!=typeof et[0]}))?["filter-in-large",tt,["literal",et.sort(an)]]:["filter-in-small",tt,["literal",et]]}}function ln(tt){switch(tt){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",tt]}}function pn(tt){return["!",tt]}function cn(tt){return en(Pt(tt.value))?Qr(Et({},tt,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(tt){var et=tt.value,nt=tt.key;if("array"!==Vr(et))return[new Ct(nt,et,"array expected, "+Vr(et)+" found")];var rt,it=tt.styleSpec,ot=[];if(et.length<1)return[new Ct(nt,et,"filter array must have at least 1 element")];switch(ot=ot.concat(tn({key:nt+"[0]",value:et[0],valueSpec:it.filter_operator,style:tt.style,styleSpec:tt.styleSpec})),Tt(et[0])){case"<":case"<=":case">":case">=":et.length>=2&&"$type"===Tt(et[1])&&ot.push(new Ct(nt,et,'"$type" cannot be use with operator "'+et[0]+'"'));case"==":case"!=":3!==et.length&&ot.push(new Ct(nt,et,'filter array for operator "'+et[0]+'" must have 3 elements'));case"in":case"!in":et.length>=2&&"string"!==(rt=Vr(et[1]))&&ot.push(new Ct(nt+"[1]",et[1],"string expected, "+rt+" found"));for(var at=2;at<et.length;at++)rt=Vr(et[at]),"$type"===Tt(et[1])?ot=ot.concat(tn({key:nt+"["+at+"]",value:et[at],valueSpec:it.geometry_type,style:tt.style,styleSpec:tt.styleSpec})):"string"!==rt&&"number"!==rt&&"boolean"!==rt&&ot.push(new Ct(nt+"["+at+"]",et[at],"string, number, or boolean expected, "+rt+" found"));break;case"any":case"all":case"none":for(var st=1;st<et.length;st++)ot=ot.concat(t({key:nt+"["+st+"]",value:et[st],style:tt.style,styleSpec:tt.styleSpec}));break;case"has":case"!has":rt=Vr(et[1]),2!==et.length?ot.push(new Ct(nt,et,'filter array for "'+et[0]+'" operator must have 2 elements')):"string"!==rt&&ot.push(new Ct(nt+"[1]",et[1],"string expected, "+rt+" found"));break;case"within":rt=Vr(et[1]),2!==et.length?ot.push(new Ct(nt,et,'filter array for "'+et[0]+'" operator must have 2 elements')):"object"!==rt&&ot.push(new Ct(nt+"[1]",et[1],"object expected, "+rt+" found"))}return ot}(tt)}function hn(tt,et){var nt=tt.key,rt=tt.style,it=tt.styleSpec,ot=tt.value,at=tt.objectKey,st=it[et+"_"+tt.layerType];if(!st)return[];var ct=at.match(/^(.*)-transition$/);if("paint"===et&&ct&&st[ct[1]]&&st[ct[1]].transition)return wn({key:nt,value:ot,valueSpec:it.transition,style:rt,styleSpec:it});var pt,ft=tt.valueSpec||st[at];if(!ft)return[new Ct(nt,ot,'unknown property "'+at+'"')];if("string"===Vr(ot)&&Tr(ft)&&!ft.tokens&&(pt=/^{([^}]+)}$/.exec(ot)))return[new Ct(nt,ot,'"'+at+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(pt[1])+" }`.")];var dt=[];return"symbol"===tt.layerType&&("text-field"===at&&rt&&!rt.glyphs&&dt.push(new Ct(nt,ot,'use of "text-field" requires a style "glyphs" property')),"text-font"===at&&Fr(Pt(ot))&&"identity"===Tt(ot.type)&&dt.push(new Ct(nt,ot,'"text-font" does not support identity functions'))),dt.concat(wn({key:tt.key,value:ot,valueSpec:ft,style:rt,styleSpec:it,expressionContext:"property",propertyType:et,propertyKey:at}))}function fn(tt){return hn(tt,"paint")}function yn(tt){return hn(tt,"layout")}function dn(tt){var et=[],nt=tt.value,rt=tt.key,it=tt.style,ot=tt.styleSpec;nt.type||nt.ref||et.push(new Ct(rt,nt,'either "type" or "ref" is required'));var at,st=Tt(nt.type),ct=Tt(nt.ref);if(nt.id)for(var pt=Tt(nt.id),ft=0;ft<tt.arrayIndex;ft++){var dt=it.layers[ft];Tt(dt.id)===pt&&et.push(new Ct(rt,nt.id,'duplicate layer id "'+nt.id+'", previously used at line '+dt.id.__line__))}if("ref"in nt)["type","source","source-layer","filter","layout"].forEach((function(tt){tt in nt&&et.push(new Ct(rt,nt[tt],'"'+tt+'" is prohibited for ref layers'))})),it.layers.forEach((function(tt){Tt(tt.id)===ct&&(at=tt)})),at?at.ref?et.push(new Ct(rt,nt.ref,"ref cannot reference another ref layer")):st=Tt(at.type):et.push(new Ct(rt,nt.ref,'ref layer "'+ct+'" not found'));else if("background"!==st)if(nt.source){var mt=it.sources&&it.sources[nt.source],yt=mt&&Tt(mt.type);mt?"vector"===yt&&"raster"===st?et.push(new Ct(rt,nt.source,'layer "'+nt.id+'" requires a raster source')):"raster"===yt&&"raster"!==st?et.push(new Ct(rt,nt.source,'layer "'+nt.id+'" requires a vector source')):"vector"!==yt||nt["source-layer"]?"raster-dem"===yt&&"hillshade"!==st?et.push(new Ct(rt,nt.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==st||!nt.paint||!nt.paint["line-gradient"]||"geojson"===yt&&mt.lineMetrics||et.push(new Ct(rt,nt,'layer "'+nt.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):et.push(new Ct(rt,nt,'layer "'+nt.id+'" must specify a "source-layer"')):et.push(new Ct(rt,nt.source,'source "'+nt.source+'" not found'))}else et.push(new Ct(rt,nt,'missing required property "source"'));return et=et.concat(Hr({key:rt,value:nt,valueSpec:ot.layer,style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return wn({key:rt+".type",value:nt.type,valueSpec:ot.layer.type,style:tt.style,styleSpec:tt.styleSpec,object:nt,objectKey:"type"})},filter:cn,layout:function(tt){return Hr({layer:nt,key:tt.key,value:tt.value,style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{"*":function(tt){return yn(Et({layerType:st},tt))}}})},paint:function(tt){return Hr({layer:nt,key:tt.key,value:tt.value,style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{"*":function(tt){return fn(Et({layerType:st},tt))}}})}}}))}function mn(tt){var et=tt.value,nt=tt.key,rt=Vr(et);return"string"!==rt?[new Ct(nt,et,"string expected, "+rt+" found")]:[]}var Ls={promoteId:function(tt){var et=tt.key,nt=tt.value;if("string"===Vr(nt))return mn({key:et,value:nt});var rt=[];for(var it in nt)rt.push.apply(rt,mn({key:et+"."+it,value:nt[it]}));return rt}};function gn(tt){var et=tt.value,nt=tt.key,rt=tt.styleSpec,it=tt.style;if(!et.type)return[new Ct(nt,et,'"type" is required')];var ot,at=Tt(et.type);switch(at){case"vector":case"raster":case"raster-dem":return Hr({key:nt,value:et,valueSpec:rt["source_"+at.replace("-","_")],style:tt.style,styleSpec:rt,objectElementValidators:Ls});case"geojson":if(ot=Hr({key:nt,value:et,valueSpec:rt.source_geojson,style:it,styleSpec:rt,objectElementValidators:Ls}),et.cluster)for(var st in et.clusterProperties){var ct=et.clusterProperties[st],pt=ct[0],ft="string"==typeof pt?[pt,["accumulated"],["get",st]]:pt;ot.push.apply(ot,Qr({key:nt+"."+st+".map",value:ct[1],expressionContext:"cluster-map"})),ot.push.apply(ot,Qr({key:nt+"."+st+".reduce",value:ft,expressionContext:"cluster-reduce"}))}return ot;case"video":return Hr({key:nt,value:et,valueSpec:rt.source_video,style:it,styleSpec:rt});case"image":return Hr({key:nt,value:et,valueSpec:rt.source_image,style:it,styleSpec:rt});case"canvas":return[new Ct(nt,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tn({key:nt+".type",value:et.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:it,styleSpec:rt})}}function xn(tt){var et=tt.value,nt=tt.styleSpec,rt=nt.light,it=tt.style,ot=[],at=Vr(et);if(void 0===et)return ot;if("object"!==at)return ot.concat([new Ct("light",et,"object expected, "+at+" found")]);for(var st in et){var ct=st.match(/^(.*)-transition$/);ot=ot.concat(ct&&rt[ct[1]]&&rt[ct[1]].transition?wn({key:st,value:et[st],valueSpec:nt.transition,style:it,styleSpec:nt}):rt[st]?wn({key:st,value:et[st],valueSpec:rt[st],style:it,styleSpec:nt}):[new Ct(st,et[st],'unknown property "'+st+'"')])}return ot}var As={"*":function(){return[]},array:Yr,boolean:function(tt){var et=tt.value,nt=tt.key,rt=Vr(et);return"boolean"!==rt?[new Ct(nt,et,"boolean expected, "+rt+" found")]:[]},number:$r,color:function(tt){var et=tt.key,nt=tt.value,rt=Vr(nt);return"string"!==rt?[new Ct(et,nt,"color expected, "+rt+" found")]:null===fa(nt)?[new Ct(et,nt,'color expected, "'+nt+'" found')]:[]},constants:Mt,enum:tn,filter:cn,function:Wr,layer:dn,object:Hr,source:gn,light:xn,string:mn,formatted:function(tt){return 0===mn(tt).length?[]:Qr(tt)},resolvedImage:function(tt){return 0===mn(tt).length?[]:Qr(tt)}};function wn(tt){var et=tt.value,nt=tt.valueSpec,rt=tt.styleSpec;return nt.expression&&Fr(Tt(et))?Wr(tt):nt.expression&&Nr(Pt(et))?Qr(tt):nt.type&&As[nt.type]?As[nt.type](tt):Hr(Et({},tt,{valueSpec:nt.type?rt[nt.type]:nt}))}function _n(tt){var et=tt.value,nt=tt.key,rt=mn(tt);return rt.length||(-1===et.indexOf("{fontstack}")&&rt.push(new Ct(nt,et,'"glyphs" url must include a "{fontstack}" token')),-1===et.indexOf("{range}")&&rt.push(new Ct(nt,et,'"glyphs" url must include a "{range}" token'))),rt}function An(tt,et){void 0===et&&(et=Sr);var nt=[];return nt=nt.concat(wn({key:"",value:tt,valueSpec:et.$root,styleSpec:et,style:tt,objectElementValidators:{glyphs:_n,"*":function(){return[]}}})),tt.constants&&(nt=nt.concat(Mt({key:"constants",value:tt.constants,style:tt,styleSpec:et}))),Sn(nt)}function Sn(tt){return[].concat(tt).sort((function(tt,et){return tt.line-et.line}))}function kn(tt){return function(){for(var et=[],nt=arguments.length;nt--;)et[nt]=arguments[nt];return Sn(tt.apply(this,et))}}An.source=kn(gn),An.light=kn(xn),An.layer=kn(dn),An.filter=kn(cn),An.paintProperty=kn(fn),An.layoutProperty=kn(yn);var Ms=An,zs=Ms.light,Os=Ms.paintProperty,Rs=Ms.layoutProperty;function En(tt,et){var nt=!1;if(et&&et.length)for(var rt=0,it=et;rt<it.length;rt+=1)tt.fire(new wr(new Error(it[rt].message))),nt=!0;return nt}var Bs=Pn;function Pn(tt,et,nt){var rt=this.cells=[];if(tt instanceof ArrayBuffer){this.arrayBuffer=tt;var it=new Int32Array(this.arrayBuffer);tt=it[0],this.d=(et=it[1])+2*(nt=it[2]);for(var ot=0;ot<this.d*this.d;ot++){var at=it[3+ot],st=it[3+ot+1];rt.push(at===st?null:it.subarray(at,st))}var ct=it[3+rt.length+1];this.keys=it.subarray(it[3+rt.length],ct),this.bboxes=it.subarray(ct),this.insert=this._insertReadonly}else{this.d=et+2*nt;for(var pt=0;pt<this.d*this.d;pt++)rt.push([]);this.keys=[],this.bboxes=[]}this.n=et,this.extent=tt,this.padding=nt,this.scale=et/tt,this.uid=0;var ft=nt/et*tt;this.min=-ft,this.max=tt+ft}Pn.prototype.insert=function(tt,et,nt,rt,it){this._forEachCell(et,nt,rt,it,this._insertCell,this.uid++),this.keys.push(tt),this.bboxes.push(et),this.bboxes.push(nt),this.bboxes.push(rt),this.bboxes.push(it)},Pn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Pn.prototype._insertCell=function(tt,et,nt,rt,it,ot){this.cells[it].push(ot)},Pn.prototype.query=function(tt,et,nt,rt,it){var ot=this.min,at=this.max;if(tt<=ot&&et<=ot&&at<=nt&&at<=rt&&!it)return Array.prototype.slice.call(this.keys);var st=[];return this._forEachCell(tt,et,nt,rt,this._queryCell,st,{},it),st},Pn.prototype._queryCell=function(tt,et,nt,rt,it,ot,at,st){var ct=this.cells[it];if(null!==ct)for(var pt=this.keys,ft=this.bboxes,dt=0;dt<ct.length;dt++){var mt=ct[dt];if(void 0===at[mt]){var yt=4*mt;(st?st(ft[yt+0],ft[yt+1],ft[yt+2],ft[yt+3]):tt<=ft[yt+2]&&et<=ft[yt+3]&&nt>=ft[yt+0]&&rt>=ft[yt+1])?(at[mt]=!0,ot.push(pt[mt])):at[mt]=!1}}},Pn.prototype._forEachCell=function(tt,et,nt,rt,it,ot,at,st){for(var ct=this._convertToCellCoord(tt),pt=this._convertToCellCoord(et),ft=this._convertToCellCoord(nt),dt=this._convertToCellCoord(rt),mt=ct;mt<=ft;mt++)for(var yt=pt;yt<=dt;yt++){var vt=this.d*yt+mt;if((!st||st(this._convertFromCellCoord(mt),this._convertFromCellCoord(yt),this._convertFromCellCoord(mt+1),this._convertFromCellCoord(yt+1)))&&it.call(this,tt,et,nt,rt,vt,ot,at,st))return}},Pn.prototype._convertFromCellCoord=function(tt){return(tt-this.padding)/this.scale},Pn.prototype._convertToCellCoord=function(tt){return Math.max(0,Math.min(this.d-1,Math.floor(tt*this.scale)+this.padding))},Pn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var tt=this.cells,et=3+this.cells.length+1+1,nt=0,rt=0;rt<this.cells.length;rt++)nt+=this.cells[rt].length;var it=new Int32Array(et+nt+this.keys.length+this.bboxes.length);it[0]=this.extent,it[1]=this.n,it[2]=this.padding;for(var ot=et,at=0;at<tt.length;at++){var st=tt[at];it[3+at]=ot,it.set(st,ot),ot+=st.length}return it[3+tt.length]=ot,it.set(this.keys,ot),it[3+tt.length+1]=ot+=this.keys.length,it.set(this.bboxes,ot),ot+=this.bboxes.length,it.buffer};var Fs=rt.ImageData,Ns=rt.ImageBitmap,Vs={};function Dn(tt,et,nt){void 0===nt&&(nt={}),Object.defineProperty(et,"_classRegistryKey",{value:tt,writeable:!1}),Vs[tt]={klass:et,omit:nt.omit||[],shallow:nt.shallow||[]}}for(var Us in Dn("Object",Object),Bs.serialize=function(tt,et){var nt=tt.toArrayBuffer();return et&&et.push(nt),{buffer:nt}},Bs.deserialize=function(tt){return new Bs(tt.buffer)},Dn("Grid",Bs),Dn("Color",Wt),Dn("Error",Error),Dn("ResolvedImage",re),Dn("StylePropertyFunction",Jr),Dn("StyleExpression",qr,{omit:["_evaluator"]}),Dn("ZoomDependentExpression",Zr),Dn("ZoomConstantExpression",Gr),Dn("CompoundExpression",ve,{omit:["_evaluate"]}),Ps)Ps[Us]._classRegistryKey||Dn("Expression_"+Us,Ps[Us]);function Rn(tt){return tt&&"undefined"!=typeof ArrayBuffer&&(tt instanceof ArrayBuffer||tt.constructor&&"ArrayBuffer"===tt.constructor.name)}function On(tt){return Ns&&tt instanceof Ns}function Un(tt,et){if(null==tt||"boolean"==typeof tt||"number"==typeof tt||"string"==typeof tt||tt instanceof Boolean||tt instanceof Number||tt instanceof String||tt instanceof Date||tt instanceof RegExp)return tt;if(Rn(tt)||On(tt))return et&&et.push(tt),tt;if(ArrayBuffer.isView(tt)){var nt=tt;return et&&et.push(nt.buffer),nt}if(tt instanceof Fs)return et&&et.push(tt.data.buffer),tt;if(Array.isArray(tt)){for(var rt=[],it=0,ot=tt;it<ot.length;it+=1)rt.push(Un(ot[it],et));return rt}if("object"==typeof tt){var at=tt.constructor,st=at._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var ct=at.serialize?at.serialize(tt,et):{};if(!at.serialize){for(var pt in tt)if(tt.hasOwnProperty(pt)&&!(Vs[st].omit.indexOf(pt)>=0)){var ft=tt[pt];ct[pt]=Vs[st].shallow.indexOf(pt)>=0?ft:Un(ft,et)}tt instanceof Error&&(ct.message=tt.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==st&&(ct.$name=st),ct}throw new Error("can't serialize object of type "+typeof tt)}function jn(tt){if(null==tt||"boolean"==typeof tt||"number"==typeof tt||"string"==typeof tt||tt instanceof Boolean||tt instanceof Number||tt instanceof String||tt instanceof Date||tt instanceof RegExp||Rn(tt)||On(tt)||ArrayBuffer.isView(tt)||tt instanceof Fs)return tt;if(Array.isArray(tt))return tt.map(jn);if("object"==typeof tt){var et=tt.$name||"Object",nt=Vs[et].klass;if(!nt)throw new Error("can't deserialize unregistered class "+et);if(nt.deserialize)return nt.deserialize(tt);for(var rt=Object.create(nt.prototype),it=0,ot=Object.keys(tt);it<ot.length;it+=1){var at=ot[it];if("$name"!==at){var st=tt[at];rt[at]=Vs[et].shallow.indexOf(at)>=0?st:jn(st)}}return rt}throw new Error("can't deserialize object of type "+typeof tt)}var qn=function(){this.first=!0};qn.prototype.update=function(tt,et){var nt=Math.floor(tt);return this.first?(this.first=!1,this.lastIntegerZoom=nt,this.lastIntegerZoomTime=0,this.lastZoom=tt,this.lastFloorZoom=nt,!0):(this.lastFloorZoom>nt?(this.lastIntegerZoom=nt+1,this.lastIntegerZoomTime=et):this.lastFloorZoom<nt&&(this.lastIntegerZoom=nt,this.lastIntegerZoomTime=et),tt!==this.lastZoom&&(this.lastZoom=tt,this.lastFloorZoom=nt,!0))};var js={"Latin-1 Supplement":function(tt){return tt>=128&&tt<=255},Arabic:function(tt){return tt>=1536&&tt<=1791},"Arabic Supplement":function(tt){return tt>=1872&&tt<=1919},"Arabic Extended-A":function(tt){return tt>=2208&&tt<=2303},"Hangul Jamo":function(tt){return tt>=4352&&tt<=4607},"Unified Canadian Aboriginal Syllabics":function(tt){return tt>=5120&&tt<=5759},Khmer:function(tt){return tt>=6016&&tt<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(tt){return tt>=6320&&tt<=6399},"General Punctuation":function(tt){return tt>=8192&&tt<=8303},"Letterlike Symbols":function(tt){return tt>=8448&&tt<=8527},"Number Forms":function(tt){return tt>=8528&&tt<=8591},"Miscellaneous Technical":function(tt){return tt>=8960&&tt<=9215},"Control Pictures":function(tt){return tt>=9216&&tt<=9279},"Optical Character Recognition":function(tt){return tt>=9280&&tt<=9311},"Enclosed Alphanumerics":function(tt){return tt>=9312&&tt<=9471},"Geometric Shapes":function(tt){return tt>=9632&&tt<=9727},"Miscellaneous Symbols":function(tt){return tt>=9728&&tt<=9983},"Miscellaneous Symbols and Arrows":function(tt){return tt>=11008&&tt<=11263},"CJK Radicals Supplement":function(tt){return tt>=11904&&tt<=12031},"Kangxi Radicals":function(tt){return tt>=12032&&tt<=12255},"Ideographic Description Characters":function(tt){return tt>=12272&&tt<=12287},"CJK Symbols and Punctuation":function(tt){return tt>=12288&&tt<=12351},Hiragana:function(tt){return tt>=12352&&tt<=12447},Katakana:function(tt){return tt>=12448&&tt<=12543},Bopomofo:function(tt){return tt>=12544&&tt<=12591},"Hangul Compatibility Jamo":function(tt){return tt>=12592&&tt<=12687},Kanbun:function(tt){return tt>=12688&&tt<=12703},"Bopomofo Extended":function(tt){return tt>=12704&&tt<=12735},"CJK Strokes":function(tt){return tt>=12736&&tt<=12783},"Katakana Phonetic Extensions":function(tt){return tt>=12784&&tt<=12799},"Enclosed CJK Letters and Months":function(tt){return tt>=12800&&tt<=13055},"CJK Compatibility":function(tt){return tt>=13056&&tt<=13311},"CJK Unified Ideographs Extension A":function(tt){return tt>=13312&&tt<=19903},"Yijing Hexagram Symbols":function(tt){return tt>=19904&&tt<=19967},"CJK Unified Ideographs":function(tt){return tt>=19968&&tt<=40959},"Yi Syllables":function(tt){return tt>=40960&&tt<=42127},"Yi Radicals":function(tt){return tt>=42128&&tt<=42191},"Hangul Jamo Extended-A":function(tt){return tt>=43360&&tt<=43391},"Hangul Syllables":function(tt){return tt>=44032&&tt<=55215},"Hangul Jamo Extended-B":function(tt){return tt>=55216&&tt<=55295},"Private Use Area":function(tt){return tt>=57344&&tt<=63743},"CJK Compatibility Ideographs":function(tt){return tt>=63744&&tt<=64255},"Arabic Presentation Forms-A":function(tt){return tt>=64336&&tt<=65023},"Vertical Forms":function(tt){return tt>=65040&&tt<=65055},"CJK Compatibility Forms":function(tt){return tt>=65072&&tt<=65103},"Small Form Variants":function(tt){return tt>=65104&&tt<=65135},"Arabic Presentation Forms-B":function(tt){return tt>=65136&&tt<=65279},"Halfwidth and Fullwidth Forms":function(tt){return tt>=65280&&tt<=65519}};function Kn(tt){for(var et=0,nt=tt;et<nt.length;et+=1)if(Gn(nt[et].charCodeAt(0)))return!0;return!1}function Gn(tt){return!(746!==tt&&747!==tt&&(tt<4352||!(js["Bopomofo Extended"](tt)||js.Bopomofo(tt)||js["CJK Compatibility Forms"](tt)&&!(tt>=65097&&tt<=65103)||js["CJK Compatibility Ideographs"](tt)||js["CJK Compatibility"](tt)||js["CJK Radicals Supplement"](tt)||js["CJK Strokes"](tt)||!(!js["CJK Symbols and Punctuation"](tt)||tt>=12296&&tt<=12305||tt>=12308&&tt<=12319||12336===tt)||js["CJK Unified Ideographs Extension A"](tt)||js["CJK Unified Ideographs"](tt)||js["Enclosed CJK Letters and Months"](tt)||js["Hangul Compatibility Jamo"](tt)||js["Hangul Jamo Extended-A"](tt)||js["Hangul Jamo Extended-B"](tt)||js["Hangul Jamo"](tt)||js["Hangul Syllables"](tt)||js.Hiragana(tt)||js["Ideographic Description Characters"](tt)||js.Kanbun(tt)||js["Kangxi Radicals"](tt)||js["Katakana Phonetic Extensions"](tt)||js.Katakana(tt)&&12540!==tt||!(!js["Halfwidth and Fullwidth Forms"](tt)||65288===tt||65289===tt||65293===tt||tt>=65306&&tt<=65310||65339===tt||65341===tt||65343===tt||tt>=65371&&tt<=65503||65507===tt||tt>=65512&&tt<=65519)||!(!js["Small Form Variants"](tt)||tt>=65112&&tt<=65118||tt>=65123&&tt<=65126)||js["Unified Canadian Aboriginal Syllabics"](tt)||js["Unified Canadian Aboriginal Syllabics Extended"](tt)||js["Vertical Forms"](tt)||js["Yijing Hexagram Symbols"](tt)||js["Yi Syllables"](tt)||js["Yi Radicals"](tt))))}function Zn(tt){return!(Gn(tt)||function(tt){return!!(js["Latin-1 Supplement"](tt)&&(167===tt||169===tt||174===tt||177===tt||188===tt||189===tt||190===tt||215===tt||247===tt)||js["General Punctuation"](tt)&&(8214===tt||8224===tt||8225===tt||8240===tt||8241===tt||8251===tt||8252===tt||8258===tt||8263===tt||8264===tt||8265===tt||8273===tt)||js["Letterlike Symbols"](tt)||js["Number Forms"](tt)||js["Miscellaneous Technical"](tt)&&(tt>=8960&&tt<=8967||tt>=8972&&tt<=8991||tt>=8996&&tt<=9e3||9003===tt||tt>=9085&&tt<=9114||tt>=9150&&tt<=9165||9167===tt||tt>=9169&&tt<=9179||tt>=9186&&tt<=9215)||js["Control Pictures"](tt)&&9251!==tt||js["Optical Character Recognition"](tt)||js["Enclosed Alphanumerics"](tt)||js["Geometric Shapes"](tt)||js["Miscellaneous Symbols"](tt)&&!(tt>=9754&&tt<=9759)||js["Miscellaneous Symbols and Arrows"](tt)&&(tt>=11026&&tt<=11055||tt>=11088&&tt<=11097||tt>=11192&&tt<=11243)||js["CJK Symbols and Punctuation"](tt)||js.Katakana(tt)||js["Private Use Area"](tt)||js["CJK Compatibility Forms"](tt)||js["Small Form Variants"](tt)||js["Halfwidth and Fullwidth Forms"](tt)||8734===tt||8756===tt||8757===tt||tt>=9984&&tt<=10087||tt>=10102&&tt<=10131||65532===tt||65533===tt)}(tt))}function Xn(tt){return tt>=1424&&tt<=2303||js["Arabic Presentation Forms-A"](tt)||js["Arabic Presentation Forms-B"](tt)}function Jn(tt,et){return!(!et&&Xn(tt)||tt>=2304&&tt<=3583||tt>=3840&&tt<=4255||js.Khmer(tt))}function Hn(tt){for(var et=0,nt=tt;et<nt.length;et+=1)if(Xn(nt[et].charCodeAt(0)))return!0;return!1}var Zs=null,Js="unavailable",du=null,Qn=function(tt){tt&&"string"==typeof tt&&tt.indexOf("NetworkError")>-1&&(Js="error"),Zs&&Zs(tt)};function ti(){vu.fire(new St("pluginStateChange",{pluginStatus:Js,pluginURL:du}))}var vu=new It,ri=function(){return Js},ni=function(){if("deferred"!==Js||!du)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Js="loading",ti(),du&&xt({url:du},(function(tt){tt?Qn(tt):(Js="loaded",ti())}))},_u={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Js||null!=_u.applyArabicShaping},isLoading:function(){return"loading"===Js},setState:function(tt){Js=tt.pluginStatus,du=tt.pluginURL},isParsed:function(){return null!=_u.applyArabicShaping&&null!=_u.processBidirectionalText&&null!=_u.processStyledBidirectionalText},getPluginURL:function(){return du}},ai=function(tt,et){this.zoom=tt,et?(this.now=et.now,this.fadeDuration=et.fadeDuration,this.zoomHistory=et.zoomHistory,this.transition=et.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qn,this.transition={})};ai.prototype.isSupportedScript=function(tt){return function(tt,et){for(var nt=0,rt=tt;nt<rt.length;nt+=1)if(!Jn(rt[nt].charCodeAt(0),et))return!1;return!0}(tt,_u.isLoaded())},ai.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ai.prototype.getCrossfadeParameters=function(){var tt=this.zoom,et=tt-Math.floor(tt),nt=this.crossFadingFactor();return tt>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:et+(1-et)*nt}:{fromScale:.5,toScale:1,t:1-(1-nt)*et}};var oi=function(tt,et){this.property=tt,this.value=et,this.expression=function(tt,et){if(Fr(tt))return new Jr(tt,et);if(Nr(tt)){var nt=Xr(tt,et);if("error"===nt.result)throw new Error(nt.value.map((function(tt){return tt.key+": "+tt.message})).join(", "));return nt.value}var rt=tt;return"string"==typeof tt&&"color"===et.type&&(rt=Wt.parse(tt)),{kind:"constant",evaluate:function(){return rt}}}(void 0===et?tt.specification.default:et,tt.specification)};oi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},oi.prototype.possiblyEvaluate=function(tt,et,nt){return this.property.possiblyEvaluate(this,tt,et,nt)};var si=function(tt){this.property=tt,this.value=new oi(tt,void 0)};si.prototype.transitioned=function(tt,et){return new li(this.property,this.value,et,c({},tt.transition,this.transition),tt.now)},si.prototype.untransitioned=function(){return new li(this.property,this.value,null,{},0)};var ui=function(tt){this._properties=tt,this._values=Object.create(tt.defaultTransitionablePropertyValues)};ui.prototype.getValue=function(tt){return b(this._values[tt].value.value)},ui.prototype.setValue=function(tt,et){this._values.hasOwnProperty(tt)||(this._values[tt]=new si(this._values[tt].property)),this._values[tt].value=new oi(this._values[tt].property,null===et?void 0:b(et))},ui.prototype.getTransition=function(tt){return b(this._values[tt].transition)},ui.prototype.setTransition=function(tt,et){this._values.hasOwnProperty(tt)||(this._values[tt]=new si(this._values[tt].property)),this._values[tt].transition=b(et)||void 0},ui.prototype.serialize=function(){for(var tt={},et=0,nt=Object.keys(this._values);et<nt.length;et+=1){var rt=nt[et],it=this.getValue(rt);void 0!==it&&(tt[rt]=it);var ot=this.getTransition(rt);void 0!==ot&&(tt[rt+"-transition"]=ot)}return tt},ui.prototype.transitioned=function(tt,et){for(var nt=new pi(this._properties),rt=0,it=Object.keys(this._values);rt<it.length;rt+=1){var ot=it[rt];nt._values[ot]=this._values[ot].transitioned(tt,et._values[ot])}return nt},ui.prototype.untransitioned=function(){for(var tt=new pi(this._properties),et=0,nt=Object.keys(this._values);et<nt.length;et+=1){var rt=nt[et];tt._values[rt]=this._values[rt].untransitioned()}return tt};var li=function(tt,et,nt,rt,it){this.property=tt,this.value=et,this.begin=it+rt.delay||0,this.end=this.begin+rt.duration||0,tt.specification.transition&&(rt.delay||rt.duration)&&(this.prior=nt)};li.prototype.possiblyEvaluate=function(tt,et,nt){var rt=tt.now||0,it=this.value.possiblyEvaluate(tt,et,nt),ot=this.prior;if(ot){if(rt>this.end)return this.prior=null,it;if(this.value.isDataDriven())return this.prior=null,it;if(rt<this.begin)return ot.possiblyEvaluate(tt,et,nt);var at=(rt-this.begin)/(this.end-this.begin);return this.property.interpolate(ot.possiblyEvaluate(tt,et,nt),it,function(tt){if(tt<=0)return 0;if(tt>=1)return 1;var et=tt*tt,nt=et*tt;return 4*(tt<.5?nt:3*(tt-et)+nt-.75)}(at))}return it};var pi=function(tt){this._properties=tt,this._values=Object.create(tt.defaultTransitioningPropertyValues)};pi.prototype.possiblyEvaluate=function(tt,et,nt){for(var rt=new fi(this._properties),it=0,ot=Object.keys(this._values);it<ot.length;it+=1){var at=ot[it];rt._values[at]=this._values[at].possiblyEvaluate(tt,et,nt)}return rt},pi.prototype.hasTransition=function(){for(var tt=0,et=Object.keys(this._values);tt<et.length;tt+=1)if(this._values[et[tt]].prior)return!0;return!1};var ci=function(tt){this._properties=tt,this._values=Object.create(tt.defaultPropertyValues)};ci.prototype.getValue=function(tt){return b(this._values[tt].value)},ci.prototype.setValue=function(tt,et){this._values[tt]=new oi(this._values[tt].property,null===et?void 0:b(et))},ci.prototype.serialize=function(){for(var tt={},et=0,nt=Object.keys(this._values);et<nt.length;et+=1){var rt=nt[et],it=this.getValue(rt);void 0!==it&&(tt[rt]=it)}return tt},ci.prototype.possiblyEvaluate=function(tt,et,nt){for(var rt=new fi(this._properties),it=0,ot=Object.keys(this._values);it<ot.length;it+=1){var at=ot[it];rt._values[at]=this._values[at].possiblyEvaluate(tt,et,nt)}return rt};var hi=function(tt,et,nt){this.property=tt,this.value=et,this.parameters=nt};hi.prototype.isConstant=function(){return"constant"===this.value.kind},hi.prototype.constantOr=function(tt){return"constant"===this.value.kind?this.value.value:tt},hi.prototype.evaluate=function(tt,et,nt,rt){return this.property.evaluate(this.value,this.parameters,tt,et,nt,rt)};var fi=function(tt){this._properties=tt,this._values=Object.create(tt.defaultPossiblyEvaluatedValues)};fi.prototype.get=function(tt){return this._values[tt]};var yi=function(tt){this.specification=tt};yi.prototype.possiblyEvaluate=function(tt,et){return tt.expression.evaluate(et)},yi.prototype.interpolate=function(tt,et,nt){var rt=wa[this.specification.type];return rt?rt(tt,et,nt):tt};var di=function(tt,et){this.specification=tt,this.overrides=et};di.prototype.possiblyEvaluate=function(tt,et,nt,rt){return new hi(this,"constant"===tt.expression.kind||"camera"===tt.expression.kind?{kind:"constant",value:tt.expression.evaluate(et,null,{},nt,rt)}:tt.expression,et)},di.prototype.interpolate=function(tt,et,nt){if("constant"!==tt.value.kind||"constant"!==et.value.kind)return tt;if(void 0===tt.value.value||void 0===et.value.value)return new hi(this,{kind:"constant",value:void 0},tt.parameters);var rt=wa[this.specification.type];return rt?new hi(this,{kind:"constant",value:rt(tt.value.value,et.value.value,nt)},tt.parameters):tt},di.prototype.evaluate=function(tt,et,nt,rt,it,ot){return"constant"===tt.kind?tt.value:tt.evaluate(et,nt,rt,it,ot)};var wu=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(tt,et,nt,rt){if(void 0===tt.value)return new hi(this,{kind:"constant",value:void 0},et);if("constant"===tt.expression.kind){var it=tt.expression.evaluate(et,null,{},nt,rt),ot="resolvedImage"===tt.property.specification.type&&"string"!=typeof it?it.name:it,at=this._calculate(ot,ot,ot,et);return new hi(this,{kind:"constant",value:at},et)}if("camera"===tt.expression.kind){var st=this._calculate(tt.expression.evaluate({zoom:et.zoom-1}),tt.expression.evaluate({zoom:et.zoom}),tt.expression.evaluate({zoom:et.zoom+1}),et);return new hi(this,{kind:"constant",value:st},et)}return new hi(this,tt.expression,et)},e.prototype.evaluate=function(tt,et,nt,rt,it,ot){if("source"===tt.kind){var at=tt.evaluate(et,nt,rt,it,ot);return this._calculate(at,at,at,et)}return"composite"===tt.kind?this._calculate(tt.evaluate({zoom:Math.floor(et.zoom)-1},nt,rt),tt.evaluate({zoom:Math.floor(et.zoom)},nt,rt),tt.evaluate({zoom:Math.floor(et.zoom)+1},nt,rt),et):tt.value},e.prototype._calculate=function(tt,et,nt,rt){return rt.zoom>rt.zoomHistory.lastIntegerZoom?{from:tt,to:et}:{from:nt,to:et}},e.prototype.interpolate=function(tt){return tt},e}(di),vi=function(tt){this.specification=tt};vi.prototype.possiblyEvaluate=function(tt,et,nt,rt){if(void 0!==tt.value){if("constant"===tt.expression.kind){var it=tt.expression.evaluate(et,null,{},nt,rt);return this._calculate(it,it,it,et)}return this._calculate(tt.expression.evaluate(new ai(Math.floor(et.zoom-1),et)),tt.expression.evaluate(new ai(Math.floor(et.zoom),et)),tt.expression.evaluate(new ai(Math.floor(et.zoom+1),et)),et)}},vi.prototype._calculate=function(tt,et,nt,rt){return rt.zoom>rt.zoomHistory.lastIntegerZoom?{from:tt,to:et}:{from:nt,to:et}},vi.prototype.interpolate=function(tt){return tt};var gi=function(tt){this.specification=tt};gi.prototype.possiblyEvaluate=function(tt,et,nt,rt){return!!tt.expression.evaluate(et,null,{},nt,rt)},gi.prototype.interpolate=function(){return!1};var xi=function(tt){for(var et in this.properties=tt,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],tt){var nt=tt[et];nt.specification.overridable&&this.overridableProperties.push(et);var rt=this.defaultPropertyValues[et]=new oi(nt,void 0),it=this.defaultTransitionablePropertyValues[et]=new si(nt);this.defaultTransitioningPropertyValues[et]=it.untransitioned(),this.defaultPossiblyEvaluatedValues[et]=rt.possiblyEvaluate({})}};Dn("DataDrivenProperty",di),Dn("DataConstantProperty",yi),Dn("CrossFadedDataDrivenProperty",wu),Dn("CrossFadedProperty",vi),Dn("ColorRampProperty",gi);var Tu=function(tt){function e(et,nt){if(tt.call(this),this.id=et.id,this.type=et.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==et.type&&(this.metadata=(et=et).metadata,this.minzoom=et.minzoom,this.maxzoom=et.maxzoom,"background"!==et.type&&(this.source=et.source,this.sourceLayer=et["source-layer"],this.filter=et.filter),nt.layout&&(this._unevaluatedLayout=new ci(nt.layout)),nt.paint)){for(var rt in this._transitionablePaint=new ui(nt.paint),et.paint)this.setPaintProperty(rt,et.paint[rt],{validate:!1});for(var it in et.layout)this.setLayoutProperty(it,et.layout[it],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fi(nt.paint)}}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(tt){return"visibility"===tt?this.visibility:this._unevaluatedLayout.getValue(tt)},e.prototype.setLayoutProperty=function(tt,et,nt){void 0===nt&&(nt={}),null!=et&&this._validate(Rs,"layers."+this.id+".layout."+tt,tt,et,nt)||("visibility"!==tt?this._unevaluatedLayout.setValue(tt,et):this.visibility=et)},e.prototype.getPaintProperty=function(tt){return v(tt,"-transition")?this._transitionablePaint.getTransition(tt.slice(0,-"-transition".length)):this._transitionablePaint.getValue(tt)},e.prototype.setPaintProperty=function(tt,et,nt){if(void 0===nt&&(nt={}),null!=et&&this._validate(Os,"layers."+this.id+".paint."+tt,tt,et,nt))return!1;if(v(tt,"-transition"))return this._transitionablePaint.setTransition(tt.slice(0,-"-transition".length),et||void 0),!1;var rt=this._transitionablePaint._values[tt],it="cross-faded-data-driven"===rt.property.specification["property-type"],ot=rt.value.isDataDriven(),at=rt.value;this._transitionablePaint.setValue(tt,et),this._handleSpecialPaintPropertyUpdate(tt);var st=this._transitionablePaint._values[tt].value;return st.isDataDriven()||ot||it||this._handleOverridablePaintPropertyUpdate(tt,at,st)},e.prototype._handleSpecialPaintPropertyUpdate=function(tt){},e.prototype._handleOverridablePaintPropertyUpdate=function(tt,et,nt){return!1},e.prototype.isHidden=function(tt){return!!(this.minzoom&&tt<this.minzoom)||!!(this.maxzoom&&tt>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(tt){this._transitioningPaint=this._transitionablePaint.transitioned(tt,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(tt,et){tt.getCrossfadeParameters&&(this._crossfadeParameters=tt.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(tt,void 0,et)),this.paint=this._transitioningPaint.possiblyEvaluate(tt,void 0,et)},e.prototype.serialize=function(){var tt={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(tt.layout=tt.layout||{},tt.layout.visibility=this.visibility),x(tt,(function(tt,et){return!(void 0===tt||"layout"===et&&!Object.keys(tt).length||"paint"===et&&!Object.keys(tt).length)}))},e.prototype._validate=function(tt,et,nt,rt,it){return void 0===it&&(it={}),(!it||!1!==it.validate)&&En(this,tt.call(Ms,{key:et,layerType:this.type,objectKey:nt,value:rt,styleSpec:Sr,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var tt in this.paint._values){var et=this.paint.get(tt);if(et instanceof hi&&Tr(et.property.specification)&&("source"===et.value.kind||"composite"===et.value.kind)&&et.value.isStateDependent)return!0}return!1},e}(It),Fu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},_i=function(tt,et){this._structArray=tt,this._pos1=et*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ai=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Si(tt,et){void 0===et&&(et=1);var nt=0,rt=0;return{members:tt.map((function(tt){var it=Fu[tt.type].BYTES_PER_ELEMENT,ot=nt=ki(nt,Math.max(et,it)),at=tt.components||1;return rt=Math.max(rt,it),nt+=it*at,{name:tt.name,type:tt.type,components:at,offset:ot}})),size:ki(nt,Math.max(rt,et)),alignment:et}}function ki(tt,et){return Math.ceil(tt/et)*et}Ai.serialize=function(tt,et){return tt._trim(),et&&(tt.isTransferred=!0,et.push(tt.arrayBuffer)),{length:tt.length,arrayBuffer:tt.arrayBuffer}},Ai.deserialize=function(tt){var et=Object.create(this.prototype);return et.arrayBuffer=tt.arrayBuffer,et.length=tt.length,et.capacity=tt.arrayBuffer.byteLength/et.bytesPerElement,et._refreshViews(),et},Ai.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ai.prototype.clear=function(){this.length=0},Ai.prototype.resize=function(tt){this.reserve(tt),this.length=tt},Ai.prototype.reserve=function(tt){if(tt>this.capacity){this.capacity=Math.max(tt,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var et=this.uint8;this._refreshViews(),et&&this.uint8.set(et)}},Ai.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var tl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et){var nt=this.length;return this.resize(nt+1),this.emplace(nt,tt,et)},e.prototype.emplace=function(tt,et,nt){var rt=2*tt;return this.int16[rt+0]=et,this.int16[rt+1]=nt,tt},e}(Ai);tl.prototype.bytesPerElement=4,Dn("StructArrayLayout2i4",tl);var ol=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt){var it=this.length;return this.resize(it+1),this.emplace(it,tt,et,nt,rt)},e.prototype.emplace=function(tt,et,nt,rt,it){var ot=4*tt;return this.int16[ot+0]=et,this.int16[ot+1]=nt,this.int16[ot+2]=rt,this.int16[ot+3]=it,tt},e}(Ai);ol.prototype.bytesPerElement=8,Dn("StructArrayLayout4i8",ol);var sl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt,it,ot){var at=this.length;return this.resize(at+1),this.emplace(at,tt,et,nt,rt,it,ot)},e.prototype.emplace=function(tt,et,nt,rt,it,ot,at){var st=6*tt;return this.int16[st+0]=et,this.int16[st+1]=nt,this.int16[st+2]=rt,this.int16[st+3]=it,this.int16[st+4]=ot,this.int16[st+5]=at,tt},e}(Ai);sl.prototype.bytesPerElement=12,Dn("StructArrayLayout2i4i12",sl);var dl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt,it,ot){var at=this.length;return this.resize(at+1),this.emplace(at,tt,et,nt,rt,it,ot)},e.prototype.emplace=function(tt,et,nt,rt,it,ot,at){var st=4*tt,ct=8*tt;return this.int16[st+0]=et,this.int16[st+1]=nt,this.uint8[ct+4]=rt,this.uint8[ct+5]=it,this.uint8[ct+6]=ot,this.uint8[ct+7]=at,tt},e}(Ai);dl.prototype.bytesPerElement=8,Dn("StructArrayLayout2i4ub8",dl);var gl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt,it,ot,at,st,ct,pt){var ft=this.length;return this.resize(ft+1),this.emplace(ft,tt,et,nt,rt,it,ot,at,st,ct,pt)},e.prototype.emplace=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft){var dt=10*tt;return this.uint16[dt+0]=et,this.uint16[dt+1]=nt,this.uint16[dt+2]=rt,this.uint16[dt+3]=it,this.uint16[dt+4]=ot,this.uint16[dt+5]=at,this.uint16[dt+6]=st,this.uint16[dt+7]=ct,this.uint16[dt+8]=pt,this.uint16[dt+9]=ft,tt},e}(Ai);gl.prototype.bytesPerElement=20,Dn("StructArrayLayout10ui20",gl);var yl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt){var mt=this.length;return this.resize(mt+1),this.emplace(mt,tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt)},e.prototype.emplace=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt){var yt=12*tt;return this.int16[yt+0]=et,this.int16[yt+1]=nt,this.int16[yt+2]=rt,this.int16[yt+3]=it,this.uint16[yt+4]=ot,this.uint16[yt+5]=at,this.uint16[yt+6]=st,this.uint16[yt+7]=ct,this.int16[yt+8]=pt,this.int16[yt+9]=ft,this.int16[yt+10]=dt,this.int16[yt+11]=mt,tt},e}(Ai);yl.prototype.bytesPerElement=24,Dn("StructArrayLayout4i4ui4i24",yl);var vl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt){var rt=this.length;return this.resize(rt+1),this.emplace(rt,tt,et,nt)},e.prototype.emplace=function(tt,et,nt,rt){var it=3*tt;return this.float32[it+0]=et,this.float32[it+1]=nt,this.float32[it+2]=rt,tt},e}(Ai);vl.prototype.bytesPerElement=12,Dn("StructArrayLayout3f12",vl);var _l=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt){var et=this.length;return this.resize(et+1),this.emplace(et,tt)},e.prototype.emplace=function(tt,et){return this.uint32[1*tt+0]=et,tt},e}(Ai);_l.prototype.bytesPerElement=4,Dn("StructArrayLayout1ul4",_l);var xl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt,it,ot,at,st,ct){var pt=this.length;return this.resize(pt+1),this.emplace(pt,tt,et,nt,rt,it,ot,at,st,ct)},e.prototype.emplace=function(tt,et,nt,rt,it,ot,at,st,ct,pt){var ft=10*tt,dt=5*tt;return this.int16[ft+0]=et,this.int16[ft+1]=nt,this.int16[ft+2]=rt,this.int16[ft+3]=it,this.int16[ft+4]=ot,this.int16[ft+5]=at,this.uint32[dt+3]=st,this.uint16[ft+8]=ct,this.uint16[ft+9]=pt,tt},e}(Ai);xl.prototype.bytesPerElement=20,Dn("StructArrayLayout6i1ul2ui20",xl);var bl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt,it,ot){var at=this.length;return this.resize(at+1),this.emplace(at,tt,et,nt,rt,it,ot)},e.prototype.emplace=function(tt,et,nt,rt,it,ot,at){var st=6*tt;return this.int16[st+0]=et,this.int16[st+1]=nt,this.int16[st+2]=rt,this.int16[st+3]=it,this.int16[st+4]=ot,this.int16[st+5]=at,tt},e}(Ai);bl.prototype.bytesPerElement=12,Dn("StructArrayLayout2i2i2i12",bl);var wl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt,it){var ot=this.length;return this.resize(ot+1),this.emplace(ot,tt,et,nt,rt,it)},e.prototype.emplace=function(tt,et,nt,rt,it,ot){var at=4*tt,st=8*tt;return this.float32[at+0]=et,this.float32[at+1]=nt,this.float32[at+2]=rt,this.int16[st+6]=it,this.int16[st+7]=ot,tt},e}(Ai);wl.prototype.bytesPerElement=16,Dn("StructArrayLayout2f1f2i16",wl);var Sl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt){var it=this.length;return this.resize(it+1),this.emplace(it,tt,et,nt,rt)},e.prototype.emplace=function(tt,et,nt,rt,it){var ot=12*tt,at=3*tt;return this.uint8[ot+0]=et,this.uint8[ot+1]=nt,this.float32[at+1]=rt,this.float32[at+2]=it,tt},e}(Ai);Sl.prototype.bytesPerElement=12,Dn("StructArrayLayout2ub2f12",Sl);var Cl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt){var rt=this.length;return this.resize(rt+1),this.emplace(rt,tt,et,nt)},e.prototype.emplace=function(tt,et,nt,rt){var it=3*tt;return this.uint16[it+0]=et,this.uint16[it+1]=nt,this.uint16[it+2]=rt,tt},e}(Ai);Cl.prototype.bytesPerElement=6,Dn("StructArrayLayout3ui6",Cl);var kl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt,Ot){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt,Ot)},e.prototype.emplace=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt,Ot,Rt){var Bt=24*tt,Ne=12*tt,rn=48*tt;return this.int16[Bt+0]=et,this.int16[Bt+1]=nt,this.uint16[Bt+2]=rt,this.uint16[Bt+3]=it,this.uint32[Ne+2]=ot,this.uint32[Ne+3]=at,this.uint32[Ne+4]=st,this.uint16[Bt+10]=ct,this.uint16[Bt+11]=pt,this.uint16[Bt+12]=ft,this.float32[Ne+7]=dt,this.float32[Ne+8]=mt,this.uint8[rn+36]=yt,this.uint8[rn+37]=vt,this.uint8[rn+38]=Dt,this.uint32[Ne+10]=Ot,this.int16[Bt+22]=Rt,tt},e}(Ai);kl.prototype.bytesPerElement=48,Dn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",kl);var Il=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt,Ot,Rt,Bt,Ne,rn,vn,bn,Tn,Cn,Ln,In,Mn){var zn=this.length;return this.resize(zn+1),this.emplace(zn,tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt,Ot,Rt,Bt,Ne,rn,vn,bn,Tn,Cn,Ln,In,Mn)},e.prototype.emplace=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt,Ot,Rt,Bt,Ne,rn,vn,bn,Tn,Cn,Ln,In,Mn,zn){var Bn=34*tt,Fn=17*tt;return this.int16[Bn+0]=et,this.int16[Bn+1]=nt,this.int16[Bn+2]=rt,this.int16[Bn+3]=it,this.int16[Bn+4]=ot,this.int16[Bn+5]=at,this.int16[Bn+6]=st,this.int16[Bn+7]=ct,this.uint16[Bn+8]=pt,this.uint16[Bn+9]=ft,this.uint16[Bn+10]=dt,this.uint16[Bn+11]=mt,this.uint16[Bn+12]=yt,this.uint16[Bn+13]=vt,this.uint16[Bn+14]=Dt,this.uint16[Bn+15]=Ot,this.uint16[Bn+16]=Rt,this.uint16[Bn+17]=Bt,this.uint16[Bn+18]=Ne,this.uint16[Bn+19]=rn,this.uint16[Bn+20]=vn,this.uint16[Bn+21]=bn,this.uint16[Bn+22]=Tn,this.uint32[Fn+12]=Cn,this.float32[Fn+13]=Ln,this.float32[Fn+14]=In,this.float32[Fn+15]=Mn,this.float32[Fn+16]=zn,tt},e}(Ai);Il.prototype.bytesPerElement=68,Dn("StructArrayLayout8i15ui1ul4f68",Il);var Al=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt){var et=this.length;return this.resize(et+1),this.emplace(et,tt)},e.prototype.emplace=function(tt,et){return this.float32[1*tt+0]=et,tt},e}(Ai);Al.prototype.bytesPerElement=4,Dn("StructArrayLayout1f4",Al);var zl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt){var rt=this.length;return this.resize(rt+1),this.emplace(rt,tt,et,nt)},e.prototype.emplace=function(tt,et,nt,rt){var it=3*tt;return this.int16[it+0]=et,this.int16[it+1]=nt,this.int16[it+2]=rt,tt},e}(Ai);zl.prototype.bytesPerElement=6,Dn("StructArrayLayout3i6",zl);var Fl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt){var rt=this.length;return this.resize(rt+1),this.emplace(rt,tt,et,nt)},e.prototype.emplace=function(tt,et,nt,rt){var it=4*tt;return this.uint32[2*tt+0]=et,this.uint16[it+2]=nt,this.uint16[it+3]=rt,tt},e}(Ai);Fl.prototype.bytesPerElement=8,Dn("StructArrayLayout1ul2ui8",Fl);var Hl=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et){var nt=this.length;return this.resize(nt+1),this.emplace(nt,tt,et)},e.prototype.emplace=function(tt,et,nt){var rt=2*tt;return this.uint16[rt+0]=et,this.uint16[rt+1]=nt,tt},e}(Ai);Hl.prototype.bytesPerElement=4,Dn("StructArrayLayout2ui4",Hl);var ac=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt){var et=this.length;return this.resize(et+1),this.emplace(et,tt)},e.prototype.emplace=function(tt,et){return this.uint16[1*tt+0]=et,tt},e}(Ai);ac.prototype.bytesPerElement=2,Dn("StructArrayLayout1ui2",ac);var pc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et){var nt=this.length;return this.resize(nt+1),this.emplace(nt,tt,et)},e.prototype.emplace=function(tt,et,nt){var rt=2*tt;return this.float32[rt+0]=et,this.float32[rt+1]=nt,tt},e}(Ai);pc.prototype.bytesPerElement=8,Dn("StructArrayLayout2f8",pc);var yc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(tt,et,nt,rt){var it=this.length;return this.resize(it+1),this.emplace(it,tt,et,nt,rt)},e.prototype.emplace=function(tt,et,nt,rt,it){var ot=4*tt;return this.float32[ot+0]=et,this.float32[ot+1]=nt,this.float32[ot+2]=rt,this.float32[ot+3]=it,tt},e}(Ai);yc.prototype.bytesPerElement=16,Dn("StructArrayLayout4f16",yc);var _c=function(tt){function e(){tt.apply(this,arguments)}tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e;var et={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return et.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},et.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},et.x1.get=function(){return this._structArray.int16[this._pos2+2]},et.y1.get=function(){return this._structArray.int16[this._pos2+3]},et.x2.get=function(){return this._structArray.int16[this._pos2+4]},et.y2.get=function(){return this._structArray.int16[this._pos2+5]},et.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},et.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},et.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},et.anchorPoint.get=function(){return new nt(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,et),e}(_i);_c.prototype.size=20;var xc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.get=function(tt){return new _c(this,tt)},e}(xl);Dn("CollisionBoxArray",xc);var bc=function(tt){function e(){tt.apply(this,arguments)}tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e;var et={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return et.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},et.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},et.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},et.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},et.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},et.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},et.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},et.segment.get=function(){return this._structArray.uint16[this._pos2+10]},et.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},et.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},et.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},et.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},et.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},et.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},et.placedOrientation.set=function(tt){this._structArray.uint8[this._pos1+37]=tt},et.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},et.hidden.set=function(tt){this._structArray.uint8[this._pos1+38]=tt},et.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},et.crossTileID.set=function(tt){this._structArray.uint32[this._pos4+10]=tt},et.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,et),e}(_i);bc.prototype.size=48;var wc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.get=function(tt){return new bc(this,tt)},e}(kl);Dn("PlacedSymbolArray",wc);var Ec=function(tt){function e(){tt.apply(this,arguments)}tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e;var et={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return et.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},et.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},et.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},et.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},et.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},et.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},et.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},et.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},et.key.get=function(){return this._structArray.uint16[this._pos2+8]},et.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},et.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},et.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},et.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},et.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},et.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},et.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},et.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},et.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},et.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},et.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},et.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},et.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},et.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},et.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},et.crossTileID.set=function(tt){this._structArray.uint32[this._pos4+12]=tt},et.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},et.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},et.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},et.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,et),e}(_i);Ec.prototype.size=68;var Cc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.get=function(tt){return new Ec(this,tt)},e}(Il);Dn("SymbolInstanceArray",Cc);var kc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getoffsetX=function(tt){return this.float32[1*tt+0]},e}(Al);Dn("GlyphOffsetArray",kc);var Ic=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getx=function(tt){return this.int16[3*tt+0]},e.prototype.gety=function(tt){return this.int16[3*tt+1]},e.prototype.gettileUnitDistanceFromAnchor=function(tt){return this.int16[3*tt+2]},e}(zl);Dn("SymbolLineVertexArray",Ic);var Ac=function(tt){function e(){tt.apply(this,arguments)}tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e;var et={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return et.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},et.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},et.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,et),e}(_i);Ac.prototype.size=8;var zc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.get=function(tt){return new Ac(this,tt)},e}(Fl);Dn("FeatureIndexArray",zc);var Dc=Si([{name:"a_pos",components:2,type:"Int16"}],4).members,aa=function(tt){void 0===tt&&(tt=[]),this.segments=tt};function oa(tt,et){return 256*(tt=l(Math.floor(tt),0,255))+l(Math.floor(et),0,255)}aa.prototype.prepareSegment=function(tt,et,nt,rt){var it=this.segments[this.segments.length-1];return tt>aa.MAX_VERTEX_ARRAY_LENGTH&&_("Max vertices per segment is "+aa.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+tt),(!it||it.vertexLength+tt>aa.MAX_VERTEX_ARRAY_LENGTH||it.sortKey!==rt)&&(it={vertexOffset:et.length,primitiveOffset:nt.length,vertexLength:0,primitiveLength:0},void 0!==rt&&(it.sortKey=rt),this.segments.push(it)),it},aa.prototype.get=function(){return this.segments},aa.prototype.destroy=function(){for(var tt=0,et=this.segments;tt<et.length;tt+=1){var nt=et[tt];for(var rt in nt.vaos)nt.vaos[rt].destroy()}},aa.simpleSegment=function(tt,et,nt,rt){return new aa([{vertexOffset:tt,primitiveOffset:et,vertexLength:nt,primitiveLength:rt,vaos:{},sortKey:0}])},aa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dn("SegmentVector",aa);var Bc=Si([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Fc=e((function(tt){tt.exports=function(tt,et){var nt,rt,it,ot,at,st,ct,pt;for(rt=tt.length-(nt=3&tt.length),it=et,at=3432918353,st=461845907,pt=0;pt<rt;)ct=255&tt.charCodeAt(pt)|(255&tt.charCodeAt(++pt))<<8|(255&tt.charCodeAt(++pt))<<16|(255&tt.charCodeAt(++pt))<<24,++pt,it=27492+(65535&(ot=5*(65535&(it=(it^=ct=(65535&(ct=(ct=(65535&ct)*at+(((ct>>>16)*at&65535)<<16)&4294967295)<<15|ct>>>17))*st+(((ct>>>16)*st&65535)<<16)&4294967295)<<13|it>>>19))+((5*(it>>>16)&65535)<<16)&4294967295))+((58964+(ot>>>16)&65535)<<16);switch(ct=0,nt){case 3:ct^=(255&tt.charCodeAt(pt+2))<<16;case 2:ct^=(255&tt.charCodeAt(pt+1))<<8;case 1:it^=ct=(65535&(ct=(ct=(65535&(ct^=255&tt.charCodeAt(pt)))*at+(((ct>>>16)*at&65535)<<16)&4294967295)<<15|ct>>>17))*st+(((ct>>>16)*st&65535)<<16)&4294967295}return it^=tt.length,it=2246822507*(65535&(it^=it>>>16))+((2246822507*(it>>>16)&65535)<<16)&4294967295,it=3266489909*(65535&(it^=it>>>13))+((3266489909*(it>>>16)&65535)<<16)&4294967295,(it^=it>>>16)>>>0}})),Zc=e((function(tt){tt.exports=function(tt,et){for(var nt,rt=tt.length,it=et^rt,ot=0;rt>=4;)nt=1540483477*(65535&(nt=255&tt.charCodeAt(ot)|(255&tt.charCodeAt(++ot))<<8|(255&tt.charCodeAt(++ot))<<16|(255&tt.charCodeAt(++ot))<<24))+((1540483477*(nt>>>16)&65535)<<16),it=1540483477*(65535&it)+((1540483477*(it>>>16)&65535)<<16)^(nt=1540483477*(65535&(nt^=nt>>>24))+((1540483477*(nt>>>16)&65535)<<16)),rt-=4,++ot;switch(rt){case 3:it^=(255&tt.charCodeAt(ot+2))<<16;case 2:it^=(255&tt.charCodeAt(ot+1))<<8;case 1:it=1540483477*(65535&(it^=255&tt.charCodeAt(ot)))+((1540483477*(it>>>16)&65535)<<16)}return it=1540483477*(65535&(it^=it>>>13))+((1540483477*(it>>>16)&65535)<<16),(it^=it>>>15)>>>0}})),Hc=Fc,Wc=Zc;Hc.murmur3=Fc,Hc.murmur2=Wc;var ha=function(){this.ids=[],this.positions=[],this.indexed=!1};ha.prototype.add=function(tt,et,nt,rt){this.ids.push(ya(tt)),this.positions.push(et,nt,rt)},ha.prototype.getPositions=function(tt){for(var et=ya(tt),nt=0,rt=this.ids.length-1;nt<rt;){var it=nt+rt>>1;this.ids[it]>=et?rt=it:nt=it+1}for(var ot=[];this.ids[nt]===et;)ot.push({index:this.positions[3*nt],start:this.positions[3*nt+1],end:this.positions[3*nt+2]}),nt++;return ot},ha.serialize=function(tt,et){var nt=new Float64Array(tt.ids),rt=new Uint32Array(tt.positions);return function t(tt,et,nt,rt){for(;nt<rt;){for(var it=tt[nt+rt>>1],ot=nt-1,at=rt+1;;){do{ot++}while(tt[ot]<it);do{at--}while(tt[at]>it);if(ot>=at)break;da(tt,ot,at),da(et,3*ot,3*at),da(et,3*ot+1,3*at+1),da(et,3*ot+2,3*at+2)}at-nt<rt-at?(t(tt,et,nt,at),nt=at+1):(t(tt,et,at+1,rt),rt=at)}}(nt,rt,0,nt.length-1),et&&et.push(nt.buffer,rt.buffer),{ids:nt,positions:rt}},ha.deserialize=function(tt){var et=new ha;return et.ids=tt.ids,et.positions=tt.positions,et.indexed=!0,et};var Gc=Math.pow(2,53)-1;function ya(tt){var et=+tt;return!isNaN(et)&&et<=Gc?et:Hc(String(tt))}function da(tt,et,nt){var rt=tt[et];tt[et]=tt[nt],tt[nt]=rt}Dn("FeaturePositionMap",ha);var ma=function(tt,et){this.gl=tt.gl,this.location=et},Xc=function(tt){function e(et,nt){tt.call(this,et,nt),this.current=0}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.set=function(tt){this.current!==tt&&(this.current=tt,this.gl.uniform1i(this.location,tt))},e}(ma),$c=function(tt){function e(et,nt){tt.call(this,et,nt),this.current=0}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.set=function(tt){this.current!==tt&&(this.current=tt,this.gl.uniform1f(this.location,tt))},e}(ma),Yc=function(tt){function e(et,nt){tt.call(this,et,nt),this.current=[0,0]}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.set=function(tt){tt[0]===this.current[0]&&tt[1]===this.current[1]||(this.current=tt,this.gl.uniform2f(this.location,tt[0],tt[1]))},e}(ma),rp=function(tt){function e(et,nt){tt.call(this,et,nt),this.current=[0,0,0]}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.set=function(tt){tt[0]===this.current[0]&&tt[1]===this.current[1]&&tt[2]===this.current[2]||(this.current=tt,this.gl.uniform3f(this.location,tt[0],tt[1],tt[2]))},e}(ma),ip=function(tt){function e(et,nt){tt.call(this,et,nt),this.current=[0,0,0,0]}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.set=function(tt){tt[0]===this.current[0]&&tt[1]===this.current[1]&&tt[2]===this.current[2]&&tt[3]===this.current[3]||(this.current=tt,this.gl.uniform4f(this.location,tt[0],tt[1],tt[2],tt[3]))},e}(ma),op=function(tt){function e(et,nt){tt.call(this,et,nt),this.current=Wt.transparent}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.set=function(tt){tt.r===this.current.r&&tt.g===this.current.g&&tt.b===this.current.b&&tt.a===this.current.a||(this.current=tt,this.gl.uniform4f(this.location,tt.r,tt.g,tt.b,tt.a))},e}(ma),ap=new Float32Array(16),sp=function(tt){function e(et,nt){tt.call(this,et,nt),this.current=ap}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.set=function(tt){if(tt[12]!==this.current[12]||tt[0]!==this.current[0])return this.current=tt,void this.gl.uniformMatrix4fv(this.location,!1,tt);for(var et=1;et<16;et++)if(tt[et]!==this.current[et]){this.current=tt,this.gl.uniformMatrix4fv(this.location,!1,tt);break}},e}(ma);function ka(tt){return[oa(255*tt.r,255*tt.g),oa(255*tt.b,255*tt.a)]}var Ia=function(tt,et,nt){this.value=tt,this.uniformNames=et.map((function(tt){return"u_"+tt})),this.type=nt};Ia.prototype.setUniform=function(tt,et,nt){tt.set(nt.constantOr(this.value))},Ia.prototype.getBinding=function(tt,et,nt){return"color"===this.type?new op(tt,et):new $c(tt,et)};var za=function(tt,et){this.uniformNames=et.map((function(tt){return"u_"+tt})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};za.prototype.setConstantPatternPositions=function(tt,et){this.pixelRatioFrom=et.pixelRatio,this.pixelRatioTo=tt.pixelRatio,this.patternFrom=et.tlbr,this.patternTo=tt.tlbr},za.prototype.setUniform=function(tt,et,nt,rt){var it="u_pattern_to"===rt?this.patternTo:"u_pattern_from"===rt?this.patternFrom:"u_pixel_ratio_to"===rt?this.pixelRatioTo:"u_pixel_ratio_from"===rt?this.pixelRatioFrom:null;it&&tt.set(it)},za.prototype.getBinding=function(tt,et,nt){return"u_pattern"===nt.substr(0,9)?new ip(tt,et):new $c(tt,et)};var Ca=function(tt,et,nt,rt){this.expression=tt,this.type=nt,this.maxValue=0,this.paintVertexAttributes=et.map((function(tt){return{name:"a_"+tt,type:"Float32",components:"color"===nt?2:1,offset:0}})),this.paintVertexArray=new rt};Ca.prototype.populatePaintArray=function(tt,et,nt,rt,it){var ot=this.paintVertexArray.length,at=this.expression.evaluate(new ai(0),et,{},rt,[],it);this.paintVertexArray.resize(tt),this._setPaintValue(ot,tt,at)},Ca.prototype.updatePaintArray=function(tt,et,nt,rt){var it=this.expression.evaluate({zoom:0},nt,rt);this._setPaintValue(tt,et,it)},Ca.prototype._setPaintValue=function(tt,et,nt){if("color"===this.type)for(var rt=ka(nt),it=tt;it<et;it++)this.paintVertexArray.emplace(it,rt[0],rt[1]);else{for(var ot=tt;ot<et;ot++)this.paintVertexArray.emplace(ot,nt);this.maxValue=Math.max(this.maxValue,Math.abs(nt))}},Ca.prototype.upload=function(tt){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=tt.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ma=function(tt,et,nt,rt,it,ot){this.expression=tt,this.uniformNames=et.map((function(tt){return"u_"+tt+"_t"})),this.type=nt,this.useIntegerZoom=rt,this.zoom=it,this.maxValue=0,this.paintVertexAttributes=et.map((function(tt){return{name:"a_"+tt,type:"Float32",components:"color"===nt?4:2,offset:0}})),this.paintVertexArray=new ot};Ma.prototype.populatePaintArray=function(tt,et,nt,rt,it){var ot=this.expression.evaluate(new ai(this.zoom),et,{},rt,[],it),at=this.expression.evaluate(new ai(this.zoom+1),et,{},rt,[],it),st=this.paintVertexArray.length;this.paintVertexArray.resize(tt),this._setPaintValue(st,tt,ot,at)},Ma.prototype.updatePaintArray=function(tt,et,nt,rt){var it=this.expression.evaluate({zoom:this.zoom},nt,rt),ot=this.expression.evaluate({zoom:this.zoom+1},nt,rt);this._setPaintValue(tt,et,it,ot)},Ma.prototype._setPaintValue=function(tt,et,nt,rt){if("color"===this.type)for(var it=ka(nt),ot=ka(rt),at=tt;at<et;at++)this.paintVertexArray.emplace(at,it[0],it[1],ot[0],ot[1]);else{for(var st=tt;st<et;st++)this.paintVertexArray.emplace(st,nt,rt);this.maxValue=Math.max(this.maxValue,Math.abs(nt),Math.abs(rt))}},Ma.prototype.upload=function(tt){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=tt.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ma.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ma.prototype.setUniform=function(tt,et){var nt=this.useIntegerZoom?Math.floor(et.zoom):et.zoom,rt=l(this.expression.interpolationFactor(nt,this.zoom,this.zoom+1),0,1);tt.set(rt)},Ma.prototype.getBinding=function(tt,et,nt){return new $c(tt,et)};var Ea=function(tt,et,nt,rt,it,ot){this.expression=tt,this.type=et,this.useIntegerZoom=nt,this.zoom=rt,this.layerId=ot,this.zoomInPaintVertexArray=new it,this.zoomOutPaintVertexArray=new it};Ea.prototype.populatePaintArray=function(tt,et,nt){var rt=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(tt),this.zoomOutPaintVertexArray.resize(tt),this._setPaintValues(rt,tt,et.patterns&&et.patterns[this.layerId],nt)},Ea.prototype.updatePaintArray=function(tt,et,nt,rt,it){this._setPaintValues(tt,et,nt.patterns&&nt.patterns[this.layerId],it)},Ea.prototype._setPaintValues=function(tt,et,nt,rt){if(rt&&nt){var it=rt[nt.min],ot=rt[nt.mid],at=rt[nt.max];if(it&&ot&&at)for(var st=tt;st<et;st++)this.zoomInPaintVertexArray.emplace(st,ot.tl[0],ot.tl[1],ot.br[0],ot.br[1],it.tl[0],it.tl[1],it.br[0],it.br[1],ot.pixelRatio,it.pixelRatio),this.zoomOutPaintVertexArray.emplace(st,ot.tl[0],ot.tl[1],ot.br[0],ot.br[1],at.tl[0],at.tl[1],at.br[0],at.br[1],ot.pixelRatio,at.pixelRatio)}},Ea.prototype.upload=function(tt){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=tt.createVertexBuffer(this.zoomInPaintVertexArray,Bc.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=tt.createVertexBuffer(this.zoomOutPaintVertexArray,Bc.members,this.expression.isStateDependent))},Ea.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ta=function(tt,et,nt){this.binders={},this._buffers=[];var rt=[];for(var it in tt.paint._values)if(nt(it)){var ot=tt.paint.get(it);if(ot instanceof hi&&Tr(ot.property.specification)){var at=Ba(it,tt.type),st=ot.value,ct=ot.property.specification.type,pt=ot.property.useIntegerZoom,ft=ot.property.specification["property-type"],dt="cross-faded"===ft||"cross-faded-data-driven"===ft;if("constant"===st.kind)this.binders[it]=dt?new za(st.value,at):new Ia(st.value,at,ct),rt.push("/u_"+it);else if("source"===st.kind||dt){var mt=Va(it,ct,"source");this.binders[it]=dt?new Ea(st,ct,pt,et,mt,tt.id):new Ca(st,at,ct,mt),rt.push("/a_"+it)}else{var yt=Va(it,ct,"composite");this.binders[it]=new Ma(st,at,ct,pt,et,yt),rt.push("/z_"+it)}}}this.cacheKey=rt.sort().join("")};Ta.prototype.getMaxValue=function(tt){var et=this.binders[tt];return et instanceof Ca||et instanceof Ma?et.maxValue:0},Ta.prototype.populatePaintArrays=function(tt,et,nt,rt,it){for(var ot in this.binders){var at=this.binders[ot];(at instanceof Ca||at instanceof Ma||at instanceof Ea)&&at.populatePaintArray(tt,et,nt,rt,it)}},Ta.prototype.setConstantPatternPositions=function(tt,et){for(var nt in this.binders){var rt=this.binders[nt];rt instanceof za&&rt.setConstantPatternPositions(tt,et)}},Ta.prototype.updatePaintArrays=function(tt,et,nt,rt,it){var ot=!1;for(var at in tt)for(var st=0,ct=et.getPositions(at);st<ct.length;st+=1){var pt=ct[st],ft=nt.feature(pt.index);for(var dt in this.binders){var mt=this.binders[dt];if((mt instanceof Ca||mt instanceof Ma||mt instanceof Ea)&&!0===mt.expression.isStateDependent){var yt=rt.paint.get(dt);mt.expression=yt.value,mt.updatePaintArray(pt.start,pt.end,ft,tt[at],it),ot=!0}}}return ot},Ta.prototype.defines=function(){var tt=[];for(var et in this.binders){var nt=this.binders[et];(nt instanceof Ia||nt instanceof za)&&tt.push.apply(tt,nt.uniformNames.map((function(tt){return"#define HAS_UNIFORM_"+tt})))}return tt},Ta.prototype.getBinderAttributes=function(){var tt=[];for(var et in this.binders){var nt=this.binders[et];if(nt instanceof Ca||nt instanceof Ma)for(var rt=0;rt<nt.paintVertexAttributes.length;rt++)tt.push(nt.paintVertexAttributes[rt].name);else if(nt instanceof Ea)for(var it=0;it<Bc.members.length;it++)tt.push(Bc.members[it].name)}return tt},Ta.prototype.getBinderUniforms=function(){var tt=[];for(var et in this.binders){var nt=this.binders[et];if(nt instanceof Ia||nt instanceof za||nt instanceof Ma)for(var rt=0,it=nt.uniformNames;rt<it.length;rt+=1)tt.push(it[rt])}return tt},Ta.prototype.getPaintVertexBuffers=function(){return this._buffers},Ta.prototype.getUniforms=function(tt,et){var nt=[];for(var rt in this.binders){var it=this.binders[rt];if(it instanceof Ia||it instanceof za||it instanceof Ma)for(var ot=0,at=it.uniformNames;ot<at.length;ot+=1){var st=at[ot];if(et[st]){var ct=it.getBinding(tt,et[st],st);nt.push({name:st,property:rt,binding:ct})}}}return nt},Ta.prototype.setUniforms=function(tt,et,nt,rt){for(var it=0,ot=et;it<ot.length;it+=1){var at=ot[it],st=at.name,ct=at.property;this.binders[ct].setUniform(at.binding,rt,nt.get(ct),st)}},Ta.prototype.updatePaintBuffers=function(tt){for(var et in this._buffers=[],this.binders){var nt=this.binders[et];if(tt&&nt instanceof Ea){var rt=2===tt.fromScale?nt.zoomInPaintVertexBuffer:nt.zoomOutPaintVertexBuffer;rt&&this._buffers.push(rt)}else(nt instanceof Ca||nt instanceof Ma)&&nt.paintVertexBuffer&&this._buffers.push(nt.paintVertexBuffer)}},Ta.prototype.upload=function(tt){for(var et in this.binders){var nt=this.binders[et];(nt instanceof Ca||nt instanceof Ma||nt instanceof Ea)&&nt.upload(tt)}this.updatePaintBuffers()},Ta.prototype.destroy=function(){for(var tt in this.binders){var et=this.binders[tt];(et instanceof Ca||et instanceof Ma||et instanceof Ea)&&et.destroy()}};var Pa=function(tt,et,nt){void 0===nt&&(nt=function(){return!0}),this.programConfigurations={};for(var rt=0,it=tt;rt<it.length;rt+=1){var ot=it[rt];this.programConfigurations[ot.id]=new Ta(ot,et,nt)}this.needsUpload=!1,this._featureMap=new ha,this._bufferOffset=0};function Ba(tt,et){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[tt]||[tt.replace(et+"-","").replace(/-/g,"_")]}function Va(tt,et,nt){var rt={color:{source:pc,composite:yc},number:{source:Al,composite:pc}},it=function(tt){return{"line-pattern":{source:gl,composite:gl},"fill-pattern":{source:gl,composite:gl},"fill-extrusion-pattern":{source:gl,composite:gl}}[tt]}(tt);return it&&it[nt]||rt[et][nt]}Pa.prototype.populatePaintArrays=function(tt,et,nt,rt,it,ot){for(var at in this.programConfigurations)this.programConfigurations[at].populatePaintArrays(tt,et,rt,it,ot);void 0!==et.id&&this._featureMap.add(et.id,nt,this._bufferOffset,tt),this._bufferOffset=tt,this.needsUpload=!0},Pa.prototype.updatePaintArrays=function(tt,et,nt,rt){for(var it=0,ot=nt;it<ot.length;it+=1){var at=ot[it];this.needsUpload=this.programConfigurations[at.id].updatePaintArrays(tt,this._featureMap,et,at,rt)||this.needsUpload}},Pa.prototype.get=function(tt){return this.programConfigurations[tt]},Pa.prototype.upload=function(tt){if(this.needsUpload){for(var et in this.programConfigurations)this.programConfigurations[et].upload(tt);this.needsUpload=!1}},Pa.prototype.destroy=function(){for(var tt in this.programConfigurations)this.programConfigurations[tt].destroy()},Dn("ConstantBinder",Ia),Dn("CrossFadedConstantBinder",za),Dn("SourceExpressionBinder",Ca),Dn("CrossFadedCompositeBinder",Ea),Dn("CompositeExpressionBinder",Ma),Dn("ProgramConfiguration",Ta,{omit:["_buffers"]}),Dn("ProgramConfigurationSet",Pa);var up=Math.pow(2,14)-1,lp=-up-1;function La(tt){for(var et=8192/tt.extent,nt=tt.loadGeometry(),rt=0;rt<nt.length;rt++)for(var it=nt[rt],ot=0;ot<it.length;ot++){var at=it[ot],st=Math.round(at.x*et),ct=Math.round(at.y*et);at.x=l(st,lp,up),at.y=l(ct,lp,up),(st<at.x||st>at.x+1||ct<at.y||ct>at.y+1)&&_("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return nt}function Ra(tt,et,nt,rt,it){tt.emplaceBack(2*et+(rt+1)/2,2*nt+(it+1)/2)}var Oa=function(tt){this.zoom=tt.zoom,this.overscaling=tt.overscaling,this.layers=tt.layers,this.layerIds=this.layers.map((function(tt){return tt.id})),this.index=tt.index,this.hasPattern=!1,this.layoutVertexArray=new tl,this.indexArray=new Cl,this.segments=new aa,this.programConfigurations=new Pa(tt.layers,tt.zoom),this.stateDependentLayerIds=this.layers.filter((function(tt){return tt.isStateDependent()})).map((function(tt){return tt.id}))};function Ua(tt,et){for(var nt=0;nt<tt.length;nt++)if(Ha(et,tt[nt]))return!0;for(var rt=0;rt<et.length;rt++)if(Ha(tt,et[rt]))return!0;return!!Ka(tt,et)}function ja(tt,et,nt){return!!Ha(tt,et)||!!Za(et,tt,nt)}function qa(tt,et){if(1===tt.length)return Ja(et,tt[0]);for(var nt=0;nt<et.length;nt++)for(var rt=et[nt],it=0;it<rt.length;it++)if(Ha(tt,rt[it]))return!0;for(var ot=0;ot<tt.length;ot++)if(Ja(et,tt[ot]))return!0;for(var at=0;at<et.length;at++)if(Ka(tt,et[at]))return!0;return!1}function Na(tt,et,nt){if(tt.length>1){if(Ka(tt,et))return!0;for(var rt=0;rt<et.length;rt++)if(Za(et[rt],tt,nt))return!0}for(var it=0;it<tt.length;it++)if(Za(tt[it],et,nt))return!0;return!1}function Ka(tt,et){if(0===tt.length||0===et.length)return!1;for(var nt=0;nt<tt.length-1;nt++)for(var rt=tt[nt],it=tt[nt+1],ot=0;ot<et.length-1;ot++)if(Ga(rt,it,et[ot],et[ot+1]))return!0;return!1}function Ga(tt,et,nt,rt){return A(tt,nt,rt)!==A(et,nt,rt)&&A(tt,et,nt)!==A(tt,et,rt)}function Za(tt,et,nt){var rt=nt*nt;if(1===et.length)return tt.distSqr(et[0])<rt;for(var it=1;it<et.length;it++)if(Xa(tt,et[it-1],et[it])<rt)return!0;return!1}function Xa(tt,et,nt){var rt=et.distSqr(nt);if(0===rt)return tt.distSqr(et);var it=((tt.x-et.x)*(nt.x-et.x)+(tt.y-et.y)*(nt.y-et.y))/rt;return tt.distSqr(it<0?et:it>1?nt:nt.sub(et)._mult(it)._add(et))}function Ja(tt,et){for(var nt,rt,it,ot=!1,at=0;at<tt.length;at++)for(var st=0,ct=(nt=tt[at]).length-1;st<nt.length;ct=st++)(rt=nt[st]).y>et.y!=(it=nt[ct]).y>et.y&&et.x<(it.x-rt.x)*(et.y-rt.y)/(it.y-rt.y)+rt.x&&(ot=!ot);return ot}function Ha(tt,et){for(var nt=!1,rt=0,it=tt.length-1;rt<tt.length;it=rt++){var ot=tt[rt],at=tt[it];ot.y>et.y!=at.y>et.y&&et.x<(at.x-ot.x)*(et.y-ot.y)/(at.y-ot.y)+ot.x&&(nt=!nt)}return nt}function Ya(tt,et,nt){var rt=nt[0],it=nt[2];if(tt.x<rt.x&&et.x<rt.x||tt.x>it.x&&et.x>it.x||tt.y<rt.y&&et.y<rt.y||tt.y>it.y&&et.y>it.y)return!1;var ot=A(tt,et,nt[0]);return ot!==A(tt,et,nt[1])||ot!==A(tt,et,nt[2])||ot!==A(tt,et,nt[3])}function $a(tt,et,nt){var rt=et.paint.get(tt).value;return"constant"===rt.kind?rt.value:nt.programConfigurations.get(et.id).getMaxValue(tt)}function Wa(tt){return Math.sqrt(tt[0]*tt[0]+tt[1]*tt[1])}function Qa(tt,et,rt,it,ot){if(!et[0]&&!et[1])return tt;var at=nt.convert(et)._mult(ot);"viewport"===rt&&at._rotate(-it);for(var st=[],ct=0;ct<tt.length;ct++)st.push(tt[ct].sub(at));return st}Oa.prototype.populate=function(tt,et,nt){var rt=this.layers[0],it=[],ot=null;"circle"===rt.type&&(ot=rt.layout.get("circle-sort-key"));for(var at=0,st=tt;at<st.length;at+=1){var ct=st[at],pt=ct.feature,ft=ct.id,dt=ct.index,mt=ct.sourceLayerIndex,yt=this.layers[0]._featureFilter.needGeometry,vt={type:pt.type,id:ft,properties:pt.properties,geometry:yt?La(pt):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),vt,nt)){yt||(vt.geometry=La(pt));var Dt=ot?ot.evaluate(vt,{},nt):void 0;it.push({id:ft,properties:pt.properties,type:pt.type,sourceLayerIndex:mt,index:dt,geometry:vt.geometry,patterns:{},sortKey:Dt})}}ot&&it.sort((function(tt,et){return tt.sortKey-et.sortKey}));for(var Ot=0,Rt=it;Ot<Rt.length;Ot+=1){var Bt=Rt[Ot],Ne=Bt.geometry,rn=Bt.index,vn=Bt.sourceLayerIndex,bn=tt[rn].feature;this.addFeature(Bt,Ne,rn,nt),et.featureIndex.insert(bn,Ne,rn,vn,this.index)}},Oa.prototype.update=function(tt,et,nt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(tt,et,this.stateDependentLayers,nt)},Oa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Oa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Oa.prototype.upload=function(tt){this.uploaded||(this.layoutVertexBuffer=tt.createVertexBuffer(this.layoutVertexArray,Dc),this.indexBuffer=tt.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(tt),this.uploaded=!0},Oa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Oa.prototype.addFeature=function(tt,et,nt,rt){for(var it=0,ot=et;it<ot.length;it+=1)for(var at=0,st=ot[it];at<st.length;at+=1){var ct=st[at],pt=ct.x,ft=ct.y;if(!(pt<0||pt>=8192||ft<0||ft>=8192)){var dt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,tt.sortKey),mt=dt.vertexLength;Ra(this.layoutVertexArray,pt,ft,-1,-1),Ra(this.layoutVertexArray,pt,ft,1,-1),Ra(this.layoutVertexArray,pt,ft,1,1),Ra(this.layoutVertexArray,pt,ft,-1,1),this.indexArray.emplaceBack(mt,mt+1,mt+2),this.indexArray.emplaceBack(mt,mt+3,mt+2),dt.vertexLength+=4,dt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,tt,nt,{},rt)},Dn("CircleBucket",Oa,{omit:["layers"]});var cp=new xi({"circle-sort-key":new di(Sr.layout_circle["circle-sort-key"])}),pp={paint:new xi({"circle-radius":new di(Sr.paint_circle["circle-radius"]),"circle-color":new di(Sr.paint_circle["circle-color"]),"circle-blur":new di(Sr.paint_circle["circle-blur"]),"circle-opacity":new di(Sr.paint_circle["circle-opacity"]),"circle-translate":new yi(Sr.paint_circle["circle-translate"]),"circle-translate-anchor":new yi(Sr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yi(Sr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yi(Sr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new di(Sr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new di(Sr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new di(Sr.paint_circle["circle-stroke-opacity"])}),layout:cp},hp="undefined"!=typeof Float32Array?Float32Array:Array;function no(tt){return tt[0]=1,tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[5]=1,tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[10]=1,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,tt}function io(tt,et,nt){var rt=et[0],it=et[1],ot=et[2],at=et[3],st=et[4],ct=et[5],pt=et[6],ft=et[7],dt=et[8],mt=et[9],yt=et[10],vt=et[11],Dt=et[12],Ot=et[13],Rt=et[14],Bt=et[15],Ne=nt[0],rn=nt[1],vn=nt[2],bn=nt[3];return tt[0]=Ne*rt+rn*st+vn*dt+bn*Dt,tt[1]=Ne*it+rn*ct+vn*mt+bn*Ot,tt[2]=Ne*ot+rn*pt+vn*yt+bn*Rt,tt[3]=Ne*at+rn*ft+vn*vt+bn*Bt,tt[4]=(Ne=nt[4])*rt+(rn=nt[5])*st+(vn=nt[6])*dt+(bn=nt[7])*Dt,tt[5]=Ne*it+rn*ct+vn*mt+bn*Ot,tt[6]=Ne*ot+rn*pt+vn*yt+bn*Rt,tt[7]=Ne*at+rn*ft+vn*vt+bn*Bt,tt[8]=(Ne=nt[8])*rt+(rn=nt[9])*st+(vn=nt[10])*dt+(bn=nt[11])*Dt,tt[9]=Ne*it+rn*ct+vn*mt+bn*Ot,tt[10]=Ne*ot+rn*pt+vn*yt+bn*Rt,tt[11]=Ne*at+rn*ft+vn*vt+bn*Bt,tt[12]=(Ne=nt[12])*rt+(rn=nt[13])*st+(vn=nt[14])*dt+(bn=nt[15])*Dt,tt[13]=Ne*it+rn*ct+vn*mt+bn*Ot,tt[14]=Ne*ot+rn*pt+vn*yt+bn*Rt,tt[15]=Ne*at+rn*ft+vn*vt+bn*Bt,tt}Math.hypot||(Math.hypot=function(){for(var tt=arguments,et=0,nt=arguments.length;nt--;)et+=tt[nt]*tt[nt];return Math.sqrt(et)});var fp,dp=io;function so(tt,et,nt){var rt=et[0],it=et[1],ot=et[2],at=et[3];return tt[0]=nt[0]*rt+nt[4]*it+nt[8]*ot+nt[12]*at,tt[1]=nt[1]*rt+nt[5]*it+nt[9]*ot+nt[13]*at,tt[2]=nt[2]*rt+nt[6]*it+nt[10]*ot+nt[14]*at,tt[3]=nt[3]*rt+nt[7]*it+nt[11]*ot+nt[15]*at,tt}fp=new hp(3),hp!=Float32Array&&(fp[0]=0,fp[1]=0,fp[2]=0),function(){var tt=new hp(4);hp!=Float32Array&&(tt[0]=0,tt[1]=0,tt[2]=0,tt[3]=0)}();var mp=(function(){var tt=new hp(2);hp!=Float32Array&&(tt[0]=0,tt[1]=0)}(),function(tt){function e(et){tt.call(this,et,pp)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.createBucket=function(tt){return new Oa(tt)},e.prototype.queryRadius=function(tt){var et=tt;return $a("circle-radius",this,et)+$a("circle-stroke-width",this,et)+Wa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(tt,et,nt,rt,it,ot,at,st){for(var ct=Qa(tt,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ot.angle,at),pt=this.paint.get("circle-radius").evaluate(et,nt)+this.paint.get("circle-stroke-width").evaluate(et,nt),ft="map"===this.paint.get("circle-pitch-alignment"),dt=ft?ct:function(tt,et){return tt.map((function(tt){return lo(tt,et)}))}(ct,st),mt=ft?pt*at:pt,yt=0,vt=rt;yt<vt.length;yt+=1)for(var Dt=0,Ot=vt[yt];Dt<Ot.length;Dt+=1){var Rt=Ot[Dt],Bt=ft?Rt:lo(Rt,st),Ne=mt,rn=so([],[Rt.x,Rt.y,0,1],st);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Ne*=rn[3]/ot.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Ne*=ot.cameraToCenterDistance/rn[3]),ja(dt,Bt,Ne))return!0}return!1},e}(Tu));function lo(tt,et){var rt=so([],[tt.x,tt.y,0,1],et);return new nt(rt[0]/rt[3],rt[1]/rt[3])}var gp=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e}(Oa);function co(tt,et,nt,rt){var it=et.width,ot=et.height;if(rt){if(rt instanceof Uint8ClampedArray)rt=new Uint8Array(rt.buffer);else if(rt.length!==it*ot*nt)throw new RangeError("mismatched image size")}else rt=new Uint8Array(it*ot*nt);return tt.width=it,tt.height=ot,tt.data=rt,tt}function ho(tt,et,nt){var rt=et.width,it=et.height;if(rt!==tt.width||it!==tt.height){var ot=co({},{width:rt,height:it},nt);fo(tt,ot,{x:0,y:0},{x:0,y:0},{width:Math.min(tt.width,rt),height:Math.min(tt.height,it)},nt),tt.width=rt,tt.height=it,tt.data=ot.data}}function fo(tt,et,nt,rt,it,ot){if(0===it.width||0===it.height)return et;if(it.width>tt.width||it.height>tt.height||nt.x>tt.width-it.width||nt.y>tt.height-it.height)throw new RangeError("out of range source coordinates for image copy");if(it.width>et.width||it.height>et.height||rt.x>et.width-it.width||rt.y>et.height-it.height)throw new RangeError("out of range destination coordinates for image copy");for(var at=tt.data,st=et.data,ct=0;ct<it.height;ct++)for(var pt=((nt.y+ct)*tt.width+nt.x)*ot,ft=((rt.y+ct)*et.width+rt.x)*ot,dt=0;dt<it.width*ot;dt++)st[ft+dt]=at[pt+dt];return et}Dn("HeatmapBucket",gp,{omit:["layers"]});var yo=function(tt,et){co(this,tt,1,et)};yo.prototype.resize=function(tt){ho(this,tt,1)},yo.prototype.clone=function(){return new yo({width:this.width,height:this.height},new Uint8Array(this.data))},yo.copy=function(tt,et,nt,rt,it){fo(tt,et,nt,rt,it,1)};var mo=function(tt,et){co(this,tt,4,et)};mo.prototype.resize=function(tt){ho(this,tt,4)},mo.prototype.replace=function(tt,et){et?this.data.set(tt):this.data=tt instanceof Uint8ClampedArray?new Uint8Array(tt.buffer):tt},mo.prototype.clone=function(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))},mo.copy=function(tt,et,nt,rt,it){fo(tt,et,nt,rt,it,4)},Dn("AlphaImage",yo),Dn("RGBAImage",mo);var yp={paint:new xi({"heatmap-radius":new di(Sr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new di(Sr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yi(Sr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gi(Sr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yi(Sr.paint_heatmap["heatmap-opacity"])})};function go(tt,et){for(var nt=new Uint8Array(1024),rt={},it=0,ot=0;it<256;it++,ot+=4){rt[et]=it/255;var at=tt.evaluate(rt);nt[ot+0]=Math.floor(255*at.r/at.a),nt[ot+1]=Math.floor(255*at.g/at.a),nt[ot+2]=Math.floor(255*at.b/at.a),nt[ot+3]=Math.floor(255*at.a)}return new mo({width:256,height:1},nt)}var vp=function(tt){function e(et){tt.call(this,et,yp),this._updateColorRamp()}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.createBucket=function(tt){return new gp(tt)},e.prototype._handleSpecialPaintPropertyUpdate=function(tt){"heatmap-color"===tt&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=go(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Tu),_p={paint:new xi({"hillshade-illumination-direction":new yi(Sr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yi(Sr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yi(Sr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yi(Sr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yi(Sr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yi(Sr.paint_hillshade["hillshade-accent-color"])})},xp=function(tt){function e(et){tt.call(this,et,_p)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Tu),bp=Si([{name:"a_pos",components:2,type:"Int16"}],4).members,wp=ko,Sp=ko;function ko(tt,et,nt){nt=nt||2;var rt,it,ot,at,st,ct,pt,ft=et&&et.length,dt=ft?et[0]*nt:tt.length,mt=Io(tt,0,dt,nt,!0),yt=[];if(!mt||mt.next===mt.prev)return yt;if(ft&&(mt=function(tt,et,nt,rt){var it,ot,at,st=[];for(it=0,ot=et.length;it<ot;it++)(at=Io(tt,et[it]*rt,it<ot-1?et[it+1]*rt:tt.length,rt,!1))===at.next&&(at.steiner=!0),st.push(Lo(at));for(st.sort(Bo),it=0;it<st.length;it++)Vo(st[it],nt),nt=zo(nt,nt.next);return nt}(tt,et,mt,nt)),tt.length>80*nt){rt=ot=tt[0],it=at=tt[1];for(var vt=nt;vt<dt;vt+=nt)(st=tt[vt])<rt&&(rt=st),(ct=tt[vt+1])<it&&(it=ct),st>ot&&(ot=st),ct>at&&(at=ct);pt=0!==(pt=Math.max(ot-rt,at-it))?1/pt:0}return Co(mt,yt,nt,rt,it,pt),yt}function Io(tt,et,nt,rt,it){var ot,at;if(it===Yo(tt,et,nt,rt)>0)for(ot=et;ot<nt;ot+=rt)at=Xo(ot,tt[ot],tt[ot+1],at);else for(ot=nt-rt;ot>=et;ot-=rt)at=Xo(ot,tt[ot],tt[ot+1],at);return at&&jo(at,at.next)&&(Jo(at),at=at.next),at}function zo(tt,et){if(!tt)return tt;et||(et=tt);var nt,rt=tt;do{if(nt=!1,rt.steiner||!jo(rt,rt.next)&&0!==Uo(rt.prev,rt,rt.next))rt=rt.next;else{if(Jo(rt),(rt=et=rt.prev)===rt.next)break;nt=!0}}while(nt||rt!==et);return et}function Co(tt,et,nt,rt,it,ot,at){if(tt){!at&&ot&&function(tt,et,nt,rt){var it=tt;do{null===it.z&&(it.z=Do(it.x,it.y,et,nt,rt)),it.prevZ=it.prev,it.nextZ=it.next,it=it.next}while(it!==tt);it.prevZ.nextZ=null,it.prevZ=null,function(tt){var et,nt,rt,it,ot,at,st,ct,pt=1;do{for(nt=tt,tt=null,ot=null,at=0;nt;){for(at++,rt=nt,st=0,et=0;et<pt&&(st++,rt=rt.nextZ);et++);for(ct=pt;st>0||ct>0&&rt;)0!==st&&(0===ct||!rt||nt.z<=rt.z)?(it=nt,nt=nt.nextZ,st--):(it=rt,rt=rt.nextZ,ct--),ot?ot.nextZ=it:tt=it,it.prevZ=ot,ot=it;nt=rt}ot.nextZ=null,pt*=2}while(at>1)}(it)}(tt,rt,it,ot);for(var st,ct,pt=tt;tt.prev!==tt.next;)if(st=tt.prev,ct=tt.next,ot?Eo(tt,rt,it,ot):Mo(tt))et.push(st.i/nt),et.push(tt.i/nt),et.push(ct.i/nt),Jo(tt),tt=ct.next,pt=ct.next;else if((tt=ct)===pt){at?1===at?Co(tt=To(zo(tt),et,nt),et,nt,rt,it,ot,2):2===at&&Po(tt,et,nt,rt,it,ot):Co(zo(tt),et,nt,rt,it,ot,1);break}}}function Mo(tt){var et=tt.prev,nt=tt,rt=tt.next;if(Uo(et,nt,rt)>=0)return!1;for(var it=tt.next.next;it!==tt.prev;){if(Ro(et.x,et.y,nt.x,nt.y,rt.x,rt.y,it.x,it.y)&&Uo(it.prev,it,it.next)>=0)return!1;it=it.next}return!0}function Eo(tt,et,nt,rt){var it=tt.prev,ot=tt,at=tt.next;if(Uo(it,ot,at)>=0)return!1;for(var st=it.x>ot.x?it.x>at.x?it.x:at.x:ot.x>at.x?ot.x:at.x,ct=it.y>ot.y?it.y>at.y?it.y:at.y:ot.y>at.y?ot.y:at.y,pt=Do(it.x<ot.x?it.x<at.x?it.x:at.x:ot.x<at.x?ot.x:at.x,it.y<ot.y?it.y<at.y?it.y:at.y:ot.y<at.y?ot.y:at.y,et,nt,rt),ft=Do(st,ct,et,nt,rt),dt=tt.prevZ,mt=tt.nextZ;dt&&dt.z>=pt&&mt&&mt.z<=ft;){if(dt!==tt.prev&&dt!==tt.next&&Ro(it.x,it.y,ot.x,ot.y,at.x,at.y,dt.x,dt.y)&&Uo(dt.prev,dt,dt.next)>=0)return!1;if(dt=dt.prevZ,mt!==tt.prev&&mt!==tt.next&&Ro(it.x,it.y,ot.x,ot.y,at.x,at.y,mt.x,mt.y)&&Uo(mt.prev,mt,mt.next)>=0)return!1;mt=mt.nextZ}for(;dt&&dt.z>=pt;){if(dt!==tt.prev&&dt!==tt.next&&Ro(it.x,it.y,ot.x,ot.y,at.x,at.y,dt.x,dt.y)&&Uo(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;mt&&mt.z<=ft;){if(mt!==tt.prev&&mt!==tt.next&&Ro(it.x,it.y,ot.x,ot.y,at.x,at.y,mt.x,mt.y)&&Uo(mt.prev,mt,mt.next)>=0)return!1;mt=mt.nextZ}return!0}function To(tt,et,nt){var rt=tt;do{var it=rt.prev,ot=rt.next.next;!jo(it,ot)&&qo(it,rt,rt.next,ot)&&Go(it,ot)&&Go(ot,it)&&(et.push(it.i/nt),et.push(rt.i/nt),et.push(ot.i/nt),Jo(rt),Jo(rt.next),rt=tt=ot),rt=rt.next}while(rt!==tt);return zo(rt)}function Po(tt,et,nt,rt,it,ot){var at=tt;do{for(var st=at.next.next;st!==at.prev;){if(at.i!==st.i&&Oo(at,st)){var ct=Zo(at,st);return at=zo(at,at.next),ct=zo(ct,ct.next),Co(at,et,nt,rt,it,ot),void Co(ct,et,nt,rt,it,ot)}st=st.next}at=at.next}while(at!==tt)}function Bo(tt,et){return tt.x-et.x}function Vo(tt,et){if(et=function(tt,et){var nt,rt=et,it=tt.x,ot=tt.y,at=-1/0;do{if(ot<=rt.y&&ot>=rt.next.y&&rt.next.y!==rt.y){var st=rt.x+(ot-rt.y)*(rt.next.x-rt.x)/(rt.next.y-rt.y);if(st<=it&&st>at){if(at=st,st===it){if(ot===rt.y)return rt;if(ot===rt.next.y)return rt.next}nt=rt.x<rt.next.x?rt:rt.next}}rt=rt.next}while(rt!==et);if(!nt)return null;if(it===at)return nt;var ct,pt=nt,ft=nt.x,dt=nt.y,mt=1/0;rt=nt;do{it>=rt.x&&rt.x>=ft&&it!==rt.x&&Ro(ot<dt?it:at,ot,ft,dt,ot<dt?at:it,ot,rt.x,rt.y)&&(ct=Math.abs(ot-rt.y)/(it-rt.x),Go(rt,tt)&&(ct<mt||ct===mt&&(rt.x>nt.x||rt.x===nt.x&&Fo(nt,rt)))&&(nt=rt,mt=ct)),rt=rt.next}while(rt!==pt);return nt}(tt,et)){var nt=Zo(et,tt);zo(et,et.next),zo(nt,nt.next)}}function Fo(tt,et){return Uo(tt.prev,tt,et.prev)<0&&Uo(et.next,tt,tt.next)<0}function Do(tt,et,nt,rt,it){return(tt=1431655765&((tt=858993459&((tt=252645135&((tt=16711935&((tt=32767*(tt-nt)*it)|tt<<8))|tt<<4))|tt<<2))|tt<<1))|(et=1431655765&((et=858993459&((et=252645135&((et=16711935&((et=32767*(et-rt)*it)|et<<8))|et<<4))|et<<2))|et<<1))<<1}function Lo(tt){var et=tt,nt=tt;do{(et.x<nt.x||et.x===nt.x&&et.y<nt.y)&&(nt=et),et=et.next}while(et!==tt);return nt}function Ro(tt,et,nt,rt,it,ot,at,st){return(it-at)*(et-st)-(tt-at)*(ot-st)>=0&&(tt-at)*(rt-st)-(nt-at)*(et-st)>=0&&(nt-at)*(ot-st)-(it-at)*(rt-st)>=0}function Oo(tt,et){return tt.next.i!==et.i&&tt.prev.i!==et.i&&!function(tt,et){var nt=tt;do{if(nt.i!==tt.i&&nt.next.i!==tt.i&&nt.i!==et.i&&nt.next.i!==et.i&&qo(nt,nt.next,tt,et))return!0;nt=nt.next}while(nt!==tt);return!1}(tt,et)&&(Go(tt,et)&&Go(et,tt)&&function(tt,et){var nt=tt,rt=!1,it=(tt.x+et.x)/2,ot=(tt.y+et.y)/2;do{nt.y>ot!=nt.next.y>ot&&nt.next.y!==nt.y&&it<(nt.next.x-nt.x)*(ot-nt.y)/(nt.next.y-nt.y)+nt.x&&(rt=!rt),nt=nt.next}while(nt!==tt);return rt}(tt,et)&&(Uo(tt.prev,tt,et.prev)||Uo(tt,et.prev,et))||jo(tt,et)&&Uo(tt.prev,tt,tt.next)>0&&Uo(et.prev,et,et.next)>0)}function Uo(tt,et,nt){return(et.y-tt.y)*(nt.x-et.x)-(et.x-tt.x)*(nt.y-et.y)}function jo(tt,et){return tt.x===et.x&&tt.y===et.y}function qo(tt,et,nt,rt){var it=Ko(Uo(tt,et,nt)),ot=Ko(Uo(tt,et,rt)),at=Ko(Uo(nt,rt,tt)),st=Ko(Uo(nt,rt,et));return it!==ot&&at!==st||!(0!==it||!No(tt,nt,et))||!(0!==ot||!No(tt,rt,et))||!(0!==at||!No(nt,tt,rt))||!(0!==st||!No(nt,et,rt))}function No(tt,et,nt){return et.x<=Math.max(tt.x,nt.x)&&et.x>=Math.min(tt.x,nt.x)&&et.y<=Math.max(tt.y,nt.y)&&et.y>=Math.min(tt.y,nt.y)}function Ko(tt){return tt>0?1:tt<0?-1:0}function Go(tt,et){return Uo(tt.prev,tt,tt.next)<0?Uo(tt,et,tt.next)>=0&&Uo(tt,tt.prev,et)>=0:Uo(tt,et,tt.prev)<0||Uo(tt,tt.next,et)<0}function Zo(tt,et){var nt=new Ho(tt.i,tt.x,tt.y),rt=new Ho(et.i,et.x,et.y),it=tt.next,ot=et.prev;return tt.next=et,et.prev=tt,nt.next=it,it.prev=nt,rt.next=nt,nt.prev=rt,ot.next=rt,rt.prev=ot,rt}function Xo(tt,et,nt,rt){var it=new Ho(tt,et,nt);return rt?(it.next=rt.next,it.prev=rt,rt.next.prev=it,rt.next=it):(it.prev=it,it.next=it),it}function Jo(tt){tt.next.prev=tt.prev,tt.prev.next=tt.next,tt.prevZ&&(tt.prevZ.nextZ=tt.nextZ),tt.nextZ&&(tt.nextZ.prevZ=tt.prevZ)}function Ho(tt,et,nt){this.i=tt,this.x=et,this.y=nt,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yo(tt,et,nt,rt){for(var it=0,ot=et,at=nt-rt;ot<nt;ot+=rt)it+=(tt[at]-tt[ot])*(tt[ot+1]+tt[at+1]),at=ot;return it}function $o(tt,et,nt,rt,it){!function t(tt,et,nt,rt,it){for(;rt>nt;){if(rt-nt>600){var ot=rt-nt+1,at=et-nt+1,st=Math.log(ot),ct=.5*Math.exp(2*st/3),pt=.5*Math.sqrt(st*ct*(ot-ct)/ot)*(at-ot/2<0?-1:1);t(tt,et,Math.max(nt,Math.floor(et-at*ct/ot+pt)),Math.min(rt,Math.floor(et+(ot-at)*ct/ot+pt)),it)}var ft=tt[et],dt=nt,mt=rt;for(Wo(tt,nt,et),it(tt[rt],ft)>0&&Wo(tt,nt,rt);dt<mt;){for(Wo(tt,dt,mt),dt++,mt--;it(tt[dt],ft)<0;)dt++;for(;it(tt[mt],ft)>0;)mt--}0===it(tt[nt],ft)?Wo(tt,nt,mt):Wo(tt,++mt,rt),mt<=et&&(nt=mt+1),et<=mt&&(rt=mt-1)}}(tt,et,nt||0,rt||tt.length-1,it||Qo)}function Wo(tt,et,nt){var rt=tt[et];tt[et]=tt[nt],tt[nt]=rt}function Qo(tt,et){return tt<et?-1:tt>et?1:0}function ts(tt,et){var nt=tt.length;if(nt<=1)return[tt];for(var rt,it,ot=[],at=0;at<nt;at++){var st=S(tt[at]);0!==st&&(tt[at].area=Math.abs(st),void 0===it&&(it=st<0),it===st<0?(rt&&ot.push(rt),rt=[tt[at]]):rt.push(tt[at]))}if(rt&&ot.push(rt),et>1)for(var ct=0;ct<ot.length;ct++)ot[ct].length<=et||($o(ot[ct],et,1,ot[ct].length-1,es),ot[ct]=ot[ct].slice(0,et));return ot}function es(tt,et){return et.area-tt.area}function rs(tt,et,nt){for(var rt=nt.patternDependencies,it=!1,ot=0,at=et;ot<at.length;ot+=1){var st=at[ot].paint.get(tt+"-pattern");st.isConstant()||(it=!0);var ct=st.constantOr(null);ct&&(it=!0,rt[ct.to]=!0,rt[ct.from]=!0)}return it}function ns(tt,et,nt,rt,it){for(var ot=it.patternDependencies,at=0,st=et;at<st.length;at+=1){var ct=st[at],pt=ct.paint.get(tt+"-pattern").value;if("constant"!==pt.kind){var ft=pt.evaluate({zoom:rt-1},nt,{},it.availableImages),dt=pt.evaluate({zoom:rt},nt,{},it.availableImages),mt=pt.evaluate({zoom:rt+1},nt,{},it.availableImages);dt=dt&&dt.name?dt.name:dt,mt=mt&&mt.name?mt.name:mt,ot[ft=ft&&ft.name?ft.name:ft]=!0,ot[dt]=!0,ot[mt]=!0,nt.patterns[ct.id]={min:ft,mid:dt,max:mt}}}return nt}ko.deviation=function(tt,et,nt,rt){var it=et&&et.length,ot=Math.abs(Yo(tt,0,it?et[0]*nt:tt.length,nt));if(it)for(var at=0,st=et.length;at<st;at++)ot-=Math.abs(Yo(tt,et[at]*nt,at<st-1?et[at+1]*nt:tt.length,nt));var ct=0;for(at=0;at<rt.length;at+=3){var pt=rt[at]*nt,ft=rt[at+1]*nt,dt=rt[at+2]*nt;ct+=Math.abs((tt[pt]-tt[dt])*(tt[ft+1]-tt[pt+1])-(tt[pt]-tt[ft])*(tt[dt+1]-tt[pt+1]))}return 0===ot&&0===ct?0:Math.abs((ct-ot)/ot)},ko.flatten=function(tt){for(var et=tt[0][0].length,nt={vertices:[],holes:[],dimensions:et},rt=0,it=0;it<tt.length;it++){for(var ot=0;ot<tt[it].length;ot++)for(var at=0;at<et;at++)nt.vertices.push(tt[it][ot][at]);it>0&&nt.holes.push(rt+=tt[it-1].length)}return nt},wp.default=Sp;var is=function(tt){this.zoom=tt.zoom,this.overscaling=tt.overscaling,this.layers=tt.layers,this.layerIds=this.layers.map((function(tt){return tt.id})),this.index=tt.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tl,this.indexArray=new Cl,this.indexArray2=new Hl,this.programConfigurations=new Pa(tt.layers,tt.zoom),this.segments=new aa,this.segments2=new aa,this.stateDependentLayerIds=this.layers.filter((function(tt){return tt.isStateDependent()})).map((function(tt){return tt.id}))};is.prototype.populate=function(tt,et,nt){this.hasPattern=rs("fill",this.layers,et);for(var rt=this.layers[0].layout.get("fill-sort-key"),it=[],ot=0,at=tt;ot<at.length;ot+=1){var st=at[ot],ct=st.feature,pt=st.id,ft=st.index,dt=st.sourceLayerIndex,mt=this.layers[0]._featureFilter.needGeometry,yt={type:ct.type,id:pt,properties:ct.properties,geometry:mt?La(ct):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),yt,nt)){mt||(yt.geometry=La(ct));var vt=rt?rt.evaluate(yt,{},nt,et.availableImages):void 0;it.push({id:pt,properties:ct.properties,type:ct.type,sourceLayerIndex:dt,index:ft,geometry:yt.geometry,patterns:{},sortKey:vt})}}rt&&it.sort((function(tt,et){return tt.sortKey-et.sortKey}));for(var Dt=0,Ot=it;Dt<Ot.length;Dt+=1){var Rt=Ot[Dt],Bt=Rt.geometry,Ne=Rt.index,rn=Rt.sourceLayerIndex;if(this.hasPattern){var vn=ns("fill",this.layers,Rt,this.zoom,et);this.patternFeatures.push(vn)}else this.addFeature(Rt,Bt,Ne,nt,{});et.featureIndex.insert(tt[Ne].feature,Bt,Ne,rn,this.index)}},is.prototype.update=function(tt,et,nt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(tt,et,this.stateDependentLayers,nt)},is.prototype.addFeatures=function(tt,et,nt){for(var rt=0,it=this.patternFeatures;rt<it.length;rt+=1){var ot=it[rt];this.addFeature(ot,ot.geometry,ot.index,et,nt)}},is.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},is.prototype.upload=function(tt){this.uploaded||(this.layoutVertexBuffer=tt.createVertexBuffer(this.layoutVertexArray,bp),this.indexBuffer=tt.createIndexBuffer(this.indexArray),this.indexBuffer2=tt.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(tt),this.uploaded=!0},is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},is.prototype.addFeature=function(tt,et,nt,rt,it){for(var ot=0,at=ts(et,500);ot<at.length;ot+=1){for(var st=at[ot],ct=0,pt=0,ft=st;pt<ft.length;pt+=1)ct+=ft[pt].length;for(var dt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),mt=dt.vertexLength,yt=[],vt=[],Dt=0,Ot=st;Dt<Ot.length;Dt+=1){var Rt=Ot[Dt];if(0!==Rt.length){Rt!==st[0]&&vt.push(yt.length/2);var Bt=this.segments2.prepareSegment(Rt.length,this.layoutVertexArray,this.indexArray2),Ne=Bt.vertexLength;this.layoutVertexArray.emplaceBack(Rt[0].x,Rt[0].y),this.indexArray2.emplaceBack(Ne+Rt.length-1,Ne),yt.push(Rt[0].x),yt.push(Rt[0].y);for(var rn=1;rn<Rt.length;rn++)this.layoutVertexArray.emplaceBack(Rt[rn].x,Rt[rn].y),this.indexArray2.emplaceBack(Ne+rn-1,Ne+rn),yt.push(Rt[rn].x),yt.push(Rt[rn].y);Bt.vertexLength+=Rt.length,Bt.primitiveLength+=Rt.length}}for(var vn=wp(yt,vt),bn=0;bn<vn.length;bn+=3)this.indexArray.emplaceBack(mt+vn[bn],mt+vn[bn+1],mt+vn[bn+2]);dt.vertexLength+=ct,dt.primitiveLength+=vn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,tt,nt,it,rt)},Dn("FillBucket",is,{omit:["layers","patternFeatures"]});var Ep=new xi({"fill-sort-key":new di(Sr.layout_fill["fill-sort-key"])}),Tp={paint:new xi({"fill-antialias":new yi(Sr.paint_fill["fill-antialias"]),"fill-opacity":new di(Sr.paint_fill["fill-opacity"]),"fill-color":new di(Sr.paint_fill["fill-color"]),"fill-outline-color":new di(Sr.paint_fill["fill-outline-color"]),"fill-translate":new yi(Sr.paint_fill["fill-translate"]),"fill-translate-anchor":new yi(Sr.paint_fill["fill-translate-anchor"]),"fill-pattern":new wu(Sr.paint_fill["fill-pattern"])}),layout:Ep},Pp=function(tt){function e(et){tt.call(this,et,Tp)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.recalculate=function(et,nt){tt.prototype.recalculate.call(this,et,nt);var rt=this.paint._values["fill-outline-color"];"constant"===rt.value.kind&&void 0===rt.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(tt){return new is(tt)},e.prototype.queryRadius=function(){return Wa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(tt,et,nt,rt,it,ot,at){return qa(Qa(tt,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ot.angle,at),rt)},e.prototype.isTileClipped=function(){return!0},e}(Tu),Cp=Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,kp=ps;function ps(tt,et,nt,rt,it){this.properties={},this.extent=nt,this.type=0,this._pbf=tt,this._geometry=-1,this._keys=rt,this._values=it,tt.readFields(cs,this,et)}function cs(tt,et,nt){1==tt?et.id=nt.readVarint():2==tt?function(tt,et){for(var nt=tt.readVarint()+tt.pos;tt.pos<nt;){var rt=et._keys[tt.readVarint()],it=et._values[tt.readVarint()];et.properties[rt]=it}}(nt,et):3==tt?et.type=nt.readVarint():4==tt&&(et._geometry=nt.pos)}function hs(tt){for(var et,nt,rt=0,it=0,ot=tt.length,at=ot-1;it<ot;at=it++)rt+=((nt=tt[at]).x-(et=tt[it]).x)*(et.y+nt.y);return rt}ps.types=["Unknown","Point","LineString","Polygon"],ps.prototype.loadGeometry=function(){var tt=this._pbf;tt.pos=this._geometry;for(var et,rt=tt.readVarint()+tt.pos,it=1,ot=0,at=0,st=0,ct=[];tt.pos<rt;){if(ot<=0){var pt=tt.readVarint();it=7&pt,ot=pt>>3}if(ot--,1===it||2===it)at+=tt.readSVarint(),st+=tt.readSVarint(),1===it&&(et&&ct.push(et),et=[]),et.push(new nt(at,st));else{if(7!==it)throw new Error("unknown command "+it);et&&et.push(et[0].clone())}}return et&&ct.push(et),ct},ps.prototype.bbox=function(){var tt=this._pbf;tt.pos=this._geometry;for(var et=tt.readVarint()+tt.pos,nt=1,rt=0,it=0,ot=0,at=1/0,st=-1/0,ct=1/0,pt=-1/0;tt.pos<et;){if(rt<=0){var ft=tt.readVarint();nt=7&ft,rt=ft>>3}if(rt--,1===nt||2===nt)(it+=tt.readSVarint())<at&&(at=it),it>st&&(st=it),(ot+=tt.readSVarint())<ct&&(ct=ot),ot>pt&&(pt=ot);else if(7!==nt)throw new Error("unknown command "+nt)}return[at,ct,st,pt]},ps.prototype.toGeoJSON=function(tt,et,nt){var rt,it,ot=this.extent*Math.pow(2,nt),at=this.extent*tt,st=this.extent*et,ct=this.loadGeometry(),pt=ps.types[this.type];function p(tt){for(var et=0;et<tt.length;et++){var nt=tt[et];tt[et]=[360*(nt.x+at)/ot-180,360/Math.PI*Math.atan(Math.exp((180-360*(nt.y+st)/ot)*Math.PI/180))-90]}}switch(this.type){case 1:var ft=[];for(rt=0;rt<ct.length;rt++)ft[rt]=ct[rt][0];p(ct=ft);break;case 2:for(rt=0;rt<ct.length;rt++)p(ct[rt]);break;case 3:for(ct=function(tt){var et=tt.length;if(et<=1)return[tt];for(var nt,rt,it=[],ot=0;ot<et;ot++){var at=hs(tt[ot]);0!==at&&(void 0===rt&&(rt=at<0),rt===at<0?(nt&&it.push(nt),nt=[tt[ot]]):nt.push(tt[ot]))}return nt&&it.push(nt),it}(ct),rt=0;rt<ct.length;rt++)for(it=0;it<ct[rt].length;it++)p(ct[rt][it])}1===ct.length?ct=ct[0]:pt="Multi"+pt;var dt={type:"Feature",geometry:{type:pt,coordinates:ct},properties:this.properties};return"id"in this&&(dt.id=this.id),dt};var Lp=ys;function ys(tt,et){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=tt,this._keys=[],this._values=[],this._features=[],tt.readFields(ds,this,et),this.length=this._features.length}function ds(tt,et,nt){15===tt?et.version=nt.readVarint():1===tt?et.name=nt.readString():5===tt?et.extent=nt.readVarint():2===tt?et._features.push(nt.pos):3===tt?et._keys.push(nt.readString()):4===tt&&et._values.push(function(tt){for(var et=null,nt=tt.readVarint()+tt.pos;tt.pos<nt;){var rt=tt.readVarint()>>3;et=1===rt?tt.readString():2===rt?tt.readFloat():3===rt?tt.readDouble():4===rt?tt.readVarint64():5===rt?tt.readVarint():6===rt?tt.readSVarint():7===rt?tt.readBoolean():null}return et}(nt))}function ms(tt,et,nt){if(3===tt){var rt=new Lp(nt,nt.readVarint()+nt.pos);rt.length&&(et[rt.name]=rt)}}ys.prototype.feature=function(tt){if(tt<0||tt>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[tt];var et=this._pbf.readVarint()+this._pbf.pos;return new kp(this._pbf,et,this.extent,this._keys,this._values)};var Ip={VectorTile:function(tt,et){this.layers=tt.readFields(ms,{},et)},VectorTileFeature:kp,VectorTileLayer:Lp},Ap=Ip.VectorTileFeature.types,Mp=Math.pow(2,13);function bs(tt,et,nt,rt,it,ot,at,st){tt.emplaceBack(et,nt,2*Math.floor(rt*Mp)+at,it*Mp*2,ot*Mp*2,Math.round(st))}var ws=function(tt){this.zoom=tt.zoom,this.overscaling=tt.overscaling,this.layers=tt.layers,this.layerIds=this.layers.map((function(tt){return tt.id})),this.index=tt.index,this.hasPattern=!1,this.layoutVertexArray=new sl,this.indexArray=new Cl,this.programConfigurations=new Pa(tt.layers,tt.zoom),this.segments=new aa,this.stateDependentLayerIds=this.layers.filter((function(tt){return tt.isStateDependent()})).map((function(tt){return tt.id}))};function _s(tt,et){return tt.x===et.x&&(tt.x<0||tt.x>8192)||tt.y===et.y&&(tt.y<0||tt.y>8192)}ws.prototype.populate=function(tt,et,nt){this.features=[],this.hasPattern=rs("fill-extrusion",this.layers,et);for(var rt=0,it=tt;rt<it.length;rt+=1){var ot=it[rt],at=ot.feature,st=ot.id,ct=ot.index,pt=ot.sourceLayerIndex,ft=this.layers[0]._featureFilter.needGeometry,dt={type:at.type,id:st,properties:at.properties,geometry:ft?La(at):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),dt,nt)){var mt={id:st,sourceLayerIndex:pt,index:ct,geometry:ft?dt.geometry:La(at),properties:at.properties,type:at.type,patterns:{}};void 0!==at.id&&(mt.id=at.id),this.hasPattern?this.features.push(ns("fill-extrusion",this.layers,mt,this.zoom,et)):this.addFeature(mt,mt.geometry,ct,nt,{}),et.featureIndex.insert(at,mt.geometry,ct,pt,this.index,!0)}}},ws.prototype.addFeatures=function(tt,et,nt){for(var rt=0,it=this.features;rt<it.length;rt+=1){var ot=it[rt];this.addFeature(ot,ot.geometry,ot.index,et,nt)}},ws.prototype.update=function(tt,et,nt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(tt,et,this.stateDependentLayers,nt)},ws.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(tt){this.uploaded||(this.layoutVertexBuffer=tt.createVertexBuffer(this.layoutVertexArray,Cp),this.indexBuffer=tt.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(tt),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ws.prototype.addFeature=function(tt,et,nt,rt,it){for(var ot=0,at=ts(et,500);ot<at.length;ot+=1){for(var st=at[ot],ct=0,pt=0,ft=st;pt<ft.length;pt+=1)ct+=ft[pt].length;for(var dt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),mt=0,yt=st;mt<yt.length;mt+=1){var vt=yt[mt];if(0!==vt.length&&!((Vn=vt).every((function(tt){return tt.x<0}))||Vn.every((function(tt){return tt.x>8192}))||Vn.every((function(tt){return tt.y<0}))||Vn.every((function(tt){return tt.y>8192}))))for(var Dt=0,Ot=0;Ot<vt.length;Ot++){var Rt=vt[Ot];if(Ot>=1){var Bt=vt[Ot-1];if(!_s(Rt,Bt)){dt.vertexLength+4>aa.MAX_VERTEX_ARRAY_LENGTH&&(dt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Ne=Rt.sub(Bt)._perp()._unit(),rn=Bt.dist(Rt);Dt+rn>32768&&(Dt=0),bs(this.layoutVertexArray,Rt.x,Rt.y,Ne.x,Ne.y,0,0,Dt),bs(this.layoutVertexArray,Rt.x,Rt.y,Ne.x,Ne.y,0,1,Dt),bs(this.layoutVertexArray,Bt.x,Bt.y,Ne.x,Ne.y,0,0,Dt+=rn),bs(this.layoutVertexArray,Bt.x,Bt.y,Ne.x,Ne.y,0,1,Dt);var vn=dt.vertexLength;this.indexArray.emplaceBack(vn,vn+2,vn+1),this.indexArray.emplaceBack(vn+1,vn+2,vn+3),dt.vertexLength+=4,dt.primitiveLength+=2}}}}if(dt.vertexLength+ct>aa.MAX_VERTEX_ARRAY_LENGTH&&(dt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),"Polygon"===Ap[tt.type]){for(var bn=[],Tn=[],Cn=dt.vertexLength,Ln=0,In=st;Ln<In.length;Ln+=1){var Mn=In[Ln];if(0!==Mn.length){Mn!==st[0]&&Tn.push(bn.length/2);for(var zn=0;zn<Mn.length;zn++){var Bn=Mn[zn];bs(this.layoutVertexArray,Bn.x,Bn.y,0,0,1,1,0),bn.push(Bn.x),bn.push(Bn.y)}}}for(var Fn=wp(bn,Tn),Nn=0;Nn<Fn.length;Nn+=3)this.indexArray.emplaceBack(Cn+Fn[Nn],Cn+Fn[Nn+2],Cn+Fn[Nn+1]);dt.primitiveLength+=Fn.length/3,dt.vertexLength+=ct}}var Vn;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,tt,nt,it,rt)},Dn("FillExtrusionBucket",ws,{omit:["layers","features"]});var zp={paint:new xi({"fill-extrusion-opacity":new yi(Sr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new di(Sr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yi(Sr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yi(Sr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wu(Sr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new di(Sr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new di(Sr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yi(Sr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Dp=function(tt){function e(et){tt.call(this,et,zp)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.createBucket=function(tt){return new ws(tt)},e.prototype.queryRadius=function(){return Wa(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(tt,et,rt,it,ot,at,st,ct){var pt=Qa(tt,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),at.angle,st),ft=this.paint.get("fill-extrusion-height").evaluate(et,rt),dt=this.paint.get("fill-extrusion-base").evaluate(et,rt),mt=function(tt,et,rt,it){for(var ot=[],at=0,st=tt;at<st.length;at+=1){var ct=st[at],pt=[ct.x,ct.y,0,1];so(pt,pt,et),ot.push(new nt(pt[0]/pt[3],pt[1]/pt[3]))}return ot}(pt,ct),yt=function(tt,et,rt,it){for(var ot=[],at=[],st=it[8]*et,ct=it[9]*et,pt=it[10]*et,ft=it[11]*et,dt=it[8]*rt,mt=it[9]*rt,yt=it[10]*rt,vt=it[11]*rt,Dt=0,Ot=tt;Dt<Ot.length;Dt+=1){for(var Rt=[],Bt=[],Ne=0,rn=Ot[Dt];Ne<rn.length;Ne+=1){var vn=rn[Ne],bn=vn.x,Tn=vn.y,Cn=it[0]*bn+it[4]*Tn+it[12],Ln=it[1]*bn+it[5]*Tn+it[13],In=it[2]*bn+it[6]*Tn+it[14],Mn=it[3]*bn+it[7]*Tn+it[15],zn=In+pt,Bn=Mn+ft,Fn=Cn+dt,Nn=Ln+mt,Vn=In+yt,Wn=Mn+vt,$n=new nt((Cn+st)/Bn,(Ln+ct)/Bn);$n.z=zn/Bn,Rt.push($n);var Yn=new nt(Fn/Wn,Nn/Wn);Yn.z=Vn/Wn,Bt.push(Yn)}ot.push(Rt),at.push(Bt)}return[ot,at]}(it,dt,ft,ct);return function(tt,et,nt){var rt=1/0;qa(nt,et)&&(rt=Is(nt,et[0]));for(var it=0;it<et.length;it++)for(var ot=et[it],at=tt[it],st=0;st<ot.length-1;st++){var ct=ot[st],pt=[ct,ot[st+1],at[st+1],at[st],ct];Ua(nt,pt)&&(rt=Math.min(rt,Is(nt,pt)))}return rt!==1/0&&rt}(yt[0],yt[1],mt)},e}(Tu);function ks(tt,et){return tt.x*et.x+tt.y*et.y}function Is(tt,et){if(1===tt.length){for(var nt,rt=0,it=et[rt++];!nt||it.equals(nt);)if(!(nt=et[rt++]))return 1/0;for(;rt<et.length;rt++){var ot=et[rt],at=tt[0],st=nt.sub(it),ct=ot.sub(it),pt=at.sub(it),ft=ks(st,st),dt=ks(st,ct),mt=ks(ct,ct),yt=ks(pt,st),vt=ks(pt,ct),Dt=ft*mt-dt*dt,Ot=(mt*yt-dt*vt)/Dt,Rt=(ft*vt-dt*yt)/Dt,Bt=it.z*(1-Ot-Rt)+nt.z*Ot+ot.z*Rt;if(isFinite(Bt))return Bt}return 1/0}for(var Ne=1/0,rn=0,vn=et;rn<vn.length;rn+=1)Ne=Math.min(Ne,vn[rn].z);return Ne}var Op=Si([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Rp=Ip.VectorTileFeature.types,Bp=Math.cos(Math.PI/180*37.5),Fp=Math.pow(2,14)/.5,Ts=function(tt){this.zoom=tt.zoom,this.overscaling=tt.overscaling,this.layers=tt.layers,this.layerIds=this.layers.map((function(tt){return tt.id})),this.index=tt.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new dl,this.indexArray=new Cl,this.programConfigurations=new Pa(tt.layers,tt.zoom),this.segments=new aa,this.stateDependentLayerIds=this.layers.filter((function(tt){return tt.isStateDependent()})).map((function(tt){return tt.id}))};Ts.prototype.populate=function(tt,et,nt){this.hasPattern=rs("line",this.layers,et);for(var rt=this.layers[0].layout.get("line-sort-key"),it=[],ot=0,at=tt;ot<at.length;ot+=1){var st=at[ot],ct=st.feature,pt=st.id,ft=st.index,dt=st.sourceLayerIndex,mt=this.layers[0]._featureFilter.needGeometry,yt={type:ct.type,id:pt,properties:ct.properties,geometry:mt?La(ct):[]};if(this.layers[0]._featureFilter.filter(new ai(this.zoom),yt,nt)){mt||(yt.geometry=La(ct));var vt=rt?rt.evaluate(yt,{},nt):void 0;it.push({id:pt,properties:ct.properties,type:ct.type,sourceLayerIndex:dt,index:ft,geometry:yt.geometry,patterns:{},sortKey:vt})}}rt&&it.sort((function(tt,et){return tt.sortKey-et.sortKey}));for(var Dt=0,Ot=it;Dt<Ot.length;Dt+=1){var Rt=Ot[Dt],Bt=Rt.geometry,Ne=Rt.index,rn=Rt.sourceLayerIndex;if(this.hasPattern){var vn=ns("line",this.layers,Rt,this.zoom,et);this.patternFeatures.push(vn)}else this.addFeature(Rt,Bt,Ne,nt,{});et.featureIndex.insert(tt[Ne].feature,Bt,Ne,rn,this.index)}},Ts.prototype.update=function(tt,et,nt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(tt,et,this.stateDependentLayers,nt)},Ts.prototype.addFeatures=function(tt,et,nt){for(var rt=0,it=this.patternFeatures;rt<it.length;rt+=1){var ot=it[rt];this.addFeature(ot,ot.geometry,ot.index,et,nt)}},Ts.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ts.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ts.prototype.upload=function(tt){this.uploaded||(this.layoutVertexBuffer=tt.createVertexBuffer(this.layoutVertexArray,Op),this.indexBuffer=tt.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(tt),this.uploaded=!0},Ts.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ts.prototype.addFeature=function(tt,et,nt,rt,it){for(var ot=this.layers[0].layout,at=ot.get("line-join").evaluate(tt,{}),st=ot.get("line-cap"),ct=ot.get("line-miter-limit"),pt=ot.get("line-round-limit"),ft=0,dt=et;ft<dt.length;ft+=1)this.addLine(dt[ft],tt,at,st,ct,pt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,tt,nt,it,rt)},Ts.prototype.addLine=function(tt,et,nt,rt,it,ot){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,et.properties&&et.properties.hasOwnProperty("mapbox_clip_start")&&et.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+et.properties.mapbox_clip_start,this.clipEnd=+et.properties.mapbox_clip_end;for(var at=0;at<tt.length-1;at++)this.totalDistance+=tt[at].dist(tt[at+1]);this.updateScaledDistance()}for(var st="Polygon"===Rp[et.type],ct=tt.length;ct>=2&&tt[ct-1].equals(tt[ct-2]);)ct--;for(var pt=0;pt<ct-1&&tt[pt].equals(tt[pt+1]);)pt++;if(!(ct<(st?3:2))){"bevel"===nt&&(it=1.05);var ft,dt=this.overscaling<=16?122880/(512*this.overscaling):0,mt=this.segments.prepareSegment(10*ct,this.layoutVertexArray,this.indexArray),yt=void 0,vt=void 0,Dt=void 0,Ot=void 0;this.e1=this.e2=-1,st&&(Ot=tt[pt].sub(ft=tt[ct-2])._unit()._perp());for(var Rt=pt;Rt<ct;Rt++)if(!(vt=Rt===ct-1?st?tt[pt+1]:void 0:tt[Rt+1])||!tt[Rt].equals(vt)){Ot&&(Dt=Ot),ft&&(yt=ft),ft=tt[Rt],Ot=vt?vt.sub(ft)._unit()._perp():Dt;var Bt=(Dt=Dt||Ot).add(Ot);0===Bt.x&&0===Bt.y||Bt._unit();var Ne=Dt.x*Ot.x+Dt.y*Ot.y,rn=Bt.x*Ot.x+Bt.y*Ot.y,vn=0!==rn?1/rn:1/0,bn=2*Math.sqrt(2-2*rn),Tn=rn<Bp&&yt&&vt,Cn=Dt.x*Ot.y-Dt.y*Ot.x>0;if(Tn&&Rt>pt){var Ln=ft.dist(yt);if(Ln>2*dt){var In=ft.sub(ft.sub(yt)._mult(dt/Ln)._round());this.updateDistance(yt,In),this.addCurrentVertex(In,Dt,0,0,mt),yt=In}}var Mn=yt&&vt,zn=Mn?nt:st?"butt":rt;if(Mn&&"round"===zn&&(vn<ot?zn="miter":vn<=2&&(zn="fakeround")),"miter"===zn&&vn>it&&(zn="bevel"),"bevel"===zn&&(vn>2&&(zn="flipbevel"),vn<it&&(zn="miter")),yt&&this.updateDistance(yt,ft),"miter"===zn)Bt._mult(vn),this.addCurrentVertex(ft,Bt,0,0,mt);else if("flipbevel"===zn){if(vn>100)Bt=Ot.mult(-1);else{var Bn=vn*Dt.add(Ot).mag()/Dt.sub(Ot).mag();Bt._perp()._mult(Bn*(Cn?-1:1))}this.addCurrentVertex(ft,Bt,0,0,mt),this.addCurrentVertex(ft,Bt.mult(-1),0,0,mt)}else if("bevel"===zn||"fakeround"===zn){var Fn=-Math.sqrt(vn*vn-1),Nn=Cn?Fn:0,Vn=Cn?0:Fn;if(yt&&this.addCurrentVertex(ft,Dt,Nn,Vn,mt),"fakeround"===zn)for(var Wn=Math.round(180*bn/Math.PI/20),$n=1;$n<Wn;$n++){var Yn=$n/Wn;if(.5!==Yn){var er=Yn-.5;Yn+=Yn*er*(Yn-1)*((1.0904+Ne*(Ne*(3.55645-1.43519*Ne)-3.2452))*er*er+(.848013+Ne*(.215638*Ne-1.06021)))}var rr=Ot.sub(Dt)._mult(Yn)._add(Dt)._unit()._mult(Cn?-1:1);this.addHalfVertex(ft,rr.x,rr.y,!1,Cn,0,mt)}vt&&this.addCurrentVertex(ft,Ot,-Nn,-Vn,mt)}else if("butt"===zn)this.addCurrentVertex(ft,Bt,0,0,mt);else if("square"===zn){var vr=yt?1:-1;this.addCurrentVertex(ft,Bt,vr,vr,mt)}else"round"===zn&&(yt&&(this.addCurrentVertex(ft,Dt,0,0,mt),this.addCurrentVertex(ft,Dt,1,1,mt,!0)),vt&&(this.addCurrentVertex(ft,Ot,-1,-1,mt,!0),this.addCurrentVertex(ft,Ot,0,0,mt)));if(Tn&&Rt<ct-1){var wr=ft.dist(vt);if(wr>2*dt){var Sr=ft.add(vt.sub(ft)._mult(dt/wr)._round());this.updateDistance(ft,Sr),this.addCurrentVertex(Sr,Ot,0,0,mt),ft=Sr}}}}},Ts.prototype.addCurrentVertex=function(tt,et,nt,rt,it,ot){void 0===ot&&(ot=!1);var at=et.y*rt-et.x,st=-et.y-et.x*rt;this.addHalfVertex(tt,et.x+et.y*nt,et.y-et.x*nt,ot,!1,nt,it),this.addHalfVertex(tt,at,st,ot,!0,-rt,it),this.distance>Fp/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(tt,et,nt,rt,it,ot))},Ts.prototype.addHalfVertex=function(tt,et,nt,rt,it,ot,at){var st=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((tt.x<<1)+(rt?1:0),(tt.y<<1)+(it?1:0),Math.round(63*et)+128,Math.round(63*nt)+128,1+(0===ot?0:ot<0?-1:1)|(63&st)<<2,st>>6);var ct=at.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ct),at.primitiveLength++),it?this.e2=ct:this.e1=ct},Ts.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Fp-1):this.distance},Ts.prototype.updateDistance=function(tt,et){this.distance+=tt.dist(et),this.updateScaledDistance()},Dn("LineBucket",Ts,{omit:["layers","patternFeatures"]});var Np=new xi({"line-cap":new yi(Sr.layout_line["line-cap"]),"line-join":new di(Sr.layout_line["line-join"]),"line-miter-limit":new yi(Sr.layout_line["line-miter-limit"]),"line-round-limit":new yi(Sr.layout_line["line-round-limit"]),"line-sort-key":new di(Sr.layout_line["line-sort-key"])}),Vp={paint:new xi({"line-opacity":new di(Sr.paint_line["line-opacity"]),"line-color":new di(Sr.paint_line["line-color"]),"line-translate":new yi(Sr.paint_line["line-translate"]),"line-translate-anchor":new yi(Sr.paint_line["line-translate-anchor"]),"line-width":new di(Sr.paint_line["line-width"]),"line-gap-width":new di(Sr.paint_line["line-gap-width"]),"line-offset":new di(Sr.paint_line["line-offset"]),"line-blur":new di(Sr.paint_line["line-blur"]),"line-dasharray":new vi(Sr.paint_line["line-dasharray"]),"line-pattern":new wu(Sr.paint_line["line-pattern"]),"line-gradient":new gi(Sr.paint_line["line-gradient"])}),layout:Np},Up=new(function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(et,nt){return nt=new ai(Math.floor(nt.zoom),{now:nt.now,fadeDuration:nt.fadeDuration,zoomHistory:nt.zoomHistory,transition:nt.transition}),tt.prototype.possiblyEvaluate.call(this,et,nt)},e.prototype.evaluate=function(et,nt,rt,it){return nt=c({},nt,{zoom:Math.floor(nt.zoom)}),tt.prototype.evaluate.call(this,et,nt,rt,it)},e}(di))(Vp.paint.properties["line-width"].specification);Up.useIntegerZoom=!0;var jp=function(tt){function e(et){tt.call(this,et,Vp)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(tt){"line-gradient"===tt&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=go(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(et,nt){tt.prototype.recalculate.call(this,et,nt),this.paint._values["line-floorwidth"]=Up.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,et)},e.prototype.createBucket=function(tt){return new Ts(tt)},e.prototype.queryRadius=function(tt){var et=tt,nt=Ds($a("line-width",this,et),$a("line-gap-width",this,et)),rt=$a("line-offset",this,et);return nt/2+Math.abs(rt)+Wa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(tt,et,rt,it,ot,at,st){var ct=Qa(tt,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),at.angle,st),pt=st/2*Ds(this.paint.get("line-width").evaluate(et,rt),this.paint.get("line-gap-width").evaluate(et,rt)),ft=this.paint.get("line-offset").evaluate(et,rt);return ft&&(it=function(tt,et){for(var rt=[],it=new nt(0,0),ot=0;ot<tt.length;ot++){for(var at=tt[ot],st=[],ct=0;ct<at.length;ct++){var pt=at[ct],ft=at[ct+1],dt=0===ct?it:pt.sub(at[ct-1])._unit()._perp(),mt=ct===at.length-1?it:ft.sub(pt)._unit()._perp(),yt=dt._add(mt)._unit();yt._mult(1/(yt.x*mt.x+yt.y*mt.y)),st.push(yt._mult(et)._add(pt))}rt.push(st)}return rt}(it,ft*st)),function(tt,et,nt){for(var rt=0;rt<et.length;rt++){var it=et[rt];if(tt.length>=3)for(var ot=0;ot<it.length;ot++)if(Ha(tt,it[ot]))return!0;if(Na(tt,it,nt))return!0}return!1}(ct,it,pt)},e.prototype.isTileClipped=function(){return!0},e}(Tu);function Ds(tt,et){return et>0?et+2*tt:tt}var Zp=Si([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qp=Si([{name:"a_projected_pos",components:3,type:"Float32"}],4),Hp=(Si([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Si([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Wp=(Si([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Si([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Gp=Si([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qs(tt,et,nt){return tt.sections.forEach((function(tt){tt.text=function(tt,et,nt){var rt=et.layout.get("text-transform").evaluate(nt,{});return"uppercase"===rt?tt=tt.toLocaleUpperCase():"lowercase"===rt&&(tt=tt.toLocaleLowerCase()),_u.applyArabicShaping&&(tt=_u.applyArabicShaping(tt)),tt}(tt.text,et,nt)})),tt}Si([{name:"triangle",components:3,type:"Uint16"}]),Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Si([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Si([{type:"Float32",name:"offsetX"}]),Si([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Xp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Ks=function(tt,et,nt,rt,it){var ot,at,st=8*it-rt-1,ct=(1<<st)-1,pt=ct>>1,ft=-7,dt=nt?it-1:0,mt=nt?-1:1,yt=tt[et+dt];for(dt+=mt,ot=yt&(1<<-ft)-1,yt>>=-ft,ft+=st;ft>0;ot=256*ot+tt[et+dt],dt+=mt,ft-=8);for(at=ot&(1<<-ft)-1,ot>>=-ft,ft+=rt;ft>0;at=256*at+tt[et+dt],dt+=mt,ft-=8);if(0===ot)ot=1-pt;else{if(ot===ct)return at?NaN:1/0*(yt?-1:1);at+=Math.pow(2,rt),ot-=pt}return(yt?-1:1)*at*Math.pow(2,ot-rt)},Gs=function(tt,et,nt,rt,it,ot){var at,st,ct,pt=8*ot-it-1,ft=(1<<pt)-1,dt=ft>>1,mt=23===it?Math.pow(2,-24)-Math.pow(2,-77):0,yt=rt?0:ot-1,vt=rt?1:-1,Dt=et<0||0===et&&1/et<0?1:0;for(et=Math.abs(et),isNaN(et)||et===1/0?(st=isNaN(et)?1:0,at=ft):(at=Math.floor(Math.log(et)/Math.LN2),et*(ct=Math.pow(2,-at))<1&&(at--,ct*=2),(et+=at+dt>=1?mt/ct:mt*Math.pow(2,1-dt))*ct>=2&&(at++,ct/=2),at+dt>=ft?(st=0,at=ft):at+dt>=1?(st=(et*ct-1)*Math.pow(2,it),at+=dt):(st=et*Math.pow(2,dt-1)*Math.pow(2,it),at=0));it>=8;tt[nt+yt]=255&st,yt+=vt,st/=256,it-=8);for(at=at<<it|st,pt+=it;pt>0;tt[nt+yt]=255&at,yt+=vt,at/=256,pt-=8);tt[nt+yt-vt]|=128*Dt},$p=Xs;function Xs(tt){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(tt)?tt:new Uint8Array(tt||0),this.pos=0,this.type=0,this.length=this.buf.length}Xs.Varint=0,Xs.Fixed64=1,Xs.Bytes=2,Xs.Fixed32=5;var Kp="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Hs(tt){return tt.type===Xs.Bytes?tt.readVarint()+tt.pos:tt.pos+1}function Ys(tt,et,nt){return nt?4294967296*et+(tt>>>0):4294967296*(et>>>0)+(tt>>>0)}function $s(tt,et,nt){var rt=et<=16383?1:et<=2097151?2:et<=268435455?3:Math.floor(Math.log(et)/(7*Math.LN2));nt.realloc(rt);for(var it=nt.pos-1;it>=tt;it--)nt.buf[it+rt]=nt.buf[it]}function Ws(tt,et){for(var nt=0;nt<tt.length;nt++)et.writeVarint(tt[nt])}function Qs(tt,et){for(var nt=0;nt<tt.length;nt++)et.writeSVarint(tt[nt])}function tu(tt,et){for(var nt=0;nt<tt.length;nt++)et.writeFloat(tt[nt])}function eu(tt,et){for(var nt=0;nt<tt.length;nt++)et.writeDouble(tt[nt])}function ru(tt,et){for(var nt=0;nt<tt.length;nt++)et.writeBoolean(tt[nt])}function nu(tt,et){for(var nt=0;nt<tt.length;nt++)et.writeFixed32(tt[nt])}function iu(tt,et){for(var nt=0;nt<tt.length;nt++)et.writeSFixed32(tt[nt])}function au(tt,et){for(var nt=0;nt<tt.length;nt++)et.writeFixed64(tt[nt])}function ou(tt,et){for(var nt=0;nt<tt.length;nt++)et.writeSFixed64(tt[nt])}function su(tt,et){return(tt[et]|tt[et+1]<<8|tt[et+2]<<16)+16777216*tt[et+3]}function uu(tt,et,nt){tt[nt]=et,tt[nt+1]=et>>>8,tt[nt+2]=et>>>16,tt[nt+3]=et>>>24}function lu(tt,et){return(tt[et]|tt[et+1]<<8|tt[et+2]<<16)+(tt[et+3]<<24)}function pu(tt,et,nt){1===tt&&nt.readMessage(cu,et)}function cu(tt,et,nt){if(3===tt){var rt=nt.readMessage(hu,{}),it=rt.width,ot=rt.height,at=rt.left,st=rt.top,ct=rt.advance;et.push({id:rt.id,bitmap:new yo({width:it+6,height:ot+6},rt.bitmap),metrics:{width:it,height:ot,left:at,top:st,advance:ct}})}}function hu(tt,et,nt){1===tt?et.id=nt.readVarint():2===tt?et.bitmap=nt.readBytes():3===tt?et.width=nt.readVarint():4===tt?et.height=nt.readVarint():5===tt?et.left=nt.readSVarint():6===tt?et.top=nt.readSVarint():7===tt&&(et.advance=nt.readVarint())}function fu(tt){for(var et=0,nt=0,rt=0,it=tt;rt<it.length;rt+=1){var ot=it[rt];et+=ot.w*ot.h,nt=Math.max(nt,ot.w)}tt.sort((function(tt,et){return et.h-tt.h}));for(var at=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(et/.95)),nt),h:1/0}],st=0,ct=0,pt=0,ft=tt;pt<ft.length;pt+=1)for(var dt=ft[pt],mt=at.length-1;mt>=0;mt--){var yt=at[mt];if(!(dt.w>yt.w||dt.h>yt.h)){if(dt.x=yt.x,dt.y=yt.y,ct=Math.max(ct,dt.y+dt.h),st=Math.max(st,dt.x+dt.w),dt.w===yt.w&&dt.h===yt.h){var vt=at.pop();mt<at.length&&(at[mt]=vt)}else dt.h===yt.h?(yt.x+=dt.w,yt.w-=dt.w):dt.w===yt.w?(yt.y+=dt.h,yt.h-=dt.h):(at.push({x:yt.x+dt.w,y:yt.y,w:yt.w-dt.w,h:dt.h}),yt.y+=dt.h,yt.h-=dt.h);break}}return{w:st,h:ct,fill:et/(st*ct)||0}}Xs.prototype={destroy:function(){this.buf=null},readFields:function(tt,et,nt){for(nt=nt||this.length;this.pos<nt;){var rt=this.readVarint(),it=rt>>3,ot=this.pos;this.type=7&rt,tt(it,et,this),this.pos===ot&&this.skip(rt)}return et},readMessage:function(tt,et){return this.readFields(tt,et,this.readVarint()+this.pos)},readFixed32:function(){var tt=su(this.buf,this.pos);return this.pos+=4,tt},readSFixed32:function(){var tt=lu(this.buf,this.pos);return this.pos+=4,tt},readFixed64:function(){var tt=su(this.buf,this.pos)+4294967296*su(this.buf,this.pos+4);return this.pos+=8,tt},readSFixed64:function(){var tt=su(this.buf,this.pos)+4294967296*lu(this.buf,this.pos+4);return this.pos+=8,tt},readFloat:function(){var tt=Ks(this.buf,this.pos,!0,23,4);return this.pos+=4,tt},readDouble:function(){var tt=Ks(this.buf,this.pos,!0,52,8);return this.pos+=8,tt},readVarint:function(tt){var et,nt,rt=this.buf;return et=127&(nt=rt[this.pos++]),nt<128?et:(et|=(127&(nt=rt[this.pos++]))<<7,nt<128?et:(et|=(127&(nt=rt[this.pos++]))<<14,nt<128?et:(et|=(127&(nt=rt[this.pos++]))<<21,nt<128?et:function(tt,et,nt){var rt,it,ot=nt.buf;if(rt=(112&(it=ot[nt.pos++]))>>4,it<128)return Ys(tt,rt,et);if(rt|=(127&(it=ot[nt.pos++]))<<3,it<128)return Ys(tt,rt,et);if(rt|=(127&(it=ot[nt.pos++]))<<10,it<128)return Ys(tt,rt,et);if(rt|=(127&(it=ot[nt.pos++]))<<17,it<128)return Ys(tt,rt,et);if(rt|=(127&(it=ot[nt.pos++]))<<24,it<128)return Ys(tt,rt,et);if(rt|=(1&(it=ot[nt.pos++]))<<31,it<128)return Ys(tt,rt,et);throw new Error("Expected varint not more than 10 bytes")}(et|=(15&(nt=rt[this.pos]))<<28,tt,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var tt=this.readVarint();return tt%2==1?(tt+1)/-2:tt/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var tt=this.readVarint()+this.pos,et=this.pos;return this.pos=tt,tt-et>=12&&Kp?function(tt,et,nt){return Kp.decode(tt.subarray(et,nt))}(this.buf,et,tt):function(tt,et,nt){for(var rt="",it=et;it<nt;){var ot,at,st,ct=tt[it],pt=null,ft=ct>239?4:ct>223?3:ct>191?2:1;if(it+ft>nt)break;1===ft?ct<128&&(pt=ct):2===ft?128==(192&(ot=tt[it+1]))&&(pt=(31&ct)<<6|63&ot)<=127&&(pt=null):3===ft?(at=tt[it+2],128==(192&(ot=tt[it+1]))&&128==(192&at)&&((pt=(15&ct)<<12|(63&ot)<<6|63&at)<=2047||pt>=55296&&pt<=57343)&&(pt=null)):4===ft&&(at=tt[it+2],st=tt[it+3],128==(192&(ot=tt[it+1]))&&128==(192&at)&&128==(192&st)&&((pt=(15&ct)<<18|(63&ot)<<12|(63&at)<<6|63&st)<=65535||pt>=1114112)&&(pt=null)),null===pt?(pt=65533,ft=1):pt>65535&&(pt-=65536,rt+=String.fromCharCode(pt>>>10&1023|55296),pt=56320|1023&pt),rt+=String.fromCharCode(pt),it+=ft}return rt}(this.buf,et,tt)},readBytes:function(){var tt=this.readVarint()+this.pos,et=this.buf.subarray(this.pos,tt);return this.pos=tt,et},readPackedVarint:function(tt,et){if(this.type!==Xs.Bytes)return tt.push(this.readVarint(et));var nt=Hs(this);for(tt=tt||[];this.pos<nt;)tt.push(this.readVarint(et));return tt},readPackedSVarint:function(tt){if(this.type!==Xs.Bytes)return tt.push(this.readSVarint());var et=Hs(this);for(tt=tt||[];this.pos<et;)tt.push(this.readSVarint());return tt},readPackedBoolean:function(tt){if(this.type!==Xs.Bytes)return tt.push(this.readBoolean());var et=Hs(this);for(tt=tt||[];this.pos<et;)tt.push(this.readBoolean());return tt},readPackedFloat:function(tt){if(this.type!==Xs.Bytes)return tt.push(this.readFloat());var et=Hs(this);for(tt=tt||[];this.pos<et;)tt.push(this.readFloat());return tt},readPackedDouble:function(tt){if(this.type!==Xs.Bytes)return tt.push(this.readDouble());var et=Hs(this);for(tt=tt||[];this.pos<et;)tt.push(this.readDouble());return tt},readPackedFixed32:function(tt){if(this.type!==Xs.Bytes)return tt.push(this.readFixed32());var et=Hs(this);for(tt=tt||[];this.pos<et;)tt.push(this.readFixed32());return tt},readPackedSFixed32:function(tt){if(this.type!==Xs.Bytes)return tt.push(this.readSFixed32());var et=Hs(this);for(tt=tt||[];this.pos<et;)tt.push(this.readSFixed32());return tt},readPackedFixed64:function(tt){if(this.type!==Xs.Bytes)return tt.push(this.readFixed64());var et=Hs(this);for(tt=tt||[];this.pos<et;)tt.push(this.readFixed64());return tt},readPackedSFixed64:function(tt){if(this.type!==Xs.Bytes)return tt.push(this.readSFixed64());var et=Hs(this);for(tt=tt||[];this.pos<et;)tt.push(this.readSFixed64());return tt},skip:function(tt){var et=7&tt;if(et===Xs.Varint)for(;this.buf[this.pos++]>127;);else if(et===Xs.Bytes)this.pos=this.readVarint()+this.pos;else if(et===Xs.Fixed32)this.pos+=4;else{if(et!==Xs.Fixed64)throw new Error("Unimplemented type: "+et);this.pos+=8}},writeTag:function(tt,et){this.writeVarint(tt<<3|et)},realloc:function(tt){for(var et=this.length||16;et<this.pos+tt;)et*=2;if(et!==this.length){var nt=new Uint8Array(et);nt.set(this.buf),this.buf=nt,this.length=et}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(tt){this.realloc(4),uu(this.buf,tt,this.pos),this.pos+=4},writeSFixed32:function(tt){this.realloc(4),uu(this.buf,tt,this.pos),this.pos+=4},writeFixed64:function(tt){this.realloc(8),uu(this.buf,-1&tt,this.pos),uu(this.buf,Math.floor(tt*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(tt){this.realloc(8),uu(this.buf,-1&tt,this.pos),uu(this.buf,Math.floor(tt*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(tt){(tt=+tt||0)>268435455||tt<0?function(tt,et){var nt,rt;if(tt>=0?(nt=tt%4294967296|0,rt=tt/4294967296|0):(rt=~(-tt/4294967296),4294967295^(nt=~(-tt%4294967296))?nt=nt+1|0:(nt=0,rt=rt+1|0)),tt>=0x10000000000000000||tt<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");et.realloc(10),function(tt,et,nt){nt.buf[nt.pos++]=127&tt|128,tt>>>=7,nt.buf[nt.pos++]=127&tt|128,tt>>>=7,nt.buf[nt.pos++]=127&tt|128,tt>>>=7,nt.buf[nt.pos++]=127&tt|128,nt.buf[nt.pos]=127&(tt>>>=7)}(nt,0,et),function(tt,et){var nt=(7&tt)<<4;et.buf[et.pos++]|=nt|((tt>>>=3)?128:0),tt&&(et.buf[et.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(et.buf[et.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(et.buf[et.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(et.buf[et.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(et.buf[et.pos++]=127&tt)))))}(rt,et)}(tt,this):(this.realloc(4),this.buf[this.pos++]=127&tt|(tt>127?128:0),tt<=127||(this.buf[this.pos++]=127&(tt>>>=7)|(tt>127?128:0),tt<=127||(this.buf[this.pos++]=127&(tt>>>=7)|(tt>127?128:0),tt<=127||(this.buf[this.pos++]=tt>>>7&127))))},writeSVarint:function(tt){this.writeVarint(tt<0?2*-tt-1:2*tt)},writeBoolean:function(tt){this.writeVarint(Boolean(tt))},writeString:function(tt){tt=String(tt),this.realloc(4*tt.length),this.pos++;var et=this.pos;this.pos=function(tt,et,nt){for(var rt,it,ot=0;ot<et.length;ot++){if((rt=et.charCodeAt(ot))>55295&&rt<57344){if(!it){rt>56319||ot+1===et.length?(tt[nt++]=239,tt[nt++]=191,tt[nt++]=189):it=rt;continue}if(rt<56320){tt[nt++]=239,tt[nt++]=191,tt[nt++]=189,it=rt;continue}rt=it-55296<<10|rt-56320|65536,it=null}else it&&(tt[nt++]=239,tt[nt++]=191,tt[nt++]=189,it=null);rt<128?tt[nt++]=rt:(rt<2048?tt[nt++]=rt>>6|192:(rt<65536?tt[nt++]=rt>>12|224:(tt[nt++]=rt>>18|240,tt[nt++]=rt>>12&63|128),tt[nt++]=rt>>6&63|128),tt[nt++]=63&rt|128)}return nt}(this.buf,tt,this.pos);var nt=this.pos-et;nt>=128&&$s(et,nt,this),this.pos=et-1,this.writeVarint(nt),this.pos+=nt},writeFloat:function(tt){this.realloc(4),Gs(this.buf,tt,this.pos,!0,23,4),this.pos+=4},writeDouble:function(tt){this.realloc(8),Gs(this.buf,tt,this.pos,!0,52,8),this.pos+=8},writeBytes:function(tt){var et=tt.length;this.writeVarint(et),this.realloc(et);for(var nt=0;nt<et;nt++)this.buf[this.pos++]=tt[nt]},writeRawMessage:function(tt,et){this.pos++;var nt=this.pos;tt(et,this);var rt=this.pos-nt;rt>=128&&$s(nt,rt,this),this.pos=nt-1,this.writeVarint(rt),this.pos+=rt},writeMessage:function(tt,et,nt){this.writeTag(tt,Xs.Bytes),this.writeRawMessage(et,nt)},writePackedVarint:function(tt,et){et.length&&this.writeMessage(tt,Ws,et)},writePackedSVarint:function(tt,et){et.length&&this.writeMessage(tt,Qs,et)},writePackedBoolean:function(tt,et){et.length&&this.writeMessage(tt,ru,et)},writePackedFloat:function(tt,et){et.length&&this.writeMessage(tt,tu,et)},writePackedDouble:function(tt,et){et.length&&this.writeMessage(tt,eu,et)},writePackedFixed32:function(tt,et){et.length&&this.writeMessage(tt,nu,et)},writePackedSFixed32:function(tt,et){et.length&&this.writeMessage(tt,iu,et)},writePackedFixed64:function(tt,et){et.length&&this.writeMessage(tt,au,et)},writePackedSFixed64:function(tt,et){et.length&&this.writeMessage(tt,ou,et)},writeBytesField:function(tt,et){this.writeTag(tt,Xs.Bytes),this.writeBytes(et)},writeFixed32Field:function(tt,et){this.writeTag(tt,Xs.Fixed32),this.writeFixed32(et)},writeSFixed32Field:function(tt,et){this.writeTag(tt,Xs.Fixed32),this.writeSFixed32(et)},writeFixed64Field:function(tt,et){this.writeTag(tt,Xs.Fixed64),this.writeFixed64(et)},writeSFixed64Field:function(tt,et){this.writeTag(tt,Xs.Fixed64),this.writeSFixed64(et)},writeVarintField:function(tt,et){this.writeTag(tt,Xs.Varint),this.writeVarint(et)},writeSVarintField:function(tt,et){this.writeTag(tt,Xs.Varint),this.writeSVarint(et)},writeStringField:function(tt,et){this.writeTag(tt,Xs.Bytes),this.writeString(et)},writeFloatField:function(tt,et){this.writeTag(tt,Xs.Fixed32),this.writeFloat(et)},writeDoubleField:function(tt,et){this.writeTag(tt,Xs.Fixed64),this.writeDouble(et)},writeBooleanField:function(tt,et){this.writeVarintField(tt,Boolean(et))}};var yu=function(tt,et){var nt=et.pixelRatio,rt=et.version,it=et.stretchX,ot=et.stretchY,at=et.content;this.paddedRect=tt,this.pixelRatio=nt,this.stretchX=it,this.stretchY=ot,this.content=at,this.version=rt},Yp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Yp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Yp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Yp.tlbr.get=function(){return this.tl.concat(this.br)},Yp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yu.prototype,Yp);var mu=function(tt,et){var nt={},rt={};this.haveRenderCallbacks=[];var it=[];this.addImages(tt,nt,it),this.addImages(et,rt,it);var ot=fu(it),at=new mo({width:ot.w||1,height:ot.h||1});for(var st in tt){var ct=tt[st],pt=nt[st].paddedRect;mo.copy(ct.data,at,{x:0,y:0},{x:pt.x+1,y:pt.y+1},ct.data)}for(var ft in et){var dt=et[ft],mt=rt[ft].paddedRect,yt=mt.x+1,vt=mt.y+1,Dt=dt.data.width,Ot=dt.data.height;mo.copy(dt.data,at,{x:0,y:0},{x:yt,y:vt},dt.data),mo.copy(dt.data,at,{x:0,y:Ot-1},{x:yt,y:vt-1},{width:Dt,height:1}),mo.copy(dt.data,at,{x:0,y:0},{x:yt,y:vt+Ot},{width:Dt,height:1}),mo.copy(dt.data,at,{x:Dt-1,y:0},{x:yt-1,y:vt},{width:1,height:Ot}),mo.copy(dt.data,at,{x:0,y:0},{x:yt+Dt,y:vt},{width:1,height:Ot})}this.image=at,this.iconPositions=nt,this.patternPositions=rt};mu.prototype.addImages=function(tt,et,nt){for(var rt in tt){var it=tt[rt],ot={x:0,y:0,w:it.data.width+2,h:it.data.height+2};nt.push(ot),et[rt]=new yu(ot,it),it.hasRenderCallback&&this.haveRenderCallbacks.push(rt)}},mu.prototype.patchUpdatedImages=function(tt,et){for(var nt in tt.dispatchRenderCallbacks(this.haveRenderCallbacks),tt.updatedImages)this.patchUpdatedImage(this.iconPositions[nt],tt.getImage(nt),et),this.patchUpdatedImage(this.patternPositions[nt],tt.getImage(nt),et)},mu.prototype.patchUpdatedImage=function(tt,et,nt){if(tt&&et&&tt.version!==et.version){tt.version=et.version;var rt=tt.tl;nt.update(et.data,void 0,{x:rt[0],y:rt[1]})}},Dn("ImagePosition",yu),Dn("ImageAtlas",mu);var Jp={horizontal:1,vertical:2,horizontalOnly:3},gu=function(){this.scale=1,this.fontStack="",this.imageName=null};gu.forText=function(tt,et){var nt=new gu;return nt.scale=tt||1,nt.fontStack=et,nt},gu.forImage=function(tt){var et=new gu;return et.imageName=tt,et};var xu=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function bu(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt){var Ot,Rt=xu.fromFeature(tt,it);dt===Jp.vertical&&Rt.verticalizePunctuation();var Bt=_u.processBidirectionalText,Ne=_u.processStyledBidirectionalText;if(Bt&&1===Rt.sections.length){Ot=[];for(var rn=0,vn=Bt(Rt.toString(),zu(Rt,pt,ot,et,rt,yt,vt));rn<vn.length;rn+=1){var bn=vn[rn],Tn=new xu;Tn.text=bn,Tn.sections=Rt.sections;for(var Cn=0;Cn<bn.length;Cn++)Tn.sectionIndex.push(0);Ot.push(Tn)}}else if(Ne){Ot=[];for(var Ln=0,In=Ne(Rt.text,Rt.sectionIndex,zu(Rt,pt,ot,et,rt,yt,vt));Ln<In.length;Ln+=1){var Mn=In[Ln],zn=new xu;zn.text=Mn[0],zn.sectionIndex=Mn[1],zn.sections=Rt.sections,Ot.push(zn)}}else Ot=function(tt,et){for(var nt=[],rt=tt.text,it=0,ot=0,at=et;ot<at.length;ot+=1){var st=at[ot];nt.push(tt.substring(it,st)),it=st}return it<rt.length&&nt.push(tt.substring(it,rt.length)),nt}(Rt,zu(Rt,pt,ot,et,rt,yt,vt));var Bn=[],Fn={positionedLines:Bn,text:Rt.toString(),top:ft[1],bottom:ft[1],left:ft[0],right:ft[0],writingMode:dt,iconsInText:!1,verticalizable:!1};return function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt){for(var mt=0,yt=-17,vt=0,Dt=0,Ot="right"===st?1:"left"===st?0:.5,Rt=0,Bt=0,Ne=it;Bt<Ne.length;Bt+=1){var rn=Ne[Bt];rn.trim();var vn=rn.getMaxScale(),bn=24*(vn-1),Tn={positionedGlyphs:[],lineOffset:0};tt.positionedLines[Rt]=Tn;var Cn=Tn.positionedGlyphs,Ln=0;if(rn.length()){for(var In=0;In<rn.length();In++){var Mn=rn.getSection(In),zn=rn.getSectionIndex(In),Bn=rn.getCharCode(In),Fn=0,Nn=null,Vn=null,Wn=null,$n=24,Yn=!(ct===Jp.horizontal||!ft&&!Gn(Bn)||ft&&(Qp[Bn]||(po=Bn,js.Arabic(po)||js["Arabic Supplement"](po)||js["Arabic Extended-A"](po)||js["Arabic Presentation Forms-A"](po)||js["Arabic Presentation Forms-B"](po))));if(Mn.imageName){var er=rt[Mn.imageName];if(!er)continue;Wn=Mn.imageName,tt.iconsInText=tt.iconsInText||!0,Vn=er.paddedRect;var rr=er.displaySize;Mn.scale=24*Mn.scale/dt,Fn=bn+(24-rr[1]*Mn.scale),$n=(Nn={width:rr[0],height:rr[1],left:1,top:-3,advance:Yn?rr[1]:rr[0]}).advance;var vr=Yn?rr[0]*Mn.scale-24*vn:rr[1]*Mn.scale-24*vn;vr>0&&vr>Ln&&(Ln=vr)}else{var wr=nt[Mn.fontStack],Sr=wr&&wr[Bn];if(Sr&&Sr.rect)Vn=Sr.rect,Nn=Sr.metrics;else{var ii=et[Mn.fontStack],qi=ii&&ii[Bn];if(!qi)continue;Nn=qi.metrics}Fn=24*(vn-Mn.scale)}Yn?(tt.verticalizable=!0,Cn.push({glyph:Bn,imageName:Wn,x:mt,y:yt+Fn,vertical:Yn,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:zn,metrics:Nn,rect:Vn}),mt+=$n*Mn.scale+pt):(Cn.push({glyph:Bn,imageName:Wn,x:mt,y:yt+Fn,vertical:Yn,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:zn,metrics:Nn,rect:Vn}),mt+=Nn.advance*Mn.scale+pt)}0!==Cn.length&&(vt=Math.max(mt-pt,vt),Mu(Cn,0,Cn.length-1,Ot,Ln)),mt=0;var uo=ot*vn+Ln;Tn.lineOffset=Math.max(Ln,bn),yt+=uo,Dt=Math.max(uo,Dt),++Rt}else yt+=ot,++Rt}var po,vo=yt- -17,So=Cu(at),ta=So.horizontalAlign,na=So.verticalAlign;(function(tt,et,nt,rt,it,ot,at,st,ct){var pt,ft=(et-nt)*it;pt=ot!==at?-st*rt- -17:(-rt*ct+.5)*at;for(var dt=0,mt=tt;dt<mt.length;dt+=1)for(var yt=0,vt=mt[dt].positionedGlyphs;yt<vt.length;yt+=1){var Dt=vt[yt];Dt.x+=ft,Dt.y+=pt}})(tt.positionedLines,Ot,ta,na,vt,Dt,ot,vo,it.length),tt.top+=-na*vo,tt.bottom=tt.top+vo,tt.left+=-ta*vt,tt.right=tt.left+vt}(Fn,et,nt,rt,Ot,at,st,ct,dt,pt,mt,Dt),!function(tt){for(var et=0,nt=tt;et<nt.length;et+=1)if(0!==nt[et].positionedGlyphs.length)return!1;return!0}(Bn)&&Fn}xu.fromFeature=function(tt,et){for(var nt=new xu,rt=0;rt<tt.sections.length;rt++){var it=tt.sections[rt];it.image?nt.addImageSection(it):nt.addTextSection(it,et)}return nt},xu.prototype.length=function(){return this.text.length},xu.prototype.getSection=function(tt){return this.sections[this.sectionIndex[tt]]},xu.prototype.getSectionIndex=function(tt){return this.sectionIndex[tt]},xu.prototype.getCharCode=function(tt){return this.text.charCodeAt(tt)},xu.prototype.verticalizePunctuation=function(){this.text=function(tt){for(var et="",nt=0;nt<tt.length;nt++){var rt=tt.charCodeAt(nt+1)||null,it=tt.charCodeAt(nt-1)||null;et+=rt&&Zn(rt)&&!Xp[tt[nt+1]]||it&&Zn(it)&&!Xp[tt[nt-1]]||!Xp[tt[nt]]?tt[nt]:Xp[tt[nt]]}return et}(this.text)},xu.prototype.trim=function(){for(var tt=0,et=0;et<this.text.length&&Qp[this.text.charCodeAt(et)];et++)tt++;for(var nt=this.text.length,rt=this.text.length-1;rt>=0&&rt>=tt&&Qp[this.text.charCodeAt(rt)];rt--)nt--;this.text=this.text.substring(tt,nt),this.sectionIndex=this.sectionIndex.slice(tt,nt)},xu.prototype.substring=function(tt,et){var nt=new xu;return nt.text=this.text.substring(tt,et),nt.sectionIndex=this.sectionIndex.slice(tt,et),nt.sections=this.sections,nt},xu.prototype.toString=function(){return this.text},xu.prototype.getMaxScale=function(){var tt=this;return this.sectionIndex.reduce((function(et,nt){return Math.max(et,tt.sections[nt].scale)}),0)},xu.prototype.addTextSection=function(tt,et){this.text+=tt.text,this.sections.push(gu.forText(tt.scale,tt.fontStack||et));for(var nt=this.sections.length-1,rt=0;rt<tt.text.length;++rt)this.sectionIndex.push(nt)},xu.prototype.addImageSection=function(tt){var et=tt.image?tt.image.name:"";if(0!==et.length){var nt=this.getNextImageSectionCharCode();nt?(this.text+=String.fromCharCode(nt),this.sections.push(gu.forImage(et)),this.sectionIndex.push(this.sections.length-1)):_("Reached maximum number of images 6401")}else _("Can't add FormattedSection with an empty image.")},xu.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Qp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rh={};function Au(tt,et,nt,rt,it,ot){if(et.imageName){var at=rt[et.imageName];return at?at.displaySize[0]*et.scale*24/ot+it:0}var st=nt[et.fontStack],ct=st&&st[tt];return ct?ct.metrics.advance*et.scale+it:0}function Su(tt,et,nt,rt){var it=Math.pow(tt-et,2);return rt?tt<et?it/2:2*it:it+Math.abs(nt)*nt}function ku(tt,et,nt){var rt=0;return 10===tt&&(rt-=1e4),nt&&(rt+=150),40!==tt&&65288!==tt||(rt+=50),41!==et&&65289!==et||(rt+=50),rt}function Iu(tt,et,nt,rt,it,ot){for(var at=null,st=Su(et,nt,it,ot),ct=0,pt=rt;ct<pt.length;ct+=1){var ft=pt[ct],dt=Su(et-ft.x,nt,it,ot)+ft.badness;dt<=st&&(at=ft,st=dt)}return{index:tt,x:et,priorBreak:at,badness:st}}function zu(tt,et,nt,rt,it,ot,at){if("point"!==ot)return[];if(!tt)return[];for(var st,ct=[],pt=function(tt,et,nt,rt,it,ot){for(var at=0,st=0;st<tt.length();st++){var ct=tt.getSection(st);at+=Au(tt.getCharCode(st),ct,rt,it,et,ot)}return at/Math.max(1,Math.ceil(at/nt))}(tt,et,nt,rt,it,at),ft=tt.text.indexOf("")>=0,dt=0,mt=0;mt<tt.length();mt++){var yt=tt.getSection(mt),vt=tt.getCharCode(mt);if(Qp[vt]||(dt+=Au(vt,yt,rt,it,et,at)),mt<tt.length()-1){var Dt=!((st=vt)<11904||!(js["Bopomofo Extended"](st)||js.Bopomofo(st)||js["CJK Compatibility Forms"](st)||js["CJK Compatibility Ideographs"](st)||js["CJK Compatibility"](st)||js["CJK Radicals Supplement"](st)||js["CJK Strokes"](st)||js["CJK Symbols and Punctuation"](st)||js["CJK Unified Ideographs Extension A"](st)||js["CJK Unified Ideographs"](st)||js["Enclosed CJK Letters and Months"](st)||js["Halfwidth and Fullwidth Forms"](st)||js.Hiragana(st)||js["Ideographic Description Characters"](st)||js["Kangxi Radicals"](st)||js["Katakana Phonetic Extensions"](st)||js.Katakana(st)||js["Vertical Forms"](st)||js["Yi Radicals"](st)||js["Yi Syllables"](st)));(rh[vt]||Dt||yt.imageName)&&ct.push(Iu(mt+1,dt,pt,ct,ku(vt,tt.getCharCode(mt+1),Dt&&ft),!1))}}return function t(tt){return tt?t(tt.priorBreak).concat(tt.index):[]}(Iu(tt.length(),dt,pt,ct,0,!0))}function Cu(tt){var et=.5,nt=.5;switch(tt){case"right":case"top-right":case"bottom-right":et=1;break;case"left":case"top-left":case"bottom-left":et=0}switch(tt){case"bottom":case"bottom-right":case"bottom-left":nt=1;break;case"top":case"top-right":case"top-left":nt=0}return{horizontalAlign:et,verticalAlign:nt}}function Mu(tt,et,nt,rt,it){if(rt||it)for(var ot=tt[nt],at=(tt[nt].x+ot.metrics.advance*ot.scale)*rt,st=et;st<=nt;st++)tt[st].x-=at,tt[st].y+=it}function Eu(tt,et,nt,rt,it,ot){var at,st=tt.image;if(st.content){var ct=st.content,pt=st.pixelRatio||1;at=[ct[0]/pt,ct[1]/pt,st.displaySize[0]-ct[2]/pt,st.displaySize[1]-ct[3]/pt]}var ft,dt,mt,yt,vt=et.left*ot,Dt=et.right*ot;"width"===nt||"both"===nt?(yt=it[0]+vt-rt[3],dt=it[0]+Dt+rt[1]):dt=(yt=it[0]+(vt+Dt-st.displaySize[0])/2)+st.displaySize[0];var Ot=et.top*ot,Rt=et.bottom*ot;return"height"===nt||"both"===nt?(ft=it[1]+Ot-rt[0],mt=it[1]+Rt+rt[2]):mt=(ft=it[1]+(Ot+Rt-st.displaySize[1])/2)+st.displaySize[1],{image:st,top:ft,right:dt,bottom:mt,left:yt,collisionPadding:at}}rh[10]=!0,rh[32]=!0,rh[38]=!0,rh[40]=!0,rh[41]=!0,rh[43]=!0,rh[45]=!0,rh[47]=!0,rh[173]=!0,rh[183]=!0,rh[8203]=!0,rh[8208]=!0,rh[8211]=!0,rh[8231]=!0;var ah=function(tt){function e(et,nt,rt,it){tt.call(this,et,nt),this.angle=rt,void 0!==it&&(this.segment=it)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(nt);function Pu(tt,et){var nt=et.expression;if("constant"===nt.kind)return{kind:"constant",layoutSize:nt.evaluate(new ai(tt+1))};if("source"===nt.kind)return{kind:"source"};for(var rt=nt.zoomStops,it=nt.interpolationType,ot=0;ot<rt.length&&rt[ot]<=tt;)ot++;for(var at=ot=Math.max(0,ot-1);at<rt.length&&rt[at]<tt+1;)at++;at=Math.min(rt.length-1,at);var st=rt[ot],ct=rt[at];return"composite"===nt.kind?{kind:"composite",minZoom:st,maxZoom:ct,interpolationType:it}:{kind:"camera",minZoom:st,maxZoom:ct,minSize:nt.evaluate(new ai(st)),maxSize:nt.evaluate(new ai(ct)),interpolationType:it}}function Bu(tt,et,nt){var rt=et.uSize,it=nt.lowerSize;return"source"===tt.kind?it/128:"composite"===tt.kind?qe(it/128,nt.upperSize/128,et.uSizeT):rt}function Vu(tt,et){var nt=0,rt=0;if("constant"===tt.kind)rt=tt.layoutSize;else if("source"!==tt.kind){var it=tt.interpolationType,ot=it?l(nr.interpolationFactor(it,et,tt.minZoom,tt.maxZoom),0,1):0;"camera"===tt.kind?rt=qe(tt.minSize,tt.maxSize,ot):nt=ot}return{uSizeT:nt,uSize:rt}}Dn("Anchor",ah);var sh=Object.freeze({__proto__:null,getSizeData:Pu,evaluateSizeForFeature:Bu,evaluateSizeForZoom:Vu,SIZE_PACK_FACTOR:128});function Du(tt,et,nt,rt,it){if(void 0===et.segment)return!0;for(var ot=et,at=et.segment+1,st=0;st>-nt/2;){if(--at<0)return!1;st-=tt[at].dist(ot),ot=tt[at]}st+=tt[at].dist(tt[at+1]),at++;for(var ct=[],pt=0;st<nt/2;){var ft=tt[at],dt=tt[at+1];if(!dt)return!1;var mt=tt[at-1].angleTo(ft)-ft.angleTo(dt);for(mt=Math.abs((mt+3*Math.PI)%(2*Math.PI)-Math.PI),ct.push({distance:st,angleDelta:mt}),pt+=mt;st-ct[0].distance>rt;)pt-=ct.shift().angleDelta;if(pt>it)return!1;at++,st+=ft.dist(dt)}return!0}function Lu(tt){for(var et=0,nt=0;nt<tt.length-1;nt++)et+=tt[nt].dist(tt[nt+1]);return et}function Ru(tt,et,nt){return tt?.6*et*nt:0}function Ou(tt,et){return Math.max(tt?tt.right-tt.left:0,et?et.right-et.left:0)}function Uu(tt,et,nt,rt,it,ot){for(var at=Ru(nt,it,ot),st=Ou(nt,rt)*ot,ct=0,pt=Lu(tt)/2,ft=0;ft<tt.length-1;ft++){var dt=tt[ft],mt=tt[ft+1],yt=dt.dist(mt);if(ct+yt>pt){var vt=(pt-ct)/yt,Dt=qe(dt.x,mt.x,vt),Ot=qe(dt.y,mt.y,vt),Rt=new ah(Dt,Ot,mt.angleTo(dt),ft);return Rt._round(),!at||Du(tt,Rt,st,at,et)?Rt:void 0}ct+=yt}}function ju(tt,et,nt,rt,it,ot,at,st,ct){var pt=Ru(rt,ot,at),ft=Ou(rt,it),dt=ft*at,mt=0===tt[0].x||tt[0].x===ct||0===tt[0].y||tt[0].y===ct;return et-dt<et/4&&(et=dt+et/4),function t(tt,et,nt,rt,it,ot,at,st,ct){for(var pt=ot/2,ft=Lu(tt),dt=0,mt=et-nt,yt=[],vt=0;vt<tt.length-1;vt++){for(var Dt=tt[vt],Ot=tt[vt+1],Rt=Dt.dist(Ot),Bt=Ot.angleTo(Dt);mt+nt<dt+Rt;){var Ne=((mt+=nt)-dt)/Rt,rn=qe(Dt.x,Ot.x,Ne),vn=qe(Dt.y,Ot.y,Ne);if(rn>=0&&rn<ct&&vn>=0&&vn<ct&&mt-pt>=0&&mt+pt<=ft){var bn=new ah(rn,vn,Bt,vt);bn._round(),rt&&!Du(tt,bn,ot,rt,it)||yt.push(bn)}}dt+=Rt}return st||yt.length||at||(yt=t(tt,dt/2,nt,rt,it,ot,at,!0,ct)),yt}(tt,mt?et/2*st%et:(ft/2+2*ot)*at*st%et,et,pt,nt,dt,mt,!1,ct)}function qu(tt,et,rt,it,ot){for(var at=[],st=0;st<tt.length;st++)for(var ct=tt[st],pt=void 0,ft=0;ft<ct.length-1;ft++){var dt=ct[ft],mt=ct[ft+1];dt.x<et&&mt.x<et||(dt.x<et?dt=new nt(et,dt.y+(et-dt.x)/(mt.x-dt.x)*(mt.y-dt.y))._round():mt.x<et&&(mt=new nt(et,dt.y+(et-dt.x)/(mt.x-dt.x)*(mt.y-dt.y))._round()),dt.y<rt&&mt.y<rt||(dt.y<rt?dt=new nt(dt.x+(rt-dt.y)/(mt.y-dt.y)*(mt.x-dt.x),rt)._round():mt.y<rt&&(mt=new nt(dt.x+(rt-dt.y)/(mt.y-dt.y)*(mt.x-dt.x),rt)._round()),dt.x>=it&&mt.x>=it||(dt.x>=it?dt=new nt(it,dt.y+(it-dt.x)/(mt.x-dt.x)*(mt.y-dt.y))._round():mt.x>=it&&(mt=new nt(it,dt.y+(it-dt.x)/(mt.x-dt.x)*(mt.y-dt.y))._round()),dt.y>=ot&&mt.y>=ot||(dt.y>=ot?dt=new nt(dt.x+(ot-dt.y)/(mt.y-dt.y)*(mt.x-dt.x),ot)._round():mt.y>=ot&&(mt=new nt(dt.x+(ot-dt.y)/(mt.y-dt.y)*(mt.x-dt.x),ot)._round()),pt&&dt.equals(pt[pt.length-1])||at.push(pt=[dt]),pt.push(mt)))))}return at}function Nu(tt,et,rt,it){var ot=[],at=tt.image,st=at.pixelRatio,ct=at.paddedRect.w-2,pt=at.paddedRect.h-2,ft=tt.right-tt.left,dt=tt.bottom-tt.top,mt=at.stretchX||[[0,ct]],yt=at.stretchY||[[0,pt]],y=function(tt,et){return tt+et[1]-et[0]},vt=mt.reduce(y,0),Dt=yt.reduce(y,0),Ot=ct-vt,Rt=pt-Dt,Bt=0,Ne=vt,rn=0,vn=Dt,bn=0,Tn=Ot,Cn=0,Ln=Rt;if(at.content&&it){var In=at.content;Bt=Ku(mt,0,In[0]),rn=Ku(yt,0,In[1]),Ne=Ku(mt,In[0],In[2]),vn=Ku(yt,In[1],In[3]),bn=In[0]-Bt,Cn=In[1]-rn,Tn=In[2]-In[0]-Ne,Ln=In[3]-In[1]-vn}var C=function(it,ot,ct,pt){var mt=Zu(it.stretch-Bt,Ne,ft,tt.left),yt=Xu(it.fixed-bn,Tn,it.stretch,vt),Ot=Zu(ot.stretch-rn,vn,dt,tt.top),Rt=Xu(ot.fixed-Cn,Ln,ot.stretch,Dt),In=Zu(ct.stretch-Bt,Ne,ft,tt.left),Mn=Xu(ct.fixed-bn,Tn,ct.stretch,vt),zn=Zu(pt.stretch-rn,vn,dt,tt.top),Bn=Xu(pt.fixed-Cn,Ln,pt.stretch,Dt),Fn=new nt(mt,Ot),Nn=new nt(In,Ot),Vn=new nt(In,zn),Wn=new nt(mt,zn),$n=new nt(yt/st,Rt/st),Yn=new nt(Mn/st,Bn/st),er=et*Math.PI/180;if(er){var rr=Math.sin(er),vr=Math.cos(er),wr=[vr,-rr,rr,vr];Fn._matMult(wr),Nn._matMult(wr),Wn._matMult(wr),Vn._matMult(wr)}var Sr=it.stretch+it.fixed,ii=ot.stretch+ot.fixed;return{tl:Fn,tr:Nn,bl:Wn,br:Vn,tex:{x:at.paddedRect.x+1+Sr,y:at.paddedRect.y+1+ii,w:ct.stretch+ct.fixed-Sr,h:pt.stretch+pt.fixed-ii},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$n,pixelOffsetBR:Yn,minFontScaleX:Tn/st/ft,minFontScaleY:Ln/st/dt,isSDF:rt}};if(it&&(at.stretchX||at.stretchY))for(var Mn=Gu(mt,Ot,vt),zn=Gu(yt,Rt,Dt),Bn=0;Bn<Mn.length-1;Bn++)for(var Fn=Mn[Bn],Nn=Mn[Bn+1],Vn=0;Vn<zn.length-1;Vn++)ot.push(C(Fn,zn[Vn],Nn,zn[Vn+1]));else ot.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ct+1},{fixed:0,stretch:pt+1}));return ot}function Ku(tt,et,nt){for(var rt=0,it=0,ot=tt;it<ot.length;it+=1){var at=ot[it];rt+=Math.max(et,Math.min(nt,at[1]))-Math.max(et,Math.min(nt,at[0]))}return rt}function Gu(tt,et,nt){for(var rt=[{fixed:-1,stretch:0}],it=0,ot=tt;it<ot.length;it+=1){var at=ot[it],st=at[0],ct=at[1],pt=rt[rt.length-1];rt.push({fixed:st-pt.stretch,stretch:pt.stretch}),rt.push({fixed:st-pt.stretch,stretch:pt.stretch+(ct-st)})}return rt.push({fixed:et+1,stretch:nt}),rt}function Zu(tt,et,nt,rt){return tt/et*nt+rt}function Xu(tt,et,nt,rt){return tt-et*nt/rt}var Ju=function(tt,et,rt,it,ot,at,st,ct,pt,ft){if(this.boxStartIndex=tt.length,pt){var dt=at.top,mt=at.bottom,yt=at.collisionPadding;yt&&(dt-=yt[1],mt+=yt[3]);var vt=mt-dt;vt>0&&(vt=Math.max(10,vt),this.circleDiameter=vt)}else{var Dt=at.top*st-ct,Ot=at.bottom*st+ct,Rt=at.left*st-ct,Bt=at.right*st+ct,Ne=at.collisionPadding;if(Ne&&(Rt-=Ne[0]*st,Dt-=Ne[1]*st,Bt+=Ne[2]*st,Ot+=Ne[3]*st),ft){var rn=new nt(Rt,Dt),vn=new nt(Bt,Dt),bn=new nt(Rt,Ot),Tn=new nt(Bt,Ot),Cn=ft*Math.PI/180;rn._rotate(Cn),vn._rotate(Cn),bn._rotate(Cn),Tn._rotate(Cn),Rt=Math.min(rn.x,vn.x,bn.x,Tn.x),Bt=Math.max(rn.x,vn.x,bn.x,Tn.x),Dt=Math.min(rn.y,vn.y,bn.y,Tn.y),Ot=Math.max(rn.y,vn.y,bn.y,Tn.y)}tt.emplaceBack(et.x,et.y,Rt,Dt,Bt,Ot,rt,it,ot)}this.boxEndIndex=tt.length},Hu=function(tt,et){if(void 0===tt&&(tt=[]),void 0===et&&(et=Yu),this.data=tt,this.length=this.data.length,this.compare=et,this.length>0)for(var nt=(this.length>>1)-1;nt>=0;nt--)this._down(nt)};function Yu(tt,et){return tt<et?-1:tt>et?1:0}function $u(tt,et,rt){void 0===et&&(et=1),void 0===rt&&(rt=!1);for(var it=1/0,ot=1/0,at=-1/0,st=-1/0,ct=tt[0],pt=0;pt<ct.length;pt++){var ft=ct[pt];(!pt||ft.x<it)&&(it=ft.x),(!pt||ft.y<ot)&&(ot=ft.y),(!pt||ft.x>at)&&(at=ft.x),(!pt||ft.y>st)&&(st=ft.y)}var dt=Math.min(at-it,st-ot),mt=dt/2,yt=new Hu([],Wu);if(0===dt)return new nt(it,ot);for(var vt=it;vt<at;vt+=dt)for(var Dt=ot;Dt<st;Dt+=dt)yt.push(new Qu(vt+mt,Dt+mt,mt,tt));for(var Ot=function(tt){for(var et=0,nt=0,rt=0,it=tt[0],ot=0,at=it.length,st=at-1;ot<at;st=ot++){var ct=it[ot],pt=it[st],ft=ct.x*pt.y-pt.x*ct.y;nt+=(ct.x+pt.x)*ft,rt+=(ct.y+pt.y)*ft,et+=3*ft}return new Qu(nt/et,rt/et,0,tt)}(tt),Rt=yt.length;yt.length;){var Bt=yt.pop();(Bt.d>Ot.d||!Ot.d)&&(Ot=Bt,rt&&console.log("found best %d after %d probes",Math.round(1e4*Bt.d)/1e4,Rt)),Bt.max-Ot.d<=et||(yt.push(new Qu(Bt.p.x-(mt=Bt.h/2),Bt.p.y-mt,mt,tt)),yt.push(new Qu(Bt.p.x+mt,Bt.p.y-mt,mt,tt)),yt.push(new Qu(Bt.p.x-mt,Bt.p.y+mt,mt,tt)),yt.push(new Qu(Bt.p.x+mt,Bt.p.y+mt,mt,tt)),Rt+=4)}return rt&&(console.log("num probes: "+Rt),console.log("best distance: "+Ot.d)),Ot.p}function Wu(tt,et){return et.max-tt.max}function Qu(tt,et,rt,it){this.p=new nt(tt,et),this.h=rt,this.d=function(tt,et){for(var nt=!1,rt=1/0,it=0;it<et.length;it++)for(var ot=et[it],at=0,st=ot.length,ct=st-1;at<st;ct=at++){var pt=ot[at],ft=ot[ct];pt.y>tt.y!=ft.y>tt.y&&tt.x<(ft.x-pt.x)*(tt.y-pt.y)/(ft.y-pt.y)+pt.x&&(nt=!nt),rt=Math.min(rt,Xa(tt,pt,ft))}return(nt?1:-1)*Math.sqrt(rt)}(this.p,it),this.max=this.d+this.h*Math.SQRT2}Hu.prototype.push=function(tt){this.data.push(tt),this.length++,this._up(this.length-1)},Hu.prototype.pop=function(){if(0!==this.length){var tt=this.data[0],et=this.data.pop();return this.length--,this.length>0&&(this.data[0]=et,this._down(0)),tt}},Hu.prototype.peek=function(){return this.data[0]},Hu.prototype._up=function(tt){for(var et=this.data,nt=this.compare,rt=et[tt];tt>0;){var it=tt-1>>1,ot=et[it];if(nt(rt,ot)>=0)break;et[tt]=ot,tt=it}et[tt]=rt},Hu.prototype._down=function(tt){for(var et=this.data,nt=this.compare,rt=this.length>>1,it=et[tt];tt<rt;){var ot=1+(tt<<1),at=et[ot],st=ot+1;if(st<this.length&&nt(et[st],at)<0&&(ot=st,at=et[st]),nt(at,it)>=0)break;et[tt]=at,tt=ot}et[tt]=it};var lh=Number.POSITIVE_INFINITY;function el(tt,et){return et[1]!==lh?function(tt,et,nt){var rt=0,it=0;switch(et=Math.abs(et),nt=Math.abs(nt),tt){case"top-right":case"top-left":case"top":it=nt-7;break;case"bottom-right":case"bottom-left":case"bottom":it=7-nt}switch(tt){case"top-right":case"bottom-right":case"right":rt=-et;break;case"top-left":case"bottom-left":case"left":rt=et}return[rt,it]}(tt,et[0],et[1]):function(tt,et){var nt=0,rt=0;et<0&&(et=0);var it=et/Math.sqrt(2);switch(tt){case"top-right":case"top-left":rt=it-7;break;case"bottom-right":case"bottom-left":rt=7-it;break;case"bottom":rt=7-et;break;case"top":rt=et-7}switch(tt){case"top-right":case"bottom-right":nt=-it;break;case"top-left":case"bottom-left":nt=it;break;case"left":nt=et;break;case"right":nt=-et}return[nt,rt]}(tt,et[0])}function rl(tt){switch(tt){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nl(tt,et,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt){var Ot=function(tt,et,rt,it,ot,at,st,ct){for(var pt=it.layout.get("text-rotate").evaluate(at,{})*Math.PI/180,ft=[],dt=0,mt=et.positionedLines;dt<mt.length;dt+=1)for(var yt=mt[dt],vt=0,Dt=yt.positionedGlyphs;vt<Dt.length;vt+=1){var Ot=Dt[vt];if(Ot.rect){var Rt=Ot.rect||{},Bt=4,Ne=!0,rn=1,vn=0,bn=(ot||ct)&&Ot.vertical,Tn=Ot.metrics.advance*Ot.scale/2;if(ct&&et.verticalizable&&(vn=yt.lineOffset/2-(Ot.imageName?-(24-Ot.metrics.width*Ot.scale)/2:24*(Ot.scale-1))),Ot.imageName){var Cn=st[Ot.imageName];Ne=Cn.sdf,Bt=1/(rn=Cn.pixelRatio)}var Ln=ot?[Ot.x+Tn,Ot.y]:[0,0],In=ot?[0,0]:[Ot.x+Tn+rt[0],Ot.y+rt[1]-vn],Mn=[0,0];bn&&(Mn=In,In=[0,0]);var zn=(Ot.metrics.left-Bt)*Ot.scale-Tn+In[0],Bn=(-Ot.metrics.top-Bt)*Ot.scale+In[1],Fn=zn+Rt.w*Ot.scale/rn,Nn=Bn+Rt.h*Ot.scale/rn,Vn=new nt(zn,Bn),Wn=new nt(Fn,Bn),$n=new nt(zn,Nn),Yn=new nt(Fn,Nn);if(bn){var er=new nt(-Tn,Tn- -17),rr=-Math.PI/2,vr=12-Tn,wr=new nt(22-vr,-(Ot.imageName?vr:0)),Sr=new(Function.prototype.bind.apply(nt,[null].concat(Mn)));Vn._rotateAround(rr,er)._add(wr)._add(Sr),Wn._rotateAround(rr,er)._add(wr)._add(Sr),$n._rotateAround(rr,er)._add(wr)._add(Sr),Yn._rotateAround(rr,er)._add(wr)._add(Sr)}if(pt){var ii=Math.sin(pt),qi=Math.cos(pt),uo=[qi,-ii,ii,qi];Vn._matMult(uo),Wn._matMult(uo),$n._matMult(uo),Yn._matMult(uo)}var po=new nt(0,0),vo=new nt(0,0);ft.push({tl:Vn,tr:Wn,bl:$n,br:Yn,tex:Rt,writingMode:et.writingMode,glyphOffset:Ln,sectionIndex:Ot.sectionIndex,isSDF:Ne,pixelOffsetTL:po,pixelOffsetBR:vo,minFontScaleX:0,minFontScaleY:0})}}return ft}(0,rt,ct,ot,at,st,it,tt.allowVerticalPlacement),Rt=tt.textSizeData,Bt=null;"source"===Rt.kind?(Bt=[128*ot.layout.get("text-size").evaluate(st,{})])[0]>32640&&_(tt.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Rt.kind&&((Bt=[128*vt.compositeTextSizes[0].evaluate(st,{},Dt),128*vt.compositeTextSizes[1].evaluate(st,{},Dt)])[0]>32640||Bt[1]>32640)&&_(tt.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),tt.addSymbols(tt.text,Ot,Bt,ct,at,st,ft,et,pt.lineStartIndex,pt.lineLength,yt,Dt);for(var Ne=0,rn=dt;Ne<rn.length;Ne+=1)mt[rn[Ne]]=tt.text.placedSymbolArray.length-1;return 4*Ot.length}function il(tt){for(var et in tt)return tt[et];return null}function al(tt,et,nt,rt){var it=tt.compareText;if(et in it){for(var ot=it[et],at=ot.length-1;at>=0;at--)if(rt.dist(ot[at])<nt)return!0}else it[et]=[];return it[et].push(rt),!1}var ph=Ip.VectorTileFeature.types,mh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ul(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt){var yt=st?Math.min(32640,Math.round(st[0])):0,vt=st?Math.min(32640,Math.round(st[1])):0;tt.emplaceBack(et,nt,Math.round(32*rt),Math.round(32*it),ot,at,(yt<<1)+(ct?1:0),vt,16*pt,16*ft,256*dt,256*mt)}function ll(tt,et,nt){tt.emplaceBack(et.x,et.y,nt),tt.emplaceBack(et.x,et.y,nt),tt.emplaceBack(et.x,et.y,nt),tt.emplaceBack(et.x,et.y,nt)}function pl(tt){for(var et=0,nt=tt.sections;et<nt.length;et+=1)if(Hn(nt[et].text))return!0;return!1}var cl=function(tt){this.layoutVertexArray=new yl,this.indexArray=new Cl,this.programConfigurations=tt,this.segments=new aa,this.dynamicLayoutVertexArray=new vl,this.opacityVertexArray=new _l,this.placedSymbolArray=new wc};cl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},cl.prototype.upload=function(tt,et,nt,rt){this.isEmpty()||(nt&&(this.layoutVertexBuffer=tt.createVertexBuffer(this.layoutVertexArray,Zp.members),this.indexBuffer=tt.createIndexBuffer(this.indexArray,et),this.dynamicLayoutVertexBuffer=tt.createVertexBuffer(this.dynamicLayoutVertexArray,qp.members,!0),this.opacityVertexBuffer=tt.createVertexBuffer(this.opacityVertexArray,mh,!0),this.opacityVertexBuffer.itemSize=1),(nt||rt)&&this.programConfigurations.upload(tt))},cl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Dn("SymbolBuffers",cl);var hl=function(tt,et,nt){this.layoutVertexArray=new tt,this.layoutAttributes=et,this.indexArray=new nt,this.segments=new aa,this.collisionVertexArray=new Sl};hl.prototype.upload=function(tt){this.layoutVertexBuffer=tt.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=tt.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=tt.createVertexBuffer(this.collisionVertexArray,Hp.members,!0)},hl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Dn("CollisionBuffers",hl);var fl=function(tt){this.collisionBoxArray=tt.collisionBoxArray,this.zoom=tt.zoom,this.overscaling=tt.overscaling,this.layers=tt.layers,this.layerIds=this.layers.map((function(tt){return tt.id})),this.index=tt.index,this.pixelRatio=tt.pixelRatio,this.sourceLayerIndex=tt.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=no([]),this.placementViewportMatrix=no([]);var et=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pu(this.zoom,et["text-size"]),this.iconSizeData=Pu(this.zoom,et["icon-size"]);var nt=this.layers[0].layout,rt=nt.get("symbol-sort-key"),it=nt.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==it&&void 0!==rt.constantOr(1),this.sortFeaturesByY=("viewport-y"===it||"auto"===it&&!this.sortFeaturesByKey)&&(nt.get("text-allow-overlap")||nt.get("icon-allow-overlap")||nt.get("text-ignore-placement")||nt.get("icon-ignore-placement")),"point"===nt.get("symbol-placement")&&(this.writingModes=nt.get("text-writing-mode").map((function(tt){return Jp[tt]}))),this.stateDependentLayerIds=this.layers.filter((function(tt){return tt.isStateDependent()})).map((function(tt){return tt.id})),this.sourceID=tt.sourceID};fl.prototype.createArrays=function(){this.text=new cl(new Pa(this.layers,this.zoom,(function(tt){return/^text/.test(tt)}))),this.icon=new cl(new Pa(this.layers,this.zoom,(function(tt){return/^icon/.test(tt)}))),this.glyphOffsetArray=new kc,this.lineVertexArray=new Ic,this.symbolInstances=new Cc},fl.prototype.calculateGlyphDependencies=function(tt,et,nt,rt,it){for(var ot=0;ot<tt.length;ot++)if(et[tt.charCodeAt(ot)]=!0,(nt||rt)&&it){var at=Xp[tt.charAt(ot)];at&&(et[at.charCodeAt(0)]=!0)}},fl.prototype.populate=function(tt,et,nt){var rt=this.layers[0],it=rt.layout,ot=it.get("text-font"),at=it.get("text-field"),st=it.get("icon-image"),ct=("constant"!==at.value.kind||at.value.value instanceof ee&&!at.value.value.isEmpty()||at.value.value.toString().length>0)&&("constant"!==ot.value.kind||ot.value.value.length>0),pt="constant"!==st.value.kind||!!st.value.value||Object.keys(st.parameters).length>0,ft=it.get("symbol-sort-key");if(this.features=[],ct||pt){for(var dt=et.iconDependencies,mt=et.glyphDependencies,yt=et.availableImages,vt=new ai(this.zoom),Dt=0,Ot=tt;Dt<Ot.length;Dt+=1){var Rt=Ot[Dt],Bt=Rt.feature,Ne=Rt.id,rn=Rt.index,vn=Rt.sourceLayerIndex,bn=rt._featureFilter.needGeometry,Tn={type:Bt.type,id:Ne,properties:Bt.properties,geometry:bn?La(Bt):[]};if(rt._featureFilter.filter(vt,Tn,nt)){bn||(Tn.geometry=La(Bt));var Cn=void 0;if(ct){var Ln=rt.getValueAndResolveTokens("text-field",Tn,nt,yt),In=ee.factory(Ln);pl(In)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ri()||this.hasRTLText&&_u.isParsed())&&(Cn=qs(In,rt,Tn))}var Mn=void 0;if(pt){var zn=rt.getValueAndResolveTokens("icon-image",Tn,nt,yt);Mn=zn instanceof re?zn:re.fromString(zn)}if(Cn||Mn){var Bn=this.sortFeaturesByKey?ft.evaluate(Tn,{},nt):void 0,Fn={id:Ne,text:Cn,icon:Mn,index:rn,sourceLayerIndex:vn,geometry:La(Bt),properties:Bt.properties,type:ph[Bt.type],sortKey:Bn};if(this.features.push(Fn),Mn&&(dt[Mn.name]=!0),Cn){var Nn=ot.evaluate(Tn,{},nt).join(","),Vn="map"===it.get("text-rotation-alignment")&&"point"!==it.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Jp.vertical)>=0;for(var Wn=0,$n=Cn.sections;Wn<$n.length;Wn+=1){var Yn=$n[Wn];if(Yn.image)dt[Yn.image.name]=!0;else{var er=Kn(Cn.toString()),rr=Yn.fontStack||Nn,vr=mt[rr]=mt[rr]||{};this.calculateGlyphDependencies(Yn.text,vr,Vn,this.allowVerticalPlacement,er)}}}}}}"line"===it.get("symbol-placement")&&(this.features=function(tt){var et={},nt={},rt=[],it=0;function a(et){rt.push(tt[et]),it++}function o(tt,et,it){var ot=nt[tt];return delete nt[tt],nt[et]=ot,rt[ot].geometry[0].pop(),rt[ot].geometry[0]=rt[ot].geometry[0].concat(it[0]),ot}function s(tt,nt,it){var ot=et[nt];return delete et[nt],et[tt]=ot,rt[ot].geometry[0].shift(),rt[ot].geometry[0]=it[0].concat(rt[ot].geometry[0]),ot}function u(tt,et,nt){var rt=nt?et[0][et[0].length-1]:et[0][0];return tt+":"+rt.x+":"+rt.y}for(var ot=0;ot<tt.length;ot++){var at=tt[ot],st=at.geometry,ct=at.text?at.text.toString():null;if(ct){var pt=u(ct,st),ft=u(ct,st,!0);if(pt in nt&&ft in et&&nt[pt]!==et[ft]){var dt=s(pt,ft,st),mt=o(pt,ft,rt[dt].geometry);delete et[pt],delete nt[ft],nt[u(ct,rt[mt].geometry,!0)]=mt,rt[dt].geometry=null}else pt in nt?o(pt,ft,st):ft in et?s(pt,ft,st):(a(ot),et[pt]=it-1,nt[ft]=it-1)}else a(ot)}return rt.filter((function(tt){return tt.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(tt,et){return tt.sortKey-et.sortKey}))}},fl.prototype.update=function(tt,et,nt){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(tt,et,this.layers,nt),this.icon.programConfigurations.updatePaintArrays(tt,et,this.layers,nt))},fl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},fl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},fl.prototype.upload=function(tt){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(tt),this.iconCollisionBox.upload(tt)),this.text.upload(tt,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(tt,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},fl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},fl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},fl.prototype.addToLineVertexArray=function(tt,et){var nt=this.lineVertexArray.length;if(void 0!==tt.segment){for(var rt=tt.dist(et[tt.segment+1]),it=tt.dist(et[tt.segment]),ot={},at=tt.segment+1;at<et.length;at++)ot[at]={x:et[at].x,y:et[at].y,tileUnitDistanceFromAnchor:rt},at<et.length-1&&(rt+=et[at+1].dist(et[at]));for(var st=tt.segment||0;st>=0;st--)ot[st]={x:et[st].x,y:et[st].y,tileUnitDistanceFromAnchor:it},st>0&&(it+=et[st-1].dist(et[st]));for(var ct=0;ct<et.length;ct++){var pt=ot[ct];this.lineVertexArray.emplaceBack(pt.x,pt.y,pt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:nt,lineLength:this.lineVertexArray.length-nt}},fl.prototype.addSymbols=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt){for(var mt=tt.indexArray,yt=tt.layoutVertexArray,vt=tt.segments.prepareSegment(4*et.length,yt,mt,ot.sortKey),Dt=this.glyphOffsetArray.length,Ot=vt.vertexLength,Rt=this.allowVerticalPlacement&&at===Jp.vertical?Math.PI/2:0,Bt=ot.text&&ot.text.sections,Ne=0;Ne<et.length;Ne++){var rn=et[Ne],vn=rn.tl,bn=rn.tr,Tn=rn.bl,Cn=rn.br,Ln=rn.tex,In=rn.pixelOffsetTL,Mn=rn.pixelOffsetBR,zn=rn.minFontScaleX,Bn=rn.minFontScaleY,Fn=rn.glyphOffset,Nn=rn.isSDF,Vn=rn.sectionIndex,Wn=vt.vertexLength,$n=Fn[1];ul(yt,st.x,st.y,vn.x,$n+vn.y,Ln.x,Ln.y,nt,Nn,In.x,In.y,zn,Bn),ul(yt,st.x,st.y,bn.x,$n+bn.y,Ln.x+Ln.w,Ln.y,nt,Nn,Mn.x,In.y,zn,Bn),ul(yt,st.x,st.y,Tn.x,$n+Tn.y,Ln.x,Ln.y+Ln.h,nt,Nn,In.x,Mn.y,zn,Bn),ul(yt,st.x,st.y,Cn.x,$n+Cn.y,Ln.x+Ln.w,Ln.y+Ln.h,nt,Nn,Mn.x,Mn.y,zn,Bn),ll(tt.dynamicLayoutVertexArray,st,Rt),mt.emplaceBack(Wn,Wn+1,Wn+2),mt.emplaceBack(Wn+1,Wn+2,Wn+3),vt.vertexLength+=4,vt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Fn[0]),Ne!==et.length-1&&Vn===et[Ne+1].sectionIndex||tt.programConfigurations.populatePaintArrays(yt.length,ot,ot.index,{},dt,Bt&&Bt[Vn])}tt.placedSymbolArray.emplaceBack(st.x,st.y,Dt,this.glyphOffsetArray.length-Dt,Ot,ct,pt,st.segment,nt?nt[0]:0,nt?nt[1]:0,rt[0],rt[1],at,0,!1,0,ft)},fl.prototype._addCollisionDebugVertex=function(tt,et,nt,rt,it,ot){return et.emplaceBack(0,0),tt.emplaceBack(nt.x,nt.y,rt,it,Math.round(ot.x),Math.round(ot.y))},fl.prototype.addCollisionDebugVertices=function(tt,et,rt,it,ot,at,st){var ct=ot.segments.prepareSegment(4,ot.layoutVertexArray,ot.indexArray),pt=ct.vertexLength,ft=ot.layoutVertexArray,dt=ot.collisionVertexArray,mt=st.anchorX,yt=st.anchorY;this._addCollisionDebugVertex(ft,dt,at,mt,yt,new nt(tt,et)),this._addCollisionDebugVertex(ft,dt,at,mt,yt,new nt(rt,et)),this._addCollisionDebugVertex(ft,dt,at,mt,yt,new nt(rt,it)),this._addCollisionDebugVertex(ft,dt,at,mt,yt,new nt(tt,it)),ct.vertexLength+=4;var vt=ot.indexArray;vt.emplaceBack(pt,pt+1),vt.emplaceBack(pt+1,pt+2),vt.emplaceBack(pt+2,pt+3),vt.emplaceBack(pt+3,pt),ct.primitiveLength+=4},fl.prototype.addDebugCollisionBoxes=function(tt,et,nt,rt){for(var it=tt;it<et;it++){var ot=this.collisionBoxArray.get(it);this.addCollisionDebugVertices(ot.x1,ot.y1,ot.x2,ot.y2,rt?this.textCollisionBox:this.iconCollisionBox,ot.anchorPoint,nt)}},fl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hl(bl,Wp.members,Hl),this.iconCollisionBox=new hl(bl,Wp.members,Hl);for(var tt=0;tt<this.symbolInstances.length;tt++){var et=this.symbolInstances.get(tt);this.addDebugCollisionBoxes(et.textBoxStartIndex,et.textBoxEndIndex,et,!0),this.addDebugCollisionBoxes(et.verticalTextBoxStartIndex,et.verticalTextBoxEndIndex,et,!0),this.addDebugCollisionBoxes(et.iconBoxStartIndex,et.iconBoxEndIndex,et,!1),this.addDebugCollisionBoxes(et.verticalIconBoxStartIndex,et.verticalIconBoxEndIndex,et,!1)}},fl.prototype._deserializeCollisionBoxesForSymbol=function(tt,et,nt,rt,it,ot,at,st,ct){for(var pt={},ft=et;ft<nt;ft++){var dt=tt.get(ft);pt.textBox={x1:dt.x1,y1:dt.y1,x2:dt.x2,y2:dt.y2,anchorPointX:dt.anchorPointX,anchorPointY:dt.anchorPointY},pt.textFeatureIndex=dt.featureIndex;break}for(var mt=rt;mt<it;mt++){var yt=tt.get(mt);pt.verticalTextBox={x1:yt.x1,y1:yt.y1,x2:yt.x2,y2:yt.y2,anchorPointX:yt.anchorPointX,anchorPointY:yt.anchorPointY},pt.verticalTextFeatureIndex=yt.featureIndex;break}for(var vt=ot;vt<at;vt++){var Dt=tt.get(vt);pt.iconBox={x1:Dt.x1,y1:Dt.y1,x2:Dt.x2,y2:Dt.y2,anchorPointX:Dt.anchorPointX,anchorPointY:Dt.anchorPointY},pt.iconFeatureIndex=Dt.featureIndex;break}for(var Ot=st;Ot<ct;Ot++){var Rt=tt.get(Ot);pt.verticalIconBox={x1:Rt.x1,y1:Rt.y1,x2:Rt.x2,y2:Rt.y2,anchorPointX:Rt.anchorPointX,anchorPointY:Rt.anchorPointY},pt.verticalIconFeatureIndex=Rt.featureIndex;break}return pt},fl.prototype.deserializeCollisionBoxes=function(tt){this.collisionArrays=[];for(var et=0;et<this.symbolInstances.length;et++){var nt=this.symbolInstances.get(et);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(tt,nt.textBoxStartIndex,nt.textBoxEndIndex,nt.verticalTextBoxStartIndex,nt.verticalTextBoxEndIndex,nt.iconBoxStartIndex,nt.iconBoxEndIndex,nt.verticalIconBoxStartIndex,nt.verticalIconBoxEndIndex))}},fl.prototype.hasTextData=function(){return this.text.segments.get().length>0},fl.prototype.hasIconData=function(){return this.icon.segments.get().length>0},fl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},fl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},fl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},fl.prototype.addIndicesForPlacedSymbol=function(tt,et){for(var nt=tt.placedSymbolArray.get(et),rt=nt.vertexStartIndex+4*nt.numGlyphs,it=nt.vertexStartIndex;it<rt;it+=4)tt.indexArray.emplaceBack(it,it+1,it+2),tt.indexArray.emplaceBack(it+1,it+2,it+3)},fl.prototype.getSortedSymbolIndexes=function(tt){if(this.sortedAngle===tt&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var et=Math.sin(tt),nt=Math.cos(tt),rt=[],it=[],ot=[],at=0;at<this.symbolInstances.length;++at){ot.push(at);var st=this.symbolInstances.get(at);rt.push(0|Math.round(et*st.anchorX+nt*st.anchorY)),it.push(st.featureIndex)}return ot.sort((function(tt,et){return rt[tt]-rt[et]||it[et]-it[tt]})),ot},fl.prototype.addToSortKeyRanges=function(tt,et){var nt=this.sortKeyRanges[this.sortKeyRanges.length-1];nt&&nt.sortKey===et?nt.symbolInstanceEnd=tt+1:this.sortKeyRanges.push({sortKey:et,symbolInstanceStart:tt,symbolInstanceEnd:tt+1})},fl.prototype.sortFeatures=function(tt){var et=this;if(this.sortFeaturesByY&&this.sortedAngle!==tt&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(tt),this.sortedAngle=tt,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var nt=0,rt=this.symbolInstanceIndexes;nt<rt.length;nt+=1){var it=this.symbolInstances.get(rt[nt]);this.featureSortOrder.push(it.featureIndex),[it.rightJustifiedTextSymbolIndex,it.centerJustifiedTextSymbolIndex,it.leftJustifiedTextSymbolIndex].forEach((function(tt,nt,rt){tt>=0&&rt.indexOf(tt)===nt&&et.addIndicesForPlacedSymbol(et.text,tt)})),it.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,it.verticalPlacedTextSymbolIndex),it.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,it.placedIconSymbolIndex),it.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,it.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Dn("SymbolBucket",fl,{omit:["layers","collisionBoxArray","features","compareText"]}),fl.MAX_GLYPHS=65535,fl.addDynamicAttributes=ll;var _h=new xi({"symbol-placement":new yi(Sr.layout_symbol["symbol-placement"]),"symbol-spacing":new yi(Sr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yi(Sr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new di(Sr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yi(Sr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yi(Sr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new yi(Sr.layout_symbol["icon-ignore-placement"]),"icon-optional":new yi(Sr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yi(Sr.layout_symbol["icon-rotation-alignment"]),"icon-size":new di(Sr.layout_symbol["icon-size"]),"icon-text-fit":new yi(Sr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yi(Sr.layout_symbol["icon-text-fit-padding"]),"icon-image":new di(Sr.layout_symbol["icon-image"]),"icon-rotate":new di(Sr.layout_symbol["icon-rotate"]),"icon-padding":new yi(Sr.layout_symbol["icon-padding"]),"icon-keep-upright":new yi(Sr.layout_symbol["icon-keep-upright"]),"icon-offset":new di(Sr.layout_symbol["icon-offset"]),"icon-anchor":new di(Sr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yi(Sr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yi(Sr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yi(Sr.layout_symbol["text-rotation-alignment"]),"text-field":new di(Sr.layout_symbol["text-field"]),"text-font":new di(Sr.layout_symbol["text-font"]),"text-size":new di(Sr.layout_symbol["text-size"]),"text-max-width":new di(Sr.layout_symbol["text-max-width"]),"text-line-height":new yi(Sr.layout_symbol["text-line-height"]),"text-letter-spacing":new di(Sr.layout_symbol["text-letter-spacing"]),"text-justify":new di(Sr.layout_symbol["text-justify"]),"text-radial-offset":new di(Sr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yi(Sr.layout_symbol["text-variable-anchor"]),"text-anchor":new di(Sr.layout_symbol["text-anchor"]),"text-max-angle":new yi(Sr.layout_symbol["text-max-angle"]),"text-writing-mode":new yi(Sr.layout_symbol["text-writing-mode"]),"text-rotate":new di(Sr.layout_symbol["text-rotate"]),"text-padding":new yi(Sr.layout_symbol["text-padding"]),"text-keep-upright":new yi(Sr.layout_symbol["text-keep-upright"]),"text-transform":new di(Sr.layout_symbol["text-transform"]),"text-offset":new di(Sr.layout_symbol["text-offset"]),"text-allow-overlap":new yi(Sr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yi(Sr.layout_symbol["text-ignore-placement"]),"text-optional":new yi(Sr.layout_symbol["text-optional"])}),bh={paint:new xi({"icon-opacity":new di(Sr.paint_symbol["icon-opacity"]),"icon-color":new di(Sr.paint_symbol["icon-color"]),"icon-halo-color":new di(Sr.paint_symbol["icon-halo-color"]),"icon-halo-width":new di(Sr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new di(Sr.paint_symbol["icon-halo-blur"]),"icon-translate":new yi(Sr.paint_symbol["icon-translate"]),"icon-translate-anchor":new yi(Sr.paint_symbol["icon-translate-anchor"]),"text-opacity":new di(Sr.paint_symbol["text-opacity"]),"text-color":new di(Sr.paint_symbol["text-color"],{runtimeType:So,getOverride:function(tt){return tt.textColor},hasOverride:function(tt){return!!tt.textColor}}),"text-halo-color":new di(Sr.paint_symbol["text-halo-color"]),"text-halo-width":new di(Sr.paint_symbol["text-halo-width"]),"text-halo-blur":new di(Sr.paint_symbol["text-halo-blur"]),"text-translate":new yi(Sr.paint_symbol["text-translate"]),"text-translate-anchor":new yi(Sr.paint_symbol["text-translate-anchor"])}),layout:_h},ml=function(tt){this.type=tt.property.overrides?tt.property.overrides.runtimeType:qi,this.defaultValue=tt};ml.prototype.evaluate=function(tt){if(tt.formattedSection){var et=this.defaultValue.property.overrides;if(et&&et.hasOverride(tt.formattedSection))return et.getOverride(tt.formattedSection)}return tt.feature&&tt.featureState?this.defaultValue.evaluate(tt.feature,tt.featureState):this.defaultValue.property.specification.default},ml.prototype.eachChild=function(tt){this.defaultValue.isConstant()||tt(this.defaultValue.value._styleExpression.expression)},ml.prototype.outputDefined=function(){return!1},ml.prototype.serialize=function(){return null},Dn("FormatSectionOverride",ml,{omit:["defaultValue"]});var Ph=function(tt){function e(et){tt.call(this,et,bh)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.recalculate=function(et,nt){if(tt.prototype.recalculate.call(this,et,nt),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var rt=this.layout.get("text-writing-mode");if(rt){for(var it=[],ot=0,at=rt;ot<at.length;ot+=1){var st=at[ot];it.indexOf(st)<0&&it.push(st)}this.layout._values["text-writing-mode"]=it}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(tt,et,nt,rt){var it=this.layout.get(tt).evaluate(et,{},nt,rt),ot=this._unevaluatedLayout._values[tt];return ot.isDataDriven()||Nr(ot.value)||!it?it:function(tt,et){return et.replace(/{([^{}]+)}/g,(function(et,nt){return nt in tt?String(tt[nt]):""}))}(et.properties,it)},e.prototype.createBucket=function(tt){return new fl(tt)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var tt=0,et=bh.paint.overridableProperties;tt<et.length;tt+=1){var nt=et[tt];if(e.hasPaintOverride(this.layout,nt)){var rt,it=this.paint.get(nt),ot=new ml(it),at=new qr(ot,it.property.specification);rt="constant"===it.value.kind||"source"===it.value.kind?new Gr("source",at):new Zr("composite",at,it.value.zoomStops,it.value._interpolationType),this.paint._values[nt]=new hi(it.property,rt,it.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(tt,et,nt){return!(!this.layout||et.isDataDriven()||nt.isDataDriven())&&e.hasPaintOverride(this.layout,tt)},e.hasPaintOverride=function(tt,et){var nt=tt.get("text-field"),rt=bh.paint.properties[et],it=!1,a=function(tt){for(var et=0,nt=tt;et<nt.length;et+=1)if(rt.overrides&&rt.overrides.hasOverride(nt[et]))return void(it=!0)};if("constant"===nt.value.kind&&nt.value.value instanceof ee)a(nt.value.value.sections);else if("source"===nt.value.kind){var o=function(tt){it||(tt instanceof se&&ae(tt.value)===sa?a(tt.value.sections):tt instanceof ce?a(tt.sections):tt.eachChild(o))},ot=nt.value;ot._styleExpression&&o(ot._styleExpression.expression)}return it},e}(Tu),kh={paint:new xi({"background-color":new yi(Sr.paint_background["background-color"]),"background-pattern":new vi(Sr.paint_background["background-pattern"]),"background-opacity":new yi(Sr.paint_background["background-opacity"])})},Oh=function(tt){function e(et){tt.call(this,et,kh)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e}(Tu),jh={paint:new xi({"raster-opacity":new yi(Sr.paint_raster["raster-opacity"]),"raster-hue-rotate":new yi(Sr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yi(Sr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yi(Sr.paint_raster["raster-brightness-max"]),"raster-saturation":new yi(Sr.paint_raster["raster-saturation"]),"raster-contrast":new yi(Sr.paint_raster["raster-contrast"]),"raster-resampling":new yi(Sr.paint_raster["raster-resampling"]),"raster-fade-duration":new yi(Sr.paint_raster["raster-fade-duration"])})},qh=function(tt){function e(et){tt.call(this,et,jh)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e}(Tu),Yh=function(tt){function e(et){tt.call(this,et,{}),this.implementation=et}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(tt){this.implementation.onAdd&&this.implementation.onAdd(tt,tt.painter.context.gl)},e.prototype.onRemove=function(tt){this.implementation.onRemove&&this.implementation.onRemove(tt,tt.painter.context.gl)},e}(Tu),Qh={circle:mp,heatmap:vp,hillshade:xp,fill:Pp,"fill-extrusion":Dp,line:jp,symbol:Ph,background:Oh,raster:qh},tf=rt.HTMLImageElement,ef=rt.HTMLCanvasElement,nf=rt.HTMLVideoElement,rf=rt.ImageData,af=rt.ImageBitmap,Ml=function(tt,et,nt,rt){this.context=tt,this.format=nt,this.texture=tt.gl.createTexture(),this.update(et,rt)};Ml.prototype.update=function(tt,et,nt){var rt=tt.width,it=tt.height,ot=!(this.size&&this.size[0]===rt&&this.size[1]===it||nt),at=this.context,st=at.gl;if(this.useMipmap=Boolean(et&&et.useMipmap),st.bindTexture(st.TEXTURE_2D,this.texture),at.pixelStoreUnpackFlipY.set(!1),at.pixelStoreUnpack.set(1),at.pixelStoreUnpackPremultiplyAlpha.set(this.format===st.RGBA&&(!et||!1!==et.premultiply)),ot)this.size=[rt,it],tt instanceof tf||tt instanceof ef||tt instanceof nf||tt instanceof rf||af&&tt instanceof af?st.texImage2D(st.TEXTURE_2D,0,this.format,this.format,st.UNSIGNED_BYTE,tt):st.texImage2D(st.TEXTURE_2D,0,this.format,rt,it,0,this.format,st.UNSIGNED_BYTE,tt.data);else{var ct=nt||{x:0,y:0},pt=ct.x,ft=ct.y;tt instanceof tf||tt instanceof ef||tt instanceof nf||tt instanceof rf||af&&tt instanceof af?st.texSubImage2D(st.TEXTURE_2D,0,pt,ft,st.RGBA,st.UNSIGNED_BYTE,tt):st.texSubImage2D(st.TEXTURE_2D,0,pt,ft,rt,it,st.RGBA,st.UNSIGNED_BYTE,tt.data)}this.useMipmap&&this.isSizePowerOfTwo()&&st.generateMipmap(st.TEXTURE_2D)},Ml.prototype.bind=function(tt,et,nt){var rt=this.context.gl;rt.bindTexture(rt.TEXTURE_2D,this.texture),nt!==rt.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(nt=rt.LINEAR),tt!==this.filter&&(rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_MAG_FILTER,tt),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_MIN_FILTER,nt||tt),this.filter=tt),et!==this.wrap&&(rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_WRAP_S,et),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_WRAP_T,et),this.wrap=et)},Ml.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ml.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var El=function(tt){var et=this;this._callback=tt,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){et._triggered=!1,et._callback()})};El.prototype.trigger=function(){var tt=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){tt._triggered=!1,tt._callback()}),0))},El.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Tl=function(tt,et,nt){this.target=tt,this.parent=et,this.mapId=nt,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},m(["receive","process"],this),this.invoker=new El(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=k()?tt:rt};function Pl(tt,et,nt){var rt=2*Math.PI*6378137/256/Math.pow(2,nt);return[tt*rt-2*Math.PI*6378137/2,et*rt-2*Math.PI*6378137/2]}Tl.prototype.send=function(tt,et,nt,rt,it){var ot=this;void 0===it&&(it=!1);var at=Math.round(1e18*Math.random()).toString(36).substring(0,10);nt&&(this.callbacks[at]=nt);var st=C(this.globalScope)?void 0:[];return this.target.postMessage({id:at,type:tt,hasCallback:!!nt,targetMapId:rt,mustQueue:it,sourceMapId:this.mapId,data:Un(et,st)},st),{cancel:function(){nt&&delete ot.callbacks[at],ot.target.postMessage({id:at,type:"<cancel>",targetMapId:rt,sourceMapId:ot.mapId})}}},Tl.prototype.receive=function(tt){var et=tt.data,nt=et.id;if(nt&&(!et.targetMapId||this.mapId===et.targetMapId))if("<cancel>"===et.type){delete this.tasks[nt];var rt=this.cancelCallbacks[nt];delete this.cancelCallbacks[nt],rt&&rt()}else k()||et.mustQueue?(this.tasks[nt]=et,this.taskQueue.push(nt),this.invoker.trigger()):this.processTask(nt,et)},Tl.prototype.process=function(){if(this.taskQueue.length){var tt=this.taskQueue.shift(),et=this.tasks[tt];delete this.tasks[tt],this.taskQueue.length&&this.invoker.trigger(),et&&this.processTask(tt,et)}},Tl.prototype.processTask=function(tt,et){var nt=this;if("<response>"===et.type){var rt=this.callbacks[tt];delete this.callbacks[tt],rt&&(et.error?rt(jn(et.error)):rt(null,jn(et.data)))}else{var it=!1,ot=C(this.globalScope)?void 0:[],at=et.hasCallback?function(et,rt){it=!0,delete nt.cancelCallbacks[tt],nt.target.postMessage({id:tt,type:"<response>",sourceMapId:nt.mapId,error:et?Un(et):null,data:Un(rt,ot)},ot)}:function(tt){it=!0},st=null,ct=jn(et.data);if(this.parent[et.type])st=this.parent[et.type](et.sourceMapId,ct,at);else if(this.parent.getWorkerSource){var pt=et.type.split(".");st=this.parent.getWorkerSource(et.sourceMapId,pt[0],ct.source)[pt[1]](ct,at)}else at(new Error("Could not find function "+et.type));!it&&st&&st.cancel&&(this.cancelCallbacks[tt]=st.cancel)}},Tl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Bl=function(tt,et){tt&&(et?this.setSouthWest(tt).setNorthEast(et):4===tt.length?this.setSouthWest([tt[0],tt[1]]).setNorthEast([tt[2],tt[3]]):this.setSouthWest(tt[0]).setNorthEast(tt[1]))};Bl.prototype.setNorthEast=function(tt){return this._ne=tt instanceof Vl?new Vl(tt.lng,tt.lat):Vl.convert(tt),this},Bl.prototype.setSouthWest=function(tt){return this._sw=tt instanceof Vl?new Vl(tt.lng,tt.lat):Vl.convert(tt),this},Bl.prototype.extend=function(tt){var et,nt,rt=this._sw,it=this._ne;if(tt instanceof Vl)et=tt,nt=tt;else{if(!(tt instanceof Bl))return Array.isArray(tt)?4===tt.length||tt.every(Array.isArray)?this.extend(Bl.convert(tt)):this.extend(Vl.convert(tt)):this;if(nt=tt._ne,!(et=tt._sw)||!nt)return this}return rt||it?(rt.lng=Math.min(et.lng,rt.lng),rt.lat=Math.min(et.lat,rt.lat),it.lng=Math.max(nt.lng,it.lng),it.lat=Math.max(nt.lat,it.lat)):(this._sw=new Vl(et.lng,et.lat),this._ne=new Vl(nt.lng,nt.lat)),this},Bl.prototype.getCenter=function(){return new Vl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Bl.prototype.getSouthWest=function(){return this._sw},Bl.prototype.getNorthEast=function(){return this._ne},Bl.prototype.getNorthWest=function(){return new Vl(this.getWest(),this.getNorth())},Bl.prototype.getSouthEast=function(){return new Vl(this.getEast(),this.getSouth())},Bl.prototype.getWest=function(){return this._sw.lng},Bl.prototype.getSouth=function(){return this._sw.lat},Bl.prototype.getEast=function(){return this._ne.lng},Bl.prototype.getNorth=function(){return this._ne.lat},Bl.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Bl.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Bl.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Bl.prototype.contains=function(tt){var et=Vl.convert(tt),nt=et.lng,rt=et.lat,it=this._sw.lng<=nt&&nt<=this._ne.lng;return this._sw.lng>this._ne.lng&&(it=this._sw.lng>=nt&&nt>=this._ne.lng),this._sw.lat<=rt&&rt<=this._ne.lat&&it},Bl.convert=function(tt){return!tt||tt instanceof Bl?tt:new Bl(tt)};var Vl=function(tt,et){if(isNaN(tt)||isNaN(et))throw new Error("Invalid LngLat object: ("+tt+", "+et+")");if(this.lng=+tt,this.lat=+et,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Vl.prototype.wrap=function(){return new Vl(p(this.lng,-180,180),this.lat)},Vl.prototype.toArray=function(){return[this.lng,this.lat]},Vl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Vl.prototype.distanceTo=function(tt){var et=Math.PI/180,nt=this.lat*et,rt=tt.lat*et,it=Math.sin(nt)*Math.sin(rt)+Math.cos(nt)*Math.cos(rt)*Math.cos((tt.lng-this.lng)*et);return 6371008.8*Math.acos(Math.min(it,1))},Vl.prototype.toBounds=function(tt){void 0===tt&&(tt=0);var et=360*tt/40075017,nt=et/Math.cos(Math.PI/180*this.lat);return new Bl(new Vl(this.lng-nt,this.lat-et),new Vl(this.lng+nt,this.lat+et))},Vl.convert=function(tt){if(tt instanceof Vl)return tt;if(Array.isArray(tt)&&(2===tt.length||3===tt.length))return new Vl(Number(tt[0]),Number(tt[1]));if(!Array.isArray(tt)&&"object"==typeof tt&&null!==tt)return new Vl(Number("lng"in tt?tt.lng:tt.lon),Number(tt.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var sf=2*Math.PI*6371008.8;function Dl(tt){return sf*Math.cos(tt*Math.PI/180)}function Ll(tt){return(180+tt)/360}function Rl(tt){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+tt*Math.PI/360)))/360}function Ol(tt,et){return tt/Dl(et)}function Ul(tt){return 360/Math.PI*Math.atan(Math.exp((180-360*tt)*Math.PI/180))-90}var jl=function(tt,et,nt){void 0===nt&&(nt=0),this.x=+tt,this.y=+et,this.z=+nt};jl.fromLngLat=function(tt,et){void 0===et&&(et=0);var nt=Vl.convert(tt);return new jl(Ll(nt.lng),Rl(nt.lat),Ol(et,nt.lat))},jl.prototype.toLngLat=function(){return new Vl(360*this.x-180,Ul(this.y))},jl.prototype.toAltitude=function(){return this.z*Dl(Ul(this.y))},jl.prototype.meterInMercatorCoordinateUnits=function(){return 1/sf*(tt=Ul(this.y),1/Math.cos(tt*Math.PI/180));var tt};var ql=function(tt,et,nt){this.z=tt,this.x=et,this.y=nt,this.key=Gl(0,tt,tt,et,nt)};ql.prototype.equals=function(tt){return this.z===tt.z&&this.x===tt.x&&this.y===tt.y},ql.prototype.url=function(tt,et){var nt,rt,it,ot,at,st=(rt=this.y,it=this.z,ot=Pl(256*(nt=this.x),256*(rt=Math.pow(2,it)-rt-1),it),at=Pl(256*(nt+1),256*(rt+1),it),ot[0]+","+ot[1]+","+at[0]+","+at[1]),ct=function(tt,et,nt){for(var rt,it="",ot=tt;ot>0;ot--)it+=(et&(rt=1<<ot-1)?1:0)+(nt&rt?2:0);return it}(this.z,this.x,this.y);return tt[(this.x+this.y)%tt.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===et?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ct).replace("{bbox-epsg-3857}",st)},ql.prototype.getTilePoint=function(tt){var et=Math.pow(2,this.z);return new nt(8192*(tt.x*et-this.x),8192*(tt.y*et-this.y))},ql.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Nl=function(tt,et){this.wrap=tt,this.canonical=et,this.key=Gl(tt,et.z,et.z,et.x,et.y)},Kl=function(tt,et,nt,rt,it){this.overscaledZ=tt,this.wrap=et,this.canonical=new ql(nt,+rt,+it),this.key=Gl(et,tt,nt,rt,it)};function Gl(tt,et,nt,rt,it){(tt*=2)<0&&(tt=-1*tt-1);var ot=1<<nt;return(ot*ot*tt+ot*it+rt).toString(36)+nt.toString(36)+et.toString(36)}Kl.prototype.equals=function(tt){return this.overscaledZ===tt.overscaledZ&&this.wrap===tt.wrap&&this.canonical.equals(tt.canonical)},Kl.prototype.scaledTo=function(tt){var et=this.canonical.z-tt;return tt>this.canonical.z?new Kl(tt,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Kl(tt,this.wrap,tt,this.canonical.x>>et,this.canonical.y>>et)},Kl.prototype.calculateScaledKey=function(tt,et){var nt=this.canonical.z-tt;return tt>this.canonical.z?Gl(this.wrap*+et,tt,this.canonical.z,this.canonical.x,this.canonical.y):Gl(this.wrap*+et,tt,tt,this.canonical.x>>nt,this.canonical.y>>nt)},Kl.prototype.isChildOf=function(tt){if(tt.wrap!==this.wrap)return!1;var et=this.canonical.z-tt.canonical.z;return 0===tt.overscaledZ||tt.overscaledZ<this.overscaledZ&&tt.canonical.x===this.canonical.x>>et&&tt.canonical.y===this.canonical.y>>et},Kl.prototype.children=function(tt){if(this.overscaledZ>=tt)return[new Kl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var et=this.canonical.z+1,nt=2*this.canonical.x,rt=2*this.canonical.y;return[new Kl(et,this.wrap,et,nt,rt),new Kl(et,this.wrap,et,nt+1,rt),new Kl(et,this.wrap,et,nt,rt+1),new Kl(et,this.wrap,et,nt+1,rt+1)]},Kl.prototype.isLessThan=function(tt){return this.wrap<tt.wrap||!(this.wrap>tt.wrap)&&(this.overscaledZ<tt.overscaledZ||!(this.overscaledZ>tt.overscaledZ)&&(this.canonical.x<tt.canonical.x||!(this.canonical.x>tt.canonical.x)&&this.canonical.y<tt.canonical.y))},Kl.prototype.wrapped=function(){return new Kl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Kl.prototype.unwrapTo=function(tt){return new Kl(this.overscaledZ,tt,this.canonical.z,this.canonical.x,this.canonical.y)},Kl.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Kl.prototype.toUnwrapped=function(){return new Nl(this.wrap,this.canonical)},Kl.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Kl.prototype.getTilePoint=function(tt){return this.canonical.getTilePoint(new jl(tt.x-this.wrap,tt.y))},Dn("CanonicalTileID",ql),Dn("OverscaledTileID",Kl,{omit:["posMatrix"]});var Zl=function(tt,et,nt){if(this.uid=tt,et.height!==et.width)throw new RangeError("DEM tiles must be square");if(nt&&"mapbox"!==nt&&"terrarium"!==nt)return _('"'+nt+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=et.height;var rt=this.dim=et.height-2;this.data=new Uint32Array(et.data.buffer),this.encoding=nt||"mapbox";for(var it=0;it<rt;it++)this.data[this._idx(-1,it)]=this.data[this._idx(0,it)],this.data[this._idx(rt,it)]=this.data[this._idx(rt-1,it)],this.data[this._idx(it,-1)]=this.data[this._idx(it,0)],this.data[this._idx(it,rt)]=this.data[this._idx(it,rt-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(rt,-1)]=this.data[this._idx(rt-1,0)],this.data[this._idx(-1,rt)]=this.data[this._idx(0,rt-1)],this.data[this._idx(rt,rt)]=this.data[this._idx(rt-1,rt-1)]};Zl.prototype.get=function(tt,et){var nt=new Uint8Array(this.data.buffer),rt=4*this._idx(tt,et);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(nt[rt],nt[rt+1],nt[rt+2])},Zl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Zl.prototype._idx=function(tt,et){if(tt<-1||tt>=this.dim+1||et<-1||et>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(et+1)*this.stride+(tt+1)},Zl.prototype._unpackMapbox=function(tt,et,nt){return(256*tt*256+256*et+nt)/10-1e4},Zl.prototype._unpackTerrarium=function(tt,et,nt){return 256*tt+et+nt/256-32768},Zl.prototype.getPixels=function(){return new mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Zl.prototype.backfillBorder=function(tt,et,nt){if(this.dim!==tt.dim)throw new Error("dem dimension mismatch");var rt=et*this.dim,it=et*this.dim+this.dim,ot=nt*this.dim,at=nt*this.dim+this.dim;switch(et){case-1:rt=it-1;break;case 1:it=rt+1}switch(nt){case-1:ot=at-1;break;case 1:at=ot+1}for(var st=-et*this.dim,ct=-nt*this.dim,pt=ot;pt<at;pt++)for(var ft=rt;ft<it;ft++)this.data[this._idx(ft,pt)]=tt.data[this._idx(ft+st,pt+ct)]},Dn("DEMData",Zl);var Xl=function(tt){this._stringToNumber={},this._numberToString=[];for(var et=0;et<tt.length;et++){var nt=tt[et];this._stringToNumber[nt]=et,this._numberToString[et]=nt}};Xl.prototype.encode=function(tt){return this._stringToNumber[tt]},Xl.prototype.decode=function(tt){return this._numberToString[tt]};var Jl=function(tt,et,nt,rt,it){this.type="Feature",this._vectorTileFeature=tt,tt._z=et,tt._x=nt,tt._y=rt,this.properties=tt.properties,this.id=it},uf={geometry:{configurable:!0}};uf.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},uf.geometry.set=function(tt){this._geometry=tt},Jl.prototype.toJSON=function(){var tt={geometry:this.geometry};for(var et in this)"_geometry"!==et&&"_vectorTileFeature"!==et&&(tt[et]=this[et]);return tt},Object.defineProperties(Jl.prototype,uf);var Yl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Yl.prototype.updateState=function(tt,et,nt){var rt=String(et);if(this.stateChanges[tt]=this.stateChanges[tt]||{},this.stateChanges[tt][rt]=this.stateChanges[tt][rt]||{},c(this.stateChanges[tt][rt],nt),null===this.deletedStates[tt])for(var it in this.deletedStates[tt]={},this.state[tt])it!==rt&&(this.deletedStates[tt][it]=null);else if(this.deletedStates[tt]&&null===this.deletedStates[tt][rt])for(var ot in this.deletedStates[tt][rt]={},this.state[tt][rt])nt[ot]||(this.deletedStates[tt][rt][ot]=null);else for(var at in nt)this.deletedStates[tt]&&this.deletedStates[tt][rt]&&null===this.deletedStates[tt][rt][at]&&delete this.deletedStates[tt][rt][at]},Yl.prototype.removeFeatureState=function(tt,et,nt){if(null!==this.deletedStates[tt]){var rt=String(et);if(this.deletedStates[tt]=this.deletedStates[tt]||{},nt&&void 0!==et)null!==this.deletedStates[tt][rt]&&(this.deletedStates[tt][rt]=this.deletedStates[tt][rt]||{},this.deletedStates[tt][rt][nt]=null);else if(void 0!==et)if(this.stateChanges[tt]&&this.stateChanges[tt][rt])for(nt in this.deletedStates[tt][rt]={},this.stateChanges[tt][rt])this.deletedStates[tt][rt][nt]=null;else this.deletedStates[tt][rt]=null;else this.deletedStates[tt]=null}},Yl.prototype.getState=function(tt,et){var nt=String(et),rt=c({},(this.state[tt]||{})[nt],(this.stateChanges[tt]||{})[nt]);if(null===this.deletedStates[tt])return{};if(this.deletedStates[tt]){var it=this.deletedStates[tt][et];if(null===it)return{};for(var ot in it)delete rt[ot]}return rt},Yl.prototype.initializeTileState=function(tt,et){tt.setFeatureState(this.state,et)},Yl.prototype.coalesceChanges=function(tt,et){var nt={};for(var rt in this.stateChanges){this.state[rt]=this.state[rt]||{};var it={};for(var ot in this.stateChanges[rt])this.state[rt][ot]||(this.state[rt][ot]={}),c(this.state[rt][ot],this.stateChanges[rt][ot]),it[ot]=this.state[rt][ot];nt[rt]=it}for(var at in this.deletedStates){this.state[at]=this.state[at]||{};var st={};if(null===this.deletedStates[at])for(var ct in this.state[at])st[ct]={},this.state[at][ct]={};else for(var pt in this.deletedStates[at]){if(null===this.deletedStates[at][pt])this.state[at][pt]={};else for(var ft=0,dt=Object.keys(this.deletedStates[at][pt]);ft<dt.length;ft+=1)delete this.state[at][pt][dt[ft]];st[pt]=this.state[at][pt]}nt[at]=nt[at]||{},c(nt[at],st)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(nt).length)for(var mt in tt)tt[mt].setFeatureState(nt,et)};var $l=function(tt,et){this.tileID=tt,this.x=tt.canonical.x,this.y=tt.canonical.y,this.z=tt.canonical.z,this.grid=new Bs(8192,16,0),this.grid3D=new Bs(8192,16,0),this.featureIndexArray=new zc,this.promoteId=et};function Wl(tt,et,nt,rt,it){return g(tt,(function(tt,ot){var at=et instanceof fi?et.get(ot):null;return at&&at.evaluate?at.evaluate(nt,rt,it):at}))}function Ql(tt){for(var et=1/0,nt=1/0,rt=-1/0,it=-1/0,ot=0,at=tt;ot<at.length;ot+=1){var st=at[ot];et=Math.min(et,st.x),nt=Math.min(nt,st.y),rt=Math.max(rt,st.x),it=Math.max(it,st.y)}return{minX:et,minY:nt,maxX:rt,maxY:it}}function tp(tt,et){return et-tt}$l.prototype.insert=function(tt,et,nt,rt,it,ot){var at=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(nt,rt,it);for(var st=ot?this.grid3D:this.grid,ct=0;ct<et.length;ct++){for(var pt=et[ct],ft=[1/0,1/0,-1/0,-1/0],dt=0;dt<pt.length;dt++){var mt=pt[dt];ft[0]=Math.min(ft[0],mt.x),ft[1]=Math.min(ft[1],mt.y),ft[2]=Math.max(ft[2],mt.x),ft[3]=Math.max(ft[3],mt.y)}ft[0]<8192&&ft[1]<8192&&ft[2]>=0&&ft[3]>=0&&st.insert(at,ft[0],ft[1],ft[2],ft[3])}},$l.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ip.VectorTile(new $p(this.rawTileData)).layers,this.sourceLayerCoder=new Xl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},$l.prototype.query=function(tt,et,rt,it){var ot=this;this.loadVTLayers();for(var at=tt.params||{},st=8192/tt.tileSize/tt.scale,ct=nn(at.filter),pt=tt.queryGeometry,ft=tt.queryPadding*st,dt=Ql(pt),mt=this.grid.query(dt.minX-ft,dt.minY-ft,dt.maxX+ft,dt.maxY+ft),yt=Ql(tt.cameraQueryGeometry),vt=0,Dt=this.grid3D.query(yt.minX-ft,yt.minY-ft,yt.maxX+ft,yt.maxY+ft,(function(et,rt,it,ot){return function(tt,et,rt,it,ot){for(var at=0,st=tt;at<st.length;at+=1){var ct=st[at];if(et<=ct.x&&rt<=ct.y&&it>=ct.x&&ot>=ct.y)return!0}var pt=[new nt(et,rt),new nt(et,ot),new nt(it,ot),new nt(it,rt)];if(tt.length>2)for(var ft=0,dt=pt;ft<dt.length;ft+=1)if(Ha(tt,dt[ft]))return!0;for(var mt=0;mt<tt.length-1;mt++)if(Ya(tt[mt],tt[mt+1],pt))return!0;return!1}(tt.cameraQueryGeometry,et-ft,rt-ft,it+ft,ot+ft)}));vt<Dt.length;vt+=1)mt.push(Dt[vt]);mt.sort(tp);for(var Ot,Rt={},x=function(nt){var ft=mt[nt];if(ft!==Ot){Ot=ft;var dt=ot.featureIndexArray.get(ft),yt=null;ot.loadMatchingFeature(Rt,dt.bucketIndex,dt.sourceLayerIndex,dt.featureIndex,ct,at.layers,at.availableImages,et,rt,it,(function(et,nt,rt){return yt||(yt=La(et)),nt.queryIntersectsFeature(pt,et,rt,yt,ot.z,tt.transform,st,tt.pixelPosMatrix)}))}},Bt=0;Bt<mt.length;Bt++)x(Bt);return Rt},$l.prototype.loadMatchingFeature=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft){var dt=this.bucketLayerIDs[et];if(!ot||function(tt,et){for(var nt=0;nt<tt.length;nt++)if(et.indexOf(tt[nt])>=0)return!0;return!1}(ot,dt)){var mt=this.sourceLayerCoder.decode(nt),yt=this.vtLayers[mt].feature(rt);if(it.filter(new ai(this.tileID.overscaledZ),yt))for(var vt=this.getId(yt,mt),Dt=0;Dt<dt.length;Dt++){var Ot=dt[Dt];if(!(ot&&ot.indexOf(Ot)<0)){var Rt=st[Ot];if(Rt){var Bt={};void 0!==vt&&pt&&(Bt=pt.getState(Rt.sourceLayer||"_geojsonTileLayer",vt));var Ne=ct[Ot];Ne.paint=Wl(Ne.paint,Rt.paint,yt,Bt,at),Ne.layout=Wl(Ne.layout,Rt.layout,yt,Bt,at);var rn=!ft||ft(yt,Rt,Bt);if(rn){var vn=new Jl(yt,this.z,this.x,this.y,vt);vn.layer=Ne;var bn=tt[Ot];void 0===bn&&(bn=tt[Ot]=[]),bn.push({featureIndex:rt,feature:vn,intersectionZ:rn})}}}}}},$l.prototype.lookupSymbolFeatures=function(tt,et,nt,rt,it,ot,at,st){var ct={};this.loadVTLayers();for(var pt=nn(it),ft=0,dt=tt;ft<dt.length;ft+=1)this.loadMatchingFeature(ct,nt,rt,dt[ft],pt,ot,at,st,et);return ct},$l.prototype.hasLayer=function(tt){for(var et=0,nt=this.bucketLayerIDs;et<nt.length;et+=1)for(var rt=0,it=nt[et];rt<it.length;rt+=1)if(tt===it[rt])return!0;return!1},$l.prototype.getId=function(tt,et){var nt=tt.id;return this.promoteId&&"boolean"==typeof(nt=tt.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[et]])&&(nt=Number(nt)),nt},Dn("FeatureIndex",$l,{omit:["rawTileData","sourceLayerCoder"]});var ep=function(tt,et){this.tileID=tt,this.uid=f(),this.uses=0,this.tileSize=et,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ep.prototype.registerFadeDuration=function(tt){var et=tt+this.timeAdded;et<Dt.now()||this.fadeEndTime&&et<this.fadeEndTime||(this.fadeEndTime=et)},ep.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ep.prototype.loadVectorData=function(tt,et,nt){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",tt){for(var rt in tt.featureIndex&&(this.latestFeatureIndex=tt.featureIndex,tt.rawTileData?(this.latestRawTileData=tt.rawTileData,this.latestFeatureIndex.rawTileData=tt.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=tt.collisionBoxArray,this.buckets=function(tt,et){var nt={};if(!et)return nt;for(var n=function(){var tt=it[rt],ot=tt.layerIds.map((function(tt){return et.getLayer(tt)})).filter(Boolean);if(0!==ot.length){tt.layers=ot,tt.stateDependentLayerIds&&(tt.stateDependentLayers=tt.stateDependentLayerIds.map((function(tt){return ot.filter((function(et){return et.id===tt}))[0]})));for(var at=0,st=ot;at<st.length;at+=1)nt[st[at].id]=tt}},rt=0,it=tt;rt<it.length;rt+=1)n();return nt}(tt.buckets,et.style),this.hasSymbolBuckets=!1,this.buckets){var it=this.buckets[rt];if(it instanceof fl){if(this.hasSymbolBuckets=!0,!nt)break;it.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ot in this.buckets){var at=this.buckets[ot];if(at instanceof fl&&at.hasRTLText){this.hasRTLText=!0,_u.isLoading()||_u.isLoaded()||"deferred"!==ri()||ni();break}}for(var st in this.queryPadding=0,this.buckets){var ct=this.buckets[st];this.queryPadding=Math.max(this.queryPadding,et.style.getLayer(st).queryRadius(ct))}tt.imageAtlas&&(this.imageAtlas=tt.imageAtlas),tt.glyphAtlasImage&&(this.glyphAtlasImage=tt.glyphAtlasImage)}else this.collisionBoxArray=new xc},ep.prototype.unloadVectorData=function(){for(var tt in this.buckets)this.buckets[tt].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ep.prototype.getBucket=function(tt){return this.buckets[tt.id]},ep.prototype.upload=function(tt){for(var et in this.buckets){var nt=this.buckets[et];nt.uploadPending()&&nt.upload(tt)}var rt=tt.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ml(tt,this.imageAtlas.image,rt.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ml(tt,this.glyphAtlasImage,rt.ALPHA),this.glyphAtlasImage=null)},ep.prototype.prepare=function(tt){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(tt,this.imageAtlasTexture)},ep.prototype.queryRenderedFeatures=function(tt,et,nt,rt,it,ot,at,st,ct,pt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:rt,cameraQueryGeometry:it,scale:ot,tileSize:this.tileSize,pixelPosMatrix:pt,transform:st,params:at,queryPadding:this.queryPadding*ct},tt,et,nt):{}},ep.prototype.querySourceFeatures=function(tt,et){var nt=this.latestFeatureIndex;if(nt&&nt.rawTileData){var rt=nt.loadVTLayers(),it=et?et.sourceLayer:"",ot=rt._geojsonTileLayer||rt[it];if(ot)for(var at=nn(et&&et.filter),st=this.tileID.canonical,ct=st.z,pt=st.x,ft=st.y,dt={z:ct,x:pt,y:ft},mt=0;mt<ot.length;mt++){var yt=ot.feature(mt);if(at.filter(new ai(this.tileID.overscaledZ),yt)){var vt=nt.getId(yt,it),Dt=new Jl(yt,ct,pt,ft,vt);Dt.tile=dt,tt.push(Dt)}}}},ep.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ep.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ep.prototype.setExpiryData=function(tt){var et=this.expirationTime;if(tt.cacheControl){var nt=I(tt.cacheControl);nt["max-age"]&&(this.expirationTime=Date.now()+1e3*nt["max-age"])}else tt.expires&&(this.expirationTime=new Date(tt.expires).getTime());if(this.expirationTime){var rt=Date.now(),it=!1;if(this.expirationTime>rt)it=!1;else if(et)if(this.expirationTime<et)it=!0;else{var ot=this.expirationTime-et;ot?this.expirationTime=rt+Math.max(ot,3e4):it=!0}else it=!0;it?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ep.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ep.prototype.setFeatureState=function(tt,et){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(tt).length){var nt=this.latestFeatureIndex.loadVTLayers();for(var rt in this.buckets)if(et.style.hasLayer(rt)){var it=this.buckets[rt],ot=it.layers[0].sourceLayer||"_geojsonTileLayer",at=nt[ot],st=tt[ot];if(at&&st&&0!==Object.keys(st).length){it.update(st,at,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=et&&et.style&&et.style.getLayer(rt);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(it)))}}}},ep.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ep.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Dt.now()},ep.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ep.prototype.setHoldDuration=function(tt){this.symbolFadeHoldUntil=Dt.now()+tt},ep.prototype.setDependencies=function(tt,et){for(var nt={},rt=0,it=et;rt<it.length;rt+=1)nt[it[rt]]=!0;this.dependencies[tt]=nt},ep.prototype.hasDependency=function(tt,et){for(var nt=0,rt=tt;nt<rt.length;nt+=1){var it=this.dependencies[rt[nt]];if(it)for(var ot=0,at=et;ot<at.length;ot+=1)if(it[at[ot]])return!0}return!1};var lf=rt.performance,np=function(tt){this._marks={start:[tt.url,"start"].join("#"),end:[tt.url,"end"].join("#"),measure:tt.url.toString()},lf.mark(this._marks.start)};np.prototype.finish=function(){lf.mark(this._marks.end);var tt=lf.getEntriesByName(this._marks.measure);return 0===tt.length&&(lf.measure(this._marks.measure,this._marks.start,this._marks.end),tt=lf.getEntriesByName(this._marks.measure),lf.clearMarks(this._marks.start),lf.clearMarks(this._marks.end),lf.clearMeasures(this._marks.measure)),tt},tt.Actor=Tl,tt.AlphaImage=yo,tt.CanonicalTileID=ql,tt.CollisionBoxArray=xc,tt.Color=Wt,tt.DEMData=Zl,tt.DataConstantProperty=yi,tt.DictionaryCoder=Xl,tt.EXTENT=8192,tt.ErrorEvent=wr,tt.EvaluationParameters=ai,tt.Event=St,tt.Evented=It,tt.FeatureIndex=$l,tt.FillBucket=is,tt.FillExtrusionBucket=ws,tt.ImageAtlas=mu,tt.ImagePosition=yu,tt.LineBucket=Ts,tt.LngLat=Vl,tt.LngLatBounds=Bl,tt.MercatorCoordinate=jl,tt.ONE_EM=24,tt.OverscaledTileID=Kl,tt.Point=nt,tt.Point$1=nt,tt.Properties=xi,tt.Protobuf=$p,tt.RGBAImage=mo,tt.RequestManager=K,tt.RequestPerformance=np,tt.ResourceType=$n,tt.SegmentVector=aa,tt.SourceFeatureState=Yl,tt.StructArrayLayout1ui2=ac,tt.StructArrayLayout2f1f2i16=wl,tt.StructArrayLayout2i4=tl,tt.StructArrayLayout3ui6=Cl,tt.StructArrayLayout4i8=ol,tt.SymbolBucket=fl,tt.Texture=Ml,tt.Tile=ep,tt.Transitionable=ui,tt.Uniform1f=$c,tt.Uniform1i=Xc,tt.Uniform2f=Yc,tt.Uniform3f=rp,tt.Uniform4f=ip,tt.UniformColor=op,tt.UniformMatrix4f=sp,tt.UnwrappedTileID=Nl,tt.ValidationError=Ct,tt.WritingMode=Jp,tt.ZoomHistory=qn,tt.add=function(tt,et,nt){return tt[0]=et[0]+nt[0],tt[1]=et[1]+nt[1],tt[2]=et[2]+nt[2],tt},tt.addDynamicAttributes=ll,tt.asyncAll=function(tt,et,nt){if(!tt.length)return nt(null,[]);var rt=tt.length,it=new Array(tt.length),ot=null;tt.forEach((function(tt,at){et(tt,(function(tt,et){tt&&(ot=tt),it[at]=et,0==--rt&&nt(ot,it)}))}))},tt.bezier=s,tt.bindAll=m,tt.browser=Dt,tt.cacheEntryPossiblyAdded=function(tt){++Wn>Nn&&(tt.getActor().send("enforceCacheSizeLimit",Fn),Wn=0)},tt.clamp=l,tt.clearTileCache=function(tt){var et=rt.caches.delete("mapbox-tiles");tt&&et.catch(tt).then((function(){return tt()}))},tt.clipLine=qu,tt.clone=function(tt){var et=new hp(16);return et[0]=tt[0],et[1]=tt[1],et[2]=tt[2],et[3]=tt[3],et[4]=tt[4],et[5]=tt[5],et[6]=tt[6],et[7]=tt[7],et[8]=tt[8],et[9]=tt[9],et[10]=tt[10],et[11]=tt[11],et[12]=tt[12],et[13]=tt[13],et[14]=tt[14],et[15]=tt[15],et},tt.clone$1=b,tt.clone$2=function(tt){var et=new hp(3);return et[0]=tt[0],et[1]=tt[1],et[2]=tt[2],et},tt.collisionCircleLayout=Gp,tt.config=Ot,tt.create=function(){var tt=new hp(16);return hp!=Float32Array&&(tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0),tt[0]=1,tt[5]=1,tt[10]=1,tt[15]=1,tt},tt.create$1=function(){var tt=new hp(9);return hp!=Float32Array&&(tt[1]=0,tt[2]=0,tt[3]=0,tt[5]=0,tt[6]=0,tt[7]=0),tt[0]=1,tt[4]=1,tt[8]=1,tt},tt.create$2=function(){var tt=new hp(4);return hp!=Float32Array&&(tt[1]=0,tt[2]=0),tt[0]=1,tt[3]=1,tt},tt.createCommonjsModule=e,tt.createExpression=Kr,tt.createLayout=Si,tt.createStyleLayer=function(tt){return"custom"===tt.type?new Yh(tt):new Qh[tt.type](tt)},tt.cross=function(tt,et,nt){var rt=et[0],it=et[1],ot=et[2],at=nt[0],st=nt[1],ct=nt[2];return tt[0]=it*ct-ot*st,tt[1]=ot*at-rt*ct,tt[2]=rt*st-it*at,tt},tt.deepEqual=function t(tt,et){if(Array.isArray(tt)){if(!Array.isArray(et)||tt.length!==et.length)return!1;for(var nt=0;nt<tt.length;nt++)if(!t(tt[nt],et[nt]))return!1;return!0}if("object"==typeof tt&&null!==tt&&null!==et){if("object"!=typeof et)return!1;if(Object.keys(tt).length!==Object.keys(et).length)return!1;for(var rt in tt)if(!t(tt[rt],et[rt]))return!1;return!0}return tt===et},tt.dot=function(tt,et){return tt[0]*et[0]+tt[1]*et[1]+tt[2]*et[2]},tt.dot$1=function(tt,et){return tt[0]*et[0]+tt[1]*et[1]+tt[2]*et[2]+tt[3]*et[3]},tt.ease=it,tt.emitValidationErrors=En,tt.endsWith=v,tt.enforceCacheSizeLimit=function(tt){ut(),Tn&&Tn.then((function(et){et.keys().then((function(nt){for(var rt=0;rt<nt.length-tt;rt++)et.delete(nt[rt])}))}))},tt.evaluateSizeForFeature=Bu,tt.evaluateSizeForZoom=Vu,tt.evaluateVariableOffset=el,tt.evented=vu,tt.extend=c,tt.featureFilter=nn,tt.filterObject=x,tt.fromRotation=function(tt,et){var nt=Math.sin(et),rt=Math.cos(et);return tt[0]=rt,tt[1]=nt,tt[2]=0,tt[3]=-nt,tt[4]=rt,tt[5]=0,tt[6]=0,tt[7]=0,tt[8]=1,tt},tt.getAnchorAlignment=Cu,tt.getAnchorJustification=rl,tt.getArrayBuffer=xt,tt.getImage=wt,tt.getJSON=function(tt,et){return gt(c(tt,{type:"json"}),et)},tt.getRTLTextPluginStatus=ri,tt.getReferrer=vr,tt.getVideo=function(tt,et){var nt,it,ot=rt.document.createElement("video");ot.muted=!0,ot.onloadstart=function(){et(null,ot)};for(var at=0;at<tt.length;at++){var st=rt.document.createElement("source");nt=tt[at],it=void 0,(it=rt.document.createElement("a")).href=nt,(it.protocol!==rt.document.location.protocol||it.host!==rt.document.location.host)&&(ot.crossOrigin="Anonymous"),st.src=tt[at],ot.appendChild(st)}return{cancel:function(){}}},tt.identity=no,tt.invert=function(tt,et){var nt=et[0],rt=et[1],it=et[2],ot=et[3],at=et[4],st=et[5],ct=et[6],pt=et[7],ft=et[8],dt=et[9],mt=et[10],yt=et[11],vt=et[12],Dt=et[13],Ot=et[14],Rt=et[15],Bt=nt*st-rt*at,Ne=nt*ct-it*at,rn=nt*pt-ot*at,vn=rt*ct-it*st,bn=rt*pt-ot*st,Tn=it*pt-ot*ct,Cn=ft*Dt-dt*vt,Ln=ft*Ot-mt*vt,In=ft*Rt-yt*vt,Mn=dt*Ot-mt*Dt,zn=dt*Rt-yt*Dt,Bn=mt*Rt-yt*Ot,Fn=Bt*Bn-Ne*zn+rn*Mn+vn*In-bn*Ln+Tn*Cn;return Fn?(tt[0]=(st*Bn-ct*zn+pt*Mn)*(Fn=1/Fn),tt[1]=(it*zn-rt*Bn-ot*Mn)*Fn,tt[2]=(Dt*Tn-Ot*bn+Rt*vn)*Fn,tt[3]=(mt*bn-dt*Tn-yt*vn)*Fn,tt[4]=(ct*In-at*Bn-pt*Ln)*Fn,tt[5]=(nt*Bn-it*In+ot*Ln)*Fn,tt[6]=(Ot*rn-vt*Tn-Rt*Ne)*Fn,tt[7]=(ft*Tn-mt*rn+yt*Ne)*Fn,tt[8]=(at*zn-st*In+pt*Cn)*Fn,tt[9]=(rt*In-nt*zn-ot*Cn)*Fn,tt[10]=(vt*bn-Dt*rn+Rt*Bt)*Fn,tt[11]=(dt*rn-ft*bn-yt*Bt)*Fn,tt[12]=(st*Ln-at*Mn-ct*Cn)*Fn,tt[13]=(nt*Mn-rt*Ln+it*Cn)*Fn,tt[14]=(Dt*Ne-vt*vn-Ot*Bt)*Fn,tt[15]=(ft*vn-dt*Ne+mt*Bt)*Fn,tt):null},tt.isChar=js,tt.isMapboxURL=G,tt.keysDifference=function(tt,et){var nt=[];for(var rt in tt)rt in et||nt.push(rt);return nt},tt.makeRequest=gt,tt.mapObject=g,tt.mercatorXfromLng=Ll,tt.mercatorYfromLat=Rl,tt.mercatorZfromAltitude=Ol,tt.mul=dp,tt.multiply=io,tt.mvt=Ip,tt.normalize=function(tt,et){var nt=et[0],rt=et[1],it=et[2],ot=nt*nt+rt*rt+it*it;return ot>0&&(ot=1/Math.sqrt(ot)),tt[0]=et[0]*ot,tt[1]=et[1]*ot,tt[2]=et[2]*ot,tt},tt.number=qe,tt.offscreenCanvasSupported=ht,tt.ortho=function(tt,et,nt,rt,it,ot,at){var st=1/(et-nt),ct=1/(rt-it),pt=1/(ot-at);return tt[0]=-2*st,tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[5]=-2*ct,tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[10]=2*pt,tt[11]=0,tt[12]=(et+nt)*st,tt[13]=(it+rt)*ct,tt[14]=(at+ot)*pt,tt[15]=1,tt},tt.parseGlyphPBF=function(tt){return new $p(tt).readFields(pu,[])},tt.pbf=$p,tt.performSymbolLayout=function(tt,et,nt,rt,it,ot,at){tt.createArrays(),tt.tilePixelRatio=8192/(512*tt.overscaling),tt.compareText={},tt.iconsNeedLinear=!1;var st=tt.layers[0].layout,ct=tt.layers[0]._unevaluatedLayout._values,pt={};if("composite"===tt.textSizeData.kind){var ft=tt.textSizeData,dt=ft.maxZoom;pt.compositeTextSizes=[ct["text-size"].possiblyEvaluate(new ai(ft.minZoom),at),ct["text-size"].possiblyEvaluate(new ai(dt),at)]}if("composite"===tt.iconSizeData.kind){var mt=tt.iconSizeData,yt=mt.maxZoom;pt.compositeIconSizes=[ct["icon-size"].possiblyEvaluate(new ai(mt.minZoom),at),ct["icon-size"].possiblyEvaluate(new ai(yt),at)]}pt.layoutTextSize=ct["text-size"].possiblyEvaluate(new ai(tt.zoom+1),at),pt.layoutIconSize=ct["icon-size"].possiblyEvaluate(new ai(tt.zoom+1),at),pt.textMaxSize=ct["text-size"].possiblyEvaluate(new ai(18));for(var vt=24*st.get("text-line-height"),Dt="map"===st.get("text-rotation-alignment")&&"point"!==st.get("symbol-placement"),Ot=st.get("text-keep-upright"),Rt=st.get("text-size"),g=function(){var ot=Ne[Bt],ct=st.get("text-font").evaluate(ot,{},at).join(","),ft=Rt.evaluate(ot,{},at),dt=pt.layoutTextSize.evaluate(ot,{},at),mt=pt.layoutIconSize.evaluate(ot,{},at),yt={horizontal:{},vertical:void 0},rn=ot.text,vn=[0,0];if(rn){var bn=rn.toString(),Tn=24*st.get("text-letter-spacing").evaluate(ot,{},at),Cn=function(tt){for(var et=0,nt=tt;et<nt.length;et+=1)if(rt=nt[et].charCodeAt(0),js.Arabic(rt)||js["Arabic Supplement"](rt)||js["Arabic Extended-A"](rt)||js["Arabic Presentation Forms-A"](rt)||js["Arabic Presentation Forms-B"](rt))return!1;var rt;return!0}(bn)?Tn:0,Ln=st.get("text-anchor").evaluate(ot,{},at),In=st.get("text-variable-anchor");if(!In){var Mn=st.get("text-radial-offset").evaluate(ot,{},at);vn=Mn?el(Ln,[24*Mn,lh]):st.get("text-offset").evaluate(ot,{},at).map((function(tt){return 24*tt}))}var zn=Dt?"center":st.get("text-justify").evaluate(ot,{},at),Bn=st.get("symbol-placement"),Fn="point"===Bn?24*st.get("text-max-width").evaluate(ot,{},at):0,P=function(){tt.allowVerticalPlacement&&Kn(bn)&&(yt.vertical=bu(rn,et,nt,it,ct,Fn,vt,Ln,"left",Cn,vn,Jp.vertical,!0,Bn,dt,ft))};if(!Dt&&In){for(var Nn="auto"===zn?In.map((function(tt){return rl(tt)})):[zn],Vn=!1,Wn=0;Wn<Nn.length;Wn++){var $n=Nn[Wn];if(!yt.horizontal[$n])if(Vn)yt.horizontal[$n]=yt.horizontal[0];else{var Yn=bu(rn,et,nt,it,ct,Fn,vt,"center",$n,Cn,vn,Jp.horizontal,!1,Bn,dt,ft);Yn&&(yt.horizontal[$n]=Yn,Vn=1===Yn.positionedLines.length)}}P()}else{"auto"===zn&&(zn=rl(Ln));var er=bu(rn,et,nt,it,ct,Fn,vt,Ln,zn,Cn,vn,Jp.horizontal,!1,Bn,dt,ft);er&&(yt.horizontal[zn]=er),P(),Kn(bn)&&Dt&&Ot&&(yt.vertical=bu(rn,et,nt,it,ct,Fn,vt,Ln,zn,Cn,vn,Jp.vertical,!1,Bn,dt,ft))}}var rr=void 0,vr=!1;if(ot.icon&&ot.icon.name){var wr=rt[ot.icon.name];wr&&(rr=function(tt,et,nt){var rt=Cu(nt),it=et[0]-tt.displaySize[0]*rt.horizontalAlign,ot=et[1]-tt.displaySize[1]*rt.verticalAlign;return{image:tt,top:ot,bottom:ot+tt.displaySize[1],left:it,right:it+tt.displaySize[0]}}(it[ot.icon.name],st.get("icon-offset").evaluate(ot,{},at),st.get("icon-anchor").evaluate(ot,{},at)),vr=wr.sdf,void 0===tt.sdfIcons?tt.sdfIcons=wr.sdf:tt.sdfIcons!==wr.sdf&&_("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(wr.pixelRatio!==tt.pixelRatio||0!==st.get("icon-rotate").constantOr(1))&&(tt.iconsNeedLinear=!0))}var Sr=il(yt.horizontal)||yt.vertical;tt.iconsInText=!!Sr&&Sr.iconsInText,(Sr||rr)&&function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft){var dt=ot.textMaxSize.evaluate(et,{});void 0===dt&&(dt=at);var mt,yt=tt.layers[0].layout,vt=yt.get("icon-offset").evaluate(et,{},ft),Dt=il(nt.horizontal),Ot=at/24,Rt=tt.tilePixelRatio*Ot,Bt=tt.tilePixelRatio*dt/24,Ne=tt.tilePixelRatio*st,rn=tt.tilePixelRatio*yt.get("symbol-spacing"),vn=yt.get("text-padding")*tt.tilePixelRatio,bn=yt.get("icon-padding")*tt.tilePixelRatio,Tn=yt.get("text-max-angle")/180*Math.PI,Cn="map"===yt.get("text-rotation-alignment")&&"point"!==yt.get("symbol-placement"),Ln="map"===yt.get("icon-rotation-alignment")&&"point"!==yt.get("symbol-placement"),In=yt.get("symbol-placement"),Mn=rn/2,zn=yt.get("icon-text-fit");rt&&"none"!==zn&&(tt.allowVerticalPlacement&&nt.vertical&&(mt=Eu(rt,nt.vertical,zn,yt.get("icon-text-fit-padding"),vt,Ot)),Dt&&(rt=Eu(rt,Dt,zn,yt.get("icon-text-fit-padding"),vt,Ot)));var E=function(st,dt){dt.x<0||dt.x>=8192||dt.y<0||dt.y>=8192||function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt,Ot,Rt,Bt,Ne,rn,vn,bn,Tn,Cn){var Ln,In,Mn,zn,Bn,Fn=tt.addToLineVertexArray(et,nt),Nn=0,Vn=0,Wn=0,$n=0,Yn=-1,er=-1,rr={},vr=Hc(""),wr=0,Sr=0;if(void 0===st._unevaluatedLayout.getValue("text-radial-offset")?(wr=(Ln=st.layout.get("text-offset").evaluate(rn,{},Tn).map((function(tt){return 24*tt})))[0],Sr=Ln[1]):(wr=24*st.layout.get("text-radial-offset").evaluate(rn,{},Tn),Sr=lh),tt.allowVerticalPlacement&&rt.vertical){var ii=st.layout.get("text-rotate").evaluate(rn,{},Tn)+90;zn=new Ju(ct,et,pt,ft,dt,rt.vertical,mt,yt,vt,ii),at&&(Bn=new Ju(ct,et,pt,ft,dt,at,Ot,Rt,vt,ii))}if(it){var qi=st.layout.get("icon-rotate").evaluate(rn,{}),uo="none"!==st.layout.get("icon-text-fit"),po=Nu(it,qi,bn,uo),vo=at?Nu(at,qi,bn,uo):void 0;Mn=new Ju(ct,et,pt,ft,dt,it,Ot,Rt,!1,qi),Nn=4*po.length;var So=tt.iconSizeData,ta=null;"source"===So.kind?(ta=[128*st.layout.get("icon-size").evaluate(rn,{})])[0]>32640&&_(tt.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===So.kind&&((ta=[128*vn.compositeIconSizes[0].evaluate(rn,{},Tn),128*vn.compositeIconSizes[1].evaluate(rn,{},Tn)])[0]>32640||ta[1]>32640)&&_(tt.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),tt.addSymbols(tt.icon,po,ta,Ne,Bt,rn,!1,et,Fn.lineStartIndex,Fn.lineLength,-1,Tn),Yn=tt.icon.placedSymbolArray.length-1,vo&&(Vn=4*vo.length,tt.addSymbols(tt.icon,vo,ta,Ne,Bt,rn,Jp.vertical,et,Fn.lineStartIndex,Fn.lineLength,-1,Tn),er=tt.icon.placedSymbolArray.length-1)}for(var na in rt.horizontal){var ia=rt.horizontal[na];if(!In){vr=Hc(ia.text);var sa=st.layout.get("text-rotate").evaluate(rn,{},Tn);In=new Ju(ct,et,pt,ft,dt,ia,mt,yt,vt,sa)}var la=1===ia.positionedLines.length;if(Wn+=nl(tt,et,ia,ot,st,vt,rn,Dt,Fn,rt.vertical?Jp.horizontal:Jp.horizontalOnly,la?Object.keys(rt.horizontal):[na],rr,Yn,vn,Tn),la)break}rt.vertical&&($n+=nl(tt,et,rt.vertical,ot,st,vt,rn,Dt,Fn,Jp.vertical,["vertical"],rr,er,vn,Tn));var pa=In?In.boxStartIndex:tt.collisionBoxArray.length,fa=In?In.boxEndIndex:tt.collisionBoxArray.length,ga=zn?zn.boxStartIndex:tt.collisionBoxArray.length,va=zn?zn.boxEndIndex:tt.collisionBoxArray.length,_a=Mn?Mn.boxStartIndex:tt.collisionBoxArray.length,wa=Mn?Mn.boxEndIndex:tt.collisionBoxArray.length,Aa=Bn?Bn.boxStartIndex:tt.collisionBoxArray.length,os=Bn?Bn.boxEndIndex:tt.collisionBoxArray.length,as=-1,ut=function(tt,et){return tt&&tt.circleDiameter?Math.max(tt.circleDiameter,et):et};as=ut(In,as),as=ut(zn,as),as=ut(Mn,as);var ss=(as=ut(Bn,as))>-1?1:0;ss&&(as*=Cn/24),tt.glyphOffsetArray.length>=fl.MAX_GLYPHS&&_("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==rn.sortKey&&tt.addToSortKeyRanges(tt.symbolInstances.length,rn.sortKey),tt.symbolInstances.emplaceBack(et.x,et.y,rr.right>=0?rr.right:-1,rr.center>=0?rr.center:-1,rr.left>=0?rr.left:-1,rr.vertical||-1,Yn,er,vr,pa,fa,ga,va,_a,wa,Aa,os,pt,Wn,$n,Nn,Vn,ss,0,mt,wr,Sr,as)}(tt,dt,st,nt,rt,it,mt,tt.layers[0],tt.collisionBoxArray,et.index,et.sourceLayerIndex,tt.index,Rt,vn,Cn,ct,Ne,bn,Ln,vt,et,ot,pt,ft,at)};if("line"===In)for(var Bn=0,Fn=qu(et.geometry,0,0,8192,8192);Bn<Fn.length;Bn+=1)for(var Nn=Fn[Bn],Vn=0,Wn=ju(Nn,rn,Tn,nt.vertical||Dt,rt,24,Bt,tt.overscaling,8192);Vn<Wn.length;Vn+=1){var $n=Wn[Vn];Dt&&al(tt,Dt.text,Mn,$n)||E(Nn,$n)}else if("line-center"===In)for(var Yn=0,er=et.geometry;Yn<er.length;Yn+=1){var rr=er[Yn];if(rr.length>1){var vr=Uu(rr,Tn,nt.vertical||Dt,rt,24,Bt);vr&&E(rr,vr)}}else if("Polygon"===et.type)for(var wr=0,Sr=ts(et.geometry,0);wr<Sr.length;wr+=1){var ii=Sr[wr],qi=$u(ii,16);E(ii[0],new ah(qi.x,qi.y,0))}else if("LineString"===et.type)for(var uo=0,po=et.geometry;uo<po.length;uo+=1){var vo=po[uo];E(vo,new ah(vo[0].x,vo[0].y,0))}else if("Point"===et.type)for(var So=0,ta=et.geometry;So<ta.length;So+=1)for(var na=0,ia=ta[So];na<ia.length;na+=1){var sa=ia[na];E([sa],new ah(sa.x,sa.y,0))}}(tt,ot,yt,rr,rt,pt,dt,mt,vn,vr,at)},Bt=0,Ne=tt.features;Bt<Ne.length;Bt+=1)g();ot&&tt.generateCollisionDebugBuffers()},tt.perspective=function(tt,et,nt,rt,it){var ot,at=1/Math.tan(et/2);return tt[0]=at/nt,tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[5]=at,tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[11]=-1,tt[12]=0,tt[13]=0,tt[15]=0,null!=it&&it!==1/0?(tt[10]=(it+rt)*(ot=1/(rt-it)),tt[14]=2*it*rt*ot):(tt[10]=-1,tt[14]=-2*rt),tt},tt.pick=function(tt,et){for(var nt={},rt=0;rt<et.length;rt++){var it=et[rt];it in tt&&(nt[it]=tt[it])}return nt},tt.plugin=_u,tt.polygonIntersectsPolygon=Ua,tt.postMapLoadEvent=Bn,tt.postTurnstileEvent=Mn,tt.potpack=fu,tt.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],tt.register=Dn,tt.registerForPluginStateChange=function(tt){return tt({pluginStatus:Js,pluginURL:du}),vu.on("pluginStateChange",tt),tt},tt.rotate=function(tt,et,nt){var rt=et[0],it=et[1],ot=et[2],at=et[3],st=Math.sin(nt),ct=Math.cos(nt);return tt[0]=rt*ct+ot*st,tt[1]=it*ct+at*st,tt[2]=rt*-st+ot*ct,tt[3]=it*-st+at*ct,tt},tt.rotateX=function(tt,et,nt){var rt=Math.sin(nt),it=Math.cos(nt),ot=et[4],at=et[5],st=et[6],ct=et[7],pt=et[8],ft=et[9],dt=et[10],mt=et[11];return et!==tt&&(tt[0]=et[0],tt[1]=et[1],tt[2]=et[2],tt[3]=et[3],tt[12]=et[12],tt[13]=et[13],tt[14]=et[14],tt[15]=et[15]),tt[4]=ot*it+pt*rt,tt[5]=at*it+ft*rt,tt[6]=st*it+dt*rt,tt[7]=ct*it+mt*rt,tt[8]=pt*it-ot*rt,tt[9]=ft*it-at*rt,tt[10]=dt*it-st*rt,tt[11]=mt*it-ct*rt,tt},tt.rotateZ=function(tt,et,nt){var rt=Math.sin(nt),it=Math.cos(nt),ot=et[0],at=et[1],st=et[2],ct=et[3],pt=et[4],ft=et[5],dt=et[6],mt=et[7];return et!==tt&&(tt[8]=et[8],tt[9]=et[9],tt[10]=et[10],tt[11]=et[11],tt[12]=et[12],tt[13]=et[13],tt[14]=et[14],tt[15]=et[15]),tt[0]=ot*it+pt*rt,tt[1]=at*it+ft*rt,tt[2]=st*it+dt*rt,tt[3]=ct*it+mt*rt,tt[4]=pt*it-ot*rt,tt[5]=ft*it-at*rt,tt[6]=dt*it-st*rt,tt[7]=mt*it-ct*rt,tt},tt.scale=function(tt,et,nt){var rt=nt[0],it=nt[1],ot=nt[2];return tt[0]=et[0]*rt,tt[1]=et[1]*rt,tt[2]=et[2]*rt,tt[3]=et[3]*rt,tt[4]=et[4]*it,tt[5]=et[5]*it,tt[6]=et[6]*it,tt[7]=et[7]*it,tt[8]=et[8]*ot,tt[9]=et[9]*ot,tt[10]=et[10]*ot,tt[11]=et[11]*ot,tt[12]=et[12],tt[13]=et[13],tt[14]=et[14],tt[15]=et[15],tt},tt.scale$1=function(tt,et,nt){return tt[0]=et[0]*nt,tt[1]=et[1]*nt,tt[2]=et[2]*nt,tt[3]=et[3]*nt,tt},tt.scale$2=function(tt,et,nt){return tt[0]=et[0]*nt,tt[1]=et[1]*nt,tt[2]=et[2]*nt,tt},tt.setCacheLimits=function(tt,et){Fn=tt,Nn=et},tt.setRTLTextPlugin=function(tt,et,nt){if(void 0===nt&&(nt=!1),"deferred"===Js||"loading"===Js||"loaded"===Js)throw new Error("setRTLTextPlugin cannot be called multiple times.");du=Dt.resolveURL(tt),Js="deferred",Zs=et,ti(),nt||ni()},tt.sphericalToCartesian=function(tt){var et=tt[0],nt=tt[1],rt=tt[2];return nt+=90,nt*=Math.PI/180,rt*=Math.PI/180,{x:et*Math.cos(nt)*Math.sin(rt),y:et*Math.sin(nt)*Math.sin(rt),z:et*Math.cos(rt)}},tt.sqrLen=function(tt){var et=tt[0],nt=tt[1];return et*et+nt*nt},tt.styleSpec=Sr,tt.sub=function(tt,et,nt){return tt[0]=et[0]-nt[0],tt[1]=et[1]-nt[1],tt[2]=et[2]-nt[2],tt},tt.symbolSize=sh,tt.transformMat3=function(tt,et,nt){var rt=et[0],it=et[1],ot=et[2];return tt[0]=rt*nt[0]+it*nt[3]+ot*nt[6],tt[1]=rt*nt[1]+it*nt[4]+ot*nt[7],tt[2]=rt*nt[2]+it*nt[5]+ot*nt[8],tt},tt.transformMat4=so,tt.translate=function(tt,et,nt){var rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt=nt[0],Ot=nt[1],Rt=nt[2];return et===tt?(tt[12]=et[0]*Dt+et[4]*Ot+et[8]*Rt+et[12],tt[13]=et[1]*Dt+et[5]*Ot+et[9]*Rt+et[13],tt[14]=et[2]*Dt+et[6]*Ot+et[10]*Rt+et[14],tt[15]=et[3]*Dt+et[7]*Ot+et[11]*Rt+et[15]):(it=et[1],ot=et[2],at=et[3],st=et[4],ct=et[5],pt=et[6],ft=et[7],dt=et[8],mt=et[9],yt=et[10],vt=et[11],tt[0]=rt=et[0],tt[1]=it,tt[2]=ot,tt[3]=at,tt[4]=st,tt[5]=ct,tt[6]=pt,tt[7]=ft,tt[8]=dt,tt[9]=mt,tt[10]=yt,tt[11]=vt,tt[12]=rt*Dt+st*Ot+dt*Rt+et[12],tt[13]=it*Dt+ct*Ot+mt*Rt+et[13],tt[14]=ot*Dt+pt*Ot+yt*Rt+et[14],tt[15]=at*Dt+ft*Ot+vt*Rt+et[15]),tt},tt.triggerPluginCompletionEvent=Qn,tt.uniqueId=f,tt.validateCustomStyleLayer=function(tt){var et=[],nt=tt.id;return void 0===nt&&et.push({message:"layers."+nt+': missing required property "id"'}),void 0===tt.render&&et.push({message:"layers."+nt+': missing required method "render"'}),tt.renderingMode&&"2d"!==tt.renderingMode&&"3d"!==tt.renderingMode&&et.push({message:"layers."+nt+': property "renderingMode" must be either "2d" or "3d"'}),et},tt.validateLight=zs,tt.validateStyle=Ms,tt.values=function(tt){var et=[];for(var nt in tt)et.push(tt[nt]);return et},tt.vectorTile=Ip,tt.version="1.11.0",tt.warnOnce=_,tt.webpSupported=Rt,tt.window=rt,tt.wrap=p})),define(0,(function(tt){function t(tt){var et=typeof tt;if("number"===et||"boolean"===et||"string"===et||null==tt)return JSON.stringify(tt);if(Array.isArray(tt)){for(var nt="[",rt=0,it=tt;rt<it.length;rt+=1)nt+=t(it[rt])+",";return nt+"]"}for(var ot=Object.keys(tt).sort(),at="{",st=0;st<ot.length;st++)at+=JSON.stringify(ot[st])+":"+t(tt[ot[st]])+",";return at+"}"}function r(et){for(var nt="",rt=0,it=tt.refProperties;rt<it.length;rt+=1)nt+="/"+t(et[it[rt]]);return nt}var i=function(tt){this.keyCache={},tt&&this.replace(tt)};i.prototype.replace=function(tt){this._layerConfigs={},this._layers={},this.update(tt,[])},i.prototype.update=function(et,nt){for(var rt=this,it=0,ot=et;it<ot.length;it+=1){var at=ot[it];this._layerConfigs[at.id]=at;var st=this._layers[at.id]=tt.createStyleLayer(at);st._featureFilter=tt.featureFilter(st.filter),this.keyCache[at.id]&&delete this.keyCache[at.id]}for(var ct=0,pt=nt;ct<pt.length;ct+=1){var ft=pt[ct];delete this.keyCache[ft],delete this._layerConfigs[ft],delete this._layers[ft]}this.familiesBySource={};for(var dt=0,mt=function(tt,et){for(var nt={},rt=0;rt<tt.length;rt++){var it=et&&et[tt[rt].id]||r(tt[rt]);et&&(et[tt[rt].id]=it);var ot=nt[it];ot||(ot=nt[it]=[]),ot.push(tt[rt])}var at=[];for(var st in nt)at.push(nt[st]);return at}(tt.values(this._layerConfigs),this.keyCache);dt<mt.length;dt+=1){var yt=mt[dt].map((function(tt){return rt._layers[tt.id]})),vt=yt[0];if("none"!==vt.visibility){var Dt=vt.source||"",Ot=this.familiesBySource[Dt];Ot||(Ot=this.familiesBySource[Dt]={});var Rt=vt.sourceLayer||"_geojsonTileLayer",Bt=Ot[Rt];Bt||(Bt=Ot[Rt]=[]),Bt.push(yt)}}};var o=function(et){var nt={},rt=[];for(var it in et){var ot=et[it],at=nt[it]={};for(var st in ot){var ct=ot[+st];if(ct&&0!==ct.bitmap.width&&0!==ct.bitmap.height){var pt={x:0,y:0,w:ct.bitmap.width+2,h:ct.bitmap.height+2};rt.push(pt),at[st]={rect:pt,metrics:ct.metrics}}}}var ft=tt.potpack(rt),dt=new tt.AlphaImage({width:ft.w||1,height:ft.h||1});for(var mt in et){var yt=et[mt];for(var vt in yt){var Dt=yt[+vt];if(Dt&&0!==Dt.bitmap.width&&0!==Dt.bitmap.height){var Ot=nt[mt][vt].rect;tt.AlphaImage.copy(Dt.bitmap,dt,{x:0,y:0},{x:Ot.x+1,y:Ot.y+1},Dt.bitmap)}}}this.image=dt,this.positions=nt};tt.register("GlyphAtlas",o);var n=function(et){this.tileID=new tt.OverscaledTileID(et.tileID.overscaledZ,et.tileID.wrap,et.tileID.canonical.z,et.tileID.canonical.x,et.tileID.canonical.y),this.uid=et.uid,this.zoom=et.zoom,this.pixelRatio=et.pixelRatio,this.tileSize=et.tileSize,this.source=et.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=et.showCollisionBoxes,this.collectResourceTiming=!!et.collectResourceTiming,this.returnDependencies=!!et.returnDependencies,this.promoteId=et.promoteId};function s(et,nt,rt){for(var it=new tt.EvaluationParameters(nt),ot=0,at=et;ot<at.length;ot+=1)at[ot].recalculate(it,rt)}function a(et,nt){var rt=tt.getArrayBuffer(et.request,(function(et,rt,it,ot){et?nt(et):rt&&nt(null,{vectorTile:new tt.vectorTile.VectorTile(new tt.pbf(rt)),rawData:rt,cacheControl:it,expires:ot})}));return function(){rt.cancel(),nt()}}n.prototype.parse=function(et,nt,rt,it,ot){var at=this;this.status="parsing",this.data=et,this.collisionBoxArray=new tt.CollisionBoxArray;var st=new tt.DictionaryCoder(Object.keys(et.layers).sort()),ct=new tt.FeatureIndex(this.tileID,this.promoteId);ct.bucketLayerIDs=[];var pt,ft,dt,mt,yt={},vt={featureIndex:ct,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:rt},Dt=nt.familiesBySource[this.source];for(var Ot in Dt){var Rt=et.layers[Ot];if(Rt){1===Rt.version&&tt.warnOnce('Vector tile source "'+this.source+'" layer "'+Ot+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Bt=st.encode(Ot),Ne=[],rn=0;rn<Rt.length;rn++){var vn=Rt.feature(rn),bn=ct.getId(vn,Ot);Ne.push({feature:vn,id:bn,index:rn,sourceLayerIndex:Bt})}for(var Tn=0,Cn=Dt[Ot];Tn<Cn.length;Tn+=1){var Ln=Cn[Tn],In=Ln[0];In.minzoom&&this.zoom<Math.floor(In.minzoom)||In.maxzoom&&this.zoom>=In.maxzoom||"none"!==In.visibility&&(s(Ln,this.zoom,rt),(yt[In.id]=In.createBucket({index:ct.bucketLayerIDs.length,layers:Ln,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bt,sourceID:this.source})).populate(Ne,vt,this.tileID.canonical),ct.bucketLayerIDs.push(Ln.map((function(tt){return tt.id}))))}}}var Mn=tt.mapObject(vt.glyphDependencies,(function(tt){return Object.keys(tt).map(Number)}));Object.keys(Mn).length?it.send("getGlyphs",{uid:this.uid,stacks:Mn},(function(tt,et){pt||(pt=tt,ft=et,z.call(at))})):ft={};var zn=Object.keys(vt.iconDependencies);zn.length?it.send("getImages",{icons:zn,source:this.source,tileID:this.tileID,type:"icons"},(function(tt,et){pt||(pt=tt,dt=et,z.call(at))})):dt={};var Bn=Object.keys(vt.patternDependencies);function z(){if(pt)return ot(pt);if(ft&&dt&&mt){var et=new o(ft),nt=new tt.ImageAtlas(dt,mt);for(var it in yt){var at=yt[it];at instanceof tt.SymbolBucket?(s(at.layers,this.zoom,rt),tt.performSymbolLayout(at,ft,et.positions,dt,nt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):at.hasPattern&&(at instanceof tt.LineBucket||at instanceof tt.FillBucket||at instanceof tt.FillExtrusionBucket)&&(s(at.layers,this.zoom,rt),at.addFeatures(vt,this.tileID.canonical,nt.patternPositions))}this.status="done",ot(null,{buckets:tt.values(yt).filter((function(tt){return!tt.isEmpty()})),featureIndex:ct,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:et.image,imageAtlas:nt,glyphMap:this.returnDependencies?ft:null,iconMap:this.returnDependencies?dt:null,glyphPositions:this.returnDependencies?et.positions:null})}}Bn.length?it.send("getImages",{icons:Bn,source:this.source,tileID:this.tileID,type:"patterns"},(function(tt,et){pt||(pt=tt,mt=et,z.call(at))})):mt={},z.call(this)};var l=function(tt,et,nt,rt){this.actor=tt,this.layerIndex=et,this.availableImages=nt,this.loadVectorData=rt||a,this.loading={},this.loaded={}};l.prototype.loadTile=function(et,nt){var rt=this,it=et.uid;this.loading||(this.loading={});var ot=!!(et&&et.request&&et.request.collectResourceTiming)&&new tt.RequestPerformance(et.request),at=this.loading[it]=new n(et);at.abort=this.loadVectorData(et,(function(et,st){if(delete rt.loading[it],et||!st)return at.status="done",rt.loaded[it]=at,nt(et);var ct=st.rawData,pt={};st.expires&&(pt.expires=st.expires),st.cacheControl&&(pt.cacheControl=st.cacheControl);var ft={};if(ot){var dt=ot.finish();dt&&(ft.resourceTiming=JSON.parse(JSON.stringify(dt)))}at.vectorTile=st.vectorTile,at.parse(st.vectorTile,rt.layerIndex,rt.availableImages,rt.actor,(function(et,rt){if(et||!rt)return nt(et);nt(null,tt.extend({rawTileData:ct.slice(0)},rt,pt,ft))})),rt.loaded=rt.loaded||{},rt.loaded[it]=at}))},l.prototype.reloadTile=function(tt,et){var nt=this,rt=this.loaded,it=tt.uid,ot=this;if(rt&&rt[it]){var at=rt[it];at.showCollisionBoxes=tt.showCollisionBoxes;var a=function(tt,rt){var it=at.reloadCallback;it&&(delete at.reloadCallback,at.parse(at.vectorTile,ot.layerIndex,nt.availableImages,ot.actor,it)),et(tt,rt)};"parsing"===at.status?at.reloadCallback=a:"done"===at.status&&(at.vectorTile?at.parse(at.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}},l.prototype.abortTile=function(tt,et){var nt=this.loading,rt=tt.uid;nt&&nt[rt]&&nt[rt].abort&&(nt[rt].abort(),delete nt[rt]),et()},l.prototype.removeTile=function(tt,et){var nt=this.loaded,rt=tt.uid;nt&&nt[rt]&&delete nt[rt],et()};var et=tt.window.ImageBitmap,h=function(){this.loaded={}};function c(tt,et){if(0!==tt.length){p(tt[0],et);for(var nt=1;nt<tt.length;nt++)p(tt[nt],!et)}}function p(tt,et){for(var nt=0,rt=0,it=tt.length,ot=it-1;rt<it;ot=rt++)nt+=(tt[rt][0]-tt[ot][0])*(tt[ot][1]+tt[rt][1]);nt>=0!=!!et&&tt.reverse()}h.prototype.loadTile=function(nt,rt){var it=nt.uid,ot=nt.encoding,at=nt.rawImageData,st=et&&at instanceof et?this.getImageData(at):at,ct=new tt.DEMData(it,st,ot);this.loaded=this.loaded||{},this.loaded[it]=ct,rt(null,ct)},h.prototype.getImageData=function(et){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(et.width,et.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=et.width,this.offscreenCanvas.height=et.height,this.offscreenCanvasContext.drawImage(et,0,0,et.width,et.height);var nt=this.offscreenCanvasContext.getImageData(-1,-1,et.width+2,et.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new tt.RGBAImage({width:nt.width,height:nt.height},nt.data)},h.prototype.removeTile=function(tt){var et=this.loaded,nt=tt.uid;et&&et[nt]&&delete et[nt]};var nt=tt.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(et){this._feature=et,this.extent=tt.EXTENT,this.type=et.type,this.properties=et.tags,"id"in et&&!isNaN(et.id)&&(this.id=parseInt(et.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var et=[],nt=0,rt=this._feature.geometry;nt<rt.length;nt+=1){var it=rt[nt];et.push([new tt.Point$1(it[0],it[1])])}return et}for(var ot=[],at=0,st=this._feature.geometry;at<st.length;at+=1){for(var ct=[],pt=0,ft=st[at];pt<ft.length;pt+=1){var dt=ft[pt];ct.push(new tt.Point$1(dt[0],dt[1]))}ot.push(ct)}return ot},d.prototype.toGeoJSON=function(tt,et,rt){return nt.call(this,tt,et,rt)};var g=function(et){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=tt.EXTENT,this.length=et.length,this._features=et};g.prototype.feature=function(tt){return new d(this._features[tt])};var rt=tt.vectorTile.VectorTileFeature,it=y;function y(tt,et){this.options=et||{},this.features=tt,this.length=tt.length}function x(tt,et){this.id="number"==typeof tt.id?tt.id:void 0,this.type=tt.type,this.rawGeometry=1===tt.type?[tt.geometry]:tt.geometry,this.properties=tt.tags,this.extent=et||4096}y.prototype.feature=function(tt){return new x(this.features[tt],this.options.extent)},x.prototype.loadGeometry=function(){var et=this.rawGeometry;this.geometry=[];for(var nt=0;nt<et.length;nt++){for(var rt=et[nt],it=[],ot=0;ot<rt.length;ot++)it.push(new tt.Point$1(rt[ot][0],rt[ot][1]));this.geometry.push(it)}return this.geometry},x.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var tt=this.geometry,et=1/0,nt=-1/0,rt=1/0,it=-1/0,ot=0;ot<tt.length;ot++)for(var at=tt[ot],st=0;st<at.length;st++){var ct=at[st];et=Math.min(et,ct.x),nt=Math.max(nt,ct.x),rt=Math.min(rt,ct.y),it=Math.max(it,ct.y)}return[et,rt,nt,it]},x.prototype.toGeoJSON=rt.prototype.toGeoJSON;var ot=I,at=it;function I(et){var nt=new tt.pbf;return function(tt,et){for(var nt in tt.layers)et.writeMessage(3,M,tt.layers[nt])}(et,nt),nt.finish()}function M(tt,et){var nt;et.writeVarintField(15,tt.version||1),et.writeStringField(1,tt.name||""),et.writeVarintField(5,tt.extent||4096);var rt={keys:[],values:[],keycache:{},valuecache:{}};for(nt=0;nt<tt.length;nt++)rt.feature=tt.feature(nt),et.writeMessage(2,b,rt);var it=rt.keys;for(nt=0;nt<it.length;nt++)et.writeStringField(3,it[nt]);var ot=rt.values;for(nt=0;nt<ot.length;nt++)et.writeMessage(4,C,ot[nt])}function b(tt,et){var nt=tt.feature;void 0!==nt.id&&et.writeVarintField(1,nt.id),et.writeMessage(2,_,tt),et.writeVarintField(3,nt.type),et.writeMessage(4,T,nt)}function _(tt,et){var nt=tt.feature,rt=tt.keys,it=tt.values,ot=tt.keycache,at=tt.valuecache;for(var st in nt.properties){var ct=ot[st];void 0===ct&&(rt.push(st),ot[st]=ct=rt.length-1),et.writeVarint(ct);var pt=nt.properties[st],ft=typeof pt;"string"!==ft&&"boolean"!==ft&&"number"!==ft&&(pt=JSON.stringify(pt));var dt=ft+":"+pt,mt=at[dt];void 0===mt&&(it.push(pt),at[dt]=mt=it.length-1),et.writeVarint(mt)}}function k(tt,et){return(et<<3)+(7&tt)}function P(tt){return tt<<1^tt>>31}function T(tt,et){for(var nt=tt.loadGeometry(),rt=tt.type,it=0,ot=0,at=nt.length,st=0;st<at;st++){var ct=nt[st],pt=1;1===rt&&(pt=ct.length),et.writeVarint(k(1,pt));for(var ft=3===rt?ct.length-1:ct.length,dt=0;dt<ft;dt++){1===dt&&1!==rt&&et.writeVarint(k(2,ft-1));var mt=ct[dt].x-it,yt=ct[dt].y-ot;et.writeVarint(P(mt)),et.writeVarint(P(yt)),it+=mt,ot+=yt}3===rt&&et.writeVarint(k(7,1))}}function C(tt,et){var nt=typeof tt;"string"===nt?et.writeStringField(1,tt):"boolean"===nt?et.writeBooleanField(7,tt):"number"===nt&&(tt%1!=0?et.writeDoubleField(3,tt):tt<0?et.writeSVarintField(6,tt):et.writeVarintField(5,tt))}function D(tt,et,nt,rt){L(tt,nt,rt),L(et,2*nt,2*rt),L(et,2*nt+1,2*rt+1)}function L(tt,et,nt){var rt=tt[et];tt[et]=tt[nt],tt[nt]=rt}function z(tt,et,nt,rt){var it=tt-nt,ot=et-rt;return it*it+ot*ot}ot.fromVectorTileJs=I,ot.fromGeojsonVt=function(tt,et){et=et||{};var nt={};for(var rt in tt)nt[rt]=new it(tt[rt].features,et),nt[rt].name=rt,nt[rt].version=et.version,nt[rt].extent=et.extent;return I({layers:nt})},ot.GeoJSONWrapper=at;var O=function(tt){return tt[0]},E=function(tt){return tt[1]},F=function(tt,et,nt,rt,it){void 0===et&&(et=O),void 0===nt&&(nt=E),void 0===rt&&(rt=64),void 0===it&&(it=Float64Array),this.nodeSize=rt,this.points=tt;for(var ot=tt.length<65536?Uint16Array:Uint32Array,at=this.ids=new ot(tt.length),st=this.coords=new it(2*tt.length),ct=0;ct<tt.length;ct++)at[ct]=ct,st[2*ct]=et(tt[ct]),st[2*ct+1]=nt(tt[ct]);!function e(tt,et,nt,rt,it,ot){if(!(it-rt<=nt)){var at=rt+it>>1;!function e(tt,et,nt,rt,it,ot){for(;it>rt;){if(it-rt>600){var at=it-rt+1,st=nt-rt+1,ct=Math.log(at),pt=.5*Math.exp(2*ct/3),ft=.5*Math.sqrt(ct*pt*(at-pt)/at)*(st-at/2<0?-1:1);e(tt,et,nt,Math.max(rt,Math.floor(nt-st*pt/at+ft)),Math.min(it,Math.floor(nt+(at-st)*pt/at+ft)),ot)}var dt=et[2*nt+ot],mt=rt,yt=it;for(D(tt,et,rt,nt),et[2*it+ot]>dt&&D(tt,et,rt,it);mt<yt;){for(D(tt,et,mt,yt),mt++,yt--;et[2*mt+ot]<dt;)mt++;for(;et[2*yt+ot]>dt;)yt--}et[2*rt+ot]===dt?D(tt,et,rt,yt):D(tt,et,++yt,it),yt<=nt&&(rt=yt+1),nt<=yt&&(it=yt-1)}}(tt,et,at,rt,it,ot%2),e(tt,et,nt,rt,at-1,ot+1),e(tt,et,nt,at+1,it,ot+1)}}(at,st,rt,0,at.length-1,0)};F.prototype.range=function(tt,et,nt,rt){return function(tt,et,nt,rt,it,ot,at){for(var st,ct,pt=[0,tt.length-1,0],ft=[];pt.length;){var dt=pt.pop(),mt=pt.pop(),yt=pt.pop();if(mt-yt<=at)for(var vt=yt;vt<=mt;vt++)ct=et[2*vt+1],(st=et[2*vt])>=nt&&st<=it&&ct>=rt&&ct<=ot&&ft.push(tt[vt]);else{var Dt=Math.floor((yt+mt)/2);ct=et[2*Dt+1],(st=et[2*Dt])>=nt&&st<=it&&ct>=rt&&ct<=ot&&ft.push(tt[Dt]);var Ot=(dt+1)%2;(0===dt?nt<=st:rt<=ct)&&(pt.push(yt),pt.push(Dt-1),pt.push(Ot)),(0===dt?it>=st:ot>=ct)&&(pt.push(Dt+1),pt.push(mt),pt.push(Ot))}}return ft}(this.ids,this.coords,tt,et,nt,rt,this.nodeSize)},F.prototype.within=function(tt,et,nt){return function(tt,et,nt,rt,it,ot){for(var at=[0,tt.length-1,0],st=[],ct=it*it;at.length;){var pt=at.pop(),ft=at.pop(),dt=at.pop();if(ft-dt<=ot)for(var mt=dt;mt<=ft;mt++)z(et[2*mt],et[2*mt+1],nt,rt)<=ct&&st.push(tt[mt]);else{var yt=Math.floor((dt+ft)/2),vt=et[2*yt],Dt=et[2*yt+1];z(vt,Dt,nt,rt)<=ct&&st.push(tt[yt]);var Ot=(pt+1)%2;(0===pt?nt-it<=vt:rt-it<=Dt)&&(at.push(dt),at.push(yt-1),at.push(Ot)),(0===pt?nt+it>=vt:rt+it>=Dt)&&(at.push(yt+1),at.push(ft),at.push(Ot))}}return st}(this.ids,this.coords,tt,et,nt,this.nodeSize)};var st={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(tt){return tt}},J=function(tt){this.options=V(Object.create(st),tt),this.trees=new Array(this.options.maxZoom+1)};function Z(tt,et,nt,rt,it){return{x:tt,y:et,zoom:1/0,id:nt,parentId:-1,numPoints:rt,properties:it}}function A(tt,et){var nt=tt.geometry.coordinates,rt=nt[1];return{x:Y(nt[0]),y:j(rt),zoom:1/0,index:et,parentId:-1}}function B(tt){return{type:"Feature",id:tt.id,properties:G(tt),geometry:{type:"Point",coordinates:[(rt=tt.x,360*(rt-.5)),(et=tt.y,nt=(180-360*et)*Math.PI/180,360*Math.atan(Math.exp(nt))/Math.PI-90)]}};var et,nt,rt}function G(tt){var et=tt.numPoints,nt=et>=1e4?Math.round(et/1e3)+"k":et>=1e3?Math.round(et/100)/10+"k":et;return V(V({},tt.properties),{cluster:!0,cluster_id:tt.id,point_count:et,point_count_abbreviated:nt})}function Y(tt){return tt/360+.5}function j(tt){var et=Math.sin(tt*Math.PI/180),nt=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return nt<0?0:nt>1?1:nt}function V(tt,et){for(var nt in et)tt[nt]=et[nt];return tt}function X(tt){return tt.x}function W(tt){return tt.y}function R(tt,et,nt,rt,it,ot){var at=it-nt,st=ot-rt;if(0!==at||0!==st){var ct=((tt-nt)*at+(et-rt)*st)/(at*at+st*st);ct>1?(nt=it,rt=ot):ct>0&&(nt+=at*ct,rt+=st*ct)}return(at=tt-nt)*at+(st=et-rt)*st}function q(tt,et,nt,rt){var it={id:void 0===tt?null:tt,type:et,geometry:nt,tags:rt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(tt){var et=tt.geometry,nt=tt.type;if("Point"===nt||"MultiPoint"===nt||"LineString"===nt)U(tt,et);else if("Polygon"===nt||"MultiLineString"===nt)for(var rt=0;rt<et.length;rt++)U(tt,et[rt]);else if("MultiPolygon"===nt)for(rt=0;rt<et.length;rt++)for(var it=0;it<et[rt].length;it++)U(tt,et[rt][it])}(it),it}function U(tt,et){for(var nt=0;nt<et.length;nt+=3)tt.minX=Math.min(tt.minX,et[nt]),tt.minY=Math.min(tt.minY,et[nt+1]),tt.maxX=Math.max(tt.maxX,et[nt]),tt.maxY=Math.max(tt.maxY,et[nt+1])}function $(tt,et,nt,rt){if(et.geometry){var it=et.geometry.coordinates,ot=et.geometry.type,at=Math.pow(nt.tolerance/((1<<nt.maxZoom)*nt.extent),2),st=[],ct=et.id;if(nt.promoteId?ct=et.properties[nt.promoteId]:nt.generateId&&(ct=rt||0),"Point"===ot)H(it,st);else if("MultiPoint"===ot)for(var pt=0;pt<it.length;pt++)H(it[pt],st);else if("LineString"===ot)K(it,st,at,!1);else if("MultiLineString"===ot){if(nt.lineMetrics){for(pt=0;pt<it.length;pt++)K(it[pt],st=[],at,!1),tt.push(q(ct,"LineString",st,et.properties));return}Q(it,st,at,!1)}else if("Polygon"===ot)Q(it,st,at,!0);else{if("MultiPolygon"!==ot){if("GeometryCollection"===ot){for(pt=0;pt<et.geometry.geometries.length;pt++)$(tt,{id:ct,geometry:et.geometry.geometries[pt],properties:et.properties},nt,rt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(pt=0;pt<it.length;pt++){var ft=[];Q(it[pt],ft,at,!0),st.push(ft)}}tt.push(q(ct,ot,st,et.properties))}}function H(tt,et){et.push(ee(tt[0])),et.push(te(tt[1])),et.push(0)}function K(tt,et,nt,rt){for(var it,ot,at=0,st=0;st<tt.length;st++){var ct=ee(tt[st][0]),pt=te(tt[st][1]);et.push(ct),et.push(pt),et.push(0),st>0&&(at+=rt?(it*pt-ct*ot)/2:Math.sqrt(Math.pow(ct-it,2)+Math.pow(pt-ot,2))),it=ct,ot=pt}var ft=et.length-3;et[2]=1,function e(tt,et,nt,rt){for(var it,ot=rt,at=nt-et>>1,st=nt-et,ct=tt[et],pt=tt[et+1],ft=tt[nt],dt=tt[nt+1],mt=et+3;mt<nt;mt+=3){var yt=R(tt[mt],tt[mt+1],ct,pt,ft,dt);if(yt>ot)it=mt,ot=yt;else if(yt===ot){var vt=Math.abs(mt-at);vt<st&&(it=mt,st=vt)}}ot>rt&&(it-et>3&&e(tt,et,it,rt),tt[it+2]=ot,nt-it>3&&e(tt,it,nt,rt))}(et,0,ft,nt),et[ft+2]=1,et.size=Math.abs(at),et.start=0,et.end=et.size}function Q(tt,et,nt,rt){for(var it=0;it<tt.length;it++){var ot=[];K(tt[it],ot,nt,rt),et.push(ot)}}function ee(tt){return tt/360+.5}function te(tt){var et=Math.sin(tt*Math.PI/180),nt=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return nt<0?0:nt>1?1:nt}function re(tt,et,nt,rt,it,ot,at,st){if(rt/=et,ot>=(nt/=et)&&at<rt)return tt;if(at<nt||ot>=rt)return null;for(var ct=[],pt=0;pt<tt.length;pt++){var ft=tt[pt],dt=ft.geometry,mt=ft.type,yt=0===it?ft.minX:ft.minY,vt=0===it?ft.maxX:ft.maxY;if(yt>=nt&&vt<rt)ct.push(ft);else if(!(vt<nt||yt>=rt)){var Dt=[];if("Point"===mt||"MultiPoint"===mt)ie(dt,Dt,nt,rt,it);else if("LineString"===mt)oe(dt,Dt,nt,rt,it,!1,st.lineMetrics);else if("MultiLineString"===mt)se(dt,Dt,nt,rt,it,!1);else if("Polygon"===mt)se(dt,Dt,nt,rt,it,!0);else if("MultiPolygon"===mt)for(var Ot=0;Ot<dt.length;Ot++){var Rt=[];se(dt[Ot],Rt,nt,rt,it,!0),Rt.length&&Dt.push(Rt)}if(Dt.length){if(st.lineMetrics&&"LineString"===mt){for(Ot=0;Ot<Dt.length;Ot++)ct.push(q(ft.id,mt,Dt[Ot],ft.tags));continue}"LineString"!==mt&&"MultiLineString"!==mt||(1===Dt.length?(mt="LineString",Dt=Dt[0]):mt="MultiLineString"),"Point"!==mt&&"MultiPoint"!==mt||(mt=3===Dt.length?"Point":"MultiPoint"),ct.push(q(ft.id,mt,Dt,ft.tags))}}}return ct.length?ct:null}function ie(tt,et,nt,rt,it){for(var ot=0;ot<tt.length;ot+=3){var at=tt[ot+it];at>=nt&&at<=rt&&(et.push(tt[ot]),et.push(tt[ot+1]),et.push(tt[ot+2]))}}function oe(tt,et,nt,rt,it,ot,at){for(var st,ct,pt=ne(tt),ft=0===it?le:ue,dt=tt.start,mt=0;mt<tt.length-3;mt+=3){var yt=tt[mt],vt=tt[mt+1],Dt=tt[mt+2],Ot=tt[mt+3],Rt=tt[mt+4],Bt=0===it?yt:vt,Ne=0===it?Ot:Rt,rn=!1;at&&(st=Math.sqrt(Math.pow(yt-Ot,2)+Math.pow(vt-Rt,2))),Bt<nt?Ne>nt&&(ct=ft(pt,yt,vt,Ot,Rt,nt),at&&(pt.start=dt+st*ct)):Bt>rt?Ne<rt&&(ct=ft(pt,yt,vt,Ot,Rt,rt),at&&(pt.start=dt+st*ct)):ae(pt,yt,vt,Dt),Ne<nt&&Bt>=nt&&(ct=ft(pt,yt,vt,Ot,Rt,nt),rn=!0),Ne>rt&&Bt<=rt&&(ct=ft(pt,yt,vt,Ot,Rt,rt),rn=!0),!ot&&rn&&(at&&(pt.end=dt+st*ct),et.push(pt),pt=ne(tt)),at&&(dt+=st)}var vn=tt.length-3;yt=tt[vn],vt=tt[vn+1],Dt=tt[vn+2],(Bt=0===it?yt:vt)>=nt&&Bt<=rt&&ae(pt,yt,vt,Dt),vn=pt.length-3,ot&&vn>=3&&(pt[vn]!==pt[0]||pt[vn+1]!==pt[1])&&ae(pt,pt[0],pt[1],pt[2]),pt.length&&et.push(pt)}function ne(tt){var et=[];return et.size=tt.size,et.start=tt.start,et.end=tt.end,et}function se(tt,et,nt,rt,it,ot){for(var at=0;at<tt.length;at++)oe(tt[at],et,nt,rt,it,ot,!1)}function ae(tt,et,nt,rt){tt.push(et),tt.push(nt),tt.push(rt)}function le(tt,et,nt,rt,it,ot){var at=(ot-et)/(rt-et);return tt.push(ot),tt.push(nt+(it-nt)*at),tt.push(1),at}function ue(tt,et,nt,rt,it,ot){var at=(ot-nt)/(it-nt);return tt.push(et+(rt-et)*at),tt.push(ot),tt.push(1),at}function he(tt,et){for(var nt=[],rt=0;rt<tt.length;rt++){var it,ot=tt[rt],at=ot.type;if("Point"===at||"MultiPoint"===at||"LineString"===at)it=ce(ot.geometry,et);else if("MultiLineString"===at||"Polygon"===at){it=[];for(var st=0;st<ot.geometry.length;st++)it.push(ce(ot.geometry[st],et))}else if("MultiPolygon"===at)for(it=[],st=0;st<ot.geometry.length;st++){for(var ct=[],pt=0;pt<ot.geometry[st].length;pt++)ct.push(ce(ot.geometry[st][pt],et));it.push(ct)}nt.push(q(ot.id,at,it,ot.tags))}return nt}function ce(tt,et){var nt=[];nt.size=tt.size,void 0!==tt.start&&(nt.start=tt.start,nt.end=tt.end);for(var rt=0;rt<tt.length;rt+=3)nt.push(tt[rt]+et,tt[rt+1],tt[rt+2]);return nt}function pe(tt,et){if(tt.transformed)return tt;var nt,rt,it,ot=1<<tt.z,at=tt.x,st=tt.y;for(nt=0;nt<tt.features.length;nt++){var ct=tt.features[nt],pt=ct.geometry,ft=ct.type;if(ct.geometry=[],1===ft)for(rt=0;rt<pt.length;rt+=2)ct.geometry.push(fe(pt[rt],pt[rt+1],et,ot,at,st));else for(rt=0;rt<pt.length;rt++){var dt=[];for(it=0;it<pt[rt].length;it+=2)dt.push(fe(pt[rt][it],pt[rt][it+1],et,ot,at,st));ct.geometry.push(dt)}}return tt.transformed=!0,tt}function fe(tt,et,nt,rt,it,ot){return[Math.round(nt*(tt*rt-it)),Math.round(nt*(et*rt-ot))]}function de(tt,et,nt,rt,it){for(var ot=et===it.maxZoom?0:it.tolerance/((1<<et)*it.extent),at={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:nt,y:rt,z:et,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},st=0;st<tt.length;st++){at.numFeatures++,ge(at,tt[st],ot,it);var ct=tt[st].minX,pt=tt[st].minY,ft=tt[st].maxX,dt=tt[st].maxY;ct<at.minX&&(at.minX=ct),pt<at.minY&&(at.minY=pt),ft>at.maxX&&(at.maxX=ft),dt>at.maxY&&(at.maxY=dt)}return at}function ge(tt,et,nt,rt){var it=et.geometry,ot=et.type,at=[];if("Point"===ot||"MultiPoint"===ot)for(var st=0;st<it.length;st+=3)at.push(it[st]),at.push(it[st+1]),tt.numPoints++,tt.numSimplified++;else if("LineString"===ot)me(at,it,tt,nt,!1,!1);else if("MultiLineString"===ot||"Polygon"===ot)for(st=0;st<it.length;st++)me(at,it[st],tt,nt,"Polygon"===ot,0===st);else if("MultiPolygon"===ot)for(var ct=0;ct<it.length;ct++){var pt=it[ct];for(st=0;st<pt.length;st++)me(at,pt[st],tt,nt,!0,0===st)}if(at.length){var ft=et.tags||null;if("LineString"===ot&&rt.lineMetrics){for(var dt in ft={},et.tags)ft[dt]=et.tags[dt];ft.mapbox_clip_start=it.start/it.size,ft.mapbox_clip_end=it.end/it.size}var mt={geometry:at,type:"Polygon"===ot||"MultiPolygon"===ot?3:"LineString"===ot||"MultiLineString"===ot?2:1,tags:ft};null!==et.id&&(mt.id=et.id),tt.features.push(mt)}}function me(tt,et,nt,rt,it,ot){var at=rt*rt;if(rt>0&&et.size<(it?at:rt))nt.numPoints+=et.length/3;else{for(var st=[],ct=0;ct<et.length;ct+=3)(0===rt||et[ct+2]>at)&&(nt.numSimplified++,st.push(et[ct]),st.push(et[ct+1])),nt.numPoints++;it&&function(tt,et){for(var nt=0,rt=0,it=tt.length,ot=it-2;rt<it;ot=rt,rt+=2)nt+=(tt[rt]-tt[ot])*(tt[rt+1]+tt[ot+1]);if(nt>0===et)for(rt=0,it=tt.length;rt<it/2;rt+=2){var at=tt[rt],st=tt[rt+1];tt[rt]=tt[it-2-rt],tt[rt+1]=tt[it-1-rt],tt[it-2-rt]=at,tt[it-1-rt]=st}}(st,ot),tt.push(st)}}function ve(tt,et){var nt=(et=this.options=function(tt,et){for(var nt in et)tt[nt]=et[nt];return tt}(Object.create(this.options),et)).debug;if(nt&&console.time("preprocess data"),et.maxZoom<0||et.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(et.promoteId&&et.generateId)throw new Error("promoteId and generateId cannot be used together.");var rt=function(tt,et){var nt=[];if("FeatureCollection"===tt.type)for(var rt=0;rt<tt.features.length;rt++)$(nt,tt.features[rt],et,rt);else $(nt,"Feature"===tt.type?tt:{geometry:tt},et);return nt}(tt,et);this.tiles={},this.tileCoords=[],nt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",et.indexMaxZoom,et.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(rt=function(tt,et){var nt=et.buffer/et.extent,rt=tt,it=re(tt,1,-1-nt,nt,0,-1,2,et),ot=re(tt,1,1-nt,2+nt,0,-1,2,et);return(it||ot)&&(rt=re(tt,1,-nt,1+nt,0,-1,2,et)||[],it&&(rt=he(it,1).concat(rt)),ot&&(rt=rt.concat(he(ot,-1)))),rt}(rt,et)).length&&this.splitTile(rt,0,0,0),nt&&(rt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ye(tt,et,nt){return 32*((1<<tt)*nt+et)+tt}function xe(tt,et){var nt=tt.tileID.canonical;if(!this._geoJSONIndex)return et(null,null);var rt=this._geoJSONIndex.getTile(nt.z,nt.x,nt.y);if(!rt)return et(null,null);var it=new g(rt.features),at=ot(it);0===at.byteOffset&&at.byteLength===at.buffer.byteLength||(at=new Uint8Array(at)),et(null,{vectorTile:it,rawData:at.buffer})}J.prototype.load=function(tt){var et=this.options,nt=et.log,rt=et.minZoom,it=et.maxZoom,ot=et.nodeSize;nt&&console.time("total time");var at="prepare "+tt.length+" points";nt&&console.time(at),this.points=tt;for(var st=[],ct=0;ct<tt.length;ct++)tt[ct].geometry&&st.push(A(tt[ct],ct));this.trees[it+1]=new F(st,X,W,ot,Float32Array),nt&&console.timeEnd(at);for(var pt=it;pt>=rt;pt--){var ft=+Date.now();st=this._cluster(st,pt),this.trees[pt]=new F(st,X,W,ot,Float32Array),nt&&console.log("z%d: %d clusters in %dms",pt,st.length,+Date.now()-ft)}return nt&&console.timeEnd("total time"),this},J.prototype.getClusters=function(tt,et){var nt=((tt[0]+180)%360+360)%360-180,rt=Math.max(-90,Math.min(90,tt[1])),it=180===tt[2]?180:((tt[2]+180)%360+360)%360-180,ot=Math.max(-90,Math.min(90,tt[3]));if(tt[2]-tt[0]>=360)nt=-180,it=180;else if(nt>it){var at=this.getClusters([nt,rt,180,ot],et),st=this.getClusters([-180,rt,it,ot],et);return at.concat(st)}for(var ct=this.trees[this._limitZoom(et)],pt=[],ft=0,dt=ct.range(Y(nt),j(ot),Y(it),j(rt));ft<dt.length;ft+=1){var mt=ct.points[dt[ft]];pt.push(mt.numPoints?B(mt):this.points[mt.index])}return pt},J.prototype.getChildren=function(tt){var et=this._getOriginId(tt),nt=this._getOriginZoom(tt),rt="No cluster with the specified id.",it=this.trees[nt];if(!it)throw new Error(rt);var ot=it.points[et];if(!ot)throw new Error(rt);for(var at=this.options.radius/(this.options.extent*Math.pow(2,nt-1)),st=[],ct=0,pt=it.within(ot.x,ot.y,at);ct<pt.length;ct+=1){var ft=it.points[pt[ct]];ft.parentId===tt&&st.push(ft.numPoints?B(ft):this.points[ft.index])}if(0===st.length)throw new Error(rt);return st},J.prototype.getLeaves=function(tt,et,nt){var rt=[];return this._appendLeaves(rt,tt,et=et||10,nt=nt||0,0),rt},J.prototype.getTile=function(tt,et,nt){var rt=this.trees[this._limitZoom(tt)],it=Math.pow(2,tt),ot=this.options,at=ot.radius/ot.extent,st=(nt-at)/it,ct=(nt+1+at)/it,pt={features:[]};return this._addTileFeatures(rt.range((et-at)/it,st,(et+1+at)/it,ct),rt.points,et,nt,it,pt),0===et&&this._addTileFeatures(rt.range(1-at/it,st,1,ct),rt.points,it,nt,it,pt),et===it-1&&this._addTileFeatures(rt.range(0,st,at/it,ct),rt.points,-1,nt,it,pt),pt.features.length?pt:null},J.prototype.getClusterExpansionZoom=function(tt){for(var et=this._getOriginZoom(tt)-1;et<=this.options.maxZoom;){var nt=this.getChildren(tt);if(et++,1!==nt.length)break;tt=nt[0].properties.cluster_id}return et},J.prototype._appendLeaves=function(tt,et,nt,rt,it){for(var ot=0,at=this.getChildren(et);ot<at.length;ot+=1){var st=at[ot],ct=st.properties;if(ct&&ct.cluster?it+ct.point_count<=rt?it+=ct.point_count:it=this._appendLeaves(tt,ct.cluster_id,nt,rt,it):it<rt?it++:tt.push(st),tt.length===nt)break}return it},J.prototype._addTileFeatures=function(tt,et,nt,rt,it,ot){for(var at=0,st=tt;at<st.length;at+=1){var ct=et[st[at]],pt=ct.numPoints,ft={type:1,geometry:[[Math.round(this.options.extent*(ct.x*it-nt)),Math.round(this.options.extent*(ct.y*it-rt))]],tags:pt?G(ct):this.points[ct.index].properties},dt=void 0;pt?dt=ct.id:this.options.generateId?dt=ct.index:this.points[ct.index].id&&(dt=this.points[ct.index].id),void 0!==dt&&(ft.id=dt),ot.features.push(ft)}},J.prototype._limitZoom=function(tt){return Math.max(this.options.minZoom,Math.min(+tt,this.options.maxZoom+1))},J.prototype._cluster=function(tt,et){for(var nt=[],rt=this.options,it=rt.reduce,ot=rt.minPoints,at=rt.radius/(rt.extent*Math.pow(2,et)),st=0;st<tt.length;st++){var ct=tt[st];if(!(ct.zoom<=et)){ct.zoom=et;for(var pt=this.trees[et+1],ft=pt.within(ct.x,ct.y,at),dt=ct.numPoints||1,mt=dt,yt=0,vt=ft;yt<vt.length;yt+=1){var Dt=pt.points[vt[yt]];Dt.zoom>et&&(mt+=Dt.numPoints||1)}if(mt>=ot){for(var Ot=ct.x*dt,Rt=ct.y*dt,Bt=it&&dt>1?this._map(ct,!0):null,Ne=(st<<5)+(et+1)+this.points.length,rn=0,vn=ft;rn<vn.length;rn+=1){var bn=pt.points[vn[rn]];if(!(bn.zoom<=et)){bn.zoom=et;var Tn=bn.numPoints||1;Ot+=bn.x*Tn,Rt+=bn.y*Tn,bn.parentId=Ne,it&&(Bt||(Bt=this._map(ct,!0)),it(Bt,this._map(bn)))}}ct.parentId=Ne,nt.push(Z(Ot/mt,Rt/mt,Ne,mt,Bt))}else if(nt.push(ct),mt>1)for(var Cn=0,Ln=ft;Cn<Ln.length;Cn+=1){var In=pt.points[Ln[Cn]];In.zoom<=et||(In.zoom=et,nt.push(In))}}}return nt},J.prototype._getOriginId=function(tt){return tt-this.points.length>>5},J.prototype._getOriginZoom=function(tt){return(tt-this.points.length)%32},J.prototype._map=function(tt,et){if(tt.numPoints)return et?V({},tt.properties):tt.properties;var nt=this.points[tt.index].properties,rt=this.options.map(nt);return et&&rt===nt?V({},rt):rt},ve.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ve.prototype.splitTile=function(tt,et,nt,rt,it,ot,at){for(var st=[tt,et,nt,rt],ct=this.options,pt=ct.debug;st.length;){rt=st.pop(),nt=st.pop(),et=st.pop(),tt=st.pop();var ft=1<<et,dt=ye(et,nt,rt),mt=this.tiles[dt];if(!mt&&(pt>1&&console.time("creation"),mt=this.tiles[dt]=de(tt,et,nt,rt,ct),this.tileCoords.push({z:et,x:nt,y:rt}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",et,nt,rt,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));var yt="z"+et;this.stats[yt]=(this.stats[yt]||0)+1,this.total++}if(mt.source=tt,it){if(et===ct.maxZoom||et===it)continue;var vt=1<<it-et;if(nt!==Math.floor(ot/vt)||rt!==Math.floor(at/vt))continue}else if(et===ct.indexMaxZoom||mt.numPoints<=ct.indexMaxPoints)continue;if(mt.source=null,0!==tt.length){pt>1&&console.time("clipping");var Dt,Ot,Rt,Bt,Ne,rn,vn=.5*ct.buffer/ct.extent,bn=.5-vn,Tn=.5+vn,Cn=1+vn;Dt=Ot=Rt=Bt=null,Ne=re(tt,ft,nt-vn,nt+Tn,0,mt.minX,mt.maxX,ct),rn=re(tt,ft,nt+bn,nt+Cn,0,mt.minX,mt.maxX,ct),tt=null,Ne&&(Dt=re(Ne,ft,rt-vn,rt+Tn,1,mt.minY,mt.maxY,ct),Ot=re(Ne,ft,rt+bn,rt+Cn,1,mt.minY,mt.maxY,ct),Ne=null),rn&&(Rt=re(rn,ft,rt-vn,rt+Tn,1,mt.minY,mt.maxY,ct),Bt=re(rn,ft,rt+bn,rt+Cn,1,mt.minY,mt.maxY,ct),rn=null),pt>1&&console.timeEnd("clipping"),st.push(Dt||[],et+1,2*nt,2*rt),st.push(Ot||[],et+1,2*nt,2*rt+1),st.push(Rt||[],et+1,2*nt+1,2*rt),st.push(Bt||[],et+1,2*nt+1,2*rt+1)}}},ve.prototype.getTile=function(tt,et,nt){var rt=this.options,it=rt.extent,ot=rt.debug;if(tt<0||tt>24)return null;var at=1<<tt,st=ye(tt,et=(et%at+at)%at,nt);if(this.tiles[st])return pe(this.tiles[st],it);ot>1&&console.log("drilling down to z%d-%d-%d",tt,et,nt);for(var ct,pt=tt,ft=et,dt=nt;!ct&&pt>0;)pt--,ft=Math.floor(ft/2),dt=Math.floor(dt/2),ct=this.tiles[ye(pt,ft,dt)];return ct&&ct.source?(ot>1&&console.log("found parent tile z%d-%d-%d",pt,ft,dt),ot>1&&console.time("drilling down"),this.splitTile(ct.source,pt,ft,dt,tt,et,nt),ot>1&&console.timeEnd("drilling down"),this.tiles[st]?pe(this.tiles[st],it):null):null};var ct=function(et){function r(tt,nt,rt,it){et.call(this,tt,nt,rt,xe),it&&(this.loadGeoJSON=it)}return et&&(r.__proto__=et),(r.prototype=Object.create(et&&et.prototype)).constructor=r,r.prototype.loadData=function(tt,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=et,this._pendingLoadDataParams=tt,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},r.prototype._loadData=function(){var et=this;if(this._pendingCallback&&this._pendingLoadDataParams){var nt=this._pendingCallback,rt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var it=!!(rt&&rt.request&&rt.request.collectResourceTiming)&&new tt.RequestPerformance(rt.request);this.loadGeoJSON(rt,(function(ot,at){if(ot||!at)return nt(ot);if("object"!=typeof at)return nt(new Error("Input data given to '"+rt.source+"' is not a valid GeoJSON object."));!function e(tt,et){var nt,rt=tt&&tt.type;if("FeatureCollection"===rt)for(nt=0;nt<tt.features.length;nt++)e(tt.features[nt],et);else if("GeometryCollection"===rt)for(nt=0;nt<tt.geometries.length;nt++)e(tt.geometries[nt],et);else if("Feature"===rt)e(tt.geometry,et);else if("Polygon"===rt)c(tt.coordinates,et);else if("MultiPolygon"===rt)for(nt=0;nt<tt.coordinates.length;nt++)c(tt.coordinates[nt],et);return tt}(at,!0);try{et._geoJSONIndex=rt.cluster?new J(function(et){var nt=et.superclusterOptions,rt=et.clusterProperties;if(!rt||!nt)return nt;for(var it={},ot={},at={accumulated:null,zoom:0},st={properties:null},ct=Object.keys(rt),pt=0,ft=ct;pt<ft.length;pt+=1){var dt=ft[pt],mt=rt[dt],yt=mt[0],vt=tt.createExpression(mt[1]),Dt=tt.createExpression("string"==typeof yt?[yt,["accumulated"],["get",dt]]:yt);it[dt]=vt.value,ot[dt]=Dt.value}return nt.map=function(tt){st.properties=tt;for(var et={},nt=0,rt=ct;nt<rt.length;nt+=1){var ot=rt[nt];et[ot]=it[ot].evaluate(at,st)}return et},nt.reduce=function(tt,et){st.properties=et;for(var nt=0,rt=ct;nt<rt.length;nt+=1){var it=rt[nt];at.accumulated=tt[it],tt[it]=ot[it].evaluate(at,st)}},nt}(rt)).load(at.features):function(tt,et){return new ve(tt,et)}(at,rt.geojsonVtOptions)}catch(ot){return nt(ot)}et.loaded={};var st={};if(it){var ct=it.finish();ct&&(st.resourceTiming={},st.resourceTiming[rt.source]=JSON.parse(JSON.stringify(ct)))}nt(null,st)}))}},r.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},r.prototype.reloadTile=function(tt,nt){var rt=this.loaded;return rt&&rt[tt.uid]?et.prototype.reloadTile.call(this,tt,nt):this.loadTile(tt,nt)},r.prototype.loadGeoJSON=function(et,nt){if(et.request)tt.getJSON(et.request,nt);else{if("string"!=typeof et.data)return nt(new Error("Input data given to '"+et.source+"' is not a valid GeoJSON object."));try{return nt(null,JSON.parse(et.data))}catch(tt){return nt(new Error("Input data given to '"+et.source+"' is not a valid GeoJSON object."))}}},r.prototype.removeSource=function(tt,et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),et()},r.prototype.getClusterExpansionZoom=function(tt,et){try{et(null,this._geoJSONIndex.getClusterExpansionZoom(tt.clusterId))}catch(tt){et(tt)}},r.prototype.getClusterChildren=function(tt,et){try{et(null,this._geoJSONIndex.getChildren(tt.clusterId))}catch(tt){et(tt)}},r.prototype.getClusterLeaves=function(tt,et){try{et(null,this._geoJSONIndex.getLeaves(tt.clusterId,tt.limit,tt.offset))}catch(tt){et(tt)}},r}(l),Se=function(et){var nt=this;this.self=et,this.actor=new tt.Actor(et,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:ct},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(tt,et){if(nt.workerSourceTypes[tt])throw new Error('Worker source with name "'+tt+'" already registered.');nt.workerSourceTypes[tt]=et},this.self.registerRTLTextPlugin=function(et){if(tt.plugin.isParsed())throw new Error("RTL text plugin already registered.");tt.plugin.applyArabicShaping=et.applyArabicShaping,tt.plugin.processBidirectionalText=et.processBidirectionalText,tt.plugin.processStyledBidirectionalText=et.processStyledBidirectionalText}};return Se.prototype.setReferrer=function(tt,et){this.referrer=et},Se.prototype.setImages=function(tt,et,nt){for(var rt in this.availableImages[tt]=et,this.workerSources[tt]){var it=this.workerSources[tt][rt];for(var ot in it)it[ot].availableImages=et}nt()},Se.prototype.setLayers=function(tt,et,nt){this.getLayerIndex(tt).replace(et),nt()},Se.prototype.updateLayers=function(tt,et,nt){this.getLayerIndex(tt).update(et.layers,et.removedIds),nt()},Se.prototype.loadTile=function(tt,et,nt){this.getWorkerSource(tt,et.type,et.source).loadTile(et,nt)},Se.prototype.loadDEMTile=function(tt,et,nt){this.getDEMWorkerSource(tt,et.source).loadTile(et,nt)},Se.prototype.reloadTile=function(tt,et,nt){this.getWorkerSource(tt,et.type,et.source).reloadTile(et,nt)},Se.prototype.abortTile=function(tt,et,nt){this.getWorkerSource(tt,et.type,et.source).abortTile(et,nt)},Se.prototype.removeTile=function(tt,et,nt){this.getWorkerSource(tt,et.type,et.source).removeTile(et,nt)},Se.prototype.removeDEMTile=function(tt,et){this.getDEMWorkerSource(tt,et.source).removeTile(et)},Se.prototype.removeSource=function(tt,et,nt){if(this.workerSources[tt]&&this.workerSources[tt][et.type]&&this.workerSources[tt][et.type][et.source]){var rt=this.workerSources[tt][et.type][et.source];delete this.workerSources[tt][et.type][et.source],void 0!==rt.removeSource?rt.removeSource(et,nt):nt()}},Se.prototype.loadWorkerSource=function(tt,et,nt){try{this.self.importScripts(et.url),nt()}catch(tt){nt(tt.toString())}},Se.prototype.syncRTLPluginState=function(et,nt,rt){try{tt.plugin.setState(nt);var it=tt.plugin.getPluginURL();if(tt.plugin.isLoaded()&&!tt.plugin.isParsed()&&null!=it){this.self.importScripts(it);var ot=tt.plugin.isParsed();rt(ot?void 0:new Error("RTL Text Plugin failed to import scripts from "+it),ot)}}catch(tt){rt(tt.toString())}},Se.prototype.getAvailableImages=function(tt){var et=this.availableImages[tt];return et||(et=[]),et},Se.prototype.getLayerIndex=function(tt){var et=this.layerIndexes[tt];return et||(et=this.layerIndexes[tt]=new i),et},Se.prototype.getWorkerSource=function(tt,et,nt){var rt=this;return this.workerSources[tt]||(this.workerSources[tt]={}),this.workerSources[tt][et]||(this.workerSources[tt][et]={}),this.workerSources[tt][et][nt]||(this.workerSources[tt][et][nt]=new this.workerSourceTypes[et]({send:function(et,nt,it){rt.actor.send(et,nt,it,tt)}},this.getLayerIndex(tt),this.getAvailableImages(tt))),this.workerSources[tt][et][nt]},Se.prototype.getDEMWorkerSource=function(tt,et){return this.demWorkerSources[tt]||(this.demWorkerSources[tt]={}),this.demWorkerSources[tt][et]||(this.demWorkerSources[tt][et]=new h),this.demWorkerSources[tt][et]},Se.prototype.enforceCacheSizeLimit=function(et,nt){tt.enforceCacheSizeLimit(nt)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Se(self)),Se})),define(0,(function(tt){var et=tt.createCommonjsModule((function(tt){function e(tt){return!i(tt)}function i(tt){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var tt,et,nt=new Blob([""],{type:"text/javascript"}),rt=URL.createObjectURL(nt);try{et=new Worker(rt),tt=!0}catch(et){tt=!1}return et&&et.terminate(),URL.revokeObjectURL(rt),tt}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var tt=document.createElement("canvas");tt.width=tt.height=1;var et=tt.getContext("2d");if(!et)return!1;var nt=et.getImageData(0,0,1,1);return nt&&nt.width===tt.width}()?(void 0===et[nt=tt&&tt.failIfMajorPerformanceCaveat]&&(et[nt]=function(tt){var et=function(tt){var et=document.createElement("canvas"),nt=Object.create(e.webGLContextAttributes);return nt.failIfMajorPerformanceCaveat=tt,et.probablySupportsContext?et.probablySupportsContext("webgl",nt)||et.probablySupportsContext("experimental-webgl",nt):et.supportsContext?et.supportsContext("webgl",nt)||et.supportsContext("experimental-webgl",nt):et.getContext("webgl",nt)||et.getContext("experimental-webgl",nt)}(tt);if(!et)return!1;var nt=et.createShader(et.VERTEX_SHADER);return!(!nt||et.isContextLost())&&(et.shaderSource(nt,"void main() {}"),et.compileShader(nt),!0===et.getShaderParameter(nt,et.COMPILE_STATUS))}(nt)),et[nt]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var nt}tt.exports?tt.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=i);var et={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),nt={create:function(et,nt,rt){var it=tt.window.document.createElement(et);return void 0!==nt&&(it.className=nt),rt&&rt.appendChild(it),it},createNS:function(et,nt){return tt.window.document.createElementNS(et,nt)}},rt=tt.window.document&&tt.window.document.documentElement.style;function r(tt){if(!rt)return tt[0];for(var et=0;et<tt.length;et++)if(tt[et]in rt)return tt[et];return tt[0]}var it,ot=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);nt.disableDrag=function(){rt&&ot&&(it=rt[ot],rt[ot]="none")},nt.enableDrag=function(){rt&&ot&&(rt[ot]=it)};var at=r(["transform","WebkitTransform"]);nt.setTransform=function(tt,et){tt.style[at]=et};var st=!1;try{var ct=Object.defineProperty({},"passive",{get:function(){st=!0}});tt.window.addEventListener("test",ct,ct),tt.window.removeEventListener("test",ct,ct)}catch(tt){st=!1}nt.addEventListener=function(tt,et,nt,rt){void 0===rt&&(rt={}),tt.addEventListener(et,nt,"passive"in rt&&st?rt:rt.capture)},nt.removeEventListener=function(tt,et,nt,rt){void 0===rt&&(rt={}),tt.removeEventListener(et,nt,"passive"in rt&&st?rt:rt.capture)};var u=function(et){et.preventDefault(),et.stopPropagation(),tt.window.removeEventListener("click",u,!0)};function h(tt){var et=tt.userImage;return!!(et&&et.render&&et.render())&&(tt.data.replace(new Uint8Array(et.data.buffer)),!0)}nt.suppressClick=function(){tt.window.addEventListener("click",u,!0),tt.window.setTimeout((function(){tt.window.removeEventListener("click",u,!0)}),0)},nt.mousePos=function(et,nt){var rt=et.getBoundingClientRect();return new tt.Point(nt.clientX-rt.left-et.clientLeft,nt.clientY-rt.top-et.clientTop)},nt.touchPos=function(et,nt){for(var rt=et.getBoundingClientRect(),it=[],ot=0;ot<nt.length;ot++)it.push(new tt.Point(nt[ot].clientX-rt.left-et.clientLeft,nt[ot].clientY-rt.top-et.clientTop));return it},nt.mouseButton=function(et){return void 0!==tt.window.InstallTrigger&&2===et.button&&et.ctrlKey&&tt.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:et.button},nt.remove=function(tt){tt.parentNode&&tt.parentNode.removeChild(tt)};var pt=function(et){function i(){et.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new tt.RGBAImage({width:1,height:1}),this.dirty=!0}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(tt){if(this.loaded!==tt&&(this.loaded=tt,tt)){for(var et=0,nt=this.requestors;et<nt.length;et+=1){var rt=nt[et];this._notify(rt.ids,rt.callback)}this.requestors=[]}},i.prototype.getImage=function(tt){return this.images[tt]},i.prototype.addImage=function(tt,et){this._validate(tt,et)&&(this.images[tt]=et)},i.prototype._validate=function(et,nt){var rt=!0;return this._validateStretch(nt.stretchX,nt.data&&nt.data.width)||(this.fire(new tt.ErrorEvent(new Error('Image "'+et+'" has invalid "stretchX" value'))),rt=!1),this._validateStretch(nt.stretchY,nt.data&&nt.data.height)||(this.fire(new tt.ErrorEvent(new Error('Image "'+et+'" has invalid "stretchY" value'))),rt=!1),this._validateContent(nt.content,nt)||(this.fire(new tt.ErrorEvent(new Error('Image "'+et+'" has invalid "content" value'))),rt=!1),rt},i.prototype._validateStretch=function(tt,et){if(!tt)return!0;for(var nt=0,rt=0,it=tt;rt<it.length;rt+=1){var ot=it[rt];if(ot[0]<nt||ot[1]<ot[0]||et<ot[1])return!1;nt=ot[1]}return!0},i.prototype._validateContent=function(tt,et){return!(tt&&(4!==tt.length||tt[0]<0||et.data.width<tt[0]||tt[1]<0||et.data.height<tt[1]||tt[2]<0||et.data.width<tt[2]||tt[3]<0||et.data.height<tt[3]||tt[2]<tt[0]||tt[3]<tt[1]))},i.prototype.updateImage=function(tt,et){et.version=this.images[tt].version+1,this.images[tt]=et,this.updatedImages[tt]=!0},i.prototype.removeImage=function(tt){var et=this.images[tt];delete this.images[tt],delete this.patterns[tt],et.userImage&&et.userImage.onRemove&&et.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(tt,et){var nt=!0;if(!this.isLoaded())for(var rt=0,it=tt;rt<it.length;rt+=1)this.images[it[rt]]||(nt=!1);this.isLoaded()||nt?this._notify(tt,et):this.requestors.push({ids:tt,callback:et})},i.prototype._notify=function(et,nt){for(var rt={},it=0,ot=et;it<ot.length;it+=1){var at=ot[it];this.images[at]||this.fire(new tt.Event("styleimagemissing",{id:at}));var st=this.images[at];st?rt[at]={data:st.data.clone(),pixelRatio:st.pixelRatio,sdf:st.sdf,version:st.version,stretchX:st.stretchX,stretchY:st.stretchY,content:st.content,hasRenderCallback:Boolean(st.userImage&&st.userImage.render)}:tt.warnOnce('Image "'+at+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}nt(null,rt)},i.prototype.getPixelSize=function(){var tt=this.atlasImage;return{width:tt.width,height:tt.height}},i.prototype.getPattern=function(et){var nt=this.patterns[et],rt=this.getImage(et);if(!rt)return null;if(nt&&nt.position.version===rt.version)return nt.position;if(nt)nt.position.version=rt.version;else{var it={w:rt.data.width+2,h:rt.data.height+2,x:0,y:0},ot=new tt.ImagePosition(it,rt);this.patterns[et]={bin:it,position:ot}}return this._updatePatternAtlas(),this.patterns[et].position},i.prototype.bind=function(et){var nt=et.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new tt.Texture(et,this.atlasImage,nt.RGBA),this.atlasTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var et=[];for(var nt in this.patterns)et.push(this.patterns[nt].bin);var rt=tt.potpack(et),it=rt.w,ot=rt.h,at=this.atlasImage;for(var st in at.resize({width:it||1,height:ot||1}),this.patterns){var ct=this.patterns[st].bin,pt=ct.x+1,ft=ct.y+1,dt=this.images[st].data,mt=dt.width,yt=dt.height;tt.RGBAImage.copy(dt,at,{x:0,y:0},{x:pt,y:ft},{width:mt,height:yt}),tt.RGBAImage.copy(dt,at,{x:0,y:yt-1},{x:pt,y:ft-1},{width:mt,height:1}),tt.RGBAImage.copy(dt,at,{x:0,y:0},{x:pt,y:ft+yt},{width:mt,height:1}),tt.RGBAImage.copy(dt,at,{x:mt-1,y:0},{x:pt-1,y:ft},{width:1,height:yt}),tt.RGBAImage.copy(dt,at,{x:0,y:0},{x:pt+mt,y:ft},{width:1,height:yt})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(tt){for(var et=0,nt=tt;et<nt.length;et+=1){var rt=nt[et];if(!this.callbackDispatchedThisFrame[rt]){this.callbackDispatchedThisFrame[rt]=!0;var it=this.images[rt];h(it)&&this.updateImage(rt,it)}}},i}(tt.Evented),ft=m,dt=m,mt=1e20;function m(tt,et,nt,rt,it,ot){this.fontSize=tt||24,this.buffer=void 0===et?3:et,this.cutoff=rt||.25,this.fontFamily=it||"sans-serif",this.fontWeight=ot||"normal",this.radius=nt||8;var at=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=at,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(at*at),this.gridInner=new Float64Array(at*at),this.f=new Float64Array(at),this.d=new Float64Array(at),this.z=new Float64Array(at+1),this.v=new Int16Array(at),this.middle=Math.round(at/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(tt,et,nt,rt,it,ot,at){for(var st=0;st<et;st++){for(var ct=0;ct<nt;ct++)rt[ct]=tt[ct*et+st];for(v(rt,it,ot,at,nt),ct=0;ct<nt;ct++)tt[ct*et+st]=it[ct]}for(ct=0;ct<nt;ct++){for(st=0;st<et;st++)rt[st]=tt[ct*et+st];for(v(rt,it,ot,at,et),st=0;st<et;st++)tt[ct*et+st]=Math.sqrt(it[st])}}function v(tt,et,nt,rt,it){nt[0]=0,rt[0]=-mt,rt[1]=+mt;for(var ot=1,at=0;ot<it;ot++){for(var st=(tt[ot]+ot*ot-(tt[nt[at]]+nt[at]*nt[at]))/(2*ot-2*nt[at]);st<=rt[at];)at--,st=(tt[ot]+ot*ot-(tt[nt[at]]+nt[at]*nt[at]))/(2*ot-2*nt[at]);nt[++at]=ot,rt[at]=st,rt[at+1]=+mt}for(ot=0,at=0;ot<it;ot++){for(;rt[at+1]<ot;)at++;et[ot]=(ot-nt[at])*(ot-nt[at])+tt[nt[at]]}}m.prototype.draw=function(tt){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(tt,this.buffer,this.middle);for(var et=this.ctx.getImageData(0,0,this.size,this.size),nt=new Uint8ClampedArray(this.size*this.size),rt=0;rt<this.size*this.size;rt++){var it=et.data[4*rt+3]/255;this.gridOuter[rt]=1===it?0:0===it?mt:Math.pow(Math.max(0,.5-it),2),this.gridInner[rt]=1===it?mt:0===it?0:Math.pow(Math.max(0,it-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),rt=0;rt<this.size*this.size;rt++)nt[rt]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[rt]-this.gridInner[rt])/this.radius+this.cutoff))));return nt},ft.default=dt;var y=function(tt,et){this.requestManager=tt,this.localIdeographFontFamily=et,this.entries={}};y.prototype.setURL=function(tt){this.url=tt},y.prototype.getGlyphs=function(et,nt){var rt=this,it=[];for(var ot in et)for(var at=0,st=et[ot];at<st.length;at+=1)it.push({stack:ot,id:st[at]});tt.asyncAll(it,(function(tt,et){var nt=tt.stack,it=tt.id,ot=rt.entries[nt];ot||(ot=rt.entries[nt]={glyphs:{},requests:{},ranges:{}});var at=ot.glyphs[it];if(void 0===at){if(at=rt._tinySDF(ot,nt,it))return ot.glyphs[it]=at,void et(null,{stack:nt,id:it,glyph:at});var st=Math.floor(it/256);if(256*st>65535)et(new Error("glyphs > 65535 not supported"));else if(ot.ranges[st])et(null,{stack:nt,id:it,glyph:at});else{var ct=ot.requests[st];ct||(ct=ot.requests[st]=[],y.loadGlyphRange(nt,st,rt.url,rt.requestManager,(function(tt,et){if(et){for(var nt in et)rt._doesCharSupportLocalGlyph(+nt)||(ot.glyphs[+nt]=et[+nt]);ot.ranges[st]=!0}for(var it=0,at=ct;it<at.length;it+=1)(0,at[it])(tt,et);delete ot.requests[st]}))),ct.push((function(tt,rt){tt?et(tt):rt&&et(null,{stack:nt,id:it,glyph:rt[it]||null})}))}}else et(null,{stack:nt,id:it,glyph:at})}),(function(tt,et){if(tt)nt(tt);else if(et){for(var rt={},it=0,ot=et;it<ot.length;it+=1){var at=ot[it],st=at.stack,ct=at.id,pt=at.glyph;(rt[st]||(rt[st]={}))[ct]=pt&&{id:pt.id,bitmap:pt.bitmap.clone(),metrics:pt.metrics}}nt(null,rt)}}))},y.prototype._doesCharSupportLocalGlyph=function(et){return!!this.localIdeographFontFamily&&(tt.isChar["CJK Unified Ideographs"](et)||tt.isChar["Hangul Syllables"](et)||tt.isChar.Hiragana(et)||tt.isChar.Katakana(et))},y.prototype._tinySDF=function(et,nt,rt){var it=this.localIdeographFontFamily;if(it&&this._doesCharSupportLocalGlyph(rt)){var ot=et.tinySDF;if(!ot){var at="400";/bold/i.test(nt)?at="900":/medium/i.test(nt)?at="500":/light/i.test(nt)&&(at="200"),ot=et.tinySDF=new y.TinySDF(24,3,8,.25,it,at)}return{id:rt,bitmap:new tt.AlphaImage({width:30,height:30},ot.draw(String.fromCharCode(rt))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(et,nt,rt,it,ot){var at=256*nt,st=at+255,ct=it.transformRequest(it.normalizeGlyphsURL(rt).replace("{fontstack}",et).replace("{range}",at+"-"+st),tt.ResourceType.Glyphs);tt.getArrayBuffer(ct,(function(et,nt){if(et)ot(et);else if(nt){for(var rt={},it=0,at=tt.parseGlyphPBF(nt);it<at.length;it+=1){var st=at[it];rt[st.id]=st}ot(null,rt)}}))},y.TinySDF=ft;var x=function(){this.specification=tt.styleSpec.light.position};x.prototype.possiblyEvaluate=function(et,nt){return tt.sphericalToCartesian(et.expression.evaluate(nt))},x.prototype.interpolate=function(et,nt,rt){return{x:tt.number(et.x,nt.x,rt),y:tt.number(et.y,nt.y,rt),z:tt.number(et.z,nt.z,rt)}};var yt=new tt.Properties({anchor:new tt.DataConstantProperty(tt.styleSpec.light.anchor),position:new x,color:new tt.DataConstantProperty(tt.styleSpec.light.color),intensity:new tt.DataConstantProperty(tt.styleSpec.light.intensity)}),vt=function(et){function i(nt){et.call(this),this._transitionable=new tt.Transitionable(yt),this.setLight(nt),this._transitioning=this._transitionable.untransitioned()}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(et,nt){if(void 0===nt&&(nt={}),!this._validate(tt.validateLight,et,nt))for(var rt in et){var it=et[rt];tt.endsWith(rt,"-transition")?this._transitionable.setTransition(rt.slice(0,-"-transition".length),it):this._transitionable.setValue(rt,it)}},i.prototype.updateTransitions=function(tt){this._transitioning=this._transitionable.transitioned(tt,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(tt){this.properties=this._transitioning.possiblyEvaluate(tt)},i.prototype._validate=function(et,nt,rt){return(!rt||!1!==rt.validate)&&tt.emitValidationErrors(this,et.call(tt.validateStyle,tt.extend({value:nt,style:{glyphs:!0,sprite:!0},styleSpec:tt.styleSpec})))},i}(tt.Evented),T=function(tt,et){this.width=tt,this.height=et,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};T.prototype.getDash=function(tt,et){var nt=tt.join(",")+String(et);return this.dashEntry[nt]||(this.dashEntry[nt]=this.addDash(tt,et)),this.dashEntry[nt]},T.prototype.getDashRanges=function(tt,et,nt){var rt=[],it=tt.length%2==1?-tt[tt.length-1]*nt:0,ot=tt[0]*nt,at=!0;rt.push({left:it,right:ot,isDash:at,zeroLength:0===tt[0]});for(var st=tt[0],ct=1;ct<tt.length;ct++){var pt=tt[ct];rt.push({left:it=st*nt,right:ot=(st+=pt)*nt,isDash:at=!at,zeroLength:0===pt})}return rt},T.prototype.addRoundDash=function(tt,et,nt){for(var rt=et/2,it=-nt;it<=nt;it++)for(var ot=this.width*(this.nextRow+nt+it),at=0,st=tt[at],ct=0;ct<this.width;ct++){ct/st.right>1&&(st=tt[++at]);var pt=Math.abs(ct-st.left),ft=Math.abs(ct-st.right),dt=Math.min(pt,ft),mt=void 0,yt=it/nt*(rt+1);if(st.isDash){var vt=rt-Math.abs(yt);mt=Math.sqrt(dt*dt+vt*vt)}else mt=rt-Math.sqrt(dt*dt+yt*yt);this.data[ot+ct]=Math.max(0,Math.min(255,mt+128))}},T.prototype.addRegularDash=function(tt){for(var et=tt.length-1;et>=0;--et){var nt=tt[et],rt=tt[et+1];nt.zeroLength?tt.splice(et,1):rt&&rt.isDash===nt.isDash&&(rt.left=nt.left,tt.splice(et,1))}var it=tt[0],ot=tt[tt.length-1];it.isDash===ot.isDash&&(it.left=ot.left-this.width,ot.right=it.right+this.width);for(var at=this.width*this.nextRow,st=0,ct=tt[st],pt=0;pt<this.width;pt++){pt/ct.right>1&&(ct=tt[++st]);var ft=Math.abs(pt-ct.left),dt=Math.abs(pt-ct.right),mt=Math.min(ft,dt);this.data[at+pt]=Math.max(0,Math.min(255,(ct.isDash?mt:-mt)+128))}},T.prototype.addDash=function(et,nt){var rt=nt?7:0,it=2*rt+1;if(this.nextRow+it>this.height)return tt.warnOnce("LineAtlas out of space"),null;for(var ot=0,at=0;at<et.length;at++)ot+=et[at];if(0!==ot){var st=this.width/ot,ct=this.getDashRanges(et,this.width,st);nt?this.addRoundDash(ct,st,rt):this.addRegularDash(ct)}var pt={y:(this.nextRow+rt+.5)/this.height,height:2*rt/this.height,width:ot};return this.nextRow+=it,this.dirty=!0,pt},T.prototype.bind=function(tt){var et=tt.gl;this.texture?(et.bindTexture(et.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,et.texSubImage2D(et.TEXTURE_2D,0,0,0,this.width,this.height,et.ALPHA,et.UNSIGNED_BYTE,this.data))):(this.texture=et.createTexture(),et.bindTexture(et.TEXTURE_2D,this.texture),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_WRAP_S,et.REPEAT),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_WRAP_T,et.REPEAT),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_MIN_FILTER,et.LINEAR),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_MAG_FILTER,et.LINEAR),et.texImage2D(et.TEXTURE_2D,0,et.ALPHA,this.width,this.height,0,et.ALPHA,et.UNSIGNED_BYTE,this.data))};var Dt=function e(et,nt){this.workerPool=et,this.actors=[],this.currentActor=0,this.id=tt.uniqueId();for(var rt=this.workerPool.acquire(this.id),it=0;it<rt.length;it++){var ot=new e.Actor(rt[it],nt,this.id);ot.name="Worker "+it,this.actors.push(ot)}};function I(et,nt,rt){var r=function(it,ot){if(it)return rt(it);if(ot){var at=tt.pick(tt.extend(ot,et),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ot.vector_layers&&(at.vectorLayers=ot.vector_layers,at.vectorLayerIds=at.vectorLayers.map((function(tt){return tt.id}))),at.tiles=nt.canonicalizeTileset(at,et.url),rt(null,at)}};return et.url?tt.getJSON(nt.transformRequest(nt.normalizeSourceURL(et.url),tt.ResourceType.Source),r):tt.browser.frame((function(){return r(null,et)}))}Dt.prototype.broadcast=function(et,nt,rt){tt.asyncAll(this.actors,(function(tt,rt){tt.send(et,nt,rt)}),rt=rt||function(){})},Dt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Dt.prototype.remove=function(){this.actors.forEach((function(tt){tt.remove()})),this.actors=[],this.workerPool.release(this.id)},Dt.Actor=tt.Actor;var P=function(et,nt,rt){this.bounds=tt.LngLatBounds.convert(this.validateBounds(et)),this.minzoom=nt||0,this.maxzoom=rt||24};P.prototype.validateBounds=function(tt){return Array.isArray(tt)&&4===tt.length?[Math.max(-180,tt[0]),Math.max(-90,tt[1]),Math.min(180,tt[2]),Math.min(90,tt[3])]:[-180,-90,180,90]},P.prototype.contains=function(et){var nt=Math.pow(2,et.z),rt=Math.floor(tt.mercatorXfromLng(this.bounds.getWest())*nt),it=Math.floor(tt.mercatorYfromLat(this.bounds.getNorth())*nt),ot=Math.ceil(tt.mercatorXfromLng(this.bounds.getEast())*nt),at=Math.ceil(tt.mercatorYfromLat(this.bounds.getSouth())*nt);return et.x>=rt&&et.x<ot&&et.y>=it&&et.y<at};var Ot=function(et){function i(nt,rt,it,ot){if(et.call(this),this.id=nt,this.dispatcher=it,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,tt.extend(this,tt.pick(rt,["url","scheme","tileSize","promoteId"])),this._options=tt.extend({type:"vector"},rt),this._collectResourceTiming=rt.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ot)}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.load=function(){var et=this;this._loaded=!1,this.fire(new tt.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(nt,rt){et._tileJSONRequest=null,et._loaded=!0,nt?et.fire(new tt.ErrorEvent(nt)):rt&&(tt.extend(et,rt),rt.bounds&&(et.tileBounds=new P(rt.bounds,et.minzoom,et.maxzoom)),tt.postTurnstileEvent(rt.tiles,et.map._requestManager._customAccessToken),tt.postMapLoadEvent(rt.tiles,et.map._getMapId(),et.map._requestManager._skuToken,et.map._requestManager._customAccessToken),et.fire(new tt.Event("data",{dataType:"source",sourceDataType:"metadata"})),et.fire(new tt.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(tt){return!this.tileBounds||this.tileBounds.contains(tt.canonical)},i.prototype.onAdd=function(tt){this.map=tt,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return tt.extend({},this._options)},i.prototype.loadTile=function(et,nt){var rt=this.map._requestManager.normalizeTileURL(et.tileID.canonical.url(this.tiles,this.scheme)),it={request:this.map._requestManager.transformRequest(rt,tt.ResourceType.Tile),uid:et.uid,tileID:et.tileID,zoom:et.tileID.overscaledZ,tileSize:this.tileSize*et.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:tt.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function a(rt,it){return delete et.request,et.aborted?nt(null):rt&&404!==rt.status?nt(rt):(it&&it.resourceTiming&&(et.resourceTiming=it.resourceTiming),this.map._refreshExpiredTiles&&it&&et.setExpiryData(it),et.loadVectorData(it,this.map.painter),tt.cacheEntryPossiblyAdded(this.dispatcher),nt(null),void(et.reloadCallback&&(this.loadTile(et,et.reloadCallback),et.reloadCallback=null)))}it.request.collectResourceTiming=this._collectResourceTiming,et.actor&&"expired"!==et.state?"loading"===et.state?et.reloadCallback=nt:et.request=et.actor.send("reloadTile",it,a.bind(this)):(et.actor=this.dispatcher.getActor(),et.request=et.actor.send("loadTile",it,a.bind(this)))},i.prototype.abortTile=function(tt){tt.request&&(tt.request.cancel(),delete tt.request),tt.actor&&tt.actor.send("abortTile",{uid:tt.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(tt){tt.unloadVectorData(),tt.actor&&tt.actor.send("removeTile",{uid:tt.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(tt.Evented),Rt=function(et){function i(nt,rt,it,ot){et.call(this),this.id=nt,this.dispatcher=it,this.setEventedParent(ot),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=tt.extend({type:"raster"},rt),tt.extend(this,tt.pick(rt,["url","scheme","tileSize"]))}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.load=function(){var et=this;this._loaded=!1,this.fire(new tt.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,(function(nt,rt){et._tileJSONRequest=null,et._loaded=!0,nt?et.fire(new tt.ErrorEvent(nt)):rt&&(tt.extend(et,rt),rt.bounds&&(et.tileBounds=new P(rt.bounds,et.minzoom,et.maxzoom)),tt.postTurnstileEvent(rt.tiles),tt.postMapLoadEvent(rt.tiles,et.map._getMapId(),et.map._requestManager._skuToken),et.fire(new tt.Event("data",{dataType:"source",sourceDataType:"metadata"})),et.fire(new tt.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(tt){this.map=tt,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return tt.extend({},this._options)},i.prototype.hasTile=function(tt){return!this.tileBounds||this.tileBounds.contains(tt.canonical)},i.prototype.loadTile=function(et,nt){var rt=this,it=this.map._requestManager.normalizeTileURL(et.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);et.request=tt.getImage(this.map._requestManager.transformRequest(it,tt.ResourceType.Tile),(function(it,ot){if(delete et.request,et.aborted)et.state="unloaded",nt(null);else if(it)et.state="errored",nt(it);else if(ot){rt.map._refreshExpiredTiles&&et.setExpiryData(ot),delete ot.cacheControl,delete ot.expires;var at=rt.map.painter.context,st=at.gl;et.texture=rt.map.painter.getTileTexture(ot.width),et.texture?et.texture.update(ot,{useMipmap:!0}):(et.texture=new tt.Texture(at,ot,st.RGBA,{useMipmap:!0}),et.texture.bind(st.LINEAR,st.CLAMP_TO_EDGE,st.LINEAR_MIPMAP_NEAREST),at.extTextureFilterAnisotropic&&st.texParameterf(st.TEXTURE_2D,at.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,at.extTextureFilterAnisotropicMax)),et.state="loaded",tt.cacheEntryPossiblyAdded(rt.dispatcher),nt(null)}}))},i.prototype.abortTile=function(tt,et){tt.request&&(tt.request.cancel(),delete tt.request),et()},i.prototype.unloadTile=function(tt,et){tt.texture&&this.map.painter.saveTileTexture(tt.texture),et()},i.prototype.hasTransition=function(){return!1},i}(tt.Evented),Bt=function(et){function i(nt,rt,it,ot){et.call(this,nt,rt,it,ot),this.type="raster-dem",this.maxzoom=22,this._options=tt.extend({type:"raster-dem"},rt),this.encoding=rt.encoding||"mapbox"}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(et,nt){var rt=this.map._requestManager.normalizeTileURL(et.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function r(tt,rt){tt&&(et.state="errored",nt(tt)),rt&&(et.dem=rt,et.needsHillshadePrepare=!0,et.state="loaded",nt(null))}et.request=tt.getImage(this.map._requestManager.transformRequest(rt,tt.ResourceType.Tile),function(rt,it){if(delete et.request,et.aborted)et.state="unloaded",nt(null);else if(rt)et.state="errored",nt(rt);else if(it){this.map._refreshExpiredTiles&&et.setExpiryData(it),delete it.cacheControl,delete it.expires;var ot=tt.window.ImageBitmap&&it instanceof tt.window.ImageBitmap&&tt.offscreenCanvasSupported()?it:tt.browser.getImageData(it,1),at={uid:et.uid,coord:et.tileID,source:this.id,rawImageData:ot,encoding:this.encoding};et.actor&&"expired"!==et.state||(et.actor=this.dispatcher.getActor(),et.actor.send("loadDEMTile",at,r.bind(this)))}}.bind(this)),et.neighboringTiles=this._getNeighboringTiles(et.tileID)},i.prototype._getNeighboringTiles=function(et){var nt=et.canonical,rt=Math.pow(2,nt.z),it=(nt.x-1+rt)%rt,ot=0===nt.x?et.wrap-1:et.wrap,at=(nt.x+1+rt)%rt,st=nt.x+1===rt?et.wrap+1:et.wrap,ct={};return ct[new tt.OverscaledTileID(et.overscaledZ,ot,nt.z,it,nt.y).key]={backfilled:!1},ct[new tt.OverscaledTileID(et.overscaledZ,st,nt.z,at,nt.y).key]={backfilled:!1},nt.y>0&&(ct[new tt.OverscaledTileID(et.overscaledZ,ot,nt.z,it,nt.y-1).key]={backfilled:!1},ct[new tt.OverscaledTileID(et.overscaledZ,et.wrap,nt.z,nt.x,nt.y-1).key]={backfilled:!1},ct[new tt.OverscaledTileID(et.overscaledZ,st,nt.z,at,nt.y-1).key]={backfilled:!1}),nt.y+1<rt&&(ct[new tt.OverscaledTileID(et.overscaledZ,ot,nt.z,it,nt.y+1).key]={backfilled:!1},ct[new tt.OverscaledTileID(et.overscaledZ,et.wrap,nt.z,nt.x,nt.y+1).key]={backfilled:!1},ct[new tt.OverscaledTileID(et.overscaledZ,st,nt.z,at,nt.y+1).key]={backfilled:!1}),ct},i.prototype.unloadTile=function(tt){tt.demTexture&&this.map.painter.saveTileTexture(tt.demTexture),tt.fbo&&(tt.fbo.destroy(),delete tt.fbo),tt.dem&&delete tt.dem,delete tt.neighboringTiles,tt.state="unloaded",tt.actor&&tt.actor.send("removeDEMTile",{uid:tt.uid,source:this.id})},i}(Rt),Ne=function(et){function i(nt,rt,it,ot){et.call(this),this.id=nt,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=it.getActor(),this.setEventedParent(ot),this._data=rt.data,this._options=tt.extend({},rt),this._collectResourceTiming=rt.collectResourceTiming,this._resourceTiming=[],void 0!==rt.maxzoom&&(this.maxzoom=rt.maxzoom),rt.type&&(this.type=rt.type),rt.attribution&&(this.attribution=rt.attribution),this.promoteId=rt.promoteId;var at=tt.EXTENT/this.tileSize;this.workerOptions=tt.extend({source:this.id,cluster:rt.cluster||!1,geojsonVtOptions:{buffer:(void 0!==rt.buffer?rt.buffer:128)*at,tolerance:(void 0!==rt.tolerance?rt.tolerance:.375)*at,extent:tt.EXTENT,maxZoom:this.maxzoom,lineMetrics:rt.lineMetrics||!1,generateId:rt.generateId||!1},superclusterOptions:{maxZoom:void 0!==rt.clusterMaxZoom?Math.min(rt.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,rt.clusterMinPoints||2),extent:tt.EXTENT,radius:(rt.clusterRadius||50)*at,log:!1,generateId:rt.generateId||!1},clusterProperties:rt.clusterProperties},rt.workerOptions)}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.load=function(){var et=this;this.fire(new tt.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(nt){if(nt)et.fire(new tt.ErrorEvent(nt));else{var rt={dataType:"source",sourceDataType:"metadata"};et._collectResourceTiming&&et._resourceTiming&&et._resourceTiming.length>0&&(rt.resourceTiming=et._resourceTiming,et._resourceTiming=[]),et.fire(new tt.Event("data",rt))}}))},i.prototype.onAdd=function(tt){this.map=tt,this.load()},i.prototype.setData=function(et){var nt=this;return this._data=et,this.fire(new tt.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(et){if(et)nt.fire(new tt.ErrorEvent(et));else{var rt={dataType:"source",sourceDataType:"content"};nt._collectResourceTiming&&nt._resourceTiming&&nt._resourceTiming.length>0&&(rt.resourceTiming=nt._resourceTiming,nt._resourceTiming=[]),nt.fire(new tt.Event("data",rt))}})),this},i.prototype.getClusterExpansionZoom=function(tt,et){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:tt,source:this.id},et),this},i.prototype.getClusterChildren=function(tt,et){return this.actor.send("geojson.getClusterChildren",{clusterId:tt,source:this.id},et),this},i.prototype.getClusterLeaves=function(tt,et,nt,rt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:tt,limit:et,offset:nt},rt),this},i.prototype._updateWorkerData=function(et){var nt=this;this._loaded=!1;var rt=tt.extend({},this.workerOptions),it=this._data;"string"==typeof it?(rt.request=this.map._requestManager.transformRequest(tt.browser.resolveURL(it),tt.ResourceType.Source),rt.request.collectResourceTiming=this._collectResourceTiming):rt.data=JSON.stringify(it),this.actor.send(this.type+".loadData",rt,(function(tt,it){nt._removed||it&&it.abandoned||(nt._loaded=!0,it&&it.resourceTiming&&it.resourceTiming[nt.id]&&(nt._resourceTiming=it.resourceTiming[nt.id].slice(0)),nt.actor.send(nt.type+".coalesce",{source:rt.source},null),et(tt))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(et,nt){var rt=this,it=et.actor?"reloadTile":"loadTile";et.actor=this.actor,et.request=this.actor.send(it,{type:this.type,uid:et.uid,tileID:et.tileID,zoom:et.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:tt.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(tt,ot){return delete et.request,et.unloadVectorData(),et.aborted?nt(null):tt?nt(tt):(et.loadVectorData(ot,rt.map.painter,"reloadTile"===it),nt(null))}))},i.prototype.abortTile=function(tt){tt.request&&(tt.request.cancel(),delete tt.request),tt.aborted=!0},i.prototype.unloadTile=function(tt){tt.unloadVectorData(),this.actor.send("removeTile",{uid:tt.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return tt.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(tt.Evented),rn=tt.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),vn=function(et){function i(tt,nt,rt,it){et.call(this),this.id=tt,this.dispatcher=rt,this.coordinates=nt.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(it),this.options=nt}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.load=function(et,nt){var rt=this;this._loaded=!1,this.fire(new tt.Event("dataloading",{dataType:"source"})),this.url=this.options.url,tt.getImage(this.map._requestManager.transformRequest(this.url,tt.ResourceType.Image),(function(it,ot){rt._loaded=!0,it?rt.fire(new tt.ErrorEvent(it)):ot&&(rt.image=ot,et&&(rt.coordinates=et),nt&&nt(),rt._finishLoading())}))},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(tt){var et=this;return this.image&&tt.url?(this.options.url=tt.url,this.load(tt.coordinates,(function(){et.texture=null})),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new tt.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(tt){this.map=tt,this.load()},i.prototype.setCoordinates=function(et){var nt=this;this.coordinates=et;var rt=et.map(tt.MercatorCoordinate.fromLngLat);this.tileID=function(et){for(var nt=1/0,rt=1/0,it=-1/0,ot=-1/0,at=0,st=et;at<st.length;at+=1){var ct=st[at];nt=Math.min(nt,ct.x),rt=Math.min(rt,ct.y),it=Math.max(it,ct.x),ot=Math.max(ot,ct.y)}var pt=Math.max(it-nt,ot-rt),ft=Math.max(0,Math.floor(-Math.log(pt)/Math.LN2)),dt=Math.pow(2,ft);return new tt.CanonicalTileID(ft,Math.floor((nt+it)/2*dt),Math.floor((rt+ot)/2*dt))}(rt),this.minzoom=this.maxzoom=this.tileID.z;var it=rt.map((function(tt){return nt.tileID.getTilePoint(tt)._round()}));return this._boundsArray=new tt.StructArrayLayout4i8,this._boundsArray.emplaceBack(it[0].x,it[0].y,0,0),this._boundsArray.emplaceBack(it[1].x,it[1].y,tt.EXTENT,0),this._boundsArray.emplaceBack(it[3].x,it[3].y,0,tt.EXTENT),this._boundsArray.emplaceBack(it[2].x,it[2].y,tt.EXTENT,tt.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new tt.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var et=this.map.painter.context,nt=et.gl;for(var rt in this.boundsBuffer||(this.boundsBuffer=et.createVertexBuffer(this._boundsArray,rn.members)),this.boundsSegments||(this.boundsSegments=tt.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new tt.Texture(et,this.image,nt.RGBA),this.texture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)),this.tiles){var it=this.tiles[rt];"loaded"!==it.state&&(it.state="loaded",it.texture=this.texture)}}},i.prototype.loadTile=function(tt,et){this.tileID&&this.tileID.equals(tt.tileID.canonical)?(this.tiles[String(tt.tileID.wrap)]=tt,tt.buckets={},et(null)):(tt.state="errored",et(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(tt.Evented),bn=function(et){function i(tt,nt,rt,it){et.call(this,tt,nt,rt,it),this.roundZoom=!0,this.type="video",this.options=nt}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.load=function(){var et=this;this._loaded=!1;var nt=this.options;this.urls=[];for(var rt=0,it=nt.urls;rt<it.length;rt+=1)this.urls.push(this.map._requestManager.transformRequest(it[rt],tt.ResourceType.Source).url);tt.getVideo(this.urls,(function(nt,rt){et._loaded=!0,nt?et.fire(new tt.ErrorEvent(nt)):rt&&(et.video=rt,et.video.loop=!0,et.video.addEventListener("playing",(function(){et.map.triggerRepaint()})),et.map&&et.video.play(),et._finishLoading())}))},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(et){if(this.video){var nt=this.video.seekable;et<nt.start(0)||et>nt.end(0)?this.fire(new tt.ErrorEvent(new tt.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+nt.start(0)+" and "+nt.end(0)+"-second mark."))):this.video.currentTime=et}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(tt){this.map||(this.map=tt,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var et=this.map.painter.context,nt=et.gl;for(var rt in this.boundsBuffer||(this.boundsBuffer=et.createVertexBuffer(this._boundsArray,rn.members)),this.boundsSegments||(this.boundsSegments=tt.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE),nt.texSubImage2D(nt.TEXTURE_2D,0,0,0,nt.RGBA,nt.UNSIGNED_BYTE,this.video)):(this.texture=new tt.Texture(et,this.video,nt.RGBA),this.texture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)),this.tiles){var it=this.tiles[rt];"loaded"!==it.state&&(it.state="loaded",it.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(vn),Tn=function(et){function i(nt,rt,it,ot){et.call(this,nt,rt,it,ot),rt.coordinates?Array.isArray(rt.coordinates)&&4===rt.coordinates.length&&!rt.coordinates.some((function(tt){return!Array.isArray(tt)||2!==tt.length||tt.some((function(tt){return"number"!=typeof tt}))}))||this.fire(new tt.ErrorEvent(new tt.ValidationError("sources."+nt,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new tt.ErrorEvent(new tt.ValidationError("sources."+nt,null,'missing required property "coordinates"'))),rt.animate&&"boolean"!=typeof rt.animate&&this.fire(new tt.ErrorEvent(new tt.ValidationError("sources."+nt,null,'optional "animate" property must be a boolean value'))),rt.canvas?"string"==typeof rt.canvas||rt.canvas instanceof tt.window.HTMLCanvasElement||this.fire(new tt.ErrorEvent(new tt.ValidationError("sources."+nt,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new tt.ErrorEvent(new tt.ValidationError("sources."+nt,null,'missing required property "canvas"'))),this.options=rt,this.animate=void 0===rt.animate||rt.animate}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof tt.window.HTMLCanvasElement?this.options.canvas:tt.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new tt.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(tt){this.map=tt,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var et=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,et=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,et=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var nt=this.map.painter.context,rt=nt.gl;for(var it in this.boundsBuffer||(this.boundsBuffer=nt.createVertexBuffer(this._boundsArray,rn.members)),this.boundsSegments||(this.boundsSegments=tt.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(et||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new tt.Texture(nt,this.canvas,rt.RGBA,{premultiply:!0}),this.tiles){var ot=this.tiles[it];"loaded"!==ot.state&&(ot.state="loaded",ot.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var tt=0,et=[this.canvas.width,this.canvas.height];tt<et.length;tt+=1){var nt=et[tt];if(isNaN(nt)||nt<=0)return!0}return!1},i}(vn),Cn={vector:Ot,raster:Rt,"raster-dem":Bt,geojson:Ne,video:bn,image:vn,canvas:Tn};function B(et,nt){var rt=tt.identity([]);return tt.translate(rt,rt,[1,1,0]),tt.scale(rt,rt,[.5*et.width,.5*et.height,1]),tt.multiply(rt,rt,et.calculatePosMatrix(nt.toUnwrapped()))}function O(tt,et,nt,rt,it,ot){var at=function(tt,et,nt){if(tt)for(var rt=0,it=tt;rt<it.length;rt+=1){var ot=et[it[rt]];if(ot&&ot.source===nt&&"fill-extrusion"===ot.type)return!0}else for(var at in et){var st=et[at];if(st.source===nt&&"fill-extrusion"===st.type)return!0}return!1}(it&&it.layers,et,tt.id),st=ot.maxPitchScaleFactor(),ct=tt.tilesIn(rt,st,at);ct.sort(F);for(var pt=[],ft=0,dt=ct;ft<dt.length;ft+=1){var mt=dt[ft];pt.push({wrappedTileID:mt.tileID.wrapped().key,queryResults:mt.tile.queryRenderedFeatures(et,nt,tt._state,mt.queryGeometry,mt.cameraQueryGeometry,mt.scale,it,ot,st,B(tt.transform,mt.tileID))})}var yt=function(tt){for(var et={},nt={},rt=0,it=tt;rt<it.length;rt+=1){var ot=it[rt],at=ot.queryResults,st=ot.wrappedTileID,ct=nt[st]=nt[st]||{};for(var pt in at)for(var ft=at[pt],dt=ct[pt]=ct[pt]||{},mt=et[pt]=et[pt]||[],yt=0,vt=ft;yt<vt.length;yt+=1){var Dt=vt[yt];dt[Dt.featureIndex]||(dt[Dt.featureIndex]=!0,mt.push(Dt))}}return et}(pt);for(var vt in yt)yt[vt].forEach((function(et){var nt=et.feature,rt=tt.getFeatureState(nt.layer["source-layer"],nt.id);nt.source=nt.layer.source,nt.layer["source-layer"]&&(nt.sourceLayer=nt.layer["source-layer"]),nt.state=rt}));return yt}function F(tt,et){var nt=tt.tileID,rt=et.tileID;return nt.overscaledZ-rt.overscaledZ||nt.canonical.y-rt.canonical.y||nt.wrap-rt.wrap||nt.canonical.x-rt.canonical.x}var U=function(tt,et){this.max=tt,this.onRemove=et,this.reset()};U.prototype.reset=function(){for(var tt in this.data)for(var et=0,nt=this.data[tt];et<nt.length;et+=1){var rt=nt[et];rt.timeout&&clearTimeout(rt.timeout),this.onRemove(rt.value)}return this.data={},this.order=[],this},U.prototype.add=function(tt,et,nt){var rt=this,it=tt.wrapped().key;void 0===this.data[it]&&(this.data[it]=[]);var ot={value:et,timeout:void 0};if(void 0!==nt&&(ot.timeout=setTimeout((function(){rt.remove(tt,ot)}),nt)),this.data[it].push(ot),this.order.push(it),this.order.length>this.max){var at=this._getAndRemoveByKey(this.order[0]);at&&this.onRemove(at)}return this},U.prototype.has=function(tt){return tt.wrapped().key in this.data},U.prototype.getAndRemove=function(tt){return this.has(tt)?this._getAndRemoveByKey(tt.wrapped().key):null},U.prototype._getAndRemoveByKey=function(tt){var et=this.data[tt].shift();return et.timeout&&clearTimeout(et.timeout),0===this.data[tt].length&&delete this.data[tt],this.order.splice(this.order.indexOf(tt),1),et.value},U.prototype.getByKey=function(tt){var et=this.data[tt];return et?et[0].value:null},U.prototype.get=function(tt){return this.has(tt)?this.data[tt.wrapped().key][0].value:null},U.prototype.remove=function(tt,et){if(!this.has(tt))return this;var nt=tt.wrapped().key,rt=void 0===et?0:this.data[nt].indexOf(et),it=this.data[nt][rt];return this.data[nt].splice(rt,1),it.timeout&&clearTimeout(it.timeout),0===this.data[nt].length&&delete this.data[nt],this.onRemove(it.value),this.order.splice(this.order.indexOf(nt),1),this},U.prototype.setMaxSize=function(tt){for(this.max=tt;this.order.length>this.max;){var et=this._getAndRemoveByKey(this.order[0]);et&&this.onRemove(et)}return this},U.prototype.filter=function(tt){var et=[];for(var nt in this.data)for(var rt=0,it=this.data[nt];rt<it.length;rt+=1){var ot=it[rt];tt(ot.value)||et.push(ot)}for(var at=0,st=et;at<st.length;at+=1){var ct=st[at];this.remove(ct.value.tileID,ct)}};var N=function(tt,et,nt){this.context=tt;var rt=tt.gl;this.buffer=rt.createBuffer(),this.dynamicDraw=Boolean(nt),this.context.unbindVAO(),tt.bindElementBuffer.set(this.buffer),rt.bufferData(rt.ELEMENT_ARRAY_BUFFER,et.arrayBuffer,this.dynamicDraw?rt.DYNAMIC_DRAW:rt.STATIC_DRAW),this.dynamicDraw||delete et.arrayBuffer};N.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},N.prototype.updateData=function(tt){var et=this.context.gl;this.context.unbindVAO(),this.bind(),et.bufferSubData(et.ELEMENT_ARRAY_BUFFER,0,tt.arrayBuffer)},N.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ln={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},j=function(tt,et,nt,rt){this.length=et.length,this.attributes=nt,this.itemSize=et.bytesPerElement,this.dynamicDraw=rt,this.context=tt;var it=tt.gl;this.buffer=it.createBuffer(),tt.bindVertexBuffer.set(this.buffer),it.bufferData(it.ARRAY_BUFFER,et.arrayBuffer,this.dynamicDraw?it.DYNAMIC_DRAW:it.STATIC_DRAW),this.dynamicDraw||delete et.arrayBuffer};j.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},j.prototype.updateData=function(tt){var et=this.context.gl;this.bind(),et.bufferSubData(et.ARRAY_BUFFER,0,tt.arrayBuffer)},j.prototype.enableAttributes=function(tt,et){for(var nt=0;nt<this.attributes.length;nt++){var rt=et.attributes[this.attributes[nt].name];void 0!==rt&&tt.enableVertexAttribArray(rt)}},j.prototype.setVertexAttribPointers=function(tt,et,nt){for(var rt=0;rt<this.attributes.length;rt++){var it=this.attributes[rt],ot=et.attributes[it.name];void 0!==ot&&tt.vertexAttribPointer(ot,it.components,tt[Ln[it.type]],!1,this.itemSize,it.offset+this.itemSize*(nt||0))}},j.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q=function(tt){this.gl=tt.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};q.prototype.get=function(){return this.current},q.prototype.set=function(tt){},q.prototype.getDefault=function(){return this.default},q.prototype.setDefault=function(){this.set(this.default)};var In=function(et){function i(){et.apply(this,arguments)}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.getDefault=function(){return tt.Color.transparent},i.prototype.set=function(tt){var et=this.current;(tt.r!==et.r||tt.g!==et.g||tt.b!==et.b||tt.a!==et.a||this.dirty)&&(this.gl.clearColor(tt.r,tt.g,tt.b,tt.a),this.current=tt,this.dirty=!1)},i}(q),Mn=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.clearDepth(tt),this.current=tt,this.dirty=!1)},e}(q),zn=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.clearStencil(tt),this.current=tt,this.dirty=!1)},e}(q),Bn=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(tt){var et=this.current;(tt[0]!==et[0]||tt[1]!==et[1]||tt[2]!==et[2]||tt[3]!==et[3]||this.dirty)&&(this.gl.colorMask(tt[0],tt[1],tt[2],tt[3]),this.current=tt,this.dirty=!1)},e}(q),Fn=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.depthMask(tt),this.current=tt,this.dirty=!1)},e}(q),Nn=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.stencilMask(tt),this.current=tt,this.dirty=!1)},e}(q),Vn=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(tt){var et=this.current;(tt.func!==et.func||tt.ref!==et.ref||tt.mask!==et.mask||this.dirty)&&(this.gl.stencilFunc(tt.func,tt.ref,tt.mask),this.current=tt,this.dirty=!1)},e}(q),Wn=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){var tt=this.gl;return[tt.KEEP,tt.KEEP,tt.KEEP]},e.prototype.set=function(tt){var et=this.current;(tt[0]!==et[0]||tt[1]!==et[1]||tt[2]!==et[2]||this.dirty)&&(this.gl.stencilOp(tt[0],tt[1],tt[2]),this.current=tt,this.dirty=!1)},e}(q),$n=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;tt?et.enable(et.STENCIL_TEST):et.disable(et.STENCIL_TEST),this.current=tt,this.dirty=!1}},e}(q),Yn=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(tt){var et=this.current;(tt[0]!==et[0]||tt[1]!==et[1]||this.dirty)&&(this.gl.depthRange(tt[0],tt[1]),this.current=tt,this.dirty=!1)},e}(q),er=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;tt?et.enable(et.DEPTH_TEST):et.disable(et.DEPTH_TEST),this.current=tt,this.dirty=!1}},e}(q),rr=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.depthFunc(tt),this.current=tt,this.dirty=!1)},e}(q),vr=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;tt?et.enable(et.BLEND):et.disable(et.BLEND),this.current=tt,this.dirty=!1}},e}(q),wr=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){var tt=this.gl;return[tt.ONE,tt.ZERO]},e.prototype.set=function(tt){var et=this.current;(tt[0]!==et[0]||tt[1]!==et[1]||this.dirty)&&(this.gl.blendFunc(tt[0],tt[1]),this.current=tt,this.dirty=!1)},e}(q),Sr=function(et){function i(){et.apply(this,arguments)}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.getDefault=function(){return tt.Color.transparent},i.prototype.set=function(tt){var et=this.current;(tt.r!==et.r||tt.g!==et.g||tt.b!==et.b||tt.a!==et.a||this.dirty)&&(this.gl.blendColor(tt.r,tt.g,tt.b,tt.a),this.current=tt,this.dirty=!1)},i}(q),ii=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.blendEquation(tt),this.current=tt,this.dirty=!1)},e}(q),qi=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;tt?et.enable(et.CULL_FACE):et.disable(et.CULL_FACE),this.current=tt,this.dirty=!1}},e}(q),uo=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.cullFace(tt),this.current=tt,this.dirty=!1)},e}(q),po=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.frontFace(tt),this.current=tt,this.dirty=!1)},e}(q),vo=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.useProgram(tt),this.current=tt,this.dirty=!1)},e}(q),So=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(tt){(tt!==this.current||this.dirty)&&(this.gl.activeTexture(tt),this.current=tt,this.dirty=!1)},e}(q),ta=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){var tt=this.gl;return[0,0,tt.drawingBufferWidth,tt.drawingBufferHeight]},e.prototype.set=function(tt){var et=this.current;(tt[0]!==et[0]||tt[1]!==et[1]||tt[2]!==et[2]||tt[3]!==et[3]||this.dirty)&&(this.gl.viewport(tt[0],tt[1],tt[2],tt[3]),this.current=tt,this.dirty=!1)},e}(q),na=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;et.bindFramebuffer(et.FRAMEBUFFER,tt),this.current=tt,this.dirty=!1}},e}(q),ia=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;et.bindRenderbuffer(et.RENDERBUFFER,tt),this.current=tt,this.dirty=!1}},e}(q),sa=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;et.bindTexture(et.TEXTURE_2D,tt),this.current=tt,this.dirty=!1}},e}(q),la=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;et.bindBuffer(et.ARRAY_BUFFER,tt),this.current=tt,this.dirty=!1}},e}(q),pa=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(tt){var et=this.gl;et.bindBuffer(et.ELEMENT_ARRAY_BUFFER,tt),this.current=tt,this.dirty=!1},e}(q),fa=function(tt){function e(et){tt.call(this,et),this.vao=et.extVertexArrayObject}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(tt){this.vao&&(tt!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(tt),this.current=tt,this.dirty=!1)},e}(q),ga=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;et.pixelStorei(et.UNPACK_ALIGNMENT,tt),this.current=tt,this.dirty=!1}},e}(q),va=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;et.pixelStorei(et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,tt),this.current=tt,this.dirty=!1}},e}(q),_a=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){var et=this.gl;et.pixelStorei(et.UNPACK_FLIP_Y_WEBGL,tt),this.current=tt,this.dirty=!1}},e}(q),wa=function(tt){function e(et,nt){tt.call(this,et),this.context=et,this.parent=nt}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(q),Aa=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(tt){if(tt!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var et=this.gl;et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,tt,0),this.current=tt,this.dirty=!1}},e}(wa),os=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.set=function(tt){if(tt!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var et=this.gl;et.framebufferRenderbuffer(et.FRAMEBUFFER,et.DEPTH_ATTACHMENT,et.RENDERBUFFER,tt),this.current=tt,this.dirty=!1}},e}(wa),Et=function(tt,et,nt,rt){this.context=tt,this.width=et,this.height=nt;var it=this.framebuffer=tt.gl.createFramebuffer();this.colorAttachment=new Aa(tt,it),rt&&(this.depthAttachment=new os(tt,it))};Et.prototype.destroy=function(){var tt=this.context.gl,et=this.colorAttachment.get();if(et&&tt.deleteTexture(et),this.depthAttachment){var nt=this.depthAttachment.get();nt&&tt.deleteRenderbuffer(nt)}tt.deleteFramebuffer(this.framebuffer)};var It=function(tt,et,nt){this.func=tt,this.mask=et,this.range=nt};It.ReadOnly=!1,It.ReadWrite=!0,It.disabled=new It(519,It.ReadOnly,[0,1]);var Pt=function(tt,et,nt,rt,it,ot){this.test=tt,this.ref=et,this.mask=nt,this.fail=rt,this.depthFail=it,this.pass=ot};Pt.disabled=new Pt({func:519,mask:0},0,0,7680,7680,7680);var St=function(tt,et,nt){this.blendFunction=tt,this.blendColor=et,this.mask=nt};St.disabled=new St(St.Replace=[1,0],tt.Color.transparent,[!1,!1,!1,!1]),St.unblended=new St(St.Replace,tt.Color.transparent,[!0,!0,!0,!0]),St.alphaBlended=new St([1,771],tt.Color.transparent,[!0,!0,!0,!0]);var Ct=function(tt,et,nt){this.enable=tt,this.mode=et,this.frontFace=nt};Ct.disabled=new Ct(!1,1029,2305),Ct.backCCW=new Ct(!0,1029,2305);var zt=function(tt){this.gl=tt,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new In(this),this.clearDepth=new Mn(this),this.clearStencil=new zn(this),this.colorMask=new Bn(this),this.depthMask=new Fn(this),this.stencilMask=new Nn(this),this.stencilFunc=new Vn(this),this.stencilOp=new Wn(this),this.stencilTest=new $n(this),this.depthRange=new Yn(this),this.depthTest=new er(this),this.depthFunc=new rr(this),this.blend=new vr(this),this.blendFunc=new wr(this),this.blendColor=new Sr(this),this.blendEquation=new ii(this),this.cullFace=new qi(this),this.cullFaceSide=new uo(this),this.frontFace=new po(this),this.program=new vo(this),this.activeTexture=new So(this),this.viewport=new ta(this),this.bindFramebuffer=new na(this),this.bindRenderbuffer=new ia(this),this.bindTexture=new sa(this),this.bindVertexBuffer=new la(this),this.bindElementBuffer=new pa(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new fa(this),this.pixelStoreUnpack=new ga(this),this.pixelStoreUnpackPremultiplyAlpha=new va(this),this.pixelStoreUnpackFlipY=new _a(this),this.extTextureFilterAnisotropic=tt.getExtension("EXT_texture_filter_anisotropic")||tt.getExtension("MOZ_EXT_texture_filter_anisotropic")||tt.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=tt.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=tt.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(tt.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=tt.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=tt.getExtension("EXT_disjoint_timer_query")};zt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},zt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},zt.prototype.createIndexBuffer=function(tt,et){return new N(this,tt,et)},zt.prototype.createVertexBuffer=function(tt,et,nt){return new j(this,tt,et,nt)},zt.prototype.createRenderbuffer=function(tt,et,nt){var rt=this.gl,it=rt.createRenderbuffer();return this.bindRenderbuffer.set(it),rt.renderbufferStorage(rt.RENDERBUFFER,tt,et,nt),this.bindRenderbuffer.set(null),it},zt.prototype.createFramebuffer=function(tt,et,nt){return new Et(this,tt,et,nt)},zt.prototype.clear=function(tt){var et=tt.color,nt=tt.depth,rt=this.gl,it=0;et&&(it|=rt.COLOR_BUFFER_BIT,this.clearColor.set(et),this.colorMask.set([!0,!0,!0,!0])),void 0!==nt&&(it|=rt.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(nt),this.depthMask.set(!0)),rt.clear(it)},zt.prototype.setCullFace=function(tt){!1===tt.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(tt.mode),this.frontFace.set(tt.frontFace))},zt.prototype.setDepthMode=function(tt){tt.func!==this.gl.ALWAYS||tt.mask?(this.depthTest.set(!0),this.depthFunc.set(tt.func),this.depthMask.set(tt.mask),this.depthRange.set(tt.range)):this.depthTest.set(!1)},zt.prototype.setStencilMode=function(tt){tt.test.func!==this.gl.ALWAYS||tt.mask?(this.stencilTest.set(!0),this.stencilMask.set(tt.mask),this.stencilOp.set([tt.fail,tt.depthFail,tt.pass]),this.stencilFunc.set({func:tt.test.func,ref:tt.ref,mask:tt.test.mask})):this.stencilTest.set(!1)},zt.prototype.setColorMode=function(et){tt.deepEqual(et.blendFunction,St.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(et.blendFunction),this.blendColor.set(et.blendColor)),this.colorMask.set(et.mask)},zt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var as=function(et){function i(nt,rt,it){var ot=this;et.call(this),this.id=nt,this.dispatcher=it,this.on("data",(function(tt){"source"===tt.dataType&&"metadata"===tt.sourceDataType&&(ot._sourceLoaded=!0),ot._sourceLoaded&&!ot._paused&&"source"===tt.dataType&&"content"===tt.sourceDataType&&(ot.reload(),ot.transform&&ot.update(ot.transform))})),this.on("error",(function(){ot._sourceErrored=!0})),this._source=function(et,nt,rt,it){var ot=new Cn[nt.type](et,nt,rt,it);if(ot.id!==et)throw new Error("Expected Source id to be "+et+" instead of "+ot.id);return tt.bindAll(["load","abort","unload","serialize","prepare"],ot),ot}(nt,rt,it,this),this._tiles={},this._cache=new U(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new tt.SourceFeatureState}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.onAdd=function(tt){this.map=tt,this._maxTileCacheSize=tt?tt._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(tt)},i.prototype.onRemove=function(tt){this._source&&this._source.onRemove&&this._source.onRemove(tt)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var tt in this._tiles){var et=this._tiles[tt];if("loaded"!==et.state&&"errored"!==et.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var tt=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,tt&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(tt,et){return this._source.loadTile(tt,et)},i.prototype._unloadTile=function(tt){if(this._source.unloadTile)return this._source.unloadTile(tt,(function(){}))},i.prototype._abortTile=function(tt){if(this._source.abortTile)return this._source.abortTile(tt,(function(){}))},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(tt){for(var et in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var nt=this._tiles[et];nt.upload(tt),nt.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return tt.values(this._tiles).map((function(tt){return tt.tileID})).sort(Mt).map((function(tt){return tt.key}))},i.prototype.getRenderableIds=function(et){var nt=this,rt=[];for(var it in this._tiles)this._isIdRenderable(it,et)&&rt.push(this._tiles[it]);return et?rt.sort((function(et,rt){var it=et.tileID,ot=rt.tileID,at=new tt.Point(it.canonical.x,it.canonical.y)._rotate(nt.transform.angle),st=new tt.Point(ot.canonical.x,ot.canonical.y)._rotate(nt.transform.angle);return it.overscaledZ-ot.overscaledZ||st.y-at.y||st.x-at.x})).map((function(tt){return tt.tileID.key})):rt.map((function(tt){return tt.tileID})).sort(Mt).map((function(tt){return tt.key}))},i.prototype.hasRenderableParent=function(tt){var et=this.findLoadedParent(tt,0);return!!et&&this._isIdRenderable(et.tileID.key)},i.prototype._isIdRenderable=function(tt,et){return this._tiles[tt]&&this._tiles[tt].hasData()&&!this._coveredTiles[tt]&&(et||!this._tiles[tt].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var tt in this._cache.reset(),this._tiles)"errored"!==this._tiles[tt].state&&this._reloadTile(tt,"reloading")},i.prototype._reloadTile=function(tt,et){var nt=this._tiles[tt];nt&&("loading"!==nt.state&&(nt.state=et),this._loadTile(nt,this._tileLoaded.bind(this,nt,tt,et)))},i.prototype._tileLoaded=function(et,nt,rt,it){if(it)return et.state="errored",void(404!==it.status?this._source.fire(new tt.ErrorEvent(it,{tile:et})):this.update(this.transform));et.timeAdded=tt.browser.now(),"expired"===rt&&(et.refreshedUponExpiration=!0),this._setTileReloadTimer(nt,et),"raster-dem"===this.getSource().type&&et.dem&&this._backfillDEM(et),this._state.initializeTileState(et,this.map?this.map.painter:null),this._source.fire(new tt.Event("data",{dataType:"source",tile:et,coord:et.tileID}))},i.prototype._backfillDEM=function(tt){for(var et=this.getRenderableIds(),nt=0;nt<et.length;nt++){var rt=et[nt];if(tt.neighboringTiles&&tt.neighboringTiles[rt]){var it=this.getTileByID(rt);a(tt,it),a(it,tt)}}function a(tt,et){tt.needsHillshadePrepare=!0;var nt=et.tileID.canonical.x-tt.tileID.canonical.x,rt=et.tileID.canonical.y-tt.tileID.canonical.y,it=Math.pow(2,tt.tileID.canonical.z),ot=et.tileID.key;0===nt&&0===rt||Math.abs(rt)>1||(Math.abs(nt)>1&&(1===Math.abs(nt+it)?nt+=it:1===Math.abs(nt-it)&&(nt-=it)),et.dem&&tt.dem&&(tt.dem.backfillBorder(et.dem,nt,rt),tt.neighboringTiles&&tt.neighboringTiles[ot]&&(tt.neighboringTiles[ot].backfilled=!0)))}},i.prototype.getTile=function(tt){return this.getTileByID(tt.key)},i.prototype.getTileByID=function(tt){return this._tiles[tt]},i.prototype._retainLoadedChildren=function(tt,et,nt,rt){for(var it in this._tiles){var ot=this._tiles[it];if(!(rt[it]||!ot.hasData()||ot.tileID.overscaledZ<=et||ot.tileID.overscaledZ>nt)){for(var at=ot.tileID;ot&&ot.tileID.overscaledZ>et+1;){var st=ot.tileID.scaledTo(ot.tileID.overscaledZ-1);(ot=this._tiles[st.key])&&ot.hasData()&&(at=st)}for(var ct=at;ct.overscaledZ>et;)if(tt[(ct=ct.scaledTo(ct.overscaledZ-1)).key]){rt[at.key]=at;break}}}},i.prototype.findLoadedParent=function(tt,et){if(tt.key in this._loadedParentTiles){var nt=this._loadedParentTiles[tt.key];return nt&&nt.tileID.overscaledZ>=et?nt:null}for(var rt=tt.overscaledZ-1;rt>=et;rt--){var it=tt.scaledTo(rt),ot=this._getLoadedTile(it);if(ot)return ot}},i.prototype._getLoadedTile=function(tt){var et=this._tiles[tt.key];return et&&et.hasData()?et:this._cache.getByKey(tt.wrapped().key)},i.prototype.updateCacheSize=function(tt){var et=Math.ceil(tt.width/this._source.tileSize)+1,nt=Math.ceil(tt.height/this._source.tileSize)+1,rt=Math.floor(et*nt*5),it="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,rt):rt;this._cache.setMaxSize(it)},i.prototype.handleWrapJump=function(tt){var et=Math.round((tt-(void 0===this._prevLng?tt:this._prevLng))/360);if(this._prevLng=tt,et){var nt={};for(var rt in this._tiles){var it=this._tiles[rt];it.tileID=it.tileID.unwrapTo(it.tileID.wrap+et),nt[it.tileID.key]=it}for(var ot in this._tiles=nt,this._timers)clearTimeout(this._timers[ot]),delete this._timers[ot];for(var at in this._tiles)this._setTileReloadTimer(at,this._tiles[at])}},i.prototype.update=function(et){var nt=this;if(this.transform=et,this._sourceLoaded&&!this._paused){var rt;this.updateCacheSize(et),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?rt=et.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(et){return new tt.OverscaledTileID(et.canonical.z,et.wrap,et.canonical.z,et.canonical.x,et.canonical.y)})):(rt=et.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(rt=rt.filter((function(tt){return nt._source.hasTile(tt)})))):rt=[];var it=et.coveringZoomLevel(this._source),ot=Math.max(it-i.maxOverzooming,this._source.minzoom),at=Math.max(it+i.maxUnderzooming,this._source.minzoom),st=this._updateRetainedTiles(rt,it);if(Lt(this._source.type)){for(var ct={},pt={},ft=0,dt=Object.keys(st);ft<dt.length;ft+=1){var mt=dt[ft],yt=st[mt],vt=this._tiles[mt];if(vt&&!(vt.fadeEndTime&&vt.fadeEndTime<=tt.browser.now())){var Dt=this.findLoadedParent(yt,ot);Dt&&(this._addTile(Dt.tileID),ct[Dt.tileID.key]=Dt.tileID),pt[mt]=yt}}for(var Ot in this._retainLoadedChildren(pt,it,at,st),ct)st[Ot]||(this._coveredTiles[Ot]=!0,st[Ot]=ct[Ot])}for(var Rt in st)this._tiles[Rt].clearFadeHold();for(var Bt=0,Ne=tt.keysDifference(this._tiles,st);Bt<Ne.length;Bt+=1){var rn=Ne[Bt],vn=this._tiles[rn];vn.hasSymbolBuckets&&!vn.holdingForFade()?vn.setHoldDuration(this.map._fadeDuration):vn.hasSymbolBuckets&&!vn.symbolFadeFinished()||this._removeTile(rn)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var tt in this._tiles)this._tiles[tt].holdingForFade()&&this._removeTile(tt)},i.prototype._updateRetainedTiles=function(tt,et){for(var nt={},rt={},it=Math.max(et-i.maxOverzooming,this._source.minzoom),ot=Math.max(et+i.maxUnderzooming,this._source.minzoom),at={},st=0,ct=tt;st<ct.length;st+=1){var pt=ct[st],ft=this._addTile(pt);nt[pt.key]=pt,ft.hasData()||et<this._source.maxzoom&&(at[pt.key]=pt)}this._retainLoadedChildren(at,et,ot,nt);for(var dt=0,mt=tt;dt<mt.length;dt+=1){var yt=mt[dt],vt=this._tiles[yt.key];if(!vt.hasData()){if(et+1>this._source.maxzoom){var Dt=yt.children(this._source.maxzoom)[0],Ot=this.getTile(Dt);if(Ot&&Ot.hasData()){nt[Dt.key]=Dt;continue}}else{var Rt=yt.children(this._source.maxzoom);if(nt[Rt[0].key]&&nt[Rt[1].key]&&nt[Rt[2].key]&&nt[Rt[3].key])continue}for(var Bt=vt.wasRequested(),Ne=yt.overscaledZ-1;Ne>=it;--Ne){var rn=yt.scaledTo(Ne);if(rt[rn.key])break;if(rt[rn.key]=!0,!(vt=this.getTile(rn))&&Bt&&(vt=this._addTile(rn)),vt&&(nt[rn.key]=rn,Bt=vt.wasRequested(),vt.hasData()))break}}}return nt},i.prototype._updateLoadedParentTileCache=function(){for(var tt in this._loadedParentTiles={},this._tiles){for(var et=[],nt=void 0,rt=this._tiles[tt].tileID;rt.overscaledZ>0;){if(rt.key in this._loadedParentTiles){nt=this._loadedParentTiles[rt.key];break}et.push(rt.key);var it=rt.scaledTo(rt.overscaledZ-1);if(nt=this._getLoadedTile(it))break;rt=it}for(var ot=0,at=et;ot<at.length;ot+=1)this._loadedParentTiles[at[ot]]=nt}},i.prototype._addTile=function(et){var nt=this._tiles[et.key];if(nt)return nt;(nt=this._cache.getAndRemove(et))&&(this._setTileReloadTimer(et.key,nt),nt.tileID=et,this._state.initializeTileState(nt,this.map?this.map.painter:null),this._cacheTimers[et.key]&&(clearTimeout(this._cacheTimers[et.key]),delete this._cacheTimers[et.key],this._setTileReloadTimer(et.key,nt)));var rt=Boolean(nt);return rt||(nt=new tt.Tile(et,this._source.tileSize*et.overscaleFactor()),this._loadTile(nt,this._tileLoaded.bind(this,nt,et.key,nt.state))),nt?(nt.uses++,this._tiles[et.key]=nt,rt||this._source.fire(new tt.Event("dataloading",{tile:nt,coord:nt.tileID,dataType:"source"})),nt):null},i.prototype._setTileReloadTimer=function(tt,et){var nt=this;tt in this._timers&&(clearTimeout(this._timers[tt]),delete this._timers[tt]);var rt=et.getExpiryTimeout();rt&&(this._timers[tt]=setTimeout((function(){nt._reloadTile(tt,"expired"),delete nt._timers[tt]}),rt))},i.prototype._removeTile=function(tt){var et=this._tiles[tt];et&&(et.uses--,delete this._tiles[tt],this._timers[tt]&&(clearTimeout(this._timers[tt]),delete this._timers[tt]),et.uses>0||(et.hasData()&&"reloading"!==et.state?this._cache.add(et.tileID,et,et.getExpiryTimeout()):(et.aborted=!0,this._abortTile(et),this._unloadTile(et))))},i.prototype.clearTiles=function(){for(var tt in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(tt);this._cache.reset()},i.prototype.tilesIn=function(et,nt,rt){var it=this,ot=[],at=this.transform;if(!at)return ot;for(var st=rt?at.getCameraQueryGeometry(et):et,ct=et.map((function(tt){return at.pointCoordinate(tt)})),pt=st.map((function(tt){return at.pointCoordinate(tt)})),ft=this.getIds(),dt=1/0,mt=1/0,yt=-1/0,vt=-1/0,Dt=0,Ot=pt;Dt<Ot.length;Dt+=1){var Rt=Ot[Dt];dt=Math.min(dt,Rt.x),mt=Math.min(mt,Rt.y),yt=Math.max(yt,Rt.x),vt=Math.max(vt,Rt.y)}for(var v=function(et){var rt=it._tiles[ft[et]];if(!rt.holdingForFade()){var st=rt.tileID,Dt=Math.pow(2,at.zoom-rt.tileID.overscaledZ),Ot=nt*rt.queryPadding*tt.EXTENT/rt.tileSize/Dt,Rt=[st.getTilePoint(new tt.MercatorCoordinate(dt,mt)),st.getTilePoint(new tt.MercatorCoordinate(yt,vt))];if(Rt[0].x-Ot<tt.EXTENT&&Rt[0].y-Ot<tt.EXTENT&&Rt[1].x+Ot>=0&&Rt[1].y+Ot>=0){var Bt=ct.map((function(tt){return st.getTilePoint(tt)})),Ne=pt.map((function(tt){return st.getTilePoint(tt)}));ot.push({tile:rt,tileID:st,queryGeometry:Bt,cameraQueryGeometry:Ne,scale:Dt})}}},Bt=0;Bt<ft.length;Bt++)v(Bt);return ot},i.prototype.getVisibleCoordinates=function(tt){for(var et=this,nt=this.getRenderableIds(tt).map((function(tt){return et._tiles[tt].tileID})),rt=0,it=nt;rt<it.length;rt+=1){var ot=it[rt];ot.posMatrix=this.transform.calculatePosMatrix(ot.toUnwrapped())}return nt},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Lt(this._source.type))for(var et in this._tiles){var nt=this._tiles[et];if(void 0!==nt.fadeEndTime&&nt.fadeEndTime>=tt.browser.now())return!0}return!1},i.prototype.setFeatureState=function(tt,et,nt){this._state.updateState(tt=tt||"_geojsonTileLayer",et,nt)},i.prototype.removeFeatureState=function(tt,et,nt){this._state.removeFeatureState(tt=tt||"_geojsonTileLayer",et,nt)},i.prototype.getFeatureState=function(tt,et){return this._state.getState(tt=tt||"_geojsonTileLayer",et)},i.prototype.setDependencies=function(tt,et,nt){var rt=this._tiles[tt];rt&&rt.setDependencies(et,nt)},i.prototype.reloadTilesForDependencies=function(tt,et){for(var nt in this._tiles)this._tiles[nt].hasDependency(tt,et)&&this._reloadTile(nt,"reloading");this._cache.filter((function(nt){return!nt.hasDependency(tt,et)}))},i}(tt.Evented);function Mt(tt,et){var nt=Math.abs(2*tt.wrap)-+(tt.wrap<0),rt=Math.abs(2*et.wrap)-+(et.wrap<0);return tt.overscaledZ-et.overscaledZ||rt-nt||et.canonical.y-tt.canonical.y||et.canonical.x-tt.canonical.x}function Lt(tt){return"raster"===tt||"image"===tt||"video"===tt}function At(){return new tt.window.Worker(bp.workerUrl)}as.maxOverzooming=10,as.maxUnderzooming=3;var ss="mapboxgl_preloaded_worker_pool",kt=function(){this.active={}};kt.prototype.acquire=function(tt){if(!this.workers)for(this.workers=[];this.workers.length<kt.workerCount;)this.workers.push(new At);return this.active[tt]=!0,this.workers.slice()},kt.prototype.release=function(tt){delete this.active[tt],0===this.numActive()&&(this.workers.forEach((function(tt){tt.terminate()})),this.workers=null)},kt.prototype.isPreloaded=function(){return!!this.active[ss]},kt.prototype.numActive=function(){return Object.keys(this.active).length};var us,ls=Math.floor(tt.browser.hardwareConcurrency/2);function Ft(){return us||(us=new kt),us}function Ut(et,nt){var rt={};for(var it in et)"ref"!==it&&(rt[it]=et[it]);return tt.refProperties.forEach((function(tt){tt in nt&&(rt[tt]=nt[tt])})),rt}function Nt(tt){tt=tt.slice();for(var et=Object.create(null),nt=0;nt<tt.length;nt++)et[tt[nt].id]=tt[nt];for(var rt=0;rt<tt.length;rt++)"ref"in tt[rt]&&(tt[rt]=Ut(tt[rt],et[tt[rt].ref]));return tt}kt.workerCount=Math.max(Math.min(ls,6),1);var fs={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jt(tt,et,nt){nt.push({command:fs.addSource,args:[tt,et[tt]]})}function qt(tt,et,nt){et.push({command:fs.removeSource,args:[tt]}),nt[tt]=!0}function Vt(tt,et,nt,rt){qt(tt,nt,rt),jt(tt,et,nt)}function Gt(et,nt,rt){var it;for(it in et[rt])if(et[rt].hasOwnProperty(it)&&"data"!==it&&!tt.deepEqual(et[rt][it],nt[rt][it]))return!1;for(it in nt[rt])if(nt[rt].hasOwnProperty(it)&&"data"!==it&&!tt.deepEqual(et[rt][it],nt[rt][it]))return!1;return!0}function Wt(et,nt,rt,it,ot,at){var st;for(st in nt=nt||{},et=et||{})et.hasOwnProperty(st)&&(tt.deepEqual(et[st],nt[st])||rt.push({command:at,args:[it,st,nt[st],ot]}));for(st in nt)nt.hasOwnProperty(st)&&!et.hasOwnProperty(st)&&(tt.deepEqual(et[st],nt[st])||rt.push({command:at,args:[it,st,nt[st],ot]}))}function Xt(tt){return tt.id}function Ht(tt,et){return tt[et.id]=et,tt}var Kt=function(tt,et){this.reset(tt,et)};Kt.prototype.reset=function(tt,et){this.points=tt||[],this._distances=[0];for(var nt=1;nt<this.points.length;nt++)this._distances[nt]=this._distances[nt-1]+this.points[nt].dist(this.points[nt-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(et||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(et){if(1===this.points.length)return this.points[0];et=tt.clamp(et,0,1);for(var nt=1,rt=this._distances[nt],it=et*this.paddedLength+this.padding;rt<it&&nt<this._distances.length;)rt=this._distances[++nt];var ot=nt-1,at=this._distances[ot],st=rt-at,ct=st>0?(it-at)/st:0;return this.points[ot].mult(1-ct).add(this.points[nt].mult(ct))};var Yt=function(tt,et,nt){var rt=this.boxCells=[],it=this.circleCells=[];this.xCellCount=Math.ceil(tt/nt),this.yCellCount=Math.ceil(et/nt);for(var ot=0;ot<this.xCellCount*this.yCellCount;ot++)rt.push([]),it.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=tt,this.height=et,this.xScale=this.xCellCount/tt,this.yScale=this.yCellCount/et,this.boxUid=0,this.circleUid=0};function Jt(et,nt,rt,it,ot){var at=tt.create();return nt?(tt.scale(at,at,[1/ot,1/ot,1]),rt||tt.rotateZ(at,at,it.angle)):tt.multiply(at,it.labelPlaneMatrix,et),at}function Qt(et,nt,rt,it,ot){if(nt){var at=tt.clone(et);return tt.scale(at,at,[ot,ot,1]),rt||tt.rotateZ(at,at,-it.angle),at}return it.glCoordMatrix}function $t(et,nt){var rt=[et.x,et.y,0,1];ue(rt,rt,nt);var it=rt[3];return{point:new tt.Point(rt[0]/it,rt[1]/it),signedDistanceFromCamera:it}}function te(tt,et){return.5+tt/et*.5}function ee(tt,et){var nt=tt[0]/tt[3],rt=tt[1]/tt[3];return nt>=-et[0]&&nt<=et[0]&&rt>=-et[1]&&rt<=et[1]}function ie(et,nt,rt,it,ot,at,st,ct){var pt=it?et.textSizeData:et.iconSizeData,ft=tt.evaluateSizeForZoom(pt,rt.transform.zoom),dt=[256/rt.width*2+1,256/rt.height*2+1],mt=it?et.text.dynamicLayoutVertexArray:et.icon.dynamicLayoutVertexArray;mt.clear();for(var yt=et.lineVertexArray,vt=it?et.text.placedSymbolArray:et.icon.placedSymbolArray,Dt=rt.transform.width/rt.transform.height,Ot=!1,Rt=0;Rt<vt.length;Rt++){var Bt=vt.get(Rt);if(Bt.hidden||Bt.writingMode===tt.WritingMode.vertical&&!Ot)ce(Bt.numGlyphs,mt);else{Ot=!1;var Ne=[Bt.anchorX,Bt.anchorY,0,1];if(tt.transformMat4(Ne,Ne,nt),ee(Ne,dt)){var rn=te(rt.transform.cameraToCenterDistance,Ne[3]),vn=tt.evaluateSizeForFeature(pt,ft,Bt),bn=st?vn/rn:vn*rn,Tn=new tt.Point(Bt.anchorX,Bt.anchorY),Cn=$t(Tn,ot).point,Ln={},In=ae(Bt,bn,!1,ct,nt,ot,at,et.glyphOffsetArray,yt,mt,Cn,Tn,Ln,Dt);Ot=In.useVertical,(In.notEnoughRoom||Ot||In.needsFlipping&&ae(Bt,bn,!0,ct,nt,ot,at,et.glyphOffsetArray,yt,mt,Cn,Tn,Ln,Dt).notEnoughRoom)&&ce(Bt.numGlyphs,mt)}else ce(Bt.numGlyphs,mt)}}it?et.text.dynamicLayoutVertexBuffer.updateData(mt):et.icon.dynamicLayoutVertexBuffer.updateData(mt)}function oe(tt,et,nt,rt,it,ot,at,st,ct,pt,ft){var dt=st.glyphStartIndex+st.numGlyphs,mt=st.lineStartIndex,yt=st.lineStartIndex+st.lineLength,vt=et.getoffsetX(st.glyphStartIndex),Dt=et.getoffsetX(dt-1),Ot=se(tt*vt,nt,rt,it,ot,at,st.segment,mt,yt,ct,pt,ft);if(!Ot)return null;var Rt=se(tt*Dt,nt,rt,it,ot,at,st.segment,mt,yt,ct,pt,ft);return Rt?{first:Ot,last:Rt}:null}function re(et,nt,rt,it){return et===tt.WritingMode.horizontal&&Math.abs(rt.y-nt.y)>Math.abs(rt.x-nt.x)*it?{useVertical:!0}:(et===tt.WritingMode.vertical?nt.y<rt.y:nt.x>rt.x)?{needsFlipping:!0}:null}function ae(et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt){var Dt,Ot=nt/24,Rt=et.lineOffsetX*Ot,Bt=et.lineOffsetY*Ot;if(et.numGlyphs>1){var Ne=et.glyphStartIndex+et.numGlyphs,rn=et.lineStartIndex,vn=et.lineStartIndex+et.lineLength,bn=oe(Ot,ct,Rt,Bt,rt,dt,mt,et,pt,at,yt);if(!bn)return{notEnoughRoom:!0};var Tn=$t(bn.first.point,st).point,Cn=$t(bn.last.point,st).point;if(it&&!rt){var Ln=re(et.writingMode,Tn,Cn,vt);if(Ln)return Ln}Dt=[bn.first];for(var In=et.glyphStartIndex+1;In<Ne-1;In++)Dt.push(se(Ot*ct.getoffsetX(In),Rt,Bt,rt,dt,mt,et.segment,rn,vn,pt,at,yt));Dt.push(bn.last)}else{if(it&&!rt){var Mn=$t(mt,ot).point,zn=et.lineStartIndex+et.segment+1,Bn=new tt.Point(pt.getx(zn),pt.gety(zn)),Fn=$t(Bn,ot),Nn=Fn.signedDistanceFromCamera>0?Fn.point:ne(mt,Bn,Mn,1,ot),Vn=re(et.writingMode,Mn,Nn,vt);if(Vn)return Vn}var Wn=se(Ot*ct.getoffsetX(et.glyphStartIndex),Rt,Bt,rt,dt,mt,et.segment,et.lineStartIndex,et.lineStartIndex+et.lineLength,pt,at,yt);if(!Wn)return{notEnoughRoom:!0};Dt=[Wn]}for(var $n=0,Yn=Dt;$n<Yn.length;$n+=1){var er=Yn[$n];tt.addDynamicAttributes(ft,er.point,er.angle)}return{}}function ne(tt,et,nt,rt,it){var ot=$t(tt.add(tt.sub(et)._unit()),it).point,at=nt.sub(ot);return nt.add(at._mult(rt/at.mag()))}function se(et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt){var yt=it?et-nt:et+nt,vt=yt>0?1:-1,Dt=0;it&&(vt*=-1,Dt=Math.PI),vt<0&&(Dt+=Math.PI);for(var Ot=vt>0?ct+st:ct+st+1,Rt=ot,Bt=ot,Ne=0,rn=0,vn=Math.abs(yt),bn=[];Ne+rn<=vn;){if((Ot+=vt)<ct||Ot>=pt)return null;if(Bt=Rt,bn.push(Rt),void 0===(Rt=mt[Ot])){var Tn=new tt.Point(ft.getx(Ot),ft.gety(Ot)),Cn=$t(Tn,dt);if(Cn.signedDistanceFromCamera>0)Rt=mt[Ot]=Cn.point;else{var Ln=Ot-vt;Rt=ne(0===Ne?at:new tt.Point(ft.getx(Ln),ft.gety(Ln)),Tn,Bt,vn-Ne+1,dt)}}Ne+=rn,rn=Bt.dist(Rt)}var In=(vn-Ne)/rn,Mn=Rt.sub(Bt),zn=Mn.mult(In)._add(Bt);zn._add(Mn._unit()._perp()._mult(rt*vt));var Bn=Dt+Math.atan2(Rt.y-Bt.y,Rt.x-Bt.x);return bn.push(zn),{point:zn,angle:Bn,path:bn}}Yt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Yt.prototype.insert=function(tt,et,nt,rt,it){this._forEachCell(et,nt,rt,it,this._insertBoxCell,this.boxUid++),this.boxKeys.push(tt),this.bboxes.push(et),this.bboxes.push(nt),this.bboxes.push(rt),this.bboxes.push(it)},Yt.prototype.insertCircle=function(tt,et,nt,rt){this._forEachCell(et-rt,nt-rt,et+rt,nt+rt,this._insertCircleCell,this.circleUid++),this.circleKeys.push(tt),this.circles.push(et),this.circles.push(nt),this.circles.push(rt)},Yt.prototype._insertBoxCell=function(tt,et,nt,rt,it,ot){this.boxCells[it].push(ot)},Yt.prototype._insertCircleCell=function(tt,et,nt,rt,it,ot){this.circleCells[it].push(ot)},Yt.prototype._query=function(tt,et,nt,rt,it,ot){if(nt<0||tt>this.width||rt<0||et>this.height)return!it&&[];var at=[];if(tt<=0&&et<=0&&this.width<=nt&&this.height<=rt){if(it)return!0;for(var st=0;st<this.boxKeys.length;st++)at.push({key:this.boxKeys[st],x1:this.bboxes[4*st],y1:this.bboxes[4*st+1],x2:this.bboxes[4*st+2],y2:this.bboxes[4*st+3]});for(var ct=0;ct<this.circleKeys.length;ct++){var pt=this.circles[3*ct],ft=this.circles[3*ct+1],dt=this.circles[3*ct+2];at.push({key:this.circleKeys[ct],x1:pt-dt,y1:ft-dt,x2:pt+dt,y2:ft+dt})}return ot?at.filter(ot):at}return this._forEachCell(tt,et,nt,rt,this._queryCell,at,{hitTest:it,seenUids:{box:{},circle:{}}},ot),it?at.length>0:at},Yt.prototype._queryCircle=function(tt,et,nt,rt,it){var ot=tt-nt,at=tt+nt,st=et-nt,ct=et+nt;if(at<0||ot>this.width||ct<0||st>this.height)return!rt&&[];var pt=[];return this._forEachCell(ot,st,at,ct,this._queryCellCircle,pt,{hitTest:rt,circle:{x:tt,y:et,radius:nt},seenUids:{box:{},circle:{}}},it),rt?pt.length>0:pt},Yt.prototype.query=function(tt,et,nt,rt,it){return this._query(tt,et,nt,rt,!1,it)},Yt.prototype.hitTest=function(tt,et,nt,rt,it){return this._query(tt,et,nt,rt,!0,it)},Yt.prototype.hitTestCircle=function(tt,et,nt,rt){return this._queryCircle(tt,et,nt,!0,rt)},Yt.prototype._queryCell=function(tt,et,nt,rt,it,ot,at,st){var ct=at.seenUids,pt=this.boxCells[it];if(null!==pt)for(var ft=this.bboxes,dt=0,mt=pt;dt<mt.length;dt+=1){var yt=mt[dt];if(!ct.box[yt]){ct.box[yt]=!0;var vt=4*yt;if(tt<=ft[vt+2]&&et<=ft[vt+3]&&nt>=ft[vt+0]&&rt>=ft[vt+1]&&(!st||st(this.boxKeys[yt]))){if(at.hitTest)return ot.push(!0),!0;ot.push({key:this.boxKeys[yt],x1:ft[vt],y1:ft[vt+1],x2:ft[vt+2],y2:ft[vt+3]})}}}var Dt=this.circleCells[it];if(null!==Dt)for(var Ot=this.circles,Rt=0,Bt=Dt;Rt<Bt.length;Rt+=1){var Ne=Bt[Rt];if(!ct.circle[Ne]){ct.circle[Ne]=!0;var rn=3*Ne;if(this._circleAndRectCollide(Ot[rn],Ot[rn+1],Ot[rn+2],tt,et,nt,rt)&&(!st||st(this.circleKeys[Ne]))){if(at.hitTest)return ot.push(!0),!0;var vn=Ot[rn],bn=Ot[rn+1],Tn=Ot[rn+2];ot.push({key:this.circleKeys[Ne],x1:vn-Tn,y1:bn-Tn,x2:vn+Tn,y2:bn+Tn})}}}},Yt.prototype._queryCellCircle=function(tt,et,nt,rt,it,ot,at,st){var ct=at.circle,pt=at.seenUids,ft=this.boxCells[it];if(null!==ft)for(var dt=this.bboxes,mt=0,yt=ft;mt<yt.length;mt+=1){var vt=yt[mt];if(!pt.box[vt]){pt.box[vt]=!0;var Dt=4*vt;if(this._circleAndRectCollide(ct.x,ct.y,ct.radius,dt[Dt+0],dt[Dt+1],dt[Dt+2],dt[Dt+3])&&(!st||st(this.boxKeys[vt])))return ot.push(!0),!0}}var Ot=this.circleCells[it];if(null!==Ot)for(var Rt=this.circles,Bt=0,Ne=Ot;Bt<Ne.length;Bt+=1){var rn=Ne[Bt];if(!pt.circle[rn]){pt.circle[rn]=!0;var vn=3*rn;if(this._circlesCollide(Rt[vn],Rt[vn+1],Rt[vn+2],ct.x,ct.y,ct.radius)&&(!st||st(this.circleKeys[rn])))return ot.push(!0),!0}}},Yt.prototype._forEachCell=function(tt,et,nt,rt,it,ot,at,st){for(var ct=this._convertToXCellCoord(tt),pt=this._convertToYCellCoord(et),ft=this._convertToXCellCoord(nt),dt=this._convertToYCellCoord(rt),mt=ct;mt<=ft;mt++)for(var yt=pt;yt<=dt;yt++)if(it.call(this,tt,et,nt,rt,this.xCellCount*yt+mt,ot,at,st))return},Yt.prototype._convertToXCellCoord=function(tt){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(tt*this.xScale)))},Yt.prototype._convertToYCellCoord=function(tt){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(tt*this.yScale)))},Yt.prototype._circlesCollide=function(tt,et,nt,rt,it,ot){var at=rt-tt,st=it-et,ct=nt+ot;return ct*ct>at*at+st*st},Yt.prototype._circleAndRectCollide=function(tt,et,nt,rt,it,ot,at){var st=(ot-rt)/2,ct=Math.abs(tt-(rt+st));if(ct>st+nt)return!1;var pt=(at-it)/2,ft=Math.abs(et-(it+pt));if(ft>pt+nt)return!1;if(ct<=st||ft<=pt)return!0;var dt=ct-st,mt=ft-pt;return dt*dt+mt*mt<=nt*nt};var gs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ce(tt,et){for(var nt=0;nt<tt;nt++){var rt=et.length;et.resize(rt+4),et.float32.set(gs,3*rt)}}function ue(tt,et,nt){var rt=et[0],it=et[1];return tt[0]=nt[0]*rt+nt[4]*it+nt[12],tt[1]=nt[1]*rt+nt[5]*it+nt[13],tt[3]=nt[3]*rt+nt[7]*it+nt[15],tt}var he=function(tt,et,nt){void 0===et&&(et=new Yt(tt.width+200,tt.height+200,25)),void 0===nt&&(nt=new Yt(tt.width+200,tt.height+200,25)),this.transform=tt,this.grid=et,this.ignoredGrid=nt,this.pitchfactor=Math.cos(tt._pitch)*tt.cameraToCenterDistance,this.screenRightBoundary=tt.width+100,this.screenBottomBoundary=tt.height+100,this.gridRightBoundary=tt.width+200,this.gridBottomBoundary=tt.height+200};function pe(et,nt,rt){return nt*(tt.EXTENT/(et.tileSize*Math.pow(2,rt-et.tileID.overscaledZ)))}he.prototype.placeCollisionBox=function(tt,et,nt,rt,it){var ot=this.projectAndGetPerspectiveRatio(rt,tt.anchorPointX,tt.anchorPointY),at=nt*ot.perspectiveRatio,st=tt.x1*at+ot.point.x,ct=tt.y1*at+ot.point.y,pt=tt.x2*at+ot.point.x,ft=tt.y2*at+ot.point.y;return!this.isInsideGrid(st,ct,pt,ft)||!et&&this.grid.hitTest(st,ct,pt,ft,it)?{box:[],offscreen:!1}:{box:[st,ct,pt,ft],offscreen:this.isOffscreen(st,ct,pt,ft)}},he.prototype.placeCollisionCircles=function(et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt){var vt=[],Dt=new tt.Point(nt.anchorX,nt.anchorY),Ot=$t(Dt,at),Rt=te(this.transform.cameraToCenterDistance,Ot.signedDistanceFromCamera),Bt=(ft?ot/Rt:ot*Rt)/tt.ONE_EM,Ne=$t(Dt,st).point,rn=oe(Bt,it,nt.lineOffsetX*Bt,nt.lineOffsetY*Bt,!1,Ne,Dt,nt,rt,st,{}),vn=!1,bn=!1,Tn=!0;if(rn){for(var Cn=.5*mt*Rt+yt,Ln=new tt.Point(-100,-100),In=new tt.Point(this.screenRightBoundary,this.screenBottomBoundary),Mn=new Kt,zn=rn.first,Bn=rn.last,Fn=[],Nn=zn.path.length-1;Nn>=1;Nn--)Fn.push(zn.path[Nn]);for(var Vn=1;Vn<Bn.path.length;Vn++)Fn.push(Bn.path[Vn]);var Wn=2.5*Cn;if(ct){var $n=Fn.map((function(tt){return $t(tt,ct)}));Fn=$n.some((function(tt){return tt.signedDistanceFromCamera<=0}))?[]:$n.map((function(tt){return tt.point}))}var Yn=[];if(Fn.length>0){for(var er=Fn[0].clone(),rr=Fn[0].clone(),vr=1;vr<Fn.length;vr++)er.x=Math.min(er.x,Fn[vr].x),er.y=Math.min(er.y,Fn[vr].y),rr.x=Math.max(rr.x,Fn[vr].x),rr.y=Math.max(rr.y,Fn[vr].y);Yn=er.x>=Ln.x&&rr.x<=In.x&&er.y>=Ln.y&&rr.y<=In.y?[Fn]:rr.x<Ln.x||er.x>In.x||rr.y<Ln.y||er.y>In.y?[]:tt.clipLine([Fn],Ln.x,Ln.y,In.x,In.y)}for(var wr=0,Sr=Yn;wr<Sr.length;wr+=1){var ii;Mn.reset(Sr[wr],.25*Cn),ii=Mn.length<=.5*Cn?1:Math.ceil(Mn.paddedLength/Wn)+1;for(var qi=0;qi<ii;qi++){var uo=qi/Math.max(ii-1,1),po=Mn.lerp(uo),vo=po.x+100,So=po.y+100;vt.push(vo,So,Cn,0);var ta=vo-Cn,na=So-Cn,ia=vo+Cn,sa=So+Cn;if(Tn=Tn&&this.isOffscreen(ta,na,ia,sa),bn=bn||this.isInsideGrid(ta,na,ia,sa),!et&&this.grid.hitTestCircle(vo,So,Cn,dt)&&(vn=!0,!pt))return{circles:[],offscreen:!1,collisionDetected:vn}}}}return{circles:!pt&&vn||!bn?[]:vt,offscreen:Tn,collisionDetected:vn}},he.prototype.queryRenderedSymbols=function(et){if(0===et.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var nt=[],rt=1/0,it=1/0,ot=-1/0,at=-1/0,st=0,ct=et;st<ct.length;st+=1){var pt=ct[st],ft=new tt.Point(pt.x+100,pt.y+100);rt=Math.min(rt,ft.x),it=Math.min(it,ft.y),ot=Math.max(ot,ft.x),at=Math.max(at,ft.y),nt.push(ft)}for(var dt={},mt={},yt=0,vt=this.grid.query(rt,it,ot,at).concat(this.ignoredGrid.query(rt,it,ot,at));yt<vt.length;yt+=1){var Dt=vt[yt],Ot=Dt.key;if(void 0===dt[Ot.bucketInstanceId]&&(dt[Ot.bucketInstanceId]={}),!dt[Ot.bucketInstanceId][Ot.featureIndex]){var Rt=[new tt.Point(Dt.x1,Dt.y1),new tt.Point(Dt.x2,Dt.y1),new tt.Point(Dt.x2,Dt.y2),new tt.Point(Dt.x1,Dt.y2)];tt.polygonIntersectsPolygon(nt,Rt)&&(dt[Ot.bucketInstanceId][Ot.featureIndex]=!0,void 0===mt[Ot.bucketInstanceId]&&(mt[Ot.bucketInstanceId]=[]),mt[Ot.bucketInstanceId].push(Ot.featureIndex))}}return mt},he.prototype.insertCollisionBox=function(tt,et,nt,rt,it){(et?this.ignoredGrid:this.grid).insert({bucketInstanceId:nt,featureIndex:rt,collisionGroupID:it},tt[0],tt[1],tt[2],tt[3])},he.prototype.insertCollisionCircles=function(tt,et,nt,rt,it){for(var ot=et?this.ignoredGrid:this.grid,at={bucketInstanceId:nt,featureIndex:rt,collisionGroupID:it},st=0;st<tt.length;st+=4)ot.insertCircle(at,tt[st],tt[st+1],tt[st+2])},he.prototype.projectAndGetPerspectiveRatio=function(et,nt,rt){var it=[nt,rt,0,1];return ue(it,it,et),{point:new tt.Point((it[0]/it[3]+1)/2*this.transform.width+100,(-it[1]/it[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/it[3]*.5}},he.prototype.isOffscreen=function(tt,et,nt,rt){return nt<100||tt>=this.screenRightBoundary||rt<100||et>this.screenBottomBoundary},he.prototype.isInsideGrid=function(tt,et,nt,rt){return nt>=0&&tt<this.gridRightBoundary&&rt>=0&&et<this.gridBottomBoundary},he.prototype.getViewportMatrix=function(){var et=tt.identity([]);return tt.translate(et,et,[-100,-100,0]),et};var de=function(tt,et,nt,rt){this.opacity=tt?Math.max(0,Math.min(1,tt.opacity+(tt.placed?et:-et))):rt&&nt?1:0,this.placed=nt};de.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var _e=function(tt,et,nt,rt,it){this.text=new de(tt?tt.text:null,et,nt,it),this.icon=new de(tt?tt.icon:null,et,rt,it)};_e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var fe=function(tt,et,nt){this.text=tt,this.icon=et,this.skipFade=nt},me=function(){this.invProjMatrix=tt.create(),this.viewportMatrix=tt.create(),this.circles=[]},ge=function(tt,et,nt,rt,it){this.bucketInstanceId=tt,this.featureIndex=et,this.sourceLayerIndex=nt,this.bucketIndex=rt,this.tileID=it},ve=function(tt){this.crossSourceCollisions=tt,this.maxGroupID=0,this.collisionGroups={}};function ye(et,nt,rt,it,ot){var at=tt.getAnchorAlignment(et),st=-(at.horizontalAlign-.5)*nt,ct=-(at.verticalAlign-.5)*rt,pt=tt.evaluateVariableOffset(et,it);return new tt.Point(st+pt[0]*ot,ct+pt[1]*ot)}function xe(et,nt,rt,it,ot,at){var st=et.x1,ct=et.x2,pt=et.y1,ft=et.y2,dt=et.anchorPointX,mt=et.anchorPointY,yt=new tt.Point(nt,rt);return it&&yt._rotate(ot?at:-at),{x1:st+yt.x,y1:pt+yt.y,x2:ct+yt.x,y2:ft+yt.y,anchorPointX:dt,anchorPointY:mt}}ve.prototype.get=function(tt){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[tt]){var et=++this.maxGroupID;this.collisionGroups[tt]={ID:et,predicate:function(tt){return tt.collisionGroupID===et}}}return this.collisionGroups[tt]};var be=function(tt,et,nt,rt){this.transform=tt.clone(),this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=et,this.retainedQueryData={},this.collisionGroups=new ve(nt),this.collisionCircleArrays={},this.prevPlacement=rt,rt&&(rt.prevPlacement=void 0),this.placedOrientations={}};function we(tt,et,nt,rt,it){tt.emplaceBack(et?1:0,nt?1:0,rt||0,it||0),tt.emplaceBack(et?1:0,nt?1:0,rt||0,it||0),tt.emplaceBack(et?1:0,nt?1:0,rt||0,it||0),tt.emplaceBack(et?1:0,nt?1:0,rt||0,it||0)}be.prototype.getBucketParts=function(et,nt,rt,it){var ot=rt.getBucket(nt),at=rt.latestFeatureIndex;if(ot&&at&&nt.id===ot.layerIds[0]){var st=rt.collisionBoxArray,ct=ot.layers[0].layout,pt=Math.pow(2,this.transform.zoom-rt.tileID.overscaledZ),ft=rt.tileSize/tt.EXTENT,dt=this.transform.calculatePosMatrix(rt.tileID.toUnwrapped()),mt="map"===ct.get("text-pitch-alignment"),yt="map"===ct.get("text-rotation-alignment"),vt=pe(rt,1,this.transform.zoom),Dt=Jt(dt,mt,yt,this.transform,vt),Ot=null;if(mt){var Rt=Qt(dt,mt,yt,this.transform,vt);Ot=tt.multiply([],this.transform.labelPlaneMatrix,Rt)}this.retainedQueryData[ot.bucketInstanceId]=new ge(ot.bucketInstanceId,at,ot.sourceLayerIndex,ot.index,rt.tileID);var Bt={bucket:ot,layout:ct,posMatrix:dt,textLabelPlaneMatrix:Dt,labelToScreenMatrix:Ot,scale:pt,textPixelRatio:ft,holdingForFade:rt.holdingForFade(),collisionBoxArray:st,partiallyEvaluatedTextSize:tt.evaluateSizeForZoom(ot.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ot.sourceID)};if(it)for(var Ne=0,rn=ot.sortKeyRanges;Ne<rn.length;Ne+=1){var vn=rn[Ne];et.push({sortKey:vn.sortKey,symbolInstanceStart:vn.symbolInstanceStart,symbolInstanceEnd:vn.symbolInstanceEnd,parameters:Bt})}else et.push({symbolInstanceStart:0,symbolInstanceEnd:ot.symbolInstances.length,parameters:Bt})}},be.prototype.attemptAnchorPlacement=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt){var Dt,Ot=[dt.textOffset0,dt.textOffset1],Rt=ye(tt,nt,rt,Ot,it),Bt=this.collisionIndex.placeCollisionBox(xe(et,Rt.x,Rt.y,ot,at,this.transform.angle),ft,st,ct,pt.predicate);if(!vt||0!==this.collisionIndex.placeCollisionBox(xe(vt,Rt.x,Rt.y,ot,at,this.transform.angle),ft,st,ct,pt.predicate).box.length)return Bt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID].text&&(Dt=this.prevPlacement.variableOffsets[dt.crossTileID].anchor),this.variableOffsets[dt.crossTileID]={textOffset:Ot,width:nt,height:rt,anchor:tt,textBoxScale:it,prevAnchor:Dt},this.markUsedJustification(mt,tt,dt,yt),mt.allowVerticalPlacement&&(this.markUsedOrientation(mt,yt,dt),this.placedOrientations[dt.crossTileID]=yt),{shift:Rt,placedGlyphBoxes:Bt}):void 0},be.prototype.placeLayerBucketPart=function(et,nt,rt){var it=this,ot=et.parameters,at=ot.bucket,st=ot.layout,ct=ot.posMatrix,pt=ot.textLabelPlaneMatrix,ft=ot.labelToScreenMatrix,dt=ot.textPixelRatio,mt=ot.holdingForFade,yt=ot.collisionBoxArray,vt=ot.partiallyEvaluatedTextSize,Dt=ot.collisionGroup,Ot=st.get("text-optional"),Rt=st.get("icon-optional"),Bt=st.get("text-allow-overlap"),Ne=st.get("icon-allow-overlap"),rn="map"===st.get("text-rotation-alignment"),vn="map"===st.get("text-pitch-alignment"),bn="none"!==st.get("icon-text-fit"),Tn="viewport-y"===st.get("symbol-z-order"),Cn=Bt&&(Ne||!at.hasIconData()||Rt),Ln=Ne&&(Bt||!at.hasTextData()||Ot);!at.collisionArrays&&yt&&at.deserializeCollisionBoxes(yt);var P=function(et,ot){if(!nt[et.crossTileID])if(mt)it.placements[et.crossTileID]=new fe(!1,!1,!1);else{var yt,Tn=!1,In=!1,Mn=!0,zn=null,Bn={box:null,offscreen:null},Fn={box:null,offscreen:null},Nn=null,Vn=null,Wn=0,$n=0,Yn=0;ot.textFeatureIndex?Wn=ot.textFeatureIndex:et.useRuntimeCollisionCircles&&(Wn=et.featureIndex),ot.verticalTextFeatureIndex&&($n=ot.verticalTextFeatureIndex);var er=ot.textBox;if(er){var O=function(nt){var rt=tt.WritingMode.horizontal;if(at.allowVerticalPlacement&&!nt&&it.prevPlacement){var ot=it.prevPlacement.placedOrientations[et.crossTileID];ot&&(it.placedOrientations[et.crossTileID]=ot,it.markUsedOrientation(at,rt=ot,et))}return rt},F=function(nt,rt){if(at.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&ot.verticalTextBox)for(var it=0,st=at.writingModes;it<st.length&&(st[it]===tt.WritingMode.vertical?(Bn=rt(),Fn=Bn):Bn=nt(),!(Bn&&Bn.box&&Bn.box.length));it+=1);else Bn=nt()};if(st.get("text-variable-anchor")){var rr=st.get("text-variable-anchor");if(it.prevPlacement&&it.prevPlacement.variableOffsets[et.crossTileID]){var vr=it.prevPlacement.variableOffsets[et.crossTileID];rr.indexOf(vr.anchor)>0&&(rr=rr.filter((function(tt){return tt!==vr.anchor}))).unshift(vr.anchor)}var Z=function(tt,nt,rt){for(var ot=tt.x2-tt.x1,st=tt.y2-tt.y1,pt=et.textBoxScale,ft=bn&&!Ne?nt:null,mt={box:[],offscreen:!1},yt=Bt?2*rr.length:rr.length,vt=0;vt<yt;++vt){var Ot=it.attemptAnchorPlacement(rr[vt%rr.length],tt,ot,st,pt,rn,vn,dt,ct,Dt,vt>=rr.length,et,at,rt,ft);if(Ot&&(mt=Ot.placedGlyphBoxes)&&mt.box&&mt.box.length){Tn=!0,zn=Ot.shift;break}}return mt};F((function(){return Z(er,ot.iconBox,tt.WritingMode.horizontal)}),(function(){var nt=ot.verticalTextBox;return at.allowVerticalPlacement&&!(Bn&&Bn.box&&Bn.box.length)&&et.numVerticalGlyphVertices>0&&nt?Z(nt,ot.verticalIconBox,tt.WritingMode.vertical):{box:null,offscreen:null}})),Bn&&(Tn=Bn.box,Mn=Bn.offscreen);var wr=O(Bn&&Bn.box);if(!Tn&&it.prevPlacement){var Sr=it.prevPlacement.variableOffsets[et.crossTileID];Sr&&(it.variableOffsets[et.crossTileID]=Sr,it.markUsedJustification(at,Sr.anchor,et,wr))}}else{var V=function(tt,nt){var rt=it.collisionIndex.placeCollisionBox(tt,Bt,dt,ct,Dt.predicate);return rt&&rt.box&&rt.box.length&&(it.markUsedOrientation(at,nt,et),it.placedOrientations[et.crossTileID]=nt),rt};F((function(){return V(er,tt.WritingMode.horizontal)}),(function(){var nt=ot.verticalTextBox;return at.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&nt?V(nt,tt.WritingMode.vertical):{box:null,offscreen:null}})),O(Bn&&Bn.box&&Bn.box.length)}}if(Tn=(yt=Bn)&&yt.box&&yt.box.length>0,Mn=yt&&yt.offscreen,et.useRuntimeCollisionCircles){var ii=at.text.placedSymbolArray.get(et.centerJustifiedTextSymbolIndex),qi=tt.evaluateSizeForFeature(at.textSizeData,vt,ii),uo=st.get("text-padding");Nn=it.collisionIndex.placeCollisionCircles(Bt,ii,at.lineVertexArray,at.glyphOffsetArray,qi,ct,pt,ft,rt,vn,Dt.predicate,et.collisionCircleDiameter,uo),Tn=Bt||Nn.circles.length>0&&!Nn.collisionDetected,Mn=Mn&&Nn.offscreen}if(ot.iconFeatureIndex&&(Yn=ot.iconFeatureIndex),ot.iconBox){var H=function(tt){var et=bn&&zn?xe(tt,zn.x,zn.y,rn,vn,it.transform.angle):tt;return it.collisionIndex.placeCollisionBox(et,Ne,dt,ct,Dt.predicate)};In=Fn&&Fn.box&&Fn.box.length&&ot.verticalIconBox?(Vn=H(ot.verticalIconBox)).box.length>0:(Vn=H(ot.iconBox)).box.length>0,Mn=Mn&&Vn.offscreen}var po=Ot||0===et.numHorizontalGlyphVertices&&0===et.numVerticalGlyphVertices,vo=Rt||0===et.numIconVertices;if(po||vo?vo?po||(In=In&&Tn):Tn=In&&Tn:In=Tn=In&&Tn,Tn&&yt&&yt.box&&it.collisionIndex.insertCollisionBox(yt.box,st.get("text-ignore-placement"),at.bucketInstanceId,Fn&&Fn.box&&$n?$n:Wn,Dt.ID),In&&Vn&&it.collisionIndex.insertCollisionBox(Vn.box,st.get("icon-ignore-placement"),at.bucketInstanceId,Yn,Dt.ID),Nn&&(Tn&&it.collisionIndex.insertCollisionCircles(Nn.circles,st.get("text-ignore-placement"),at.bucketInstanceId,Wn,Dt.ID),rt)){var So=at.bucketInstanceId,ta=it.collisionCircleArrays[So];void 0===ta&&(ta=it.collisionCircleArrays[So]=new me);for(var na=0;na<Nn.circles.length;na+=4)ta.circles.push(Nn.circles[na+0]),ta.circles.push(Nn.circles[na+1]),ta.circles.push(Nn.circles[na+2]),ta.circles.push(Nn.collisionDetected?1:0)}it.placements[et.crossTileID]=new fe(Tn||Cn,In||Ln,Mn||at.justReloaded),nt[et.crossTileID]=!0}};if(Tn)for(var In=at.getSortedSymbolIndexes(this.transform.angle),Mn=In.length-1;Mn>=0;--Mn){var zn=In[Mn];P(at.symbolInstances.get(zn),at.collisionArrays[zn])}else for(var Bn=et.symbolInstanceStart;Bn<et.symbolInstanceEnd;Bn++)P(at.symbolInstances.get(Bn),at.collisionArrays[Bn]);if(rt&&at.bucketInstanceId in this.collisionCircleArrays){var Fn=this.collisionCircleArrays[at.bucketInstanceId];tt.invert(Fn.invProjMatrix,ct),Fn.viewportMatrix=this.collisionIndex.getViewportMatrix()}at.justReloaded=!1},be.prototype.markUsedJustification=function(et,nt,rt,it){var ot;ot=it===tt.WritingMode.vertical?rt.verticalPlacedTextSymbolIndex:{left:rt.leftJustifiedTextSymbolIndex,center:rt.centerJustifiedTextSymbolIndex,right:rt.rightJustifiedTextSymbolIndex}[tt.getAnchorJustification(nt)];for(var at=0,st=[rt.leftJustifiedTextSymbolIndex,rt.centerJustifiedTextSymbolIndex,rt.rightJustifiedTextSymbolIndex,rt.verticalPlacedTextSymbolIndex];at<st.length;at+=1){var ct=st[at];ct>=0&&(et.text.placedSymbolArray.get(ct).crossTileID=ot>=0&&ct!==ot?0:rt.crossTileID)}},be.prototype.markUsedOrientation=function(et,nt,rt){for(var it=nt===tt.WritingMode.horizontal||nt===tt.WritingMode.horizontalOnly?nt:0,ot=nt===tt.WritingMode.vertical?nt:0,at=0,st=[rt.leftJustifiedTextSymbolIndex,rt.centerJustifiedTextSymbolIndex,rt.rightJustifiedTextSymbolIndex];at<st.length;at+=1)et.text.placedSymbolArray.get(st[at]).placedOrientation=it;rt.verticalPlacedTextSymbolIndex&&(et.text.placedSymbolArray.get(rt.verticalPlacedTextSymbolIndex).placedOrientation=ot)},be.prototype.commit=function(tt){this.commitTime=tt,this.zoomAtLastRecencyCheck=this.transform.zoom;var et=this.prevPlacement,nt=!1;this.prevZoomAdjustment=et?et.zoomAdjustment(this.transform.zoom):0;var rt=et?et.symbolFadeChange(tt):1,it=et?et.opacities:{},ot=et?et.variableOffsets:{},at=et?et.placedOrientations:{};for(var st in this.placements){var ct=this.placements[st],pt=it[st];pt?(this.opacities[st]=new _e(pt,rt,ct.text,ct.icon),nt=nt||ct.text!==pt.text.placed||ct.icon!==pt.icon.placed):(this.opacities[st]=new _e(null,rt,ct.text,ct.icon,ct.skipFade),nt=nt||ct.text||ct.icon)}for(var ft in it){var dt=it[ft];if(!this.opacities[ft]){var mt=new _e(dt,rt,!1,!1);mt.isHidden()||(this.opacities[ft]=mt,nt=nt||dt.text.placed||dt.icon.placed)}}for(var yt in ot)this.variableOffsets[yt]||!this.opacities[yt]||this.opacities[yt].isHidden()||(this.variableOffsets[yt]=ot[yt]);for(var vt in at)this.placedOrientations[vt]||!this.opacities[vt]||this.opacities[vt].isHidden()||(this.placedOrientations[vt]=at[vt]);nt?this.lastPlacementChangeTime=tt:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=et?et.lastPlacementChangeTime:tt)},be.prototype.updateLayerOpacities=function(tt,et){for(var nt={},rt=0,it=et;rt<it.length;rt+=1){var ot=it[rt],at=ot.getBucket(tt);at&&ot.latestFeatureIndex&&tt.id===at.layerIds[0]&&this.updateBucketOpacities(at,nt,ot.collisionBoxArray)}},be.prototype.updateBucketOpacities=function(et,nt,rt){var it=this;et.hasTextData()&&et.text.opacityVertexArray.clear(),et.hasIconData()&&et.icon.opacityVertexArray.clear(),et.hasIconCollisionBoxData()&&et.iconCollisionBox.collisionVertexArray.clear(),et.hasTextCollisionBoxData()&&et.textCollisionBox.collisionVertexArray.clear();var ot=et.layers[0].layout,at=new _e(null,0,!1,!1,!0),st=ot.get("text-allow-overlap"),ct=ot.get("icon-allow-overlap"),pt=ot.get("text-variable-anchor"),ft="map"===ot.get("text-rotation-alignment"),dt="map"===ot.get("text-pitch-alignment"),mt="none"!==ot.get("icon-text-fit"),yt=new _e(null,0,st&&(ct||!et.hasIconData()||ot.get("icon-optional")),ct&&(st||!et.hasTextData()||ot.get("text-optional")),!0);!et.collisionArrays&&rt&&(et.hasIconCollisionBoxData()||et.hasTextCollisionBoxData())&&et.deserializeCollisionBoxes(rt);for(var _=function(tt,et,nt){for(var rt=0;rt<et/4;rt++)tt.opacityVertexArray.emplaceBack(nt)},f=function(rt){var ot=et.symbolInstances.get(rt),st=ot.numHorizontalGlyphVertices,ct=ot.numVerticalGlyphVertices,vt=ot.crossTileID,Dt=it.opacities[vt];nt[vt]?Dt=at:Dt||(it.opacities[vt]=Dt=yt),nt[vt]=!0;var Ot=ot.numIconVertices>0,Rt=it.placedOrientations[ot.crossTileID],Bt=Rt===tt.WritingMode.vertical,Ne=Rt===tt.WritingMode.horizontal||Rt===tt.WritingMode.horizontalOnly;if(st>0||ct>0){var rn=De(Dt.text);_(et.text,st,Bt?As:rn),_(et.text,ct,Ne?As:rn);var vn=Dt.text.isHidden();[ot.rightJustifiedTextSymbolIndex,ot.centerJustifiedTextSymbolIndex,ot.leftJustifiedTextSymbolIndex].forEach((function(tt){tt>=0&&(et.text.placedSymbolArray.get(tt).hidden=vn||Bt?1:0)})),ot.verticalPlacedTextSymbolIndex>=0&&(et.text.placedSymbolArray.get(ot.verticalPlacedTextSymbolIndex).hidden=vn||Ne?1:0);var bn=it.variableOffsets[ot.crossTileID];bn&&it.markUsedJustification(et,bn.anchor,ot,Rt);var Tn=it.placedOrientations[ot.crossTileID];Tn&&(it.markUsedJustification(et,"left",ot,Tn),it.markUsedOrientation(et,Tn,ot))}if(Ot){var Cn=De(Dt.icon),Ln=!(mt&&ot.verticalPlacedIconSymbolIndex&&Bt);ot.placedIconSymbolIndex>=0&&(_(et.icon,ot.numIconVertices,Ln?Cn:As),et.icon.placedSymbolArray.get(ot.placedIconSymbolIndex).hidden=Dt.icon.isHidden()),ot.verticalPlacedIconSymbolIndex>=0&&(_(et.icon,ot.numVerticalIconVertices,Ln?As:Cn),et.icon.placedSymbolArray.get(ot.verticalPlacedIconSymbolIndex).hidden=Dt.icon.isHidden())}if(et.hasIconCollisionBoxData()||et.hasTextCollisionBoxData()){var In=et.collisionArrays[rt];if(In){var Mn=new tt.Point(0,0);if(In.textBox||In.verticalTextBox){var zn=!0;if(pt){var Bn=it.variableOffsets[vt];Bn?(Mn=ye(Bn.anchor,Bn.width,Bn.height,Bn.textOffset,Bn.textBoxScale),ft&&Mn._rotate(dt?it.transform.angle:-it.transform.angle)):zn=!1}In.textBox&&we(et.textCollisionBox.collisionVertexArray,Dt.text.placed,!zn||Bt,Mn.x,Mn.y),In.verticalTextBox&&we(et.textCollisionBox.collisionVertexArray,Dt.text.placed,!zn||Ne,Mn.x,Mn.y)}var Fn=Boolean(!Ne&&In.verticalIconBox);In.iconBox&&we(et.iconCollisionBox.collisionVertexArray,Dt.icon.placed,Fn,mt?Mn.x:0,mt?Mn.y:0),In.verticalIconBox&&we(et.iconCollisionBox.collisionVertexArray,Dt.icon.placed,!Fn,mt?Mn.x:0,mt?Mn.y:0)}}},vt=0;vt<et.symbolInstances.length;vt++)f(vt);if(et.sortFeatures(this.transform.angle),this.retainedQueryData[et.bucketInstanceId]&&(this.retainedQueryData[et.bucketInstanceId].featureSortOrder=et.featureSortOrder),et.hasTextData()&&et.text.opacityVertexBuffer&&et.text.opacityVertexBuffer.updateData(et.text.opacityVertexArray),et.hasIconData()&&et.icon.opacityVertexBuffer&&et.icon.opacityVertexBuffer.updateData(et.icon.opacityVertexArray),et.hasIconCollisionBoxData()&&et.iconCollisionBox.collisionVertexBuffer&&et.iconCollisionBox.collisionVertexBuffer.updateData(et.iconCollisionBox.collisionVertexArray),et.hasTextCollisionBoxData()&&et.textCollisionBox.collisionVertexBuffer&&et.textCollisionBox.collisionVertexBuffer.updateData(et.textCollisionBox.collisionVertexArray),et.bucketInstanceId in this.collisionCircleArrays){var Dt=this.collisionCircleArrays[et.bucketInstanceId];et.placementInvProjMatrix=Dt.invProjMatrix,et.placementViewportMatrix=Dt.viewportMatrix,et.collisionCircleArray=Dt.circles,delete this.collisionCircleArrays[et.bucketInstanceId]}},be.prototype.symbolFadeChange=function(tt){return 0===this.fadeDuration?1:(tt-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},be.prototype.zoomAdjustment=function(tt){return Math.max(0,(this.transform.zoom-tt)/1.5)},be.prototype.hasTransitions=function(tt){return this.stale||tt-this.lastPlacementChangeTime<this.fadeDuration},be.prototype.stillRecent=function(tt,et){var nt=this.zoomAtLastRecencyCheck===et?1-this.zoomAdjustment(et):1;return this.zoomAtLastRecencyCheck=et,this.commitTime+this.fadeDuration*nt>tt},be.prototype.setStale=function(){this.stale=!0};var vs=Math.pow(2,25),xs=Math.pow(2,24),Ss=Math.pow(2,17),Es=Math.pow(2,16),Ps=Math.pow(2,9),Cs=Math.pow(2,8),Ls=Math.pow(2,1);function De(tt){if(0===tt.opacity&&!tt.placed)return 0;if(1===tt.opacity&&tt.placed)return 4294967295;var et=tt.placed?1:0,nt=Math.floor(127*tt.opacity);return nt*vs+et*xs+nt*Ss+et*Es+nt*Ps+et*Cs+nt*Ls+et}var As=0,Le=function(tt){this._sortAcrossTiles="viewport-y"!==tt.layout.get("symbol-z-order")&&void 0!==tt.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Le.prototype.continuePlacement=function(tt,et,nt,rt,it){for(var ot=this._bucketParts;this._currentTileIndex<tt.length;)if(et.getBucketParts(ot,rt,tt[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,it())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ot.sort((function(tt,et){return tt.sortKey-et.sortKey})));this._currentPartIndex<ot.length;)if(et.placeLayerBucketPart(ot[this._currentPartIndex],this._seenCrossTileIDs,nt),this._currentPartIndex++,it())return!0;return!1};var Ae=function(tt,et,nt,rt,it,ot,at){this.placement=new be(tt,it,ot,at),this._currentPlacementIndex=et.length-1,this._forceFullPlacement=nt,this._showCollisionBoxes=rt,this._done=!1};Ae.prototype.isDone=function(){return this._done},Ae.prototype.continuePlacement=function(et,nt,rt){for(var it=this,ot=tt.browser.now(),n=function(){var et=tt.browser.now()-ot;return!it._forceFullPlacement&&et>2};this._currentPlacementIndex>=0;){var at=nt[et[this._currentPlacementIndex]],st=this.placement.collisionIndex.transform.zoom;if("symbol"===at.type&&(!at.minzoom||at.minzoom<=st)&&(!at.maxzoom||at.maxzoom>st)){if(this._inProgressLayer||(this._inProgressLayer=new Le(at)),this._inProgressLayer.continuePlacement(rt[at.source],this.placement,this._showCollisionBoxes,at,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ae.prototype.commit=function(tt){return this.placement.commit(tt),this.placement};var Ms=512/tt.EXTENT/2,ke=function(tt,et,nt){this.tileID=tt,this.indexedSymbolInstances={},this.bucketInstanceId=nt;for(var rt=0;rt<et.length;rt++){var it=et.get(rt),ot=it.key;this.indexedSymbolInstances[ot]||(this.indexedSymbolInstances[ot]=[]),this.indexedSymbolInstances[ot].push({crossTileID:it.crossTileID,coord:this.getScaledCoordinates(it,tt)})}};ke.prototype.getScaledCoordinates=function(et,nt){var rt=Ms/Math.pow(2,nt.canonical.z-this.tileID.canonical.z);return{x:Math.floor((nt.canonical.x*tt.EXTENT+et.anchorX)*rt),y:Math.floor((nt.canonical.y*tt.EXTENT+et.anchorY)*rt)}},ke.prototype.findMatches=function(tt,et,nt){for(var rt=this.tileID.canonical.z<et.canonical.z?1:Math.pow(2,this.tileID.canonical.z-et.canonical.z),it=0;it<tt.length;it++){var ot=tt.get(it);if(!ot.crossTileID){var at=this.indexedSymbolInstances[ot.key];if(at)for(var st=this.getScaledCoordinates(ot,et),ct=0,pt=at;ct<pt.length;ct+=1){var ft=pt[ct];if(Math.abs(ft.coord.x-st.x)<=rt&&Math.abs(ft.coord.y-st.y)<=rt&&!nt[ft.crossTileID]){nt[ft.crossTileID]=!0,ot.crossTileID=ft.crossTileID;break}}}}};var Be=function(){this.maxCrossTileID=0};Be.prototype.generate=function(){return++this.maxCrossTileID};var Oe=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Oe.prototype.handleWrapJump=function(tt){var et=Math.round((tt-this.lng)/360);if(0!==et)for(var nt in this.indexes){var rt=this.indexes[nt],it={};for(var ot in rt){var at=rt[ot];at.tileID=at.tileID.unwrapTo(at.tileID.wrap+et),it[at.tileID.key]=at}this.indexes[nt]=it}this.lng=tt},Oe.prototype.addBucket=function(tt,et,nt){if(this.indexes[tt.overscaledZ]&&this.indexes[tt.overscaledZ][tt.key]){if(this.indexes[tt.overscaledZ][tt.key].bucketInstanceId===et.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(tt.overscaledZ,this.indexes[tt.overscaledZ][tt.key])}for(var rt=0;rt<et.symbolInstances.length;rt++)et.symbolInstances.get(rt).crossTileID=0;this.usedCrossTileIDs[tt.overscaledZ]||(this.usedCrossTileIDs[tt.overscaledZ]={});var it=this.usedCrossTileIDs[tt.overscaledZ];for(var ot in this.indexes){var at=this.indexes[ot];if(Number(ot)>tt.overscaledZ)for(var st in at){var ct=at[st];ct.tileID.isChildOf(tt)&&ct.findMatches(et.symbolInstances,tt,it)}else{var pt=at[tt.scaledTo(Number(ot)).key];pt&&pt.findMatches(et.symbolInstances,tt,it)}}for(var ft=0;ft<et.symbolInstances.length;ft++){var dt=et.symbolInstances.get(ft);dt.crossTileID||(dt.crossTileID=nt.generate(),it[dt.crossTileID]=!0)}return void 0===this.indexes[tt.overscaledZ]&&(this.indexes[tt.overscaledZ]={}),this.indexes[tt.overscaledZ][tt.key]=new ke(tt,et.symbolInstances,et.bucketInstanceId),!0},Oe.prototype.removeBucketCrossTileIDs=function(tt,et){for(var nt in et.indexedSymbolInstances)for(var rt=0,it=et.indexedSymbolInstances[nt];rt<it.length;rt+=1)delete this.usedCrossTileIDs[tt][it[rt].crossTileID]},Oe.prototype.removeStaleBuckets=function(tt){var et=!1;for(var nt in this.indexes){var rt=this.indexes[nt];for(var it in rt)tt[rt[it].bucketInstanceId]||(this.removeBucketCrossTileIDs(nt,rt[it]),delete rt[it],et=!0)}return et};var Fe=function(){this.layerIndexes={},this.crossTileIDs=new Be,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Fe.prototype.addLayer=function(tt,et,nt){var rt=this.layerIndexes[tt.id];void 0===rt&&(rt=this.layerIndexes[tt.id]=new Oe);var it=!1,ot={};rt.handleWrapJump(nt);for(var at=0,st=et;at<st.length;at+=1){var ct=st[at],pt=ct.getBucket(tt);pt&&tt.id===pt.layerIds[0]&&(pt.bucketInstanceId||(pt.bucketInstanceId=++this.maxBucketInstanceId),rt.addBucket(ct.tileID,pt,this.crossTileIDs)&&(it=!0),ot[pt.bucketInstanceId]=!0)}return rt.removeStaleBuckets(ot)&&(it=!0),it},Fe.prototype.pruneUnusedLayers=function(tt){var et={};for(var nt in tt.forEach((function(tt){et[tt]=!0})),this.layerIndexes)et[nt]||delete this.layerIndexes[nt]};var Ue=function(et,nt){return tt.emitValidationErrors(et,nt&&nt.filter((function(tt){return"source.canvas"!==tt.identifier})))},zs=tt.pick(fs,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Os=tt.pick(fs,["setCenter","setZoom","setBearing","setPitch"]),Rs=function(){var et={},nt=tt.styleSpec.$version;for(var rt in tt.styleSpec.$root){var it,ot=tt.styleSpec.$root[rt];ot.required&&null!=(it="version"===rt?nt:"array"===ot.type?[]:{})&&(et[rt]=it)}return et}(),Bs=function(et){function i(nt,rt){var it=this;void 0===rt&&(rt={}),et.call(this),this.map=nt,this.dispatcher=new Dt(Ft(),this),this.imageManager=new pt,this.imageManager.setEventedParent(this),this.glyphManager=new y(nt._requestManager,rt.localIdeographFontFamily),this.lineAtlas=new T(256,512),this.crossTileSymbolIndex=new Fe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new tt.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",tt.getReferrer());var ot=this;this._rtlTextPluginCallback=i.registerForPluginStateChange((function(et){ot.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:et.pluginStatus,pluginURL:et.pluginURL},(function(et,nt){if(tt.triggerPluginCompletionEvent(et),nt&&nt.every((function(tt){return tt})))for(var rt in ot.sourceCaches)ot.sourceCaches[rt].reload()}))})),this.on("data",(function(tt){if("source"===tt.dataType&&"metadata"===tt.sourceDataType){var et=it.sourceCaches[tt.sourceId];if(et){var nt=et.getSource();if(nt&&nt.vectorLayerIds)for(var rt in it._layers){var ot=it._layers[rt];ot.source===nt.id&&it._validateLayer(ot)}}}}))}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.loadURL=function(et,nt){var rt=this;void 0===nt&&(nt={}),this.fire(new tt.Event("dataloading",{dataType:"style"}));var it="boolean"==typeof nt.validate?nt.validate:!tt.isMapboxURL(et);et=this.map._requestManager.normalizeStyleURL(et,nt.accessToken);var ot=this.map._requestManager.transformRequest(et,tt.ResourceType.Style);this._request=tt.getJSON(ot,(function(et,nt){rt._request=null,et?rt.fire(new tt.ErrorEvent(et)):nt&&rt._load(nt,it)}))},i.prototype.loadJSON=function(et,nt){var rt=this;void 0===nt&&(nt={}),this.fire(new tt.Event("dataloading",{dataType:"style"})),this._request=tt.browser.frame((function(){rt._request=null,rt._load(et,!1!==nt.validate)}))},i.prototype.loadEmpty=function(){this.fire(new tt.Event("dataloading",{dataType:"style"})),this._load(Rs,!1)},i.prototype._load=function(et,nt){if(!nt||!Ue(this,tt.validateStyle(et))){for(var rt in this._loaded=!0,this.stylesheet=et,et.sources)this.addSource(rt,et.sources[rt],{validate:!1});et.sprite?this._loadSprite(et.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(et.glyphs);var it=Nt(this.stylesheet.layers);this._order=it.map((function(tt){return tt.id})),this._layers={},this._serializedLayers={};for(var ot=0,at=it;ot<at.length;ot+=1){var st=at[ot];(st=tt.createStyleLayer(st)).setEventedParent(this,{layer:{id:st.id}}),this._layers[st.id]=st,this._serializedLayers[st.id]=st.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new vt(this.stylesheet.light),this.fire(new tt.Event("data",{dataType:"style"})),this.fire(new tt.Event("style.load"))}},i.prototype._loadSprite=function(et){var nt=this;this._spriteRequest=function(et,nt,rt){var it,ot,at,st=tt.browser.devicePixelRatio>1?"@2x":"",ct=tt.getJSON(nt.transformRequest(nt.normalizeSpriteURL(et,st,".json"),tt.ResourceType.SpriteJSON),(function(tt,et){ct=null,at||(at=tt,it=et,u())})),pt=tt.getImage(nt.transformRequest(nt.normalizeSpriteURL(et,st,".png"),tt.ResourceType.SpriteImage),(function(tt,et){pt=null,at||(at=tt,ot=et,u())}));function u(){if(at)rt(at);else if(it&&ot){var et=tt.browser.getImageData(ot),nt={};for(var st in it){var ct=it[st],pt=ct.width,ft=ct.height,dt=ct.x,mt=ct.y,yt=ct.sdf,vt=ct.pixelRatio,Dt=ct.stretchX,Ot=ct.stretchY,Rt=ct.content,Bt=new tt.RGBAImage({width:pt,height:ft});tt.RGBAImage.copy(et,Bt,{x:dt,y:mt},{x:0,y:0},{width:pt,height:ft}),nt[st]={data:Bt,pixelRatio:vt,sdf:yt,stretchX:Dt,stretchY:Ot,content:Rt}}rt(null,nt)}}return{cancel:function(){ct&&(ct.cancel(),ct=null),pt&&(pt.cancel(),pt=null)}}}(et,this.map._requestManager,(function(et,rt){if(nt._spriteRequest=null,et)nt.fire(new tt.ErrorEvent(et));else if(rt)for(var it in rt)nt.imageManager.addImage(it,rt[it]);nt.imageManager.setLoaded(!0),nt._availableImages=nt.imageManager.listImages(),nt.dispatcher.broadcast("setImages",nt._availableImages),nt.fire(new tt.Event("data",{dataType:"style"}))}))},i.prototype._validateLayer=function(et){var nt=this.sourceCaches[et.source];if(nt){var rt=et.sourceLayer;if(rt){var it=nt.getSource();("geojson"===it.type||it.vectorLayerIds&&-1===it.vectorLayerIds.indexOf(rt))&&this.fire(new tt.ErrorEvent(new Error('Source layer "'+rt+'" does not exist on source "'+it.id+'" as specified by style layer "'+et.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var tt in this.sourceCaches)if(!this.sourceCaches[tt].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(tt){for(var et=[],nt=0,rt=tt;nt<rt.length;nt+=1){var it=this._layers[rt[nt]];"custom"!==it.type&&et.push(it.serialize())}return et},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var tt in this.sourceCaches)if(this.sourceCaches[tt].hasTransition())return!0;for(var et in this._layers)if(this._layers[et].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(et){if(this._loaded){var nt=this._changed;if(this._changed){var rt=Object.keys(this._updatedLayers),it=Object.keys(this._removedLayers);for(var ot in(rt.length||it.length)&&this._updateWorkerLayers(rt,it),this._updatedSources){var at=this._updatedSources[ot];"reload"===at?this._reloadSource(ot):"clear"===at&&this._clearSource(ot)}for(var st in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[st].updateTransitions(et);this.light.updateTransitions(et),this._resetUpdates()}for(var ct in this.sourceCaches)this.sourceCaches[ct].used=!1;for(var pt=0,ft=this._order;pt<ft.length;pt+=1){var dt=this._layers[ft[pt]];dt.recalculate(et,this._availableImages),!dt.isHidden(et.zoom)&&dt.source&&(this.sourceCaches[dt.source].used=!0)}this.light.recalculate(et),this.z=et.zoom,nt&&this.fire(new tt.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var tt=Object.keys(this._changedImages);if(tt.length){for(var et in this.sourceCaches)this.sourceCaches[et].reloadTilesForDependencies(["icons","patterns"],tt);this._changedImages={}}},i.prototype._updateWorkerLayers=function(tt,et){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(tt),removedIds:et})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(et){var nt=this;if(this._checkLoaded(),Ue(this,tt.validateStyle(et)))return!1;(et=tt.clone$1(et)).layers=Nt(et.layers);var rt=function(et,nt){if(!et)return[{command:fs.setStyle,args:[nt]}];var rt=[];try{if(!tt.deepEqual(et.version,nt.version))return[{command:fs.setStyle,args:[nt]}];tt.deepEqual(et.center,nt.center)||rt.push({command:fs.setCenter,args:[nt.center]}),tt.deepEqual(et.zoom,nt.zoom)||rt.push({command:fs.setZoom,args:[nt.zoom]}),tt.deepEqual(et.bearing,nt.bearing)||rt.push({command:fs.setBearing,args:[nt.bearing]}),tt.deepEqual(et.pitch,nt.pitch)||rt.push({command:fs.setPitch,args:[nt.pitch]}),tt.deepEqual(et.sprite,nt.sprite)||rt.push({command:fs.setSprite,args:[nt.sprite]}),tt.deepEqual(et.glyphs,nt.glyphs)||rt.push({command:fs.setGlyphs,args:[nt.glyphs]}),tt.deepEqual(et.transition,nt.transition)||rt.push({command:fs.setTransition,args:[nt.transition]}),tt.deepEqual(et.light,nt.light)||rt.push({command:fs.setLight,args:[nt.light]});var it={},ot=[];!function(et,nt,rt,it){var ot;for(ot in nt=nt||{},et=et||{})et.hasOwnProperty(ot)&&(nt.hasOwnProperty(ot)||qt(ot,rt,it));for(ot in nt)nt.hasOwnProperty(ot)&&(et.hasOwnProperty(ot)?tt.deepEqual(et[ot],nt[ot])||("geojson"===et[ot].type&&"geojson"===nt[ot].type&&Gt(et,nt,ot)?rt.push({command:fs.setGeoJSONSourceData,args:[ot,nt[ot].data]}):Vt(ot,nt,rt,it)):jt(ot,nt,rt))}(et.sources,nt.sources,ot,it);var at=[];et.layers&&et.layers.forEach((function(tt){it[tt.source]?rt.push({command:fs.removeLayer,args:[tt.id]}):at.push(tt)})),rt=rt.concat(ot),function(et,nt,rt){nt=nt||[];var it,ot,at,st,ct,pt,ft,dt=(et=et||[]).map(Xt),mt=nt.map(Xt),yt=et.reduce(Ht,{}),vt=nt.reduce(Ht,{}),Dt=dt.slice(),Ot=Object.create(null);for(it=0,ot=0;it<dt.length;it++)vt.hasOwnProperty(at=dt[it])?ot++:(rt.push({command:fs.removeLayer,args:[at]}),Dt.splice(Dt.indexOf(at,ot),1));for(it=0,ot=0;it<mt.length;it++)Dt[Dt.length-1-it]!==(at=mt[mt.length-1-it])&&(yt.hasOwnProperty(at)?(rt.push({command:fs.removeLayer,args:[at]}),Dt.splice(Dt.lastIndexOf(at,Dt.length-ot),1)):ot++,rt.push({command:fs.addLayer,args:[vt[at],pt=Dt[Dt.length-it]]}),Dt.splice(Dt.length-it,0,at),Ot[at]=!0);for(it=0;it<mt.length;it++)if(st=yt[at=mt[it]],ct=vt[at],!Ot[at]&&!tt.deepEqual(st,ct))if(tt.deepEqual(st.source,ct.source)&&tt.deepEqual(st["source-layer"],ct["source-layer"])&&tt.deepEqual(st.type,ct.type)){for(ft in Wt(st.layout,ct.layout,rt,at,null,fs.setLayoutProperty),Wt(st.paint,ct.paint,rt,at,null,fs.setPaintProperty),tt.deepEqual(st.filter,ct.filter)||rt.push({command:fs.setFilter,args:[at,ct.filter]}),tt.deepEqual(st.minzoom,ct.minzoom)&&tt.deepEqual(st.maxzoom,ct.maxzoom)||rt.push({command:fs.setLayerZoomRange,args:[at,ct.minzoom,ct.maxzoom]}),st)st.hasOwnProperty(ft)&&"layout"!==ft&&"paint"!==ft&&"filter"!==ft&&"metadata"!==ft&&"minzoom"!==ft&&"maxzoom"!==ft&&(0===ft.indexOf("paint.")?Wt(st[ft],ct[ft],rt,at,ft.slice(6),fs.setPaintProperty):tt.deepEqual(st[ft],ct[ft])||rt.push({command:fs.setLayerProperty,args:[at,ft,ct[ft]]}));for(ft in ct)ct.hasOwnProperty(ft)&&!st.hasOwnProperty(ft)&&"layout"!==ft&&"paint"!==ft&&"filter"!==ft&&"metadata"!==ft&&"minzoom"!==ft&&"maxzoom"!==ft&&(0===ft.indexOf("paint.")?Wt(st[ft],ct[ft],rt,at,ft.slice(6),fs.setPaintProperty):tt.deepEqual(st[ft],ct[ft])||rt.push({command:fs.setLayerProperty,args:[at,ft,ct[ft]]}))}else rt.push({command:fs.removeLayer,args:[at]}),pt=Dt[Dt.lastIndexOf(at)+1],rt.push({command:fs.addLayer,args:[ct,pt]})}(at,nt.layers,rt)}catch(tt){console.warn("Unable to compute style diff:",tt),rt=[{command:fs.setStyle,args:[nt]}]}return rt}(this.serialize(),et).filter((function(tt){return!(tt.command in Os)}));if(0===rt.length)return!1;var it=rt.filter((function(tt){return!(tt.command in zs)}));if(it.length>0)throw new Error("Unimplemented: "+it.map((function(tt){return tt.command})).join(", ")+".");return rt.forEach((function(tt){"setTransition"!==tt.command&&nt[tt.command].apply(nt,tt.args)})),this.stylesheet=et,!0},i.prototype.addImage=function(et,nt){if(this.getImage(et))return this.fire(new tt.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(et,nt),this._availableImages=this.imageManager.listImages(),this._changedImages[et]=!0,this._changed=!0,this.fire(new tt.Event("data",{dataType:"style"}))},i.prototype.updateImage=function(tt,et){this.imageManager.updateImage(tt,et)},i.prototype.getImage=function(tt){return this.imageManager.getImage(tt)},i.prototype.removeImage=function(et){if(!this.getImage(et))return this.fire(new tt.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(et),this._availableImages=this.imageManager.listImages(),this._changedImages[et]=!0,this._changed=!0,this.fire(new tt.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(et,nt,rt){var it=this;if(void 0===rt&&(rt={}),this._checkLoaded(),void 0!==this.sourceCaches[et])throw new Error("There is already a source with this ID");if(!nt.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(nt).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(nt.type)>=0&&this._validate(tt.validateStyle.source,"sources."+et,nt,null,rt))){this.map&&this.map._collectResourceTiming&&(nt.collectResourceTiming=!0);var ot=this.sourceCaches[et]=new as(et,nt,this.dispatcher);ot.style=this,ot.setEventedParent(this,(function(){return{isSourceLoaded:it.loaded(),source:ot.serialize(),sourceId:et}})),ot.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(et){if(this._checkLoaded(),void 0===this.sourceCaches[et])throw new Error("There is no source with this ID");for(var nt in this._layers)if(this._layers[nt].source===et)return this.fire(new tt.ErrorEvent(new Error('Source "'+et+'" cannot be removed while layer "'+nt+'" is using it.')));var rt=this.sourceCaches[et];delete this.sourceCaches[et],delete this._updatedSources[et],rt.fire(new tt.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:et})),rt.setEventedParent(null),rt.clearTiles(),rt.onRemove&&rt.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(tt,et){this._checkLoaded(),this.sourceCaches[tt].getSource().setData(et),this._changed=!0},i.prototype.getSource=function(tt){return this.sourceCaches[tt]&&this.sourceCaches[tt].getSource()},i.prototype.addLayer=function(et,nt,rt){void 0===rt&&(rt={}),this._checkLoaded();var it=et.id;if(this.getLayer(it))this.fire(new tt.ErrorEvent(new Error('Layer with id "'+it+'" already exists on this map')));else{var ot;if("custom"===et.type){if(Ue(this,tt.validateCustomStyleLayer(et)))return;ot=tt.createStyleLayer(et)}else{if("object"==typeof et.source&&(this.addSource(it,et.source),et=tt.clone$1(et),et=tt.extend(et,{source:it})),this._validate(tt.validateStyle.layer,"layers."+it,et,{arrayIndex:-1},rt))return;ot=tt.createStyleLayer(et),this._validateLayer(ot),ot.setEventedParent(this,{layer:{id:it}}),this._serializedLayers[ot.id]=ot.serialize()}var at=nt?this._order.indexOf(nt):this._order.length;if(nt&&-1===at)this.fire(new tt.ErrorEvent(new Error('Layer with id "'+nt+'" does not exist on this map.')));else{if(this._order.splice(at,0,it),this._layerOrderChanged=!0,this._layers[it]=ot,this._removedLayers[it]&&ot.source&&"custom"!==ot.type){var st=this._removedLayers[it];delete this._removedLayers[it],st.type!==ot.type?this._updatedSources[ot.source]="clear":(this._updatedSources[ot.source]="reload",this.sourceCaches[ot.source].pause())}this._updateLayer(ot),ot.onAdd&&ot.onAdd(this.map)}}},i.prototype.moveLayer=function(et,nt){if(this._checkLoaded(),this._changed=!0,this._layers[et]){if(et!==nt){var rt=this._order.indexOf(et);this._order.splice(rt,1);var it=nt?this._order.indexOf(nt):this._order.length;nt&&-1===it?this.fire(new tt.ErrorEvent(new Error('Layer with id "'+nt+'" does not exist on this map.'))):(this._order.splice(it,0,et),this._layerOrderChanged=!0)}}else this.fire(new tt.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(et){this._checkLoaded();var nt=this._layers[et];if(nt){nt.setEventedParent(null);var rt=this._order.indexOf(et);this._order.splice(rt,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[et]=nt,delete this._layers[et],delete this._serializedLayers[et],delete this._updatedLayers[et],delete this._updatedPaintProps[et],nt.onRemove&&nt.onRemove(this.map)}else this.fire(new tt.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(tt){return this._layers[tt]},i.prototype.hasLayer=function(tt){return tt in this._layers},i.prototype.setLayerZoomRange=function(et,nt,rt){this._checkLoaded();var it=this.getLayer(et);it?it.minzoom===nt&&it.maxzoom===rt||(null!=nt&&(it.minzoom=nt),null!=rt&&(it.maxzoom=rt),this._updateLayer(it)):this.fire(new tt.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(et,nt,rt){void 0===rt&&(rt={}),this._checkLoaded();var it=this.getLayer(et);if(it){if(!tt.deepEqual(it.filter,nt))return null==nt?(it.filter=void 0,void this._updateLayer(it)):void(this._validate(tt.validateStyle.filter,"layers."+it.id+".filter",nt,null,rt)||(it.filter=tt.clone$1(nt),this._updateLayer(it)))}else this.fire(new tt.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(et){return tt.clone$1(this.getLayer(et).filter)},i.prototype.setLayoutProperty=function(et,nt,rt,it){void 0===it&&(it={}),this._checkLoaded();var ot=this.getLayer(et);ot?tt.deepEqual(ot.getLayoutProperty(nt),rt)||(ot.setLayoutProperty(nt,rt,it),this._updateLayer(ot)):this.fire(new tt.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(et,nt){var rt=this.getLayer(et);if(rt)return rt.getLayoutProperty(nt);this.fire(new tt.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(et,nt,rt,it){void 0===it&&(it={}),this._checkLoaded();var ot=this.getLayer(et);ot?tt.deepEqual(ot.getPaintProperty(nt),rt)||(ot.setPaintProperty(nt,rt,it)&&this._updateLayer(ot),this._changed=!0,this._updatedPaintProps[et]=!0):this.fire(new tt.ErrorEvent(new Error("The layer '"+et+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(tt,et){return this.getLayer(tt).getPaintProperty(et)},i.prototype.setFeatureState=function(et,nt){this._checkLoaded();var rt=et.source,it=et.sourceLayer,ot=this.sourceCaches[rt];if(void 0!==ot){var at=ot.getSource().type;"geojson"===at&&it?this.fire(new tt.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==at||it?(void 0===et.id&&this.fire(new tt.ErrorEvent(new Error("The feature id parameter must be provided."))),ot.setFeatureState(it,et.id,nt)):this.fire(new tt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new tt.ErrorEvent(new Error("The source '"+rt+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(et,nt){this._checkLoaded();var rt=et.source,it=this.sourceCaches[rt];if(void 0!==it){var ot=it.getSource().type,at="vector"===ot?et.sourceLayer:void 0;"vector"!==ot||at?nt&&"string"!=typeof et.id&&"number"!=typeof et.id?this.fire(new tt.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):it.removeFeatureState(at,et.id,nt):this.fire(new tt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new tt.ErrorEvent(new Error("The source '"+rt+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(et){this._checkLoaded();var nt=et.source,rt=et.sourceLayer,it=this.sourceCaches[nt];if(void 0!==it){if("vector"!==it.getSource().type||rt)return void 0===et.id&&this.fire(new tt.ErrorEvent(new Error("The feature id parameter must be provided."))),it.getFeatureState(rt,et.id);this.fire(new tt.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new tt.ErrorEvent(new Error("The source '"+nt+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return tt.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return tt.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:tt.mapObject(this.sourceCaches,(function(tt){return tt.serialize()})),layers:this._serializeLayers(this._order)},(function(tt){return void 0!==tt}))},i.prototype._updateLayer=function(tt){this._updatedLayers[tt.id]=!0,tt.source&&!this._updatedSources[tt.source]&&"raster"!==this.sourceCaches[tt.source].getSource().type&&(this._updatedSources[tt.source]="reload",this.sourceCaches[tt.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(tt){for(var et=this,i=function(tt){return"fill-extrusion"===et._layers[tt].type},nt={},rt=[],it=this._order.length-1;it>=0;it--){var ot=this._order[it];if(i(ot)){nt[ot]=it;for(var at=0,st=tt;at<st.length;at+=1){var ct=st[at][ot];if(ct)for(var pt=0,ft=ct;pt<ft.length;pt+=1)rt.push(ft[pt])}}}rt.sort((function(tt,et){return et.intersectionZ-tt.intersectionZ}));for(var dt=[],mt=this._order.length-1;mt>=0;mt--){var yt=this._order[mt];if(i(yt))for(var vt=rt.length-1;vt>=0;vt--){var Dt=rt[vt].feature;if(nt[Dt.layer.id]<mt)break;dt.push(Dt),rt.pop()}else for(var Ot=0,Rt=tt;Ot<Rt.length;Ot+=1){var Bt=Rt[Ot][yt];if(Bt)for(var Ne=0,rn=Bt;Ne<rn.length;Ne+=1)dt.push(rn[Ne].feature)}}return dt},i.prototype.queryRenderedFeatures=function(et,nt,rt){nt&&nt.filter&&this._validate(tt.validateStyle.filter,"queryRenderedFeatures.filter",nt.filter,null,nt);var it={};if(nt&&nt.layers){if(!Array.isArray(nt.layers))return this.fire(new tt.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ot=0,at=nt.layers;ot<at.length;ot+=1){var st=at[ot],ct=this._layers[st];if(!ct)return this.fire(new tt.ErrorEvent(new Error("The layer '"+st+"' does not exist in the map's style and cannot be queried for features."))),[];it[ct.source]=!0}}var pt=[];for(var ft in nt.availableImages=this._availableImages,this.sourceCaches)nt.layers&&!it[ft]||pt.push(O(this.sourceCaches[ft],this._layers,this._serializedLayers,et,nt,rt));return this.placement&&pt.push(function(tt,et,nt,rt,it,ot,at){for(var st={},ct=ot.queryRenderedSymbols(rt),pt=[],ft=0,dt=Object.keys(ct).map(Number);ft<dt.length;ft+=1)pt.push(at[dt[ft]]);pt.sort(F);for(var p=function(){var nt=yt[mt],rt=nt.featureIndex.lookupSymbolFeatures(ct[nt.bucketInstanceId],et,nt.bucketIndex,nt.sourceLayerIndex,it.filter,it.layers,it.availableImages,tt);for(var ot in rt){var at=st[ot]=st[ot]||[],pt=rt[ot];pt.sort((function(tt,et){var rt=nt.featureSortOrder;if(rt){var it=rt.indexOf(tt.featureIndex);return rt.indexOf(et.featureIndex)-it}return et.featureIndex-tt.featureIndex}));for(var ft=0,dt=pt;ft<dt.length;ft+=1)at.push(dt[ft])}},mt=0,yt=pt;mt<yt.length;mt+=1)p();var f=function(et){st[et].forEach((function(rt){var it=rt.feature,ot=nt[tt[et].source].getFeatureState(it.layer["source-layer"],it.id);it.source=it.layer.source,it.layer["source-layer"]&&(it.sourceLayer=it.layer["source-layer"]),it.state=ot}))};for(var vt in st)f(vt);return st}(this._layers,this._serializedLayers,this.sourceCaches,et,nt,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(pt)},i.prototype.querySourceFeatures=function(et,nt){nt&&nt.filter&&this._validate(tt.validateStyle.filter,"querySourceFeatures.filter",nt.filter,null,nt);var rt=this.sourceCaches[et];return rt?function(tt,et){for(var nt=tt.getRenderableIds().map((function(et){return tt.getTileByID(et)})),rt=[],it={},ot=0;ot<nt.length;ot++){var at=nt[ot],st=at.tileID.canonical.key;it[st]||(it[st]=!0,at.querySourceFeatures(rt,et))}return rt}(rt,nt):[]},i.prototype.addSourceType=function(tt,et,nt){return i.getSourceType(tt)?nt(new Error('A source type called "'+tt+'" already exists.')):(i.setSourceType(tt,et),et.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:tt,url:et.workerSourceURL},nt):nt(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(et,nt){void 0===nt&&(nt={}),this._checkLoaded();var rt=this.light.getLight(),it=!1;for(var ot in et)if(!tt.deepEqual(et[ot],rt[ot])){it=!0;break}if(it){var at={now:tt.browser.now(),transition:tt.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(et,nt),this.light.updateTransitions(at)}},i.prototype._validate=function(et,nt,rt,it,ot){return void 0===ot&&(ot={}),(!ot||!1!==ot.validate)&&Ue(this,et.call(tt.validateStyle,tt.extend({key:nt,style:this.serialize(),value:rt,styleSpec:tt.styleSpec},it)))},i.prototype._remove=function(){for(var et in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),tt.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[et].setEventedParent(null);for(var nt in this.sourceCaches)this.sourceCaches[nt].clearTiles(),this.sourceCaches[nt].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(tt){this.sourceCaches[tt].clearTiles()},i.prototype._reloadSource=function(tt){this.sourceCaches[tt].resume(),this.sourceCaches[tt].reload()},i.prototype._updateSources=function(tt){for(var et in this.sourceCaches)this.sourceCaches[et].update(tt)},i.prototype._generateCollisionBoxes=function(){for(var tt in this.sourceCaches)this._reloadSource(tt)},i.prototype._updatePlacement=function(et,nt,rt,it,ot){void 0===ot&&(ot=!1);for(var at=!1,st=!1,ct={},pt=0,ft=this._order;pt<ft.length;pt+=1){var dt=this._layers[ft[pt]];if("symbol"===dt.type){if(!ct[dt.source]){var mt=this.sourceCaches[dt.source];ct[dt.source]=mt.getRenderableIds(!0).map((function(tt){return mt.getTileByID(tt)})).sort((function(tt,et){return et.tileID.overscaledZ-tt.tileID.overscaledZ||(tt.tileID.isLessThan(et.tileID)?-1:1)}))}var yt=this.crossTileSymbolIndex.addLayer(dt,ct[dt.source],et.center.lng);at=at||yt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ot=ot||this._layerOrderChanged||0===rt)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(tt.browser.now(),et.zoom))&&(this.pauseablePlacement=new Ae(et,this._order,ot,nt,rt,it,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ct),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(tt.browser.now()),st=!0),at&&this.pauseablePlacement.placement.setStale()),st||at)for(var vt=0,Dt=this._order;vt<Dt.length;vt+=1){var Ot=this._layers[Dt[vt]];"symbol"===Ot.type&&this.placement.updateLayerOpacities(Ot,ct[Ot.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(tt.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var tt in this.sourceCaches)this.sourceCaches[tt].releaseSymbolFadeTiles()},i.prototype.getImages=function(tt,et,nt){this.imageManager.getImages(et.icons,nt),this._updateTilesForChangedImages();var rt=this.sourceCaches[et.source];rt&&rt.setDependencies(et.tileID.key,et.type,et.icons)},i.prototype.getGlyphs=function(tt,et,nt){this.glyphManager.getGlyphs(et.stacks,nt)},i.prototype.getResource=function(et,nt,rt){return tt.makeRequest(nt,rt)},i}(tt.Evented);Bs.getSourceType=function(tt){return Cn[tt]},Bs.setSourceType=function(tt,et){Cn[tt]=et},Bs.registerForPluginStateChange=tt.registerForPluginStateChange;var Fs=tt.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ns=gi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Vs=gi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Us=gi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),js=gi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Zs=gi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Js=gi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),du=gi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),vu=gi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),_u=gi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),wu=gi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Tu=gi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Fu=gi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),tl=gi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ol=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),sl=gi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),dl=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),gl=gi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),yl=gi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),vl=gi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),_l=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),xl=gi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),bl=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),wl=gi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Sl=gi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Cl=gi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),kl=gi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function gi(tt,et){var nt=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,rt=et.match(/attribute ([\w]+) ([\w]+)/g),it=tt.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ot=et.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),at=ot?ot.concat(it):it,st={};return{fragmentSource:tt=tt.replace(nt,(function(tt,et,nt,rt,it){return st[it]=!0,"define"===et?"\n#ifndef HAS_UNIFORM_u_"+it+"\nvarying "+nt+" "+rt+" "+it+";\n#else\nuniform "+nt+" "+rt+" u_"+it+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+it+"\n    "+nt+" "+rt+" "+it+" = u_"+it+";\n#endif\n"})),vertexSource:et=et.replace(nt,(function(tt,et,nt,rt,it){var ot="float"===rt?"vec2":"vec4",at=it.match(/color/)?"color":ot;return st[it]?"define"===et?"\n#ifndef HAS_UNIFORM_u_"+it+"\nuniform lowp float u_"+it+"_t;\nattribute "+nt+" "+ot+" a_"+it+";\nvarying "+nt+" "+rt+" "+it+";\n#else\nuniform "+nt+" "+rt+" u_"+it+";\n#endif\n":"vec4"===at?"\n#ifndef HAS_UNIFORM_u_"+it+"\n    "+it+" = a_"+it+";\n#else\n    "+nt+" "+rt+" "+it+" = u_"+it+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+it+"\n    "+it+" = unpack_mix_"+at+"(a_"+it+", u_"+it+"_t);\n#else\n    "+nt+" "+rt+" "+it+" = u_"+it+";\n#endif\n":"define"===et?"\n#ifndef HAS_UNIFORM_u_"+it+"\nuniform lowp float u_"+it+"_t;\nattribute "+nt+" "+ot+" a_"+it+";\n#else\nuniform "+nt+" "+rt+" u_"+it+";\n#endif\n":"vec4"===at?"\n#ifndef HAS_UNIFORM_u_"+it+"\n    "+nt+" "+rt+" "+it+" = a_"+it+";\n#else\n    "+nt+" "+rt+" "+it+" = u_"+it+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+it+"\n    "+nt+" "+rt+" "+it+" = unpack_mix_"+at+"(a_"+it+", u_"+it+"_t);\n#else\n    "+nt+" "+rt+" "+it+" = u_"+it+";\n#endif\n"})),staticAttributes:rt,staticUniforms:at}}var Il=Object.freeze({__proto__:null,prelude:Ns,background:Vs,backgroundPattern:Us,circle:js,clippingMask:Zs,heatmap:Js,heatmapTexture:du,collisionBox:vu,collisionCircle:_u,debug:wu,fill:Tu,fillOutline:Fu,fillOutlinePattern:tl,fillPattern:ol,fillExtrusion:sl,fillExtrusionPattern:dl,hillshadePrepare:gl,hillshade:yl,line:vl,lineGradient:_l,linePattern:xl,lineSDF:bl,raster:wl,symbolIcon:Sl,symbolSDF:Cl,symbolTextAndIcon:kl}),yi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function xi(tt){for(var et=[],nt=0;nt<tt.length;nt++)if(null!==tt[nt]){var rt=tt[nt].split(" ");et.push(rt.pop())}return et}yi.prototype.bind=function(tt,et,nt,rt,it,ot,at,st){this.context=tt;for(var ct=this.boundPaintVertexBuffers.length!==rt.length,pt=0;!ct&&pt<rt.length;pt++)this.boundPaintVertexBuffers[pt]!==rt[pt]&&(ct=!0);tt.extVertexArrayObject&&this.vao&&this.boundProgram===et&&this.boundLayoutVertexBuffer===nt&&!ct&&this.boundIndexBuffer===it&&this.boundVertexOffset===ot&&this.boundDynamicVertexBuffer===at&&this.boundDynamicVertexBuffer2===st?(tt.bindVertexArrayOES.set(this.vao),at&&at.bind(),it&&it.dynamicDraw&&it.bind(),st&&st.bind()):this.freshBind(et,nt,rt,it,ot,at,st)},yi.prototype.freshBind=function(tt,et,nt,rt,it,ot,at){var st,ct=tt.numAttributes,pt=this.context,ft=pt.gl;if(pt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=pt.extVertexArrayObject.createVertexArrayOES(),pt.bindVertexArrayOES.set(this.vao),st=0,this.boundProgram=tt,this.boundLayoutVertexBuffer=et,this.boundPaintVertexBuffers=nt,this.boundIndexBuffer=rt,this.boundVertexOffset=it,this.boundDynamicVertexBuffer=ot,this.boundDynamicVertexBuffer2=at;else{st=pt.currentNumAttributes||0;for(var dt=ct;dt<st;dt++)ft.disableVertexAttribArray(dt)}et.enableAttributes(ft,tt);for(var mt=0,yt=nt;mt<yt.length;mt+=1)yt[mt].enableAttributes(ft,tt);ot&&ot.enableAttributes(ft,tt),at&&at.enableAttributes(ft,tt),et.bind(),et.setVertexAttribPointers(ft,tt,it);for(var vt=0,Dt=nt;vt<Dt.length;vt+=1){var Ot=Dt[vt];Ot.bind(),Ot.setVertexAttribPointers(ft,tt,it)}ot&&(ot.bind(),ot.setVertexAttribPointers(ft,tt,it)),rt&&rt.bind(),at&&(at.bind(),at.setVertexAttribPointers(ft,tt,it)),pt.currentNumAttributes=ct},yi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var bi=function(tt,et,nt,rt,it,ot){var at=tt.gl;this.program=at.createProgram();for(var st=xi(nt.staticAttributes),ct=rt?rt.getBinderAttributes():[],pt=st.concat(ct),ft=nt.staticUniforms?xi(nt.staticUniforms):[],dt=rt?rt.getBinderUniforms():[],mt=[],yt=0,vt=ft.concat(dt);yt<vt.length;yt+=1){var Dt=vt[yt];mt.indexOf(Dt)<0&&mt.push(Dt)}var Ot=rt?rt.defines():[];ot&&Ot.push("#define OVERDRAW_INSPECTOR;");var Rt=Ot.concat(Ns.fragmentSource,nt.fragmentSource).join("\n"),Bt=Ot.concat(Ns.vertexSource,nt.vertexSource).join("\n"),Ne=at.createShader(at.FRAGMENT_SHADER);if(at.isContextLost())this.failedToCreate=!0;else{at.shaderSource(Ne,Rt),at.compileShader(Ne),at.attachShader(this.program,Ne);var rn=at.createShader(at.VERTEX_SHADER);if(at.isContextLost())this.failedToCreate=!0;else{at.shaderSource(rn,Bt),at.compileShader(rn),at.attachShader(this.program,rn),this.attributes={};var vn={};this.numAttributes=pt.length;for(var bn=0;bn<this.numAttributes;bn++)pt[bn]&&(at.bindAttribLocation(this.program,bn,pt[bn]),this.attributes[pt[bn]]=bn);at.linkProgram(this.program),at.deleteShader(rn),at.deleteShader(Ne);for(var Tn=0;Tn<mt.length;Tn++){var Cn=mt[Tn];if(Cn&&!vn[Cn]){var Ln=at.getUniformLocation(this.program,Cn);Ln&&(vn[Cn]=Ln)}}this.fixedUniforms=it(tt,vn),this.binderUniforms=rt?rt.getUniforms(tt,vn):[]}}};function wi(tt,et,nt){var rt=1/pe(nt,1,et.transform.tileZoom),it=Math.pow(2,nt.tileID.overscaledZ),ot=nt.tileSize*Math.pow(2,et.transform.tileZoom)/it,at=ot*(nt.tileID.canonical.x+nt.tileID.wrap*it),st=ot*nt.tileID.canonical.y;return{u_image:0,u_texsize:nt.imageAtlasTexture.size,u_scale:[rt,tt.fromScale,tt.toScale],u_fade:tt.t,u_pixel_coord_upper:[at>>16,st>>16],u_pixel_coord_lower:[65535&at,65535&st]}}bi.prototype.draw=function(tt,et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt,yt,vt,Dt){var Ot,Rt=tt.gl;if(!this.failedToCreate){for(var Bt in tt.program.set(this.program),tt.setDepthMode(nt),tt.setStencilMode(rt),tt.setColorMode(it),tt.setCullFace(ot),this.fixedUniforms)this.fixedUniforms[Bt].set(at[Bt]);yt&&yt.setUniforms(tt,this.binderUniforms,dt,{zoom:mt});for(var Ne=(Ot={},Ot[Rt.LINES]=2,Ot[Rt.TRIANGLES]=3,Ot[Rt.LINE_STRIP]=1,Ot)[et],rn=0,vn=ft.get();rn<vn.length;rn+=1){var bn=vn[rn],Tn=bn.vaos||(bn.vaos={});(Tn[st]||(Tn[st]=new yi)).bind(tt,this,ct,yt?yt.getPaintVertexBuffers():[],pt,bn.vertexOffset,vt,Dt),Rt.drawElements(et,bn.primitiveLength*Ne,Rt.UNSIGNED_SHORT,bn.primitiveOffset*Ne*2)}}};var Ti=function(et,nt,rt,it){var ot=nt.style.light,at=ot.properties.get("position"),st=[at.x,at.y,at.z],ct=tt.create$1();"viewport"===ot.properties.get("anchor")&&tt.fromRotation(ct,-nt.transform.angle),tt.transformMat3(st,st,ct);var pt=ot.properties.get("color");return{u_matrix:et,u_lightpos:st,u_lightintensity:ot.properties.get("intensity"),u_lightcolor:[pt.r,pt.g,pt.b],u_vertical_gradient:+rt,u_opacity:it}},Ei=function(et,nt,rt,it,ot,at,st){return tt.extend(Ti(et,nt,rt,it),wi(at,nt,st),{u_height_factor:-Math.pow(2,ot.overscaledZ)/st.tileSize/8})},Ii=function(tt){return{u_matrix:tt}},Pi=function(et,nt,rt,it){return tt.extend(Ii(et),wi(rt,nt,it))},Si=function(tt,et){return{u_matrix:tt,u_world:et}},Ci=function(et,nt,rt,it,ot){return tt.extend(Pi(et,nt,rt,it),{u_world:ot})},zi=function(et,nt,rt,it){var ot,at,st=et.transform;if("map"===it.paint.get("circle-pitch-alignment")){var ct=pe(rt,1,st.zoom);ot=!0,at=[ct,ct]}else ot=!1,at=st.pixelsToGLUnits;return{u_camera_to_center_distance:st.cameraToCenterDistance,u_scale_with_map:+("map"===it.paint.get("circle-pitch-scale")),u_matrix:et.translatePosMatrix(nt.posMatrix,rt,it.paint.get("circle-translate"),it.paint.get("circle-translate-anchor")),u_pitch_with_map:+ot,u_device_pixel_ratio:tt.browser.devicePixelRatio,u_extrude_scale:at}},Di=function(tt,et,nt){var rt=pe(nt,1,et.zoom),it=Math.pow(2,et.zoom-nt.tileID.overscaledZ),ot=nt.tileID.overscaleFactor();return{u_matrix:tt,u_camera_to_center_distance:et.cameraToCenterDistance,u_pixels_to_tile_units:rt,u_extrude_scale:[et.pixelsToGLUnits[0]/(rt*it),et.pixelsToGLUnits[1]/(rt*it)],u_overscale_factor:ot}},Mi=function(tt,et,nt){return{u_matrix:tt,u_inv_matrix:et,u_camera_to_center_distance:nt.cameraToCenterDistance,u_viewport_size:[nt.width,nt.height]}},Li=function(tt,et,nt){return void 0===nt&&(nt=1),{u_matrix:tt,u_color:et,u_overlay:0,u_overlay_scale:nt}},Ai=function(tt){return{u_matrix:tt}},Ri=function(tt,et,nt,rt){return{u_matrix:tt,u_extrude_scale:pe(et,1,nt),u_intensity:rt}},ki=function(et,nt,rt){var it=et.transform;return{u_matrix:Ni(et,nt,rt),u_ratio:1/pe(nt,1,it.zoom),u_device_pixel_ratio:tt.browser.devicePixelRatio,u_units_to_pixels:[1/it.pixelsToGLUnits[0],1/it.pixelsToGLUnits[1]]}},Bi=function(et,nt,rt){return tt.extend(ki(et,nt,rt),{u_image:0})},Oi=function(et,nt,rt,it){var ot=et.transform,at=Ui(nt,ot);return{u_matrix:Ni(et,nt,rt),u_texsize:nt.imageAtlasTexture.size,u_ratio:1/pe(nt,1,ot.zoom),u_device_pixel_ratio:tt.browser.devicePixelRatio,u_image:0,u_scale:[at,it.fromScale,it.toScale],u_fade:it.t,u_units_to_pixels:[1/ot.pixelsToGLUnits[0],1/ot.pixelsToGLUnits[1]]}},Fi=function(et,nt,rt,it,ot){var at=et.lineAtlas,st=Ui(nt,et.transform),ct="round"===rt.layout.get("line-cap"),pt=at.getDash(it.from,ct),ft=at.getDash(it.to,ct),dt=pt.width*ot.fromScale,mt=ft.width*ot.toScale;return tt.extend(ki(et,nt,rt),{u_patternscale_a:[st/dt,-pt.height/2],u_patternscale_b:[st/mt,-ft.height/2],u_sdfgamma:at.width/(256*Math.min(dt,mt)*tt.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:pt.y,u_tex_y_b:ft.y,u_mix:ot.t})};function Ui(tt,et){return 1/pe(tt,1,et.tileZoom)}function Ni(tt,et,nt){return tt.translatePosMatrix(et.tileID.posMatrix,et,nt.paint.get("line-translate"),nt.paint.get("line-translate-anchor"))}var Zi=function(tt,et,nt,rt,it){return{u_matrix:tt,u_tl_parent:et,u_scale_parent:nt,u_buffer_scale:1,u_fade_t:rt.mix,u_opacity:rt.opacity*it.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:it.paint.get("raster-brightness-min"),u_brightness_high:it.paint.get("raster-brightness-max"),u_saturation_factor:(at=it.paint.get("raster-saturation"),at>0?1-1/(1.001-at):-at),u_contrast_factor:(ot=it.paint.get("raster-contrast"),ot>0?1/(1-ot):1+ot),u_spin_weights:ji(it.paint.get("raster-hue-rotate"))};var ot,at};function ji(tt){tt*=Math.PI/180;var et=Math.sin(tt),nt=Math.cos(tt);return[(2*nt+1)/3,(-Math.sqrt(3)*et-nt+1)/3,(Math.sqrt(3)*et-nt+1)/3]}var Al,Vi=function(tt,et,nt,rt,it,ot,at,st,ct,pt){var ft=it.transform;return{u_is_size_zoom_constant:+("constant"===tt||"source"===tt),u_is_size_feature_constant:+("constant"===tt||"camera"===tt),u_size_t:et?et.uSizeT:0,u_size:et?et.uSize:0,u_camera_to_center_distance:ft.cameraToCenterDistance,u_pitch:ft.pitch/360*2*Math.PI,u_rotate_symbol:+nt,u_aspect_ratio:ft.width/ft.height,u_fade_change:it.options.fadeDuration?it.symbolFadeChange:1,u_matrix:ot,u_label_plane_matrix:at,u_coord_matrix:st,u_is_text:+ct,u_pitch_with_map:+rt,u_texsize:pt,u_texture:0}},Gi=function(et,nt,rt,it,ot,at,st,ct,pt,ft,dt){var mt=ot.transform;return tt.extend(Vi(et,nt,rt,it,ot,at,st,ct,pt,ft),{u_gamma_scale:it?Math.cos(mt._pitch)*mt.cameraToCenterDistance:1,u_device_pixel_ratio:tt.browser.devicePixelRatio,u_is_halo:+dt})},Wi=function(et,nt,rt,it,ot,at,st,ct,pt,ft){return tt.extend(Gi(et,nt,rt,it,ot,at,st,ct,!0,pt,!0),{u_texsize_icon:ft,u_texture_icon:1})},Xi=function(tt,et,nt){return{u_matrix:tt,u_opacity:et,u_color:nt}},Hi=function(et,nt,rt,it,ot,at){return tt.extend(function(tt,et,nt,rt){var it=nt.imageManager.getPattern(tt.from.toString()),ot=nt.imageManager.getPattern(tt.to.toString()),at=nt.imageManager.getPixelSize(),st=at.width,ct=at.height,pt=Math.pow(2,rt.tileID.overscaledZ),ft=rt.tileSize*Math.pow(2,nt.transform.tileZoom)/pt,dt=ft*(rt.tileID.canonical.x+rt.tileID.wrap*pt),mt=ft*rt.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:it.tl,u_pattern_br_a:it.br,u_pattern_tl_b:ot.tl,u_pattern_br_b:ot.br,u_texsize:[st,ct],u_mix:et.t,u_pattern_size_a:it.displaySize,u_pattern_size_b:ot.displaySize,u_scale_a:et.fromScale,u_scale_b:et.toScale,u_tile_units_to_pixels:1/pe(rt,1,nt.transform.tileZoom),u_pixel_coord_upper:[dt>>16,mt>>16],u_pixel_coord_lower:[65535&dt,65535&mt]}}(it,at,rt,ot),{u_matrix:et,u_opacity:nt})},zl={fillExtrusion:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_lightpos:new tt.Uniform3f(et,nt.u_lightpos),u_lightintensity:new tt.Uniform1f(et,nt.u_lightintensity),u_lightcolor:new tt.Uniform3f(et,nt.u_lightcolor),u_vertical_gradient:new tt.Uniform1f(et,nt.u_vertical_gradient),u_opacity:new tt.Uniform1f(et,nt.u_opacity)}},fillExtrusionPattern:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_lightpos:new tt.Uniform3f(et,nt.u_lightpos),u_lightintensity:new tt.Uniform1f(et,nt.u_lightintensity),u_lightcolor:new tt.Uniform3f(et,nt.u_lightcolor),u_vertical_gradient:new tt.Uniform1f(et,nt.u_vertical_gradient),u_height_factor:new tt.Uniform1f(et,nt.u_height_factor),u_image:new tt.Uniform1i(et,nt.u_image),u_texsize:new tt.Uniform2f(et,nt.u_texsize),u_pixel_coord_upper:new tt.Uniform2f(et,nt.u_pixel_coord_upper),u_pixel_coord_lower:new tt.Uniform2f(et,nt.u_pixel_coord_lower),u_scale:new tt.Uniform3f(et,nt.u_scale),u_fade:new tt.Uniform1f(et,nt.u_fade),u_opacity:new tt.Uniform1f(et,nt.u_opacity)}},fill:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix)}},fillPattern:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_image:new tt.Uniform1i(et,nt.u_image),u_texsize:new tt.Uniform2f(et,nt.u_texsize),u_pixel_coord_upper:new tt.Uniform2f(et,nt.u_pixel_coord_upper),u_pixel_coord_lower:new tt.Uniform2f(et,nt.u_pixel_coord_lower),u_scale:new tt.Uniform3f(et,nt.u_scale),u_fade:new tt.Uniform1f(et,nt.u_fade)}},fillOutline:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_world:new tt.Uniform2f(et,nt.u_world)}},fillOutlinePattern:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_world:new tt.Uniform2f(et,nt.u_world),u_image:new tt.Uniform1i(et,nt.u_image),u_texsize:new tt.Uniform2f(et,nt.u_texsize),u_pixel_coord_upper:new tt.Uniform2f(et,nt.u_pixel_coord_upper),u_pixel_coord_lower:new tt.Uniform2f(et,nt.u_pixel_coord_lower),u_scale:new tt.Uniform3f(et,nt.u_scale),u_fade:new tt.Uniform1f(et,nt.u_fade)}},circle:function(et,nt){return{u_camera_to_center_distance:new tt.Uniform1f(et,nt.u_camera_to_center_distance),u_scale_with_map:new tt.Uniform1i(et,nt.u_scale_with_map),u_pitch_with_map:new tt.Uniform1i(et,nt.u_pitch_with_map),u_extrude_scale:new tt.Uniform2f(et,nt.u_extrude_scale),u_device_pixel_ratio:new tt.Uniform1f(et,nt.u_device_pixel_ratio),u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix)}},collisionBox:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_camera_to_center_distance:new tt.Uniform1f(et,nt.u_camera_to_center_distance),u_pixels_to_tile_units:new tt.Uniform1f(et,nt.u_pixels_to_tile_units),u_extrude_scale:new tt.Uniform2f(et,nt.u_extrude_scale),u_overscale_factor:new tt.Uniform1f(et,nt.u_overscale_factor)}},collisionCircle:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_inv_matrix:new tt.UniformMatrix4f(et,nt.u_inv_matrix),u_camera_to_center_distance:new tt.Uniform1f(et,nt.u_camera_to_center_distance),u_viewport_size:new tt.Uniform2f(et,nt.u_viewport_size)}},debug:function(et,nt){return{u_color:new tt.UniformColor(et,nt.u_color),u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_overlay:new tt.Uniform1i(et,nt.u_overlay),u_overlay_scale:new tt.Uniform1f(et,nt.u_overlay_scale)}},clippingMask:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix)}},heatmap:function(et,nt){return{u_extrude_scale:new tt.Uniform1f(et,nt.u_extrude_scale),u_intensity:new tt.Uniform1f(et,nt.u_intensity),u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix)}},heatmapTexture:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_world:new tt.Uniform2f(et,nt.u_world),u_image:new tt.Uniform1i(et,nt.u_image),u_color_ramp:new tt.Uniform1i(et,nt.u_color_ramp),u_opacity:new tt.Uniform1f(et,nt.u_opacity)}},hillshade:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_image:new tt.Uniform1i(et,nt.u_image),u_latrange:new tt.Uniform2f(et,nt.u_latrange),u_light:new tt.Uniform2f(et,nt.u_light),u_shadow:new tt.UniformColor(et,nt.u_shadow),u_highlight:new tt.UniformColor(et,nt.u_highlight),u_accent:new tt.UniformColor(et,nt.u_accent)}},hillshadePrepare:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_image:new tt.Uniform1i(et,nt.u_image),u_dimension:new tt.Uniform2f(et,nt.u_dimension),u_zoom:new tt.Uniform1f(et,nt.u_zoom),u_maxzoom:new tt.Uniform1f(et,nt.u_maxzoom),u_unpack:new tt.Uniform4f(et,nt.u_unpack)}},line:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_ratio:new tt.Uniform1f(et,nt.u_ratio),u_device_pixel_ratio:new tt.Uniform1f(et,nt.u_device_pixel_ratio),u_units_to_pixels:new tt.Uniform2f(et,nt.u_units_to_pixels)}},lineGradient:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_ratio:new tt.Uniform1f(et,nt.u_ratio),u_device_pixel_ratio:new tt.Uniform1f(et,nt.u_device_pixel_ratio),u_units_to_pixels:new tt.Uniform2f(et,nt.u_units_to_pixels),u_image:new tt.Uniform1i(et,nt.u_image)}},linePattern:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_texsize:new tt.Uniform2f(et,nt.u_texsize),u_ratio:new tt.Uniform1f(et,nt.u_ratio),u_device_pixel_ratio:new tt.Uniform1f(et,nt.u_device_pixel_ratio),u_image:new tt.Uniform1i(et,nt.u_image),u_units_to_pixels:new tt.Uniform2f(et,nt.u_units_to_pixels),u_scale:new tt.Uniform3f(et,nt.u_scale),u_fade:new tt.Uniform1f(et,nt.u_fade)}},lineSDF:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_ratio:new tt.Uniform1f(et,nt.u_ratio),u_device_pixel_ratio:new tt.Uniform1f(et,nt.u_device_pixel_ratio),u_units_to_pixels:new tt.Uniform2f(et,nt.u_units_to_pixels),u_patternscale_a:new tt.Uniform2f(et,nt.u_patternscale_a),u_patternscale_b:new tt.Uniform2f(et,nt.u_patternscale_b),u_sdfgamma:new tt.Uniform1f(et,nt.u_sdfgamma),u_image:new tt.Uniform1i(et,nt.u_image),u_tex_y_a:new tt.Uniform1f(et,nt.u_tex_y_a),u_tex_y_b:new tt.Uniform1f(et,nt.u_tex_y_b),u_mix:new tt.Uniform1f(et,nt.u_mix)}},raster:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_tl_parent:new tt.Uniform2f(et,nt.u_tl_parent),u_scale_parent:new tt.Uniform1f(et,nt.u_scale_parent),u_buffer_scale:new tt.Uniform1f(et,nt.u_buffer_scale),u_fade_t:new tt.Uniform1f(et,nt.u_fade_t),u_opacity:new tt.Uniform1f(et,nt.u_opacity),u_image0:new tt.Uniform1i(et,nt.u_image0),u_image1:new tt.Uniform1i(et,nt.u_image1),u_brightness_low:new tt.Uniform1f(et,nt.u_brightness_low),u_brightness_high:new tt.Uniform1f(et,nt.u_brightness_high),u_saturation_factor:new tt.Uniform1f(et,nt.u_saturation_factor),u_contrast_factor:new tt.Uniform1f(et,nt.u_contrast_factor),u_spin_weights:new tt.Uniform3f(et,nt.u_spin_weights)}},symbolIcon:function(et,nt){return{u_is_size_zoom_constant:new tt.Uniform1i(et,nt.u_is_size_zoom_constant),u_is_size_feature_constant:new tt.Uniform1i(et,nt.u_is_size_feature_constant),u_size_t:new tt.Uniform1f(et,nt.u_size_t),u_size:new tt.Uniform1f(et,nt.u_size),u_camera_to_center_distance:new tt.Uniform1f(et,nt.u_camera_to_center_distance),u_pitch:new tt.Uniform1f(et,nt.u_pitch),u_rotate_symbol:new tt.Uniform1i(et,nt.u_rotate_symbol),u_aspect_ratio:new tt.Uniform1f(et,nt.u_aspect_ratio),u_fade_change:new tt.Uniform1f(et,nt.u_fade_change),u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_label_plane_matrix:new tt.UniformMatrix4f(et,nt.u_label_plane_matrix),u_coord_matrix:new tt.UniformMatrix4f(et,nt.u_coord_matrix),u_is_text:new tt.Uniform1i(et,nt.u_is_text),u_pitch_with_map:new tt.Uniform1i(et,nt.u_pitch_with_map),u_texsize:new tt.Uniform2f(et,nt.u_texsize),u_texture:new tt.Uniform1i(et,nt.u_texture)}},symbolSDF:function(et,nt){return{u_is_size_zoom_constant:new tt.Uniform1i(et,nt.u_is_size_zoom_constant),u_is_size_feature_constant:new tt.Uniform1i(et,nt.u_is_size_feature_constant),u_size_t:new tt.Uniform1f(et,nt.u_size_t),u_size:new tt.Uniform1f(et,nt.u_size),u_camera_to_center_distance:new tt.Uniform1f(et,nt.u_camera_to_center_distance),u_pitch:new tt.Uniform1f(et,nt.u_pitch),u_rotate_symbol:new tt.Uniform1i(et,nt.u_rotate_symbol),u_aspect_ratio:new tt.Uniform1f(et,nt.u_aspect_ratio),u_fade_change:new tt.Uniform1f(et,nt.u_fade_change),u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_label_plane_matrix:new tt.UniformMatrix4f(et,nt.u_label_plane_matrix),u_coord_matrix:new tt.UniformMatrix4f(et,nt.u_coord_matrix),u_is_text:new tt.Uniform1i(et,nt.u_is_text),u_pitch_with_map:new tt.Uniform1i(et,nt.u_pitch_with_map),u_texsize:new tt.Uniform2f(et,nt.u_texsize),u_texture:new tt.Uniform1i(et,nt.u_texture),u_gamma_scale:new tt.Uniform1f(et,nt.u_gamma_scale),u_device_pixel_ratio:new tt.Uniform1f(et,nt.u_device_pixel_ratio),u_is_halo:new tt.Uniform1i(et,nt.u_is_halo)}},symbolTextAndIcon:function(et,nt){return{u_is_size_zoom_constant:new tt.Uniform1i(et,nt.u_is_size_zoom_constant),u_is_size_feature_constant:new tt.Uniform1i(et,nt.u_is_size_feature_constant),u_size_t:new tt.Uniform1f(et,nt.u_size_t),u_size:new tt.Uniform1f(et,nt.u_size),u_camera_to_center_distance:new tt.Uniform1f(et,nt.u_camera_to_center_distance),u_pitch:new tt.Uniform1f(et,nt.u_pitch),u_rotate_symbol:new tt.Uniform1i(et,nt.u_rotate_symbol),u_aspect_ratio:new tt.Uniform1f(et,nt.u_aspect_ratio),u_fade_change:new tt.Uniform1f(et,nt.u_fade_change),u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_label_plane_matrix:new tt.UniformMatrix4f(et,nt.u_label_plane_matrix),u_coord_matrix:new tt.UniformMatrix4f(et,nt.u_coord_matrix),u_is_text:new tt.Uniform1i(et,nt.u_is_text),u_pitch_with_map:new tt.Uniform1i(et,nt.u_pitch_with_map),u_texsize:new tt.Uniform2f(et,nt.u_texsize),u_texsize_icon:new tt.Uniform2f(et,nt.u_texsize_icon),u_texture:new tt.Uniform1i(et,nt.u_texture),u_texture_icon:new tt.Uniform1i(et,nt.u_texture_icon),u_gamma_scale:new tt.Uniform1f(et,nt.u_gamma_scale),u_device_pixel_ratio:new tt.Uniform1f(et,nt.u_device_pixel_ratio),u_is_halo:new tt.Uniform1i(et,nt.u_is_halo)}},background:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_opacity:new tt.Uniform1f(et,nt.u_opacity),u_color:new tt.UniformColor(et,nt.u_color)}},backgroundPattern:function(et,nt){return{u_matrix:new tt.UniformMatrix4f(et,nt.u_matrix),u_opacity:new tt.Uniform1f(et,nt.u_opacity),u_image:new tt.Uniform1i(et,nt.u_image),u_pattern_tl_a:new tt.Uniform2f(et,nt.u_pattern_tl_a),u_pattern_br_a:new tt.Uniform2f(et,nt.u_pattern_br_a),u_pattern_tl_b:new tt.Uniform2f(et,nt.u_pattern_tl_b),u_pattern_br_b:new tt.Uniform2f(et,nt.u_pattern_br_b),u_texsize:new tt.Uniform2f(et,nt.u_texsize),u_mix:new tt.Uniform1f(et,nt.u_mix),u_pattern_size_a:new tt.Uniform2f(et,nt.u_pattern_size_a),u_pattern_size_b:new tt.Uniform2f(et,nt.u_pattern_size_b),u_scale_a:new tt.Uniform1f(et,nt.u_scale_a),u_scale_b:new tt.Uniform1f(et,nt.u_scale_b),u_pixel_coord_upper:new tt.Uniform2f(et,nt.u_pixel_coord_upper),u_pixel_coord_lower:new tt.Uniform2f(et,nt.u_pixel_coord_lower),u_tile_units_to_pixels:new tt.Uniform1f(et,nt.u_tile_units_to_pixels)}}};function Yi(et,nt,rt,it,ot,at,st){for(var ct=et.context,pt=ct.gl,ft=et.useProgram("collisionBox"),dt=[],mt=0,yt=0,vt=0;vt<it.length;vt++){var Dt=it[vt],Ot=nt.getTile(Dt),Rt=Ot.getBucket(rt);if(Rt){var Bt=Dt.posMatrix;0===ot[0]&&0===ot[1]||(Bt=et.translatePosMatrix(Dt.posMatrix,Ot,ot,at));var Ne=st?Rt.textCollisionBox:Rt.iconCollisionBox,rn=Rt.collisionCircleArray;if(rn.length>0){var vn=tt.create(),bn=Bt;tt.mul(vn,Rt.placementInvProjMatrix,et.transform.glCoordMatrix),tt.mul(vn,vn,Rt.placementViewportMatrix),dt.push({circleArray:rn,circleOffset:yt,transform:bn,invTransform:vn}),yt=mt+=rn.length/4}Ne&&ft.draw(ct,pt.LINES,It.disabled,Pt.disabled,et.colorModeForRenderPass(),Ct.disabled,Di(Bt,et.transform,Ot),rt.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,null,et.transform.zoom,null,null,Ne.collisionVertexBuffer)}}if(st&&dt.length){var Tn=et.useProgram("collisionCircle"),Cn=new tt.StructArrayLayout2f1f2i16;Cn.resize(4*mt),Cn._trim();for(var Ln=0,In=0,Mn=dt;In<Mn.length;In+=1)for(var zn=Mn[In],Bn=0;Bn<zn.circleArray.length/4;Bn++){var Fn=4*Bn,Nn=zn.circleArray[Fn+0],Vn=zn.circleArray[Fn+1],Wn=zn.circleArray[Fn+2],$n=zn.circleArray[Fn+3];Cn.emplace(Ln++,Nn,Vn,Wn,$n,0),Cn.emplace(Ln++,Nn,Vn,Wn,$n,1),Cn.emplace(Ln++,Nn,Vn,Wn,$n,2),Cn.emplace(Ln++,Nn,Vn,Wn,$n,3)}(!Al||Al.length<2*mt)&&(Al=function(et){var nt=2*et,rt=new tt.StructArrayLayout3ui6;rt.resize(nt),rt._trim();for(var it=0;it<nt;it++){var ot=6*it;rt.uint16[ot+0]=4*it+0,rt.uint16[ot+1]=4*it+1,rt.uint16[ot+2]=4*it+2,rt.uint16[ot+3]=4*it+2,rt.uint16[ot+4]=4*it+3,rt.uint16[ot+5]=4*it+0}return rt}(mt));for(var Yn=ct.createIndexBuffer(Al,!0),er=ct.createVertexBuffer(Cn,tt.collisionCircleLayout.members,!0),rr=0,vr=dt;rr<vr.length;rr+=1){var wr=vr[rr],Sr=Mi(wr.transform,wr.invTransform,et.transform);Tn.draw(ct,pt.TRIANGLES,It.disabled,Pt.disabled,et.colorModeForRenderPass(),Ct.disabled,Sr,rt.id,er,Yn,tt.SegmentVector.simpleSegment(0,2*wr.circleOffset,wr.circleArray.length,wr.circleArray.length/2),null,et.transform.zoom,null,null,null)}er.destroy(),Yn.destroy()}}var Fl=tt.identity(new Float32Array(16));function Qi(et,nt,rt,it,ot,at){var st=tt.getAnchorAlignment(et),ct=-(st.horizontalAlign-.5)*nt,pt=-(st.verticalAlign-.5)*rt,ft=tt.evaluateVariableOffset(et,it);return new tt.Point((ct/ot+ft[0])*at,(pt/ot+ft[1])*at)}function $i(et,nt,rt,it,ot,at,st,ct,pt,ft,dt){var mt=et.text.placedSymbolArray,yt=et.text.dynamicLayoutVertexArray,vt=et.icon.dynamicLayoutVertexArray,Dt={};yt.clear();for(var Ot=0;Ot<mt.length;Ot++){var Rt=mt.get(Ot),Bt=Rt.hidden||!Rt.crossTileID||et.allowVerticalPlacement&&!Rt.placedOrientation?null:it[Rt.crossTileID];if(Bt){var Ne=new tt.Point(Rt.anchorX,Rt.anchorY),rn=$t(Ne,rt?ct:st),vn=te(at.cameraToCenterDistance,rn.signedDistanceFromCamera),bn=ot.evaluateSizeForFeature(et.textSizeData,ft,Rt)*vn/tt.ONE_EM;rt&&(bn*=et.tilePixelRatio/pt);for(var Tn=Qi(Bt.anchor,Bt.width,Bt.height,Bt.textOffset,Bt.textBoxScale,bn),Cn=rt?$t(Ne.add(Tn),st).point:rn.point.add(nt?Tn.rotate(-at.angle):Tn),Ln=et.allowVerticalPlacement&&Rt.placedOrientation===tt.WritingMode.vertical?Math.PI/2:0,In=0;In<Rt.numGlyphs;In++)tt.addDynamicAttributes(yt,Cn,Ln);dt&&Rt.associatedIconIndex>=0&&(Dt[Rt.associatedIconIndex]={shiftedAnchor:Cn,angle:Ln})}else ce(Rt.numGlyphs,yt)}if(dt){vt.clear();for(var Mn=et.icon.placedSymbolArray,zn=0;zn<Mn.length;zn++){var Bn=Mn.get(zn);if(Bn.hidden)ce(Bn.numGlyphs,vt);else{var Fn=Dt[zn];if(Fn)for(var Nn=0;Nn<Bn.numGlyphs;Nn++)tt.addDynamicAttributes(vt,Fn.shiftedAnchor,Fn.angle);else ce(Bn.numGlyphs,vt)}}et.icon.dynamicLayoutVertexBuffer.updateData(vt)}et.text.dynamicLayoutVertexBuffer.updateData(yt)}function to(tt,et,nt){return nt.iconsInText&&et?"symbolTextAndIcon":tt?"symbolSDF":"symbolIcon"}function eo(et,nt,rt,it,ot,at,st,ct,pt,ft,dt,mt){for(var yt=et.context,vt=yt.gl,Dt=et.transform,Ot="map"===ct,Rt="map"===pt,Bt=Ot&&"point"!==rt.layout.get("symbol-placement"),Ne=Ot&&!Rt&&!Bt,rn=void 0!==rt.layout.get("symbol-sort-key").constantOr(1),vn=et.depthModeForSublayer(0,It.ReadOnly),bn=rt.layout.get("text-variable-anchor"),Tn=[],Cn=0,Ln=it;Cn<Ln.length;Cn+=1){var In=Ln[Cn],Mn=nt.getTile(In),zn=Mn.getBucket(rt);if(zn){var Bn=ot?zn.text:zn.icon;if(Bn&&Bn.segments.get().length){var Fn=Bn.programConfigurations.get(rt.id),Nn=ot||zn.sdfIcons,Vn=ot?zn.textSizeData:zn.iconSizeData,Wn=Rt||0!==Dt.pitch,$n=et.useProgram(to(Nn,ot,zn),Fn),Yn=tt.evaluateSizeForZoom(Vn,Dt.zoom),er=void 0,rr=[0,0],vr=void 0,wr=void 0,Sr=null,ii=void 0;if(ot)vr=Mn.glyphAtlasTexture,wr=vt.LINEAR,er=Mn.glyphAtlasTexture.size,zn.iconsInText&&(rr=Mn.imageAtlasTexture.size,Sr=Mn.imageAtlasTexture,ii=Wn||et.options.rotating||et.options.zooming||"composite"===Vn.kind||"camera"===Vn.kind?vt.LINEAR:vt.NEAREST);else{var qi=1!==rt.layout.get("icon-size").constantOr(0)||zn.iconsNeedLinear;vr=Mn.imageAtlasTexture,wr=Nn||et.options.rotating||et.options.zooming||qi||Wn?vt.LINEAR:vt.NEAREST,er=Mn.imageAtlasTexture.size}var uo=pe(Mn,1,et.transform.zoom),po=Jt(In.posMatrix,Rt,Ot,et.transform,uo),vo=Qt(In.posMatrix,Rt,Ot,et.transform,uo),So=bn&&zn.hasTextData(),ta="none"!==rt.layout.get("icon-text-fit")&&So&&zn.hasIconData();Bt&&ie(zn,In.posMatrix,et,ot,po,vo,Rt,ft);var na=et.translatePosMatrix(In.posMatrix,Mn,at,st),ia=Bt||ot&&bn||ta?Fl:po,sa=et.translatePosMatrix(vo,Mn,at,st,!0),la=Nn&&0!==rt.paint.get(ot?"text-halo-width":"icon-halo-width").constantOr(1),pa={program:$n,buffers:Bn,uniformValues:Nn?zn.iconsInText?Wi(Vn.kind,Yn,Ne,Rt,et,na,ia,sa,er,rr):Gi(Vn.kind,Yn,Ne,Rt,et,na,ia,sa,ot,er,!0):Vi(Vn.kind,Yn,Ne,Rt,et,na,ia,sa,ot,er),atlasTexture:vr,atlasTextureIcon:Sr,atlasInterpolation:wr,atlasInterpolationIcon:ii,isSDF:Nn,hasHalo:la};if(rn)for(var fa=0,ga=Bn.segments.get();fa<ga.length;fa+=1){var va=ga[fa];Tn.push({segments:new tt.SegmentVector([va]),sortKey:va.sortKey,state:pa})}else Tn.push({segments:Bn.segments,sortKey:0,state:pa})}}}rn&&Tn.sort((function(tt,et){return tt.sortKey-et.sortKey}));for(var _a=0,wa=Tn;_a<wa.length;_a+=1){var Aa=wa[_a],os=Aa.state;if(yt.activeTexture.set(vt.TEXTURE0),os.atlasTexture.bind(os.atlasInterpolation,vt.CLAMP_TO_EDGE),os.atlasTextureIcon&&(yt.activeTexture.set(vt.TEXTURE1),os.atlasTextureIcon&&os.atlasTextureIcon.bind(os.atlasInterpolationIcon,vt.CLAMP_TO_EDGE)),os.isSDF){var as=os.uniformValues;os.hasHalo&&(as.u_is_halo=1,io(os.buffers,Aa.segments,rt,et,os.program,vn,dt,mt,as)),as.u_is_halo=0}io(os.buffers,Aa.segments,rt,et,os.program,vn,dt,mt,os.uniformValues)}}function io(tt,et,nt,rt,it,ot,at,st,ct){var pt=rt.context;it.draw(pt,pt.gl.TRIANGLES,ot,at,st,Ct.disabled,ct,nt.id,tt.layoutVertexBuffer,tt.indexBuffer,et,nt.paint,rt.transform.zoom,tt.programConfigurations.get(nt.id),tt.dynamicLayoutVertexBuffer,tt.opacityVertexBuffer)}function oo(tt,et,nt,rt,it,ot,at){var st,ct,pt,ft,dt,mt=tt.context.gl,yt=nt.paint.get("fill-pattern"),vt=yt&&yt.constantOr(1),Dt=nt.getCrossfadeParameters();at?(ct=vt&&!nt.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",st=mt.LINES):(ct=vt?"fillPattern":"fill",st=mt.TRIANGLES);for(var Ot=0,Rt=rt;Ot<Rt.length;Ot+=1){var Bt=Rt[Ot],Ne=et.getTile(Bt);if(!vt||Ne.patternsLoaded()){var rn=Ne.getBucket(nt);if(rn){var vn=rn.programConfigurations.get(nt.id),bn=tt.useProgram(ct,vn);vt&&(tt.context.activeTexture.set(mt.TEXTURE0),Ne.imageAtlasTexture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE),vn.updatePaintBuffers(Dt));var Tn=yt.constantOr(null);if(Tn&&Ne.imageAtlas){var Cn=Ne.imageAtlas,Ln=Cn.patternPositions[Tn.to.toString()],In=Cn.patternPositions[Tn.from.toString()];Ln&&In&&vn.setConstantPatternPositions(Ln,In)}var Mn=tt.translatePosMatrix(Bt.posMatrix,Ne,nt.paint.get("fill-translate"),nt.paint.get("fill-translate-anchor"));if(at){ft=rn.indexBuffer2,dt=rn.segments2;var zn=[mt.drawingBufferWidth,mt.drawingBufferHeight];pt="fillOutlinePattern"===ct&&vt?Ci(Mn,tt,Dt,Ne,zn):Si(Mn,zn)}else ft=rn.indexBuffer,dt=rn.segments,pt=vt?Pi(Mn,tt,Dt,Ne):Ii(Mn);bn.draw(tt.context,st,it,tt.stencilModeForClipping(Bt),ot,Ct.disabled,pt,nt.id,rn.layoutVertexBuffer,ft,dt,nt.paint,tt.transform.zoom,vn)}}}}function ro(tt,et,nt,rt,it,ot,at){for(var st=tt.context,ct=st.gl,pt=nt.paint.get("fill-extrusion-pattern"),ft=pt.constantOr(1),dt=nt.getCrossfadeParameters(),mt=nt.paint.get("fill-extrusion-opacity"),yt=0,vt=rt;yt<vt.length;yt+=1){var Dt=vt[yt],Ot=et.getTile(Dt),Rt=Ot.getBucket(nt);if(Rt){var Bt=Rt.programConfigurations.get(nt.id),Ne=tt.useProgram(ft?"fillExtrusionPattern":"fillExtrusion",Bt);ft&&(tt.context.activeTexture.set(ct.TEXTURE0),Ot.imageAtlasTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),Bt.updatePaintBuffers(dt));var rn=pt.constantOr(null);if(rn&&Ot.imageAtlas){var vn=Ot.imageAtlas,bn=vn.patternPositions[rn.to.toString()],Tn=vn.patternPositions[rn.from.toString()];bn&&Tn&&Bt.setConstantPatternPositions(bn,Tn)}var Cn=tt.translatePosMatrix(Dt.posMatrix,Ot,nt.paint.get("fill-extrusion-translate"),nt.paint.get("fill-extrusion-translate-anchor")),Ln=nt.paint.get("fill-extrusion-vertical-gradient"),In=ft?Ei(Cn,tt,Ln,mt,Dt,dt,Ot):Ti(Cn,tt,Ln,mt);Ne.draw(st,st.gl.TRIANGLES,it,ot,at,Ct.backCCW,In,nt.id,Rt.layoutVertexBuffer,Rt.indexBuffer,Rt.segments,nt.paint,tt.transform.zoom,Bt)}}}function ao(et,nt,rt,it,ot,at){var st=et.context,ct=st.gl,pt=nt.fbo;if(pt){var ft=et.useProgram("hillshade");st.activeTexture.set(ct.TEXTURE0),ct.bindTexture(ct.TEXTURE_2D,pt.colorAttachment.get());var dt=function(et,nt,rt){var it=rt.paint.get("hillshade-shadow-color"),ot=rt.paint.get("hillshade-highlight-color"),at=rt.paint.get("hillshade-accent-color"),st=rt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===rt.paint.get("hillshade-illumination-anchor")&&(st-=et.transform.angle);var ct,pt,ft,dt=!et.options.moving;return{u_matrix:et.transform.calculatePosMatrix(nt.tileID.toUnwrapped(),dt),u_image:0,u_latrange:(ct=nt.tileID,pt=Math.pow(2,ct.canonical.z),ft=ct.canonical.y,[new tt.MercatorCoordinate(0,ft/pt).toLngLat().lat,new tt.MercatorCoordinate(0,(ft+1)/pt).toLngLat().lat]),u_light:[rt.paint.get("hillshade-exaggeration"),st],u_shadow:it,u_highlight:ot,u_accent:at}}(et,nt,rt);ft.draw(st,ct.TRIANGLES,it,ot,at,Ct.disabled,dt,rt.id,et.rasterBoundsBuffer,et.quadTriangleIndexBuffer,et.rasterBoundsSegments)}}function no(et,nt,rt,it,ot,at,st){var ct=et.context,pt=ct.gl,ft=nt.dem;if(ft&&ft.data){var dt=ft.dim,mt=ft.stride,yt=ft.getPixels();if(ct.activeTexture.set(pt.TEXTURE1),ct.pixelStoreUnpackPremultiplyAlpha.set(!1),nt.demTexture=nt.demTexture||et.getTileTexture(mt),nt.demTexture){var vt=nt.demTexture;vt.update(yt,{premultiply:!1}),vt.bind(pt.NEAREST,pt.CLAMP_TO_EDGE)}else nt.demTexture=new tt.Texture(ct,yt,pt.RGBA,{premultiply:!1}),nt.demTexture.bind(pt.NEAREST,pt.CLAMP_TO_EDGE);ct.activeTexture.set(pt.TEXTURE0);var Dt=nt.fbo;if(!Dt){var Ot=new tt.Texture(ct,{width:dt,height:dt,data:null},pt.RGBA);Ot.bind(pt.LINEAR,pt.CLAMP_TO_EDGE),(Dt=nt.fbo=ct.createFramebuffer(dt,dt,!0)).colorAttachment.set(Ot.texture)}ct.bindFramebuffer.set(Dt.framebuffer),ct.viewport.set([0,0,dt,dt]),et.useProgram("hillshadePrepare").draw(ct,pt.TRIANGLES,ot,at,st,Ct.disabled,function(et,nt,rt){var it=nt.stride,ot=tt.create();return tt.ortho(ot,0,tt.EXTENT,-tt.EXTENT,0,0,1),tt.translate(ot,ot,[0,-tt.EXTENT,0]),{u_matrix:ot,u_image:1,u_dimension:[it,it],u_zoom:et.overscaledZ,u_maxzoom:rt,u_unpack:nt.getUnpackVector()}}(nt.tileID,ft,it),rt.id,et.rasterBoundsBuffer,et.quadTriangleIndexBuffer,et.rasterBoundsSegments),nt.needsHillshadePrepare=!1}}function so(et,nt,rt,it,ot){var at=it.paint.get("raster-fade-duration");if(at>0){var st=tt.browser.now(),ct=(st-et.timeAdded)/at,pt=nt?(st-nt.timeAdded)/at:-1,ft=rt.getSource(),dt=ot.coveringZoomLevel({tileSize:ft.tileSize,roundZoom:ft.roundZoom}),mt=!nt||Math.abs(nt.tileID.overscaledZ-dt)>Math.abs(et.tileID.overscaledZ-dt),yt=mt&&et.refreshedUponExpiration?1:tt.clamp(mt?ct:1-pt,0,1);return et.refreshedUponExpiration&&ct>=1&&(et.refreshedUponExpiration=!1),nt?{opacity:1,mix:1-yt}:{opacity:yt,mix:0}}return{opacity:1,mix:0}}var Hl=new tt.Color(1,0,0,1),ac=new tt.Color(0,1,0,1),pc=new tt.Color(0,0,1,1),yc=new tt.Color(1,0,1,1),_c=new tt.Color(0,1,1,1);function _o(tt,et,nt,rt){mo(tt,0,et+nt/2,tt.transform.width,nt,rt)}function fo(tt,et,nt,rt){mo(tt,et-nt/2,0,nt,tt.transform.height,rt)}function mo(et,nt,rt,it,ot,at){var st=et.context,ct=st.gl;ct.enable(ct.SCISSOR_TEST),ct.scissor(nt*tt.browser.devicePixelRatio,rt*tt.browser.devicePixelRatio,it*tt.browser.devicePixelRatio,ot*tt.browser.devicePixelRatio),st.clear({color:at}),ct.disable(ct.SCISSOR_TEST)}function go(et,nt,rt){var it=et.context,ot=it.gl,at=rt.posMatrix,st=et.useProgram("debug"),ct=It.disabled,pt=Pt.disabled,ft=et.colorModeForRenderPass();it.activeTexture.set(ot.TEXTURE0),et.emptyTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),st.draw(it,ot.LINE_STRIP,ct,pt,ft,Ct.disabled,Li(at,tt.Color.red),"$debug",et.debugBuffer,et.tileBorderIndexBuffer,et.debugSegments);var dt=nt.getTileByID(rt.key).latestRawTileData,mt=Math.floor((dt&&dt.byteLength||0)/1024),yt=nt.getTile(rt).tileSize,vt=512/Math.min(yt,512)*(rt.overscaledZ/et.transform.zoom)*.5,Dt=rt.canonical.toString();rt.overscaledZ!==rt.canonical.z&&(Dt+=" => "+rt.overscaledZ),function(tt,et){tt.initDebugOverlayCanvas();var nt=tt.debugOverlayCanvas,rt=tt.context.gl,it=tt.debugOverlayCanvas.getContext("2d");it.clearRect(0,0,nt.width,nt.height),it.shadowColor="white",it.shadowBlur=2,it.lineWidth=1.5,it.strokeStyle="white",it.textBaseline="top",it.font="bold 36px Open Sans, sans-serif",it.fillText(et,5,5),it.strokeText(et,5,5),tt.debugOverlayTexture.update(nt),tt.debugOverlayTexture.bind(rt.LINEAR,rt.CLAMP_TO_EDGE)}(et,Dt+" "+mt+"kb"),st.draw(it,ot.TRIANGLES,ct,pt,St.alphaBlended,Ct.disabled,Li(at,tt.Color.transparent,vt),"$debug",et.debugBuffer,et.quadTriangleIndexBuffer,et.debugSegments)}var xc={symbol:function(et,nt,rt,it,ot){if("translucent"===et.renderPass){var at=Pt.disabled,st=et.colorModeForRenderPass();rt.layout.get("text-variable-anchor")&&function(et,nt,rt,it,ot,at,st){for(var ct=nt.transform,pt="map"===ot,ft="map"===at,dt=0,mt=et;dt<mt.length;dt+=1){var yt=mt[dt],vt=it.getTile(yt),Dt=vt.getBucket(rt);if(Dt&&Dt.text&&Dt.text.segments.get().length){var Ot=tt.evaluateSizeForZoom(Dt.textSizeData,ct.zoom),Rt=pe(vt,1,nt.transform.zoom),Bt=Jt(yt.posMatrix,ft,pt,nt.transform,Rt),Ne="none"!==rt.layout.get("icon-text-fit")&&Dt.hasIconData();if(Ot){var rn=Math.pow(2,ct.zoom-vt.tileID.overscaledZ);$i(Dt,pt,ft,st,tt.symbolSize,ct,Bt,yt.posMatrix,rn,Ot,Ne)}}}}(it,et,rt,nt,rt.layout.get("text-rotation-alignment"),rt.layout.get("text-pitch-alignment"),ot),0!==rt.paint.get("icon-opacity").constantOr(1)&&eo(et,nt,rt,it,!1,rt.paint.get("icon-translate"),rt.paint.get("icon-translate-anchor"),rt.layout.get("icon-rotation-alignment"),rt.layout.get("icon-pitch-alignment"),rt.layout.get("icon-keep-upright"),at,st),0!==rt.paint.get("text-opacity").constantOr(1)&&eo(et,nt,rt,it,!0,rt.paint.get("text-translate"),rt.paint.get("text-translate-anchor"),rt.layout.get("text-rotation-alignment"),rt.layout.get("text-pitch-alignment"),rt.layout.get("text-keep-upright"),at,st),nt.map.showCollisionBoxes&&(Yi(et,nt,rt,it,rt.paint.get("text-translate"),rt.paint.get("text-translate-anchor"),!0),Yi(et,nt,rt,it,rt.paint.get("icon-translate"),rt.paint.get("icon-translate-anchor"),!1))}},circle:function(et,nt,rt,it){if("translucent"===et.renderPass){var ot=rt.paint.get("circle-opacity"),at=rt.paint.get("circle-stroke-width"),st=rt.paint.get("circle-stroke-opacity"),ct=void 0!==rt.layout.get("circle-sort-key").constantOr(1);if(0!==ot.constantOr(1)||0!==at.constantOr(1)&&0!==st.constantOr(1)){for(var pt=et.context,ft=pt.gl,dt=et.depthModeForSublayer(0,It.ReadOnly),mt=Pt.disabled,yt=et.colorModeForRenderPass(),vt=[],Dt=0;Dt<it.length;Dt++){var Ot=it[Dt],Rt=nt.getTile(Ot),Bt=Rt.getBucket(rt);if(Bt){var Ne=Bt.programConfigurations.get(rt.id),rn={programConfiguration:Ne,program:et.useProgram("circle",Ne),layoutVertexBuffer:Bt.layoutVertexBuffer,indexBuffer:Bt.indexBuffer,uniformValues:zi(et,Ot,Rt,rt)};if(ct)for(var vn=0,bn=Bt.segments.get();vn<bn.length;vn+=1){var Tn=bn[vn];vt.push({segments:new tt.SegmentVector([Tn]),sortKey:Tn.sortKey,state:rn})}else vt.push({segments:Bt.segments,sortKey:0,state:rn})}}ct&&vt.sort((function(tt,et){return tt.sortKey-et.sortKey}));for(var Cn=0,Ln=vt;Cn<Ln.length;Cn+=1){var In=Ln[Cn],Mn=In.state;Mn.program.draw(pt,ft.TRIANGLES,dt,mt,yt,Ct.disabled,Mn.uniformValues,rt.id,Mn.layoutVertexBuffer,Mn.indexBuffer,In.segments,rt.paint,et.transform.zoom,Mn.programConfiguration)}}}},heatmap:function(et,nt,rt,it){if(0!==rt.paint.get("heatmap-opacity"))if("offscreen"===et.renderPass){var ot=et.context,at=ot.gl,st=Pt.disabled,ct=new St([at.ONE,at.ONE],tt.Color.transparent,[!0,!0,!0,!0]);!function(tt,et,nt){var rt=tt.gl;tt.activeTexture.set(rt.TEXTURE1),tt.viewport.set([0,0,et.width/4,et.height/4]);var it=nt.heatmapFbo;if(it)rt.bindTexture(rt.TEXTURE_2D,it.colorAttachment.get()),tt.bindFramebuffer.set(it.framebuffer);else{var ot=rt.createTexture();rt.bindTexture(rt.TEXTURE_2D,ot),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_WRAP_S,rt.CLAMP_TO_EDGE),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_WRAP_T,rt.CLAMP_TO_EDGE),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_MIN_FILTER,rt.LINEAR),rt.texParameteri(rt.TEXTURE_2D,rt.TEXTURE_MAG_FILTER,rt.LINEAR),it=nt.heatmapFbo=tt.createFramebuffer(et.width/4,et.height/4,!1),function(tt,et,nt,rt){var it=tt.gl;it.texImage2D(it.TEXTURE_2D,0,it.RGBA,et.width/4,et.height/4,0,it.RGBA,tt.extRenderToTextureHalfFloat?tt.extTextureHalfFloat.HALF_FLOAT_OES:it.UNSIGNED_BYTE,null),rt.colorAttachment.set(nt)}(tt,et,ot,it)}}(ot,et,rt),ot.clear({color:tt.Color.transparent});for(var pt=0;pt<it.length;pt++){var ft=it[pt];if(!nt.hasRenderableParent(ft)){var dt=nt.getTile(ft),mt=dt.getBucket(rt);if(mt){var yt=mt.programConfigurations.get(rt.id);et.useProgram("heatmap",yt).draw(ot,at.TRIANGLES,It.disabled,st,ct,Ct.disabled,Ri(ft.posMatrix,dt,et.transform.zoom,rt.paint.get("heatmap-intensity")),rt.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,rt.paint,et.transform.zoom,yt)}}}ot.viewport.set([0,0,et.width,et.height])}else"translucent"===et.renderPass&&(et.context.setColorMode(et.colorModeForRenderPass()),function(et,nt){var rt=et.context,it=rt.gl,ot=nt.heatmapFbo;if(ot){rt.activeTexture.set(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,ot.colorAttachment.get()),rt.activeTexture.set(it.TEXTURE1);var at=nt.colorRampTexture;at||(at=nt.colorRampTexture=new tt.Texture(rt,nt.colorRamp,it.RGBA)),at.bind(it.LINEAR,it.CLAMP_TO_EDGE),et.useProgram("heatmapTexture").draw(rt,it.TRIANGLES,It.disabled,Pt.disabled,et.colorModeForRenderPass(),Ct.disabled,function(et,nt,rt,it){var ot=tt.create();tt.ortho(ot,0,et.width,et.height,0,0,1);var at=et.context.gl;return{u_matrix:ot,u_world:[at.drawingBufferWidth,at.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:nt.paint.get("heatmap-opacity")}}(et,nt),nt.id,et.viewportBuffer,et.quadTriangleIndexBuffer,et.viewportSegments,nt.paint,et.transform.zoom)}}(et,rt))},line:function(et,nt,rt,it){if("translucent"===et.renderPass){var ot=rt.paint.get("line-opacity"),at=rt.paint.get("line-width");if(0!==ot.constantOr(1)&&0!==at.constantOr(1)){var st=et.depthModeForSublayer(0,It.ReadOnly),ct=et.colorModeForRenderPass(),pt=rt.paint.get("line-dasharray"),ft=rt.paint.get("line-pattern"),dt=ft.constantOr(1),mt=rt.paint.get("line-gradient"),yt=rt.getCrossfadeParameters(),vt=dt?"linePattern":pt?"lineSDF":mt?"lineGradient":"line",Dt=et.context,Ot=Dt.gl,Rt=!0;if(mt){Dt.activeTexture.set(Ot.TEXTURE0);var Bt=rt.gradientTexture;if(!rt.gradient)return;Bt||(Bt=rt.gradientTexture=new tt.Texture(Dt,rt.gradient,Ot.RGBA)),Bt.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE)}for(var Ne=0,rn=it;Ne<rn.length;Ne+=1){var vn=rn[Ne],bn=nt.getTile(vn);if(!dt||bn.patternsLoaded()){var Tn=bn.getBucket(rt);if(Tn){var Cn=Tn.programConfigurations.get(rt.id),Ln=et.context.program.get(),In=et.useProgram(vt,Cn),Mn=Rt||In.program!==Ln,zn=ft.constantOr(null);if(zn&&bn.imageAtlas){var Bn=bn.imageAtlas,Fn=Bn.patternPositions[zn.to.toString()],Nn=Bn.patternPositions[zn.from.toString()];Fn&&Nn&&Cn.setConstantPatternPositions(Fn,Nn)}var Vn=dt?Oi(et,bn,rt,yt):pt?Fi(et,bn,rt,pt,yt):mt?Bi(et,bn,rt):ki(et,bn,rt);dt?(Dt.activeTexture.set(Ot.TEXTURE0),bn.imageAtlasTexture.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE),Cn.updatePaintBuffers(yt)):pt&&(Mn||et.lineAtlas.dirty)&&(Dt.activeTexture.set(Ot.TEXTURE0),et.lineAtlas.bind(Dt)),In.draw(Dt,Ot.TRIANGLES,st,et.stencilModeForClipping(vn),ct,Ct.disabled,Vn,rt.id,Tn.layoutVertexBuffer,Tn.indexBuffer,Tn.segments,rt.paint,et.transform.zoom,Cn),Rt=!1}}}}}},fill:function(et,nt,rt,it){var ot=rt.paint.get("fill-color"),at=rt.paint.get("fill-opacity");if(0!==at.constantOr(1)){var st=et.colorModeForRenderPass(),ct=rt.paint.get("fill-pattern"),pt=et.opaquePassEnabledForLayer()&&!ct.constantOr(1)&&1===ot.constantOr(tt.Color.transparent).a&&1===at.constantOr(0)?"opaque":"translucent";if(et.renderPass===pt){var ft=et.depthModeForSublayer(1,"opaque"===et.renderPass?It.ReadWrite:It.ReadOnly);oo(et,nt,rt,it,ft,st,!1)}if("translucent"===et.renderPass&&rt.paint.get("fill-antialias")){var dt=et.depthModeForSublayer(rt.getPaintProperty("fill-outline-color")?2:0,It.ReadOnly);oo(et,nt,rt,it,dt,st,!0)}}},"fill-extrusion":function(tt,et,nt,rt){var it=nt.paint.get("fill-extrusion-opacity");if(0!==it&&"translucent"===tt.renderPass){var ot=new It(tt.context.gl.LEQUAL,It.ReadWrite,tt.depthRangeFor3D);if(1!==it||nt.paint.get("fill-extrusion-pattern").constantOr(1))ro(tt,et,nt,rt,ot,Pt.disabled,St.disabled),ro(tt,et,nt,rt,ot,tt.stencilModeFor3D(),tt.colorModeForRenderPass());else{var at=tt.colorModeForRenderPass();ro(tt,et,nt,rt,ot,Pt.disabled,at)}}},hillshade:function(tt,et,nt,rt){if("offscreen"===tt.renderPass||"translucent"===tt.renderPass){for(var it=tt.context,ot=et.getSource().maxzoom,at=tt.depthModeForSublayer(0,It.ReadOnly),st=tt.colorModeForRenderPass(),ct="translucent"===tt.renderPass?tt.stencilConfigForOverlap(rt):[{},rt],pt=ct[0],ft=0,dt=ct[1];ft<dt.length;ft+=1){var mt=dt[ft],yt=et.getTile(mt);yt.needsHillshadePrepare&&"offscreen"===tt.renderPass?no(tt,yt,nt,ot,at,Pt.disabled,st):"translucent"===tt.renderPass&&ao(tt,yt,nt,at,pt[mt.overscaledZ],st)}it.viewport.set([0,0,tt.width,tt.height])}},raster:function(tt,et,nt,rt){if("translucent"===tt.renderPass&&0!==nt.paint.get("raster-opacity")&&rt.length)for(var it=tt.context,ot=it.gl,at=et.getSource(),st=tt.useProgram("raster"),ct=tt.colorModeForRenderPass(),pt=at instanceof vn?[{},rt]:tt.stencilConfigForOverlap(rt),ft=pt[0],dt=pt[1],mt=dt[dt.length-1].overscaledZ,yt=!tt.options.moving,vt=0,Dt=dt;vt<Dt.length;vt+=1){var Ot=Dt[vt],Rt=tt.depthModeForSublayer(Ot.overscaledZ-mt,1===nt.paint.get("raster-opacity")?It.ReadWrite:It.ReadOnly,ot.LESS),Bt=et.getTile(Ot),Ne=tt.transform.calculatePosMatrix(Ot.toUnwrapped(),yt);Bt.registerFadeDuration(nt.paint.get("raster-fade-duration"));var rn=et.findLoadedParent(Ot,0),bn=so(Bt,rn,et,nt,tt.transform),Tn=void 0,Cn=void 0,Ln="nearest"===nt.paint.get("raster-resampling")?ot.NEAREST:ot.LINEAR;it.activeTexture.set(ot.TEXTURE0),Bt.texture.bind(Ln,ot.CLAMP_TO_EDGE,ot.LINEAR_MIPMAP_NEAREST),it.activeTexture.set(ot.TEXTURE1),rn?(rn.texture.bind(Ln,ot.CLAMP_TO_EDGE,ot.LINEAR_MIPMAP_NEAREST),Tn=Math.pow(2,rn.tileID.overscaledZ-Bt.tileID.overscaledZ),Cn=[Bt.tileID.canonical.x*Tn%1,Bt.tileID.canonical.y*Tn%1]):Bt.texture.bind(Ln,ot.CLAMP_TO_EDGE,ot.LINEAR_MIPMAP_NEAREST);var In=Zi(Ne,Cn||[0,0],Tn||1,bn,nt);at instanceof vn?st.draw(it,ot.TRIANGLES,Rt,Pt.disabled,ct,Ct.disabled,In,nt.id,at.boundsBuffer,tt.quadTriangleIndexBuffer,at.boundsSegments):st.draw(it,ot.TRIANGLES,Rt,ft[Ot.overscaledZ],ct,Ct.disabled,In,nt.id,tt.rasterBoundsBuffer,tt.quadTriangleIndexBuffer,tt.rasterBoundsSegments)}},background:function(tt,et,nt){var rt=nt.paint.get("background-color"),it=nt.paint.get("background-opacity");if(0!==it){var ot=tt.context,at=ot.gl,st=tt.transform,ct=st.tileSize,pt=nt.paint.get("background-pattern");if(!tt.isPatternMissing(pt)){var ft=!pt&&1===rt.a&&1===it&&tt.opaquePassEnabledForLayer()?"opaque":"translucent";if(tt.renderPass===ft){var dt=Pt.disabled,mt=tt.depthModeForSublayer(0,"opaque"===ft?It.ReadWrite:It.ReadOnly),yt=tt.colorModeForRenderPass(),vt=tt.useProgram(pt?"backgroundPattern":"background"),Dt=st.coveringTiles({tileSize:ct});pt&&(ot.activeTexture.set(at.TEXTURE0),tt.imageManager.bind(tt.context));for(var Ot=nt.getCrossfadeParameters(),Rt=0,Bt=Dt;Rt<Bt.length;Rt+=1){var Ne=Bt[Rt],rn=tt.transform.calculatePosMatrix(Ne.toUnwrapped()),vn=pt?Hi(rn,it,tt,pt,{tileID:Ne,tileSize:ct},Ot):Xi(rn,it,rt);vt.draw(ot,at.TRIANGLES,mt,dt,yt,Ct.disabled,vn,nt.id,tt.tileExtentBuffer,tt.quadTriangleIndexBuffer,tt.tileExtentSegments)}}}}},debug:function(tt,et,nt){for(var rt=0;rt<nt.length;rt++)go(tt,et,nt[rt])},custom:function(tt,et,nt){var rt=tt.context,it=nt.implementation;if("offscreen"===tt.renderPass){var ot=it.prerender;ot&&(tt.setCustomLayerDefaults(),rt.setColorMode(tt.colorModeForRenderPass()),ot.call(it,rt.gl,tt.transform.customLayerMatrix()),rt.setDirty(),tt.setBaseState())}else if("translucent"===tt.renderPass){tt.setCustomLayerDefaults(),rt.setColorMode(tt.colorModeForRenderPass()),rt.setStencilMode(Pt.disabled);var at="3d"===it.renderingMode?new It(tt.context.gl.LEQUAL,It.ReadWrite,tt.depthRangeFor3D):tt.depthModeForSublayer(0,It.ReadOnly);rt.setDepthMode(at),it.render(rt.gl,tt.transform.customLayerMatrix()),rt.setDirty(),tt.setBaseState(),rt.bindFramebuffer.set(null)}}},yo=function(tt,et){this.context=new zt(tt),this.transform=et,this._tileTextures={},this.setup(),this.numSublayers=as.maxUnderzooming+as.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fe,this.gpuTimers={}};yo.prototype.resize=function(et,nt){if(this.width=et*tt.browser.devicePixelRatio,this.height=nt*tt.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var rt=0,it=this.style._order;rt<it.length;rt+=1)this.style._layers[it[rt]].resize()},yo.prototype.setup=function(){var et=this.context,nt=new tt.StructArrayLayout2i4;nt.emplaceBack(0,0),nt.emplaceBack(tt.EXTENT,0),nt.emplaceBack(0,tt.EXTENT),nt.emplaceBack(tt.EXTENT,tt.EXTENT),this.tileExtentBuffer=et.createVertexBuffer(nt,Fs.members),this.tileExtentSegments=tt.SegmentVector.simpleSegment(0,0,4,2);var rt=new tt.StructArrayLayout2i4;rt.emplaceBack(0,0),rt.emplaceBack(tt.EXTENT,0),rt.emplaceBack(0,tt.EXTENT),rt.emplaceBack(tt.EXTENT,tt.EXTENT),this.debugBuffer=et.createVertexBuffer(rt,Fs.members),this.debugSegments=tt.SegmentVector.simpleSegment(0,0,4,5);var it=new tt.StructArrayLayout4i8;it.emplaceBack(0,0,0,0),it.emplaceBack(tt.EXTENT,0,tt.EXTENT,0),it.emplaceBack(0,tt.EXTENT,0,tt.EXTENT),it.emplaceBack(tt.EXTENT,tt.EXTENT,tt.EXTENT,tt.EXTENT),this.rasterBoundsBuffer=et.createVertexBuffer(it,rn.members),this.rasterBoundsSegments=tt.SegmentVector.simpleSegment(0,0,4,2);var ot=new tt.StructArrayLayout2i4;ot.emplaceBack(0,0),ot.emplaceBack(1,0),ot.emplaceBack(0,1),ot.emplaceBack(1,1),this.viewportBuffer=et.createVertexBuffer(ot,Fs.members),this.viewportSegments=tt.SegmentVector.simpleSegment(0,0,4,2);var at=new tt.StructArrayLayout1ui2;at.emplaceBack(0),at.emplaceBack(1),at.emplaceBack(3),at.emplaceBack(2),at.emplaceBack(0),this.tileBorderIndexBuffer=et.createIndexBuffer(at);var st=new tt.StructArrayLayout3ui6;st.emplaceBack(0,1,2),st.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=et.createIndexBuffer(st),this.emptyTexture=new tt.Texture(et,{width:1,height:1,data:new Uint8Array([0,0,0,0])},et.gl.RGBA);var ct=this.context.gl;this.stencilClearMode=new Pt({func:ct.ALWAYS,mask:0},0,255,ct.ZERO,ct.ZERO,ct.ZERO)},yo.prototype.clearStencil=function(){var et=this.context,nt=et.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var rt=tt.create();tt.ortho(rt,0,this.width,this.height,0,0,1),tt.scale(rt,rt,[nt.drawingBufferWidth,nt.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(et,nt.TRIANGLES,It.disabled,this.stencilClearMode,St.disabled,Ct.disabled,Ai(rt),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},yo.prototype._renderTileClippingMasks=function(tt,et){if(this.currentStencilSource!==tt.source&&tt.isTileClipped()&&et&&et.length){this.currentStencilSource=tt.source;var nt=this.context,rt=nt.gl;this.nextStencilID+et.length>256&&this.clearStencil(),nt.setColorMode(St.disabled),nt.setDepthMode(It.disabled);var it=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ot=0,at=et;ot<at.length;ot+=1){var st=at[ot],ct=this._tileClippingMaskIDs[st.key]=this.nextStencilID++;it.draw(nt,rt.TRIANGLES,It.disabled,new Pt({func:rt.ALWAYS,mask:0},ct,255,rt.KEEP,rt.KEEP,rt.REPLACE),St.disabled,Ct.disabled,Ai(st.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},yo.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var tt=this.nextStencilID++,et=this.context.gl;return new Pt({func:et.NOTEQUAL,mask:255},tt,255,et.KEEP,et.KEEP,et.REPLACE)},yo.prototype.stencilModeForClipping=function(tt){var et=this.context.gl;return new Pt({func:et.EQUAL,mask:255},this._tileClippingMaskIDs[tt.key],0,et.KEEP,et.KEEP,et.REPLACE)},yo.prototype.stencilConfigForOverlap=function(tt){var et,nt=this.context.gl,rt=tt.sort((function(tt,et){return et.overscaledZ-tt.overscaledZ})),it=rt[rt.length-1].overscaledZ,ot=rt[0].overscaledZ-it+1;if(ot>1){this.currentStencilSource=void 0,this.nextStencilID+ot>256&&this.clearStencil();for(var at={},st=0;st<ot;st++)at[st+it]=new Pt({func:nt.GEQUAL,mask:255},st+this.nextStencilID,255,nt.KEEP,nt.KEEP,nt.REPLACE);return this.nextStencilID+=ot,[at,rt]}return[(et={},et[it]=Pt.disabled,et),rt]},yo.prototype.colorModeForRenderPass=function(){var et=this.context.gl;return this._showOverdrawInspector?new St([et.CONSTANT_COLOR,et.ONE],new tt.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?St.unblended:St.alphaBlended},yo.prototype.depthModeForSublayer=function(tt,et,nt){if(!this.opaquePassEnabledForLayer())return It.disabled;var rt=1-((1+this.currentLayer)*this.numSublayers+tt)*this.depthEpsilon;return new It(nt||this.context.gl.LEQUAL,et,[rt,rt])},yo.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},yo.prototype.render=function(et,nt){var rt=this;this.style=et,this.options=nt,this.lineAtlas=et.lineAtlas,this.imageManager=et.imageManager,this.glyphManager=et.glyphManager,this.symbolFadeChange=et.placement.symbolFadeChange(tt.browser.now()),this.imageManager.beginFrame();var it=this.style._order,ot=this.style.sourceCaches;for(var at in ot){var st=ot[at];st.used&&st.prepare(this.context)}var ct,pt,ft={},dt={},mt={};for(var yt in ot){var vt=ot[yt];ft[yt]=vt.getVisibleCoordinates(),dt[yt]=ft[yt].slice().reverse(),mt[yt]=vt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Dt=0;Dt<it.length;Dt++)if(this.style._layers[it[Dt]].is3D()){this.opaquePassCutoff=Dt;break}this.renderPass="offscreen";for(var Ot=0,Rt=it;Ot<Rt.length;Ot+=1){var Bt=this.style._layers[Rt[Ot]];if(Bt.hasOffscreenPass()&&!Bt.isHidden(this.transform.zoom)){var Ne=dt[Bt.source];("custom"===Bt.type||Ne.length)&&this.renderLayer(this,ot[Bt.source],Bt,Ne)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:nt.showOverdrawInspector?tt.Color.black:tt.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=nt.showOverdrawInspector,this.depthRangeFor3D=[0,1-(et._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=it.length-1;this.currentLayer>=0;this.currentLayer--){var rn=this.style._layers[it[this.currentLayer]],vn=ot[rn.source],bn=ft[rn.source];this._renderTileClippingMasks(rn,bn),this.renderLayer(this,vn,rn,bn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<it.length;this.currentLayer++){var Tn=this.style._layers[it[this.currentLayer]],Cn=ot[Tn.source],Ln=("symbol"===Tn.type?mt:dt)[Tn.source];this._renderTileClippingMasks(Tn,ft[Tn.source]),this.renderLayer(this,Cn,Tn,Ln)}this.options.showTileBoundaries&&(tt.values(this.style._layers).forEach((function(tt){tt.source&&!tt.isHidden(rt.transform.zoom)&&(tt.source!==(pt&&pt.id)&&(pt=rt.style.sourceCaches[tt.source]),(!ct||ct.getSource().maxzoom<pt.getSource().maxzoom)&&(ct=pt))})),ct&&xc.debug(this,ct,ct.getVisibleCoordinates())),this.options.showPadding&&function(tt){var et=tt.transform.padding;_o(tt,tt.transform.height-(et.top||0),3,Hl),_o(tt,et.bottom||0,3,ac),fo(tt,et.left||0,3,pc),fo(tt,tt.transform.width-(et.right||0),3,yc);var nt=tt.transform.centerPoint;!function(tt,et,nt,rt){mo(tt,et-1,nt-10,2,20,rt),mo(tt,et-10,nt-1,20,2,rt)}(tt,nt.x,tt.transform.height-nt.y,_c)}(this),this.context.setDefault()},yo.prototype.renderLayer=function(tt,et,nt,rt){nt.isHidden(this.transform.zoom)||("background"===nt.type||"custom"===nt.type||rt.length)&&(this.id=nt.id,this.gpuTimingStart(nt),xc[nt.type](tt,et,nt,rt,this.style.placement.variableOffsets),this.gpuTimingEnd())},yo.prototype.gpuTimingStart=function(tt){if(this.options.gpuTiming){var et=this.context.extTimerQuery,nt=this.gpuTimers[tt.id];nt||(nt=this.gpuTimers[tt.id]={calls:0,cpuTime:0,query:et.createQueryEXT()}),nt.calls++,et.beginQueryEXT(et.TIME_ELAPSED_EXT,nt.query)}},yo.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var tt=this.context.extTimerQuery;tt.endQueryEXT(tt.TIME_ELAPSED_EXT)}},yo.prototype.collectGpuTimers=function(){var tt=this.gpuTimers;return this.gpuTimers={},tt},yo.prototype.queryGpuTimers=function(tt){var et={};for(var nt in tt){var rt=tt[nt],it=this.context.extTimerQuery,ot=it.getQueryObjectEXT(rt.query,it.QUERY_RESULT_EXT)/1e6;it.deleteQueryEXT(rt.query),et[nt]=ot}return et},yo.prototype.translatePosMatrix=function(et,nt,rt,it,ot){if(!rt[0]&&!rt[1])return et;var at=ot?"map"===it?this.transform.angle:0:"viewport"===it?-this.transform.angle:0;if(at){var st=Math.sin(at),ct=Math.cos(at);rt=[rt[0]*ct-rt[1]*st,rt[0]*st+rt[1]*ct]}var pt=[ot?rt[0]:pe(nt,rt[0],this.transform.zoom),ot?rt[1]:pe(nt,rt[1],this.transform.zoom),0],ft=new Float32Array(16);return tt.translate(ft,et,pt),ft},yo.prototype.saveTileTexture=function(tt){var et=this._tileTextures[tt.size[0]];et?et.push(tt):this._tileTextures[tt.size[0]]=[tt]},yo.prototype.getTileTexture=function(tt){var et=this._tileTextures[tt];return et&&et.length>0?et.pop():null},yo.prototype.isPatternMissing=function(tt){if(!tt)return!1;if(!tt.from||!tt.to)return!0;var et=this.imageManager.getPattern(tt.from.toString()),nt=this.imageManager.getPattern(tt.to.toString());return!et||!nt},yo.prototype.useProgram=function(tt,et){this.cache=this.cache||{};var nt=""+tt+(et?et.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[nt]||(this.cache[nt]=new bi(this.context,tt,Il[tt],et,zl[tt],this._showOverdrawInspector)),this.cache[nt]},yo.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},yo.prototype.setBaseState=function(){var tt=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(tt.FUNC_ADD)},yo.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=tt.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new tt.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},yo.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xo=function(tt,et){this.points=tt,this.planes=et};xo.fromInvProjectionMatrix=function(et,nt,rt){var it=Math.pow(2,rt),ot=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(nt){return tt.transformMat4([],nt,et)})).map((function(et){return tt.scale$1([],et,1/et[3]/nt*it)})),at=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(et){var nt=tt.sub([],ot[et[0]],ot[et[1]]),rt=tt.sub([],ot[et[2]],ot[et[1]]),it=tt.normalize([],tt.cross([],nt,rt)),at=-tt.dot(it,ot[et[1]]);return it.concat(at)}));return new xo(ot,at)};var bo=function(et,nt){this.min=et,this.max=nt,this.center=tt.scale$2([],tt.add([],this.min,this.max),.5)};bo.prototype.quadrant=function(et){for(var nt=[et%2==0,et<2],rt=tt.clone$2(this.min),it=tt.clone$2(this.max),ot=0;ot<nt.length;ot++)rt[ot]=nt[ot]?this.min[ot]:this.center[ot],it[ot]=nt[ot]?this.center[ot]:this.max[ot];return it[2]=this.max[2],new bo(rt,it)},bo.prototype.distanceX=function(tt){return Math.max(Math.min(this.max[0],tt[0]),this.min[0])-tt[0]},bo.prototype.distanceY=function(tt){return Math.max(Math.min(this.max[1],tt[1]),this.min[1])-tt[1]},bo.prototype.intersects=function(et){for(var nt=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],rt=!0,it=0;it<et.planes.length;it++){for(var ot=et.planes[it],at=0,st=0;st<nt.length;st++)at+=tt.dot$1(ot,nt[st])>=0;if(0===at)return 0;at!==nt.length&&(rt=!1)}if(rt)return 2;for(var ct=0;ct<3;ct++){for(var pt=Number.MAX_VALUE,ft=-Number.MAX_VALUE,dt=0;dt<et.points.length;dt++){var mt=et.points[dt][ct]-this.min[ct];pt=Math.min(pt,mt),ft=Math.max(ft,mt)}if(ft<0||pt>this.max[ct]-this.min[ct])return 0}return 1};var wo=function(tt,et,nt,rt){if(void 0===tt&&(tt=0),void 0===et&&(et=0),void 0===nt&&(nt=0),void 0===rt&&(rt=0),isNaN(tt)||tt<0||isNaN(et)||et<0||isNaN(nt)||nt<0||isNaN(rt)||rt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=tt,this.bottom=et,this.left=nt,this.right=rt};wo.prototype.interpolate=function(et,nt,rt){return null!=nt.top&&null!=et.top&&(this.top=tt.number(et.top,nt.top,rt)),null!=nt.bottom&&null!=et.bottom&&(this.bottom=tt.number(et.bottom,nt.bottom,rt)),null!=nt.left&&null!=et.left&&(this.left=tt.number(et.left,nt.left,rt)),null!=nt.right&&null!=et.right&&(this.right=tt.number(et.right,nt.right,rt)),this},wo.prototype.getCenter=function(et,nt){var rt=tt.clamp((this.left+et-this.right)/2,0,et),it=tt.clamp((this.top+nt-this.bottom)/2,0,nt);return new tt.Point(rt,it)},wo.prototype.equals=function(tt){return this.top===tt.top&&this.bottom===tt.bottom&&this.left===tt.left&&this.right===tt.right},wo.prototype.clone=function(){return new wo(this.top,this.bottom,this.left,this.right)},wo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var To=function(et,nt,rt,it,ot){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===ot||ot,this._minZoom=et||0,this._maxZoom=nt||22,this._minPitch=null==rt?0:rt,this._maxPitch=null==it?60:it,this.setMaxBounds(),this.width=0,this.height=0,this._center=new tt.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wo,this._posMatrixCache={},this._alignedPosMatrixCache={}},bc={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};To.prototype.clone=function(){var tt=new To(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return tt.tileSize=this.tileSize,tt.latRange=this.latRange,tt.width=this.width,tt.height=this.height,tt._center=this._center,tt.zoom=this.zoom,tt.angle=this.angle,tt._fov=this._fov,tt._pitch=this._pitch,tt._unmodified=this._unmodified,tt._edgeInsets=this._edgeInsets.clone(),tt._calcMatrices(),tt},bc.minZoom.get=function(){return this._minZoom},bc.minZoom.set=function(tt){this._minZoom!==tt&&(this._minZoom=tt,this.zoom=Math.max(this.zoom,tt))},bc.maxZoom.get=function(){return this._maxZoom},bc.maxZoom.set=function(tt){this._maxZoom!==tt&&(this._maxZoom=tt,this.zoom=Math.min(this.zoom,tt))},bc.minPitch.get=function(){return this._minPitch},bc.minPitch.set=function(tt){this._minPitch!==tt&&(this._minPitch=tt,this.pitch=Math.max(this.pitch,tt))},bc.maxPitch.get=function(){return this._maxPitch},bc.maxPitch.set=function(tt){this._maxPitch!==tt&&(this._maxPitch=tt,this.pitch=Math.min(this.pitch,tt))},bc.renderWorldCopies.get=function(){return this._renderWorldCopies},bc.renderWorldCopies.set=function(tt){void 0===tt?tt=!0:null===tt&&(tt=!1),this._renderWorldCopies=tt},bc.worldSize.get=function(){return this.tileSize*this.scale},bc.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},bc.size.get=function(){return new tt.Point(this.width,this.height)},bc.bearing.get=function(){return-this.angle/Math.PI*180},bc.bearing.set=function(et){var nt=-tt.wrap(et,-180,180)*Math.PI/180;this.angle!==nt&&(this._unmodified=!1,this.angle=nt,this._calcMatrices(),this.rotationMatrix=tt.create$2(),tt.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},bc.pitch.get=function(){return this._pitch/Math.PI*180},bc.pitch.set=function(et){var nt=tt.clamp(et,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==nt&&(this._unmodified=!1,this._pitch=nt,this._calcMatrices())},bc.fov.get=function(){return this._fov/Math.PI*180},bc.fov.set=function(tt){tt=Math.max(.01,Math.min(60,tt)),this._fov!==tt&&(this._unmodified=!1,this._fov=tt/180*Math.PI,this._calcMatrices())},bc.zoom.get=function(){return this._zoom},bc.zoom.set=function(tt){var et=Math.min(Math.max(tt,this.minZoom),this.maxZoom);this._zoom!==et&&(this._unmodified=!1,this._zoom=et,this.scale=this.zoomScale(et),this.tileZoom=Math.floor(et),this.zoomFraction=et-this.tileZoom,this._constrain(),this._calcMatrices())},bc.center.get=function(){return this._center},bc.center.set=function(tt){tt.lat===this._center.lat&&tt.lng===this._center.lng||(this._unmodified=!1,this._center=tt,this._constrain(),this._calcMatrices())},bc.padding.get=function(){return this._edgeInsets.toJSON()},bc.padding.set=function(tt){this._edgeInsets.equals(tt)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,tt,1),this._calcMatrices())},bc.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},To.prototype.isPaddingEqual=function(tt){return this._edgeInsets.equals(tt)},To.prototype.interpolatePadding=function(tt,et,nt){this._unmodified=!1,this._edgeInsets.interpolate(tt,et,nt),this._constrain(),this._calcMatrices()},To.prototype.coveringZoomLevel=function(tt){var et=(tt.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/tt.tileSize));return Math.max(0,et)},To.prototype.getVisibleUnwrappedCoordinates=function(et){var nt=[new tt.UnwrappedTileID(0,et)];if(this._renderWorldCopies)for(var rt=this.pointCoordinate(new tt.Point(0,0)),it=this.pointCoordinate(new tt.Point(this.width,0)),ot=this.pointCoordinate(new tt.Point(this.width,this.height)),at=this.pointCoordinate(new tt.Point(0,this.height)),st=Math.floor(Math.min(rt.x,it.x,ot.x,at.x)),ct=Math.floor(Math.max(rt.x,it.x,ot.x,at.x)),pt=st-1;pt<=ct+1;pt++)0!==pt&&nt.push(new tt.UnwrappedTileID(pt,et));return nt},To.prototype.coveringTiles=function(et){var nt=this.coveringZoomLevel(et),rt=nt;if(void 0!==et.minzoom&&nt<et.minzoom)return[];void 0!==et.maxzoom&&nt>et.maxzoom&&(nt=et.maxzoom);var it=tt.MercatorCoordinate.fromLngLat(this.center),ot=Math.pow(2,nt),at=[ot*it.x,ot*it.y,0],st=xo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,nt),ct=et.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ct=nt);var c=function(tt){return{aabb:new bo([tt*ot,0,0],[(tt+1)*ot,ot,0]),zoom:0,x:0,y:0,wrap:tt,fullyVisible:!1}},pt=[],ft=[],dt=nt,mt=et.reparseOverscaled?rt:nt;if(this._renderWorldCopies)for(var yt=1;yt<=3;yt++)pt.push(c(-yt)),pt.push(c(yt));for(pt.push(c(0));pt.length>0;){var vt=pt.pop(),Dt=vt.x,Ot=vt.y,Rt=vt.fullyVisible;if(!Rt){var Bt=vt.aabb.intersects(st);if(0===Bt)continue;Rt=2===Bt}var Ne=vt.aabb.distanceX(at),rn=vt.aabb.distanceY(at),vn=Math.max(Math.abs(Ne),Math.abs(rn));if(vt.zoom===dt||vn>3+(1<<dt-vt.zoom)-2&&vt.zoom>=ct)ft.push({tileID:new tt.OverscaledTileID(vt.zoom===dt?mt:vt.zoom,vt.wrap,vt.zoom,Dt,Ot),distanceSq:tt.sqrLen([at[0]-.5-Dt,at[1]-.5-Ot])});else for(var bn=0;bn<4;bn++){var Tn=(Dt<<1)+bn%2,Cn=(Ot<<1)+(bn>>1);pt.push({aabb:vt.aabb.quadrant(bn),zoom:vt.zoom+1,x:Tn,y:Cn,wrap:vt.wrap,fullyVisible:Rt})}}return ft.sort((function(tt,et){return tt.distanceSq-et.distanceSq})).map((function(tt){return tt.tileID}))},To.prototype.resize=function(tt,et){this.width=tt,this.height=et,this.pixelsToGLUnits=[2/tt,-2/et],this._constrain(),this._calcMatrices()},bc.unmodified.get=function(){return this._unmodified},To.prototype.zoomScale=function(tt){return Math.pow(2,tt)},To.prototype.scaleZoom=function(tt){return Math.log(tt)/Math.LN2},To.prototype.project=function(et){var nt=tt.clamp(et.lat,-this.maxValidLatitude,this.maxValidLatitude);return new tt.Point(tt.mercatorXfromLng(et.lng)*this.worldSize,tt.mercatorYfromLat(nt)*this.worldSize)},To.prototype.unproject=function(et){return new tt.MercatorCoordinate(et.x/this.worldSize,et.y/this.worldSize).toLngLat()},bc.point.get=function(){return this.project(this.center)},To.prototype.setLocationAtPoint=function(et,nt){var rt=this.pointCoordinate(nt),it=this.pointCoordinate(this.centerPoint),ot=this.locationCoordinate(et),at=new tt.MercatorCoordinate(ot.x-(rt.x-it.x),ot.y-(rt.y-it.y));this.center=this.coordinateLocation(at),this._renderWorldCopies&&(this.center=this.center.wrap())},To.prototype.locationPoint=function(tt){return this.coordinatePoint(this.locationCoordinate(tt))},To.prototype.pointLocation=function(tt){return this.coordinateLocation(this.pointCoordinate(tt))},To.prototype.locationCoordinate=function(et){return tt.MercatorCoordinate.fromLngLat(et)},To.prototype.coordinateLocation=function(tt){return tt.toLngLat()},To.prototype.pointCoordinate=function(et){var nt=[et.x,et.y,0,1],rt=[et.x,et.y,1,1];tt.transformMat4(nt,nt,this.pixelMatrixInverse),tt.transformMat4(rt,rt,this.pixelMatrixInverse);var it=nt[3],ot=rt[3],at=nt[1]/it,st=rt[1]/ot,ct=nt[2]/it,pt=rt[2]/ot,ft=ct===pt?0:(0-ct)/(pt-ct);return new tt.MercatorCoordinate(tt.number(nt[0]/it,rt[0]/ot,ft)/this.worldSize,tt.number(at,st,ft)/this.worldSize)},To.prototype.coordinatePoint=function(et){var nt=[et.x*this.worldSize,et.y*this.worldSize,0,1];return tt.transformMat4(nt,nt,this.pixelMatrix),new tt.Point(nt[0]/nt[3],nt[1]/nt[3])},To.prototype.getBounds=function(){return(new tt.LngLatBounds).extend(this.pointLocation(new tt.Point(0,0))).extend(this.pointLocation(new tt.Point(this.width,0))).extend(this.pointLocation(new tt.Point(this.width,this.height))).extend(this.pointLocation(new tt.Point(0,this.height)))},To.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new tt.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},To.prototype.setMaxBounds=function(tt){tt?(this.lngRange=[tt.getWest(),tt.getEast()],this.latRange=[tt.getSouth(),tt.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},To.prototype.calculatePosMatrix=function(et,nt){void 0===nt&&(nt=!1);var rt=et.key,it=nt?this._alignedPosMatrixCache:this._posMatrixCache;if(it[rt])return it[rt];var ot=et.canonical,at=this.worldSize/this.zoomScale(ot.z),st=ot.x+Math.pow(2,ot.z)*et.wrap,ct=tt.identity(new Float64Array(16));return tt.translate(ct,ct,[st*at,ot.y*at,0]),tt.scale(ct,ct,[at/tt.EXTENT,at/tt.EXTENT,1]),tt.multiply(ct,nt?this.alignedProjMatrix:this.projMatrix,ct),it[rt]=new Float32Array(ct),it[rt]},To.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},To.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var et,nt,rt,it,ot=-90,at=90,st=-180,ct=180,pt=this.size,ft=this._unmodified;if(this.latRange){var dt=this.latRange;ot=tt.mercatorYfromLat(dt[1])*this.worldSize,et=(at=tt.mercatorYfromLat(dt[0])*this.worldSize)-ot<pt.y?pt.y/(at-ot):0}if(this.lngRange){var mt=this.lngRange;st=tt.mercatorXfromLng(mt[0])*this.worldSize,nt=(ct=tt.mercatorXfromLng(mt[1])*this.worldSize)-st<pt.x?pt.x/(ct-st):0}var yt=this.point,vt=Math.max(nt||0,et||0);if(vt)return this.center=this.unproject(new tt.Point(nt?(ct+st)/2:yt.x,et?(at+ot)/2:yt.y)),this.zoom+=this.scaleZoom(vt),this._unmodified=ft,void(this._constraining=!1);if(this.latRange){var Dt=yt.y,Ot=pt.y/2;Dt-Ot<ot&&(it=ot+Ot),Dt+Ot>at&&(it=at-Ot)}if(this.lngRange){var Rt=yt.x,Bt=pt.x/2;Rt-Bt<st&&(rt=st+Bt),Rt+Bt>ct&&(rt=ct-Bt)}void 0===rt&&void 0===it||(this.center=this.unproject(new tt.Point(void 0!==rt?rt:yt.x,void 0!==it?it:yt.y))),this._unmodified=ft,this._constraining=!1}},To.prototype._calcMatrices=function(){if(this.height){var et=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var nt=Math.PI/2+this._pitch,rt=this._fov*(.5+et.y/this.height),it=Math.sin(rt)*this.cameraToCenterDistance/Math.sin(tt.clamp(Math.PI-nt-rt,.01,Math.PI-.01)),ot=this.point,at=ot.x,st=ot.y,ct=1.01*(Math.cos(Math.PI/2-this._pitch)*it+this.cameraToCenterDistance),pt=this.height/50,ft=new Float64Array(16);tt.perspective(ft,this._fov,this.width/this.height,pt,ct),ft[8]=2*-et.x/this.width,ft[9]=2*et.y/this.height,tt.scale(ft,ft,[1,-1,1]),tt.translate(ft,ft,[0,0,-this.cameraToCenterDistance]),tt.rotateX(ft,ft,this._pitch),tt.rotateZ(ft,ft,this.angle),tt.translate(ft,ft,[-at,-st,0]),this.mercatorMatrix=tt.scale([],ft,[this.worldSize,this.worldSize,this.worldSize]),tt.scale(ft,ft,[1,1,tt.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ft,this.invProjMatrix=tt.invert([],this.projMatrix);var dt=this.width%2/2,mt=this.height%2/2,yt=Math.cos(this.angle),vt=Math.sin(this.angle),Dt=at-Math.round(at)+yt*dt+vt*mt,Ot=st-Math.round(st)+yt*mt+vt*dt,Rt=new Float64Array(ft);if(tt.translate(Rt,Rt,[Dt>.5?Dt-1:Dt,Ot>.5?Ot-1:Ot,0]),this.alignedProjMatrix=Rt,ft=tt.create(),tt.scale(ft,ft,[this.width/2,-this.height/2,1]),tt.translate(ft,ft,[1,-1,0]),this.labelPlaneMatrix=ft,ft=tt.create(),tt.scale(ft,ft,[1,-1,1]),tt.translate(ft,ft,[-1,-1,0]),tt.scale(ft,ft,[2/this.width,2/this.height,1]),this.glCoordMatrix=ft,this.pixelMatrix=tt.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ft=tt.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ft,this._posMatrixCache={},this._alignedPosMatrixCache={}}},To.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var et=this.pointCoordinate(new tt.Point(0,0)),nt=[et.x*this.worldSize,et.y*this.worldSize,0,1];return tt.transformMat4(nt,nt,this.pixelMatrix)[3]/this.cameraToCenterDistance},To.prototype.getCameraPoint=function(){var et=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new tt.Point(0,et))},To.prototype.getCameraQueryGeometry=function(et){var nt=this.getCameraPoint();if(1===et.length)return[et[0],nt];for(var rt=nt.x,it=nt.y,ot=nt.x,at=nt.y,st=0,ct=et;st<ct.length;st+=1){var pt=ct[st];rt=Math.min(rt,pt.x),it=Math.min(it,pt.y),ot=Math.max(ot,pt.x),at=Math.max(at,pt.y)}return[new tt.Point(rt,it),new tt.Point(ot,it),new tt.Point(ot,at),new tt.Point(rt,at),new tt.Point(rt,it)]},Object.defineProperties(To.prototype,bc);var Io=function(et){var nt,rt,it,ot;this._hashName=et&&encodeURIComponent(et),tt.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(nt=this._updateHashUnthrottled.bind(this),rt=!1,it=null,ot=function(){it=null,rt&&(nt(),it=setTimeout(ot,300),rt=!1)},function(){return rt=!0,it||ot(),it})};Io.prototype.addTo=function(et){return this._map=et,tt.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Io.prototype.remove=function(){return tt.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Io.prototype.getHashString=function(et){var nt=this._map.getCenter(),rt=Math.round(100*this._map.getZoom())/100,it=Math.ceil((rt*Math.LN2+Math.log(512/360/.5))/Math.LN10),ot=Math.pow(10,it),at=Math.round(nt.lng*ot)/ot,st=Math.round(nt.lat*ot)/ot,ct=this._map.getBearing(),pt=this._map.getPitch(),ft="";if(ft+=et?"/"+at+"/"+st+"/"+rt:rt+"/"+st+"/"+at,(ct||pt)&&(ft+="/"+Math.round(10*ct)/10),pt&&(ft+="/"+Math.round(pt)),this._hashName){var dt=this._hashName,mt=!1,yt=tt.window.location.hash.slice(1).split("&").map((function(tt){var et=tt.split("=")[0];return et===dt?(mt=!0,et+"="+ft):tt})).filter((function(tt){return tt}));return mt||yt.push(dt+"="+ft),"#"+yt.join("&")}return"#"+ft},Io.prototype._getCurrentHash=function(){var et,nt=this,rt=tt.window.location.hash.replace("#","");return this._hashName?(rt.split("&").map((function(tt){return tt.split("=")})).forEach((function(tt){tt[0]===nt._hashName&&(et=tt)})),(et&&et[1]||"").split("/")):rt.split("/")},Io.prototype._onHashChange=function(){var tt=this._getCurrentHash();if(tt.length>=3&&!tt.some((function(tt){return isNaN(tt)}))){var et=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(tt[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+tt[2],+tt[1]],zoom:+tt[0],bearing:et,pitch:+(tt[4]||0)}),!0}return!1},Io.prototype._updateHashUnthrottled=function(){var et=this.getHashString();try{tt.window.history.replaceState(tt.window.history.state,"",et)}catch(tt){}};var wc={linearity:.3,easing:tt.bezier(0,0,.3,1)},Ec=tt.extend({deceleration:2500,maxSpeed:1400},wc),Cc=tt.extend({deceleration:20,maxSpeed:1400},wc),kc=tt.extend({deceleration:1e3,maxSpeed:360},wc),Ic=tt.extend({deceleration:1e3,maxSpeed:90},wc),Mo=function(tt){this._map=tt,this.clear()};function Lo(tt,et){(!tt.duration||tt.duration<et.duration)&&(tt.duration=et.duration,tt.easing=et.easing)}function Ao(et,nt,rt){var it=rt.maxSpeed,ot=rt.linearity,at=rt.deceleration,st=tt.clamp(et*ot/(nt/1e3),-it,it),ct=Math.abs(st)/(at*ot);return{easing:rt.easing,duration:1e3*ct,amount:st*(ct/2)}}Mo.prototype.clear=function(){this._inertiaBuffer=[]},Mo.prototype.record=function(et){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:tt.browser.now(),settings:et})},Mo.prototype._drainInertiaBuffer=function(){for(var et=this._inertiaBuffer,nt=tt.browser.now();et.length>0&&nt-et[0].time>160;)et.shift()},Mo.prototype._onMoveEnd=function(et){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var nt={zoom:0,bearing:0,pitch:0,pan:new tt.Point(0,0),pinchAround:void 0,around:void 0},rt=0,it=this._inertiaBuffer;rt<it.length;rt+=1){var ot=it[rt].settings;nt.zoom+=ot.zoomDelta||0,nt.bearing+=ot.bearingDelta||0,nt.pitch+=ot.pitchDelta||0,ot.panDelta&&nt.pan._add(ot.panDelta),ot.around&&(nt.around=ot.around),ot.pinchAround&&(nt.pinchAround=ot.pinchAround)}var at=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,st={};if(nt.pan.mag()){var ct=Ao(nt.pan.mag(),at,tt.extend({},Ec,et||{}));st.offset=nt.pan.mult(ct.amount/nt.pan.mag()),st.center=this._map.transform.center,Lo(st,ct)}if(nt.zoom){var pt=Ao(nt.zoom,at,Cc);st.zoom=this._map.transform.zoom+pt.amount,Lo(st,pt)}if(nt.bearing){var ft=Ao(nt.bearing,at,kc);st.bearing=this._map.transform.bearing+tt.clamp(ft.amount,-179,179),Lo(st,ft)}if(nt.pitch){var dt=Ao(nt.pitch,at,Ic);st.pitch=this._map.transform.pitch+dt.amount,Lo(st,dt)}if(st.zoom||st.bearing){var mt=void 0===nt.pinchAround?nt.around:nt.pinchAround;st.around=mt?this._map.unproject(mt):this._map.getCenter()}return this.clear(),tt.extend(st,{noMoveStart:!0})}};var Ac=function(et){function o(rt,it,ot,at){void 0===at&&(at={});var st=nt.mousePos(it.getCanvasContainer(),ot),ct=it.unproject(st);et.call(this,rt,tt.extend({point:st,lngLat:ct,originalEvent:ot},at)),this._defaultPrevented=!1,this.target=it}et&&(o.__proto__=et),(o.prototype=Object.create(et&&et.prototype)).constructor=o;var rt={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},rt.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,rt),o}(tt.Event),zc=function(et){function o(rt,it,ot){var at="touchend"===rt?ot.changedTouches:ot.touches,st=nt.touchPos(it.getCanvasContainer(),at),ct=st.map((function(tt){return it.unproject(tt)})),pt=st.reduce((function(tt,et,nt,rt){return tt.add(et.div(rt.length))}),new tt.Point(0,0)),ft=it.unproject(pt);et.call(this,rt,{points:st,point:pt,lngLats:ct,lngLat:ft,originalEvent:ot}),this._defaultPrevented=!1}et&&(o.__proto__=et),(o.prototype=Object.create(et&&et.prototype)).constructor=o;var rt={defaultPrevented:{configurable:!0}};return o.prototype.preventDefault=function(){this._defaultPrevented=!0},rt.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(o.prototype,rt),o}(tt.Event),Dc=function(tt){function e(et,nt,rt){tt.call(this,et,{originalEvent:rt}),this._defaultPrevented=!1}tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e;var et={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},et.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,et),e}(tt.Event),Oo=function(tt,et){this._map=tt,this._clickTolerance=et.clickTolerance};Oo.prototype.reset=function(){delete this._mousedownPos},Oo.prototype.wheel=function(tt){return this._firePreventable(new Dc(tt.type,this._map,tt))},Oo.prototype.mousedown=function(tt,et){return this._mousedownPos=et,this._firePreventable(new Ac(tt.type,this._map,tt))},Oo.prototype.mouseup=function(tt){this._map.fire(new Ac(tt.type,this._map,tt))},Oo.prototype.click=function(tt,et){this._mousedownPos&&this._mousedownPos.dist(et)>=this._clickTolerance||this._map.fire(new Ac(tt.type,this._map,tt))},Oo.prototype.dblclick=function(tt){return this._firePreventable(new Ac(tt.type,this._map,tt))},Oo.prototype.mouseover=function(tt){this._map.fire(new Ac(tt.type,this._map,tt))},Oo.prototype.mouseout=function(tt){this._map.fire(new Ac(tt.type,this._map,tt))},Oo.prototype.touchstart=function(tt){return this._firePreventable(new zc(tt.type,this._map,tt))},Oo.prototype.touchmove=function(tt){this._map.fire(new zc(tt.type,this._map,tt))},Oo.prototype.touchend=function(tt){this._map.fire(new zc(tt.type,this._map,tt))},Oo.prototype.touchcancel=function(tt){this._map.fire(new zc(tt.type,this._map,tt))},Oo.prototype._firePreventable=function(tt){if(this._map.fire(tt),tt.defaultPrevented)return{}},Oo.prototype.isEnabled=function(){return!0},Oo.prototype.isActive=function(){return!1},Oo.prototype.enable=function(){},Oo.prototype.disable=function(){};var Fo=function(tt){this._map=tt};Fo.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Fo.prototype.mousemove=function(tt){this._map.fire(new Ac(tt.type,this._map,tt))},Fo.prototype.mousedown=function(){this._delayContextMenu=!0},Fo.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ac("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Fo.prototype.contextmenu=function(tt){this._delayContextMenu?this._contextMenuEvent=tt:this._map.fire(new Ac(tt.type,this._map,tt)),this._map.listens("contextmenu")&&tt.preventDefault()},Fo.prototype.isEnabled=function(){return!0},Fo.prototype.isActive=function(){return!1},Fo.prototype.enable=function(){},Fo.prototype.disable=function(){};var Uo=function(tt,et){this._map=tt,this._el=tt.getCanvasContainer(),this._container=tt.getContainer(),this._clickTolerance=et.clickTolerance||1};function No(tt,et){for(var nt={},rt=0;rt<tt.length;rt++)nt[tt[rt].identifier]=et[rt];return nt}Uo.prototype.isEnabled=function(){return!!this._enabled},Uo.prototype.isActive=function(){return!!this._active},Uo.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Uo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Uo.prototype.mousedown=function(tt,et){this.isEnabled()&&tt.shiftKey&&0===tt.button&&(nt.disableDrag(),this._startPos=this._lastPos=et,this._active=!0)},Uo.prototype.mousemoveWindow=function(tt,et){if(this._active){var rt=et;if(!(this._lastPos.equals(rt)||!this._box&&rt.dist(this._startPos)<this._clickTolerance)){var it=this._startPos;this._lastPos=rt,this._box||(this._box=nt.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",tt));var ot=Math.min(it.x,rt.x),at=Math.max(it.x,rt.x),st=Math.min(it.y,rt.y),ct=Math.max(it.y,rt.y);nt.setTransform(this._box,"translate("+ot+"px,"+st+"px)"),this._box.style.width=at-ot+"px",this._box.style.height=ct-st+"px"}}},Uo.prototype.mouseupWindow=function(et,rt){var it=this;if(this._active&&0===et.button){var ot=this._startPos,at=rt;if(this.reset(),nt.suppressClick(),ot.x!==at.x||ot.y!==at.y)return this._map.fire(new tt.Event("boxzoomend",{originalEvent:et})),{cameraAnimation:function(tt){return tt.fitScreenCoordinates(ot,at,it._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",et)}},Uo.prototype.keydown=function(tt){this._active&&27===tt.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",tt))},Uo.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(nt.remove(this._box),this._box=null),nt.enableDrag(),delete this._startPos,delete this._lastPos},Uo.prototype._fireEvent=function(et,nt){return this._map.fire(new tt.Event(et,{originalEvent:nt}))};var Zo=function(tt){this.reset(),this.numTouches=tt.numTouches};Zo.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Zo.prototype.touchstart=function(et,nt,rt){(this.centroid||rt.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=et.timeStamp),rt.length===this.numTouches&&(this.centroid=function(et){for(var nt=new tt.Point(0,0),rt=0,it=et;rt<it.length;rt+=1)nt._add(it[rt]);return nt.div(et.length)}(nt),this.touches=No(rt,nt)))},Zo.prototype.touchmove=function(tt,et,nt){if(!this.aborted&&this.centroid){var rt=No(nt,et);for(var it in this.touches){var ot=rt[it];(!ot||ot.dist(this.touches[it])>30)&&(this.aborted=!0)}}},Zo.prototype.touchend=function(tt,et,nt){if((!this.centroid||tt.timeStamp-this.startTime>500)&&(this.aborted=!0),0===nt.length){var rt=!this.aborted&&this.centroid;if(this.reset(),rt)return rt}};var jo=function(tt){this.singleTap=new Zo(tt),this.numTaps=tt.numTaps,this.reset()};jo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},jo.prototype.touchstart=function(tt,et,nt){this.singleTap.touchstart(tt,et,nt)},jo.prototype.touchmove=function(tt,et,nt){this.singleTap.touchmove(tt,et,nt)},jo.prototype.touchend=function(tt,et,nt){var rt=this.singleTap.touchend(tt,et,nt);if(rt){var it=tt.timeStamp-this.lastTime<500,ot=!this.lastTap||this.lastTap.dist(rt)<30;if(it&&ot||this.reset(),this.count++,this.lastTime=tt.timeStamp,this.lastTap=rt,this.count===this.numTaps)return this.reset(),rt}};var qo=function(){this._zoomIn=new jo({numTouches:1,numTaps:2}),this._zoomOut=new jo({numTouches:2,numTaps:1}),this.reset()};qo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},qo.prototype.touchstart=function(tt,et,nt){this._zoomIn.touchstart(tt,et,nt),this._zoomOut.touchstart(tt,et,nt)},qo.prototype.touchmove=function(tt,et,nt){this._zoomIn.touchmove(tt,et,nt),this._zoomOut.touchmove(tt,et,nt)},qo.prototype.touchend=function(tt,et,nt){var rt=this,it=this._zoomIn.touchend(tt,et,nt),ot=this._zoomOut.touchend(tt,et,nt);return it?(this._active=!0,tt.preventDefault(),setTimeout((function(){return rt.reset()}),0),{cameraAnimation:function(et){return et.easeTo({duration:300,zoom:et.getZoom()+1,around:et.unproject(it)},{originalEvent:tt})}}):ot?(this._active=!0,tt.preventDefault(),setTimeout((function(){return rt.reset()}),0),{cameraAnimation:function(et){return et.easeTo({duration:300,zoom:et.getZoom()-1,around:et.unproject(ot)},{originalEvent:tt})}}):void 0},qo.prototype.touchcancel=function(){this.reset()},qo.prototype.enable=function(){this._enabled=!0},qo.prototype.disable=function(){this._enabled=!1,this.reset()},qo.prototype.isEnabled=function(){return this._enabled},qo.prototype.isActive=function(){return this._active};var Bc={0:1,2:2},Go=function(tt){this.reset(),this._clickTolerance=tt.clickTolerance||1};Go.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Go.prototype._correctButton=function(tt,et){return!1},Go.prototype._move=function(tt,et){return{}},Go.prototype.mousedown=function(tt,et){if(!this._lastPoint){var rt=nt.mouseButton(tt);this._correctButton(tt,rt)&&(this._lastPoint=et,this._eventButton=rt)}},Go.prototype.mousemoveWindow=function(tt,et){var nt=this._lastPoint;if(nt)if(tt.preventDefault(),function(tt,et){var nt=Bc[et];return void 0===tt.buttons||(tt.buttons&nt)!==nt}(tt,this._eventButton))this.reset();else if(this._moved||!(et.dist(nt)<this._clickTolerance))return this._moved=!0,this._lastPoint=et,this._move(nt,et)},Go.prototype.mouseupWindow=function(tt){this._lastPoint&&nt.mouseButton(tt)===this._eventButton&&(this._moved&&nt.suppressClick(),this.reset())},Go.prototype.enable=function(){this._enabled=!0},Go.prototype.disable=function(){this._enabled=!1,this.reset()},Go.prototype.isEnabled=function(){return this._enabled},Go.prototype.isActive=function(){return this._active};var Fc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.mousedown=function(et,nt){tt.prototype.mousedown.call(this,et,nt),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(tt,et){return 0===et&&!tt.ctrlKey},e.prototype._move=function(tt,et){return{around:et,panDelta:et.sub(tt)}},e}(Go),Zc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._correctButton=function(tt,et){return 0===et&&tt.ctrlKey||2===et},e.prototype._move=function(tt,et){var nt=.8*(et.x-tt.x);if(nt)return this._active=!0,{bearingDelta:nt}},e.prototype.contextmenu=function(tt){tt.preventDefault()},e}(Go),Hc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype._correctButton=function(tt,et){return 0===et&&tt.ctrlKey||2===et},e.prototype._move=function(tt,et){var nt=-.5*(et.y-tt.y);if(nt)return this._active=!0,{pitchDelta:nt}},e.prototype.contextmenu=function(tt){tt.preventDefault()},e}(Go),Ko=function(tt){this._minTouches=1,this._clickTolerance=tt.clickTolerance||1,this.reset()};Ko.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new tt.Point(0,0)},Ko.prototype.touchstart=function(tt,et,nt){return this._calculateTransform(tt,et,nt)},Ko.prototype.touchmove=function(tt,et,nt){if(this._active)return tt.preventDefault(),this._calculateTransform(tt,et,nt)},Ko.prototype.touchend=function(tt,et,nt){this._calculateTransform(tt,et,nt),this._active&&nt.length<this._minTouches&&this.reset()},Ko.prototype.touchcancel=function(){this.reset()},Ko.prototype._calculateTransform=function(et,nt,rt){rt.length>0&&(this._active=!0);var it=No(rt,nt),ot=new tt.Point(0,0),at=new tt.Point(0,0),st=0;for(var ct in it){var pt=it[ct],ft=this._touches[ct];ft&&(ot._add(pt),at._add(pt.sub(ft)),st++,it[ct]=pt)}if(this._touches=it,!(st<this._minTouches)&&at.mag()){var dt=at.div(st);if(this._sum._add(dt),!(this._sum.mag()<this._clickTolerance))return{around:ot.div(st),panDelta:dt}}},Ko.prototype.enable=function(){this._enabled=!0},Ko.prototype.disable=function(){this._enabled=!1,this.reset()},Ko.prototype.isEnabled=function(){return this._enabled},Ko.prototype.isActive=function(){return this._active};var Yo=function(){this.reset()};function Jo(tt,et,nt){for(var rt=0;rt<tt.length;rt++)if(tt[rt].identifier===nt)return et[rt]}function Qo(tt,et){return Math.log(tt/et)/Math.LN2}Yo.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Yo.prototype._start=function(tt){},Yo.prototype._move=function(tt,et,nt){return{}},Yo.prototype.touchstart=function(tt,et,nt){this._firstTwoTouches||nt.length<2||(this._firstTwoTouches=[nt[0].identifier,nt[1].identifier],this._start([et[0],et[1]]))},Yo.prototype.touchmove=function(tt,et,nt){if(this._firstTwoTouches){tt.preventDefault();var rt=this._firstTwoTouches,it=rt[1],ot=Jo(nt,et,rt[0]),at=Jo(nt,et,it);if(ot&&at){var st=this._aroundCenter?null:ot.add(at).div(2);return this._move([ot,at],st,tt)}}},Yo.prototype.touchend=function(tt,et,rt){if(this._firstTwoTouches){var it=this._firstTwoTouches,ot=it[1],at=Jo(rt,et,it[0]),st=Jo(rt,et,ot);at&&st||(this._active&&nt.suppressClick(),this.reset())}},Yo.prototype.touchcancel=function(){this.reset()},Yo.prototype.enable=function(tt){this._enabled=!0,this._aroundCenter=!!tt&&"center"===tt.around},Yo.prototype.disable=function(){this._enabled=!1,this.reset()},Yo.prototype.isEnabled=function(){return this._enabled},Yo.prototype.isActive=function(){return this._active};var Wc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.reset=function(){tt.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(tt){this._startDistance=this._distance=tt[0].dist(tt[1])},e.prototype._move=function(tt,et){var nt=this._distance;if(this._distance=tt[0].dist(tt[1]),this._active||!(Math.abs(Qo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Qo(this._distance,nt),pinchAround:et}},e}(Yo);function tr(tt,et){return 180*tt.angleWith(et)/Math.PI}var Gc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.reset=function(){tt.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(tt){this._startVector=this._vector=tt[0].sub(tt[1]),this._minDiameter=tt[0].dist(tt[1])},e.prototype._move=function(tt,et){var nt=this._vector;if(this._vector=tt[0].sub(tt[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tr(this._vector,nt),pinchAround:et}},e.prototype._isBelowThreshold=function(tt){this._minDiameter=Math.min(this._minDiameter,tt.mag());var et=25/(Math.PI*this._minDiameter)*360,nt=tr(tt,this._startVector);return Math.abs(nt)<et},e}(Yo);function ir(tt){return Math.abs(tt.y)>Math.abs(tt.x)}var Xc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e.prototype.reset=function(){tt.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(tt){this._lastPoints=tt,ir(tt[0].sub(tt[1]))&&(this._valid=!1)},e.prototype._move=function(tt,et,nt){var rt=tt[0].sub(this._lastPoints[0]),it=tt[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(rt,it,nt.timeStamp),this._valid)return this._lastPoints=tt,this._active=!0,{pitchDelta:(rt.y+it.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(tt,et,nt){if(void 0!==this._valid)return this._valid;var rt=tt.mag()>=2,it=et.mag()>=2;if(rt||it){if(!rt||!it)return void 0===this._firstMove&&(this._firstMove=nt),nt-this._firstMove<100&&void 0;var ot=tt.y>0==et.y>0;return ir(tt)&&ir(et)&&ot}},e}(Yo),$c={panStep:100,bearingStep:15,pitchStep:10},ar=function(){var tt=$c;this._panStep=tt.panStep,this._bearingStep=tt.bearingStep,this._pitchStep=tt.pitchStep};function nr(tt){return tt*(2-tt)}ar.prototype.reset=function(){this._active=!1},ar.prototype.keydown=function(tt){var et=this;if(!(tt.altKey||tt.ctrlKey||tt.metaKey)){var nt=0,rt=0,it=0,ot=0,at=0;switch(tt.keyCode){case 61:case 107:case 171:case 187:nt=1;break;case 189:case 109:case 173:nt=-1;break;case 37:tt.shiftKey?rt=-1:(tt.preventDefault(),ot=-1);break;case 39:tt.shiftKey?rt=1:(tt.preventDefault(),ot=1);break;case 38:tt.shiftKey?it=1:(tt.preventDefault(),at=-1);break;case 40:tt.shiftKey?it=-1:(tt.preventDefault(),at=1);break;default:return}return{cameraAnimation:function(st){var ct=st.getZoom();st.easeTo({duration:300,easeId:"keyboardHandler",easing:nr,zoom:nt?Math.round(ct)+nt*(tt.shiftKey?2:1):ct,bearing:st.getBearing()+rt*et._bearingStep,pitch:st.getPitch()+it*et._pitchStep,offset:[-ot*et._panStep,-at*et._panStep],center:st.getCenter()},{originalEvent:tt})}}}},ar.prototype.enable=function(){this._enabled=!0},ar.prototype.disable=function(){this._enabled=!1,this.reset()},ar.prototype.isEnabled=function(){return this._enabled},ar.prototype.isActive=function(){return this._active};var sr=function(et,nt){this._map=et,this._el=et.getCanvasContainer(),this._handler=nt,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,tt.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};sr.prototype.setZoomRate=function(tt){this._defaultZoomRate=tt},sr.prototype.setWheelZoomRate=function(tt){this._wheelZoomRate=tt},sr.prototype.isEnabled=function(){return!!this._enabled},sr.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},sr.prototype.isZooming=function(){return!!this._zooming},sr.prototype.enable=function(tt){this.isEnabled()||(this._enabled=!0,this._aroundCenter=tt&&"center"===tt.around)},sr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sr.prototype.wheel=function(et){if(this.isEnabled()){var nt=et.deltaMode===tt.window.WheelEvent.DOM_DELTA_LINE?40*et.deltaY:et.deltaY,rt=tt.browser.now(),it=rt-(this._lastWheelEventTime||0);this._lastWheelEventTime=rt,0!==nt&&nt%4.000244140625==0?this._type="wheel":0!==nt&&Math.abs(nt)<4?this._type="trackpad":it>400?(this._type=null,this._lastValue=nt,this._timeout=setTimeout(this._onTimeout,40,et)):this._type||(this._type=Math.abs(it*nt)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,nt+=this._lastValue)),et.shiftKey&&nt&&(nt/=4),this._type&&(this._lastWheelEvent=et,this._delta-=nt,this._active||this._start(et)),et.preventDefault()}},sr.prototype._onTimeout=function(tt){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(tt)},sr.prototype._start=function(et){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var rt=nt.mousePos(this._el,et);this._around=tt.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(rt)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sr.prototype.renderFrame=function(){return this._onScrollFrame()},sr.prototype._onScrollFrame=function(){var et=this;if(this._frameId&&(this._frameId=null,this.isActive())){var nt=this._map.transform;if(0!==this._delta){var rt="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,it=2/(1+Math.exp(-Math.abs(this._delta*rt)));this._delta<0&&0!==it&&(it=1/it);var ot="number"==typeof this._targetZoom?nt.zoomScale(this._targetZoom):nt.scale;this._targetZoom=Math.min(nt.maxZoom,Math.max(nt.minZoom,nt.scaleZoom(ot*it))),"wheel"===this._type&&(this._startZoom=nt.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var at,st="number"==typeof this._targetZoom?this._targetZoom:nt.zoom,ct=this._startZoom,pt=this._easing,ft=!1;if("wheel"===this._type&&ct&&pt){var dt=Math.min((tt.browser.now()-this._lastWheelEventTime)/200,1),mt=pt(dt);at=tt.number(ct,st,mt),dt<1?this._frameId||(this._frameId=!0):ft=!0}else at=st,ft=!0;return this._active=!0,ft&&(this._active=!1,this._finishTimeout=setTimeout((function(){et._zooming=!1,et._handler._triggerRenderFrame(),delete et._targetZoom,delete et._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!ft,zoomDelta:at-nt.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sr.prototype._smoothOutEasing=function(et){var nt=tt.ease;if(this._prevEase){var rt=this._prevEase,it=(tt.browser.now()-rt.start)/rt.duration,ot=rt.easing(it+.01)-rt.easing(it),at=.27/Math.sqrt(ot*ot+1e-4)*.01,st=Math.sqrt(.0729-at*at);nt=tt.bezier(at,st,.25,1)}return this._prevEase={start:tt.browser.now(),duration:et,easing:nt},nt},sr.prototype.reset=function(){this._active=!1};var lr=function(tt,et){this._clickZoom=tt,this._tapZoom=et};lr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},lr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},lr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},lr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var cr=function(){this.reset()};cr.prototype.reset=function(){this._active=!1},cr.prototype.dblclick=function(tt,et){return tt.preventDefault(),{cameraAnimation:function(nt){nt.easeTo({duration:300,zoom:nt.getZoom()+(tt.shiftKey?-1:1),around:nt.unproject(et)},{originalEvent:tt})}}},cr.prototype.enable=function(){this._enabled=!0},cr.prototype.disable=function(){this._enabled=!1,this.reset()},cr.prototype.isEnabled=function(){return this._enabled},cr.prototype.isActive=function(){return this._active};var ur=function(){this._tap=new jo({numTouches:1,numTaps:1}),this.reset()};ur.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ur.prototype.touchstart=function(tt,et,nt){this._swipePoint||(this._tapTime&&tt.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?nt.length>0&&(this._swipePoint=et[0],this._swipeTouch=nt[0].identifier):this._tap.touchstart(tt,et,nt))},ur.prototype.touchmove=function(tt,et,nt){if(this._tapTime){if(this._swipePoint){if(nt[0].identifier!==this._swipeTouch)return;var rt=et[0],it=rt.y-this._swipePoint.y;return this._swipePoint=rt,tt.preventDefault(),this._active=!0,{zoomDelta:it/128}}}else this._tap.touchmove(tt,et,nt)},ur.prototype.touchend=function(tt,et,nt){this._tapTime?this._swipePoint&&0===nt.length&&this.reset():this._tap.touchend(tt,et,nt)&&(this._tapTime=tt.timeStamp)},ur.prototype.touchcancel=function(){this.reset()},ur.prototype.enable=function(){this._enabled=!0},ur.prototype.disable=function(){this._enabled=!1,this.reset()},ur.prototype.isEnabled=function(){return this._enabled},ur.prototype.isActive=function(){return this._active};var hr=function(tt,et,nt){this._el=tt,this._mousePan=et,this._touchPan=nt};hr.prototype.enable=function(tt){this._inertiaOptions=tt||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},hr.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},hr.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},hr.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pr=function(tt,et,nt){this._pitchWithRotate=tt.pitchWithRotate,this._mouseRotate=et,this._mousePitch=nt};pr.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pr.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pr.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var dr=function(tt,et,nt,rt){this._el=tt,this._touchZoom=et,this._touchRotate=nt,this._tapDragZoom=rt,this._rotationDisabled=!1,this._enabled=!0};dr.prototype.enable=function(tt){this._touchZoom.enable(tt),this._rotationDisabled||this._touchRotate.enable(tt),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},dr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},dr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},dr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},dr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},dr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var _r=function(tt){return tt.zoom||tt.drag||tt.pitch||tt.rotate},Yc=function(tt){function e(){tt.apply(this,arguments)}return tt&&(e.__proto__=tt),(e.prototype=Object.create(tt&&tt.prototype)).constructor=e,e}(tt.Event);function mr(tt){return tt.panDelta&&tt.panDelta.mag()||tt.zoomDelta||tt.bearingDelta||tt.pitchDelta}var gr=function(et,rt){this._map=et,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mo(et),this._bearingSnap=rt.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(rt),tt.bindAll(["handleEvent","handleWindowEvent"],this);var it=this._el;this._listeners=[[it,"touchstart",{passive:!0}],[it,"touchmove",{passive:!1}],[it,"touchend",void 0],[it,"touchcancel",void 0],[it,"mousedown",void 0],[it,"mousemove",void 0],[it,"mouseup",void 0],[tt.window.document,"mousemove",{capture:!0}],[tt.window.document,"mouseup",void 0],[it,"mouseover",void 0],[it,"mouseout",void 0],[it,"dblclick",void 0],[it,"click",void 0],[it,"keydown",{capture:!1}],[it,"keyup",void 0],[it,"wheel",{passive:!1}],[it,"contextmenu",void 0],[tt.window,"blur",void 0]];for(var ot=0,at=this._listeners;ot<at.length;ot+=1){var st=at[ot],ct=st[0];nt.addEventListener(ct,st[1],ct===tt.window.document?this.handleWindowEvent:this.handleEvent,st[2])}};gr.prototype.destroy=function(){for(var et=0,rt=this._listeners;et<rt.length;et+=1){var it=rt[et],ot=it[0];nt.removeEventListener(ot,it[1],ot===tt.window.document?this.handleWindowEvent:this.handleEvent,it[2])}},gr.prototype._addDefaultHandlers=function(tt){var et=this._map,nt=et.getCanvasContainer();this._add("mapEvent",new Oo(et,tt));var rt=et.boxZoom=new Uo(et,tt);this._add("boxZoom",rt);var it=new qo,ot=new cr;et.doubleClickZoom=new lr(ot,it),this._add("tapZoom",it),this._add("clickZoom",ot);var at=new ur;this._add("tapDragZoom",at);var st=et.touchPitch=new Xc;this._add("touchPitch",st);var ct=new Zc(tt),pt=new Hc(tt);et.dragRotate=new pr(tt,ct,pt),this._add("mouseRotate",ct,["mousePitch"]),this._add("mousePitch",pt,["mouseRotate"]);var ft=new Fc(tt),dt=new Ko(tt);et.dragPan=new hr(nt,ft,dt),this._add("mousePan",ft),this._add("touchPan",dt,["touchZoom","touchRotate"]);var mt=new Gc,yt=new Wc;et.touchZoomRotate=new dr(nt,yt,mt,at),this._add("touchRotate",mt,["touchPan","touchZoom"]),this._add("touchZoom",yt,["touchPan","touchRotate"]);var vt=et.scrollZoom=new sr(et,this);this._add("scrollZoom",vt,["mousePan"]);var Dt=et.keyboard=new ar;this._add("keyboard",Dt),this._add("blockableMapEvent",new Fo(et));for(var Ot=0,Rt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ot<Rt.length;Ot+=1){var Bt=Rt[Ot];tt.interactive&&tt[Bt]&&et[Bt].enable(tt[Bt])}},gr.prototype._add=function(tt,et,nt){this._handlers.push({handlerName:tt,handler:et,allowed:nt}),this._handlersById[tt]=et},gr.prototype.stop=function(){if(!this._updatingCamera){for(var tt=0,et=this._handlers;tt<et.length;tt+=1)et[tt].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},gr.prototype.isActive=function(){for(var tt=0,et=this._handlers;tt<et.length;tt+=1)if(et[tt].handler.isActive())return!0;return!1},gr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},gr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},gr.prototype.isMoving=function(){return Boolean(_r(this._eventsInProgress))||this.isZooming()},gr.prototype._blockedByActive=function(tt,et,nt){for(var rt in tt)if(rt!==nt&&(!et||et.indexOf(rt)<0))return!0;return!1},gr.prototype.handleWindowEvent=function(tt){this.handleEvent(tt,tt.type+"Window")},gr.prototype._getMapTouches=function(tt){for(var et=[],nt=0,rt=tt;nt<rt.length;nt+=1){var it=rt[nt];this._el.contains(it.target)&&et.push(it)}return et},gr.prototype.handleEvent=function(tt,et){if("blur"!==tt.type){this._updatingCamera=!0;for(var rt="renderFrame"===tt.type?void 0:tt,it={needsRenderFrame:!1},ot={},at={},st=tt.touches?this._getMapTouches(tt.touches):void 0,ct=st?nt.touchPos(this._el,st):nt.mousePos(this._el,tt),pt=0,ft=this._handlers;pt<ft.length;pt+=1){var dt=ft[pt],mt=dt.handlerName,yt=dt.handler,vt=dt.allowed;if(yt.isEnabled()){var Dt=void 0;this._blockedByActive(at,vt,mt)?yt.reset():yt[et||tt.type]&&(Dt=yt[et||tt.type](tt,ct,st),this.mergeHandlerResult(it,ot,Dt,mt,rt),Dt&&Dt.needsRenderFrame&&this._triggerRenderFrame()),(Dt||yt.isActive())&&(at[mt]=yt)}}var Ot={};for(var Rt in this._previousActiveHandlers)at[Rt]||(Ot[Rt]=rt);this._previousActiveHandlers=at,(Object.keys(Ot).length||mr(it))&&(this._changes.push([it,ot,Ot]),this._triggerRenderFrame()),(Object.keys(at).length||mr(it))&&this._map._stop(!0),this._updatingCamera=!1;var Bt=it.cameraAnimation;Bt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Bt(this._map))}else this.stop()},gr.prototype.mergeHandlerResult=function(et,nt,rt,it,ot){if(rt){tt.extend(et,rt);var at={handlerName:it,originalEvent:rt.originalEvent||ot};void 0!==rt.zoomDelta&&(nt.zoom=at),void 0!==rt.panDelta&&(nt.drag=at),void 0!==rt.pitchDelta&&(nt.pitch=at),void 0!==rt.bearingDelta&&(nt.rotate=at)}},gr.prototype._applyChanges=function(){for(var et={},nt={},rt={},it=0,ot=this._changes;it<ot.length;it+=1){var at=ot[it],st=at[0],ct=at[1],pt=at[2];st.panDelta&&(et.panDelta=(et.panDelta||new tt.Point(0,0))._add(st.panDelta)),st.zoomDelta&&(et.zoomDelta=(et.zoomDelta||0)+st.zoomDelta),st.bearingDelta&&(et.bearingDelta=(et.bearingDelta||0)+st.bearingDelta),st.pitchDelta&&(et.pitchDelta=(et.pitchDelta||0)+st.pitchDelta),void 0!==st.around&&(et.around=st.around),void 0!==st.pinchAround&&(et.pinchAround=st.pinchAround),st.noInertia&&(et.noInertia=st.noInertia),tt.extend(nt,ct),tt.extend(rt,pt)}this._updateMapTransform(et,nt,rt),this._changes=[]},gr.prototype._updateMapTransform=function(tt,et,nt){var rt=this._map,it=rt.transform;if(!mr(tt))return this._fireEvents(et,nt);var ot=tt.panDelta,at=tt.zoomDelta,st=tt.bearingDelta,ct=tt.pitchDelta,pt=tt.around,ft=tt.pinchAround;void 0!==ft&&(pt=ft),rt._stop(!0),pt=pt||rt.transform.centerPoint;var dt=it.pointLocation(ot?pt.sub(ot):pt);st&&(it.bearing+=st),ct&&(it.pitch+=ct),at&&(it.zoom+=at),it.setLocationAtPoint(dt,pt),this._map._update(),tt.noInertia||this._inertia.record(tt),this._fireEvents(et,nt)},gr.prototype._fireEvents=function(et,nt){var rt=this,it=_r(this._eventsInProgress),ot=_r(et),at={};for(var st in et)this._eventsInProgress[st]||(at[st+"start"]=et[st].originalEvent),this._eventsInProgress[st]=et[st];for(var ct in!it&&ot&&this._fireEvent("movestart",ot.originalEvent),at)this._fireEvent(ct,at[ct]);for(var pt in et.rotate&&(this._bearingChanged=!0),ot&&this._fireEvent("move",ot.originalEvent),et)this._fireEvent(pt,et[pt].originalEvent);var ft,dt={};for(var mt in this._eventsInProgress){var yt=this._eventsInProgress[mt],vt=yt.handlerName,Dt=yt.originalEvent;this._handlersById[vt].isActive()||(delete this._eventsInProgress[mt],dt[mt+"end"]=ft=nt[vt]||Dt)}for(var Ot in dt)this._fireEvent(Ot,dt[Ot]);var Rt=_r(this._eventsInProgress);if((it||ot)&&!Rt){this._updatingCamera=!0;var Bt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),y=function(tt){return 0!==tt&&-rt._bearingSnap<tt&&tt<rt._bearingSnap};Bt?(y(Bt.bearing||this._map.getBearing())&&(Bt.bearing=0),this._map.easeTo(Bt,{originalEvent:ft})):(this._map.fire(new tt.Event("moveend",{originalEvent:ft})),y(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},gr.prototype._fireEvent=function(et,nt){this._map.fire(new tt.Event(et,nt?{originalEvent:nt}:{}))},gr.prototype._triggerRenderFrame=function(){var tt=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame((function(et){delete tt._frameId,tt.handleEvent(new Yc("renderFrame",{timeStamp:et})),tt._applyChanges()})))};var rp=function(et){function i(nt,rt){et.call(this),this._moving=!1,this._zooming=!1,this.transform=nt,this._bearingSnap=rt.bearingSnap,tt.bindAll(["_renderFrameCallback"],this)}return et&&(i.__proto__=et),(i.prototype=Object.create(et&&et.prototype)).constructor=i,i.prototype.getCenter=function(){return new tt.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(tt,et){return this.jumpTo({center:tt},et)},i.prototype.panBy=function(et,nt,rt){return et=tt.Point.convert(et).mult(-1),this.panTo(this.transform.center,tt.extend({offset:et},nt),rt)},i.prototype.panTo=function(et,nt,rt){return this.easeTo(tt.extend({center:et},nt),rt)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(tt,et){return this.jumpTo({zoom:tt},et),this},i.prototype.zoomTo=function(et,nt,rt){return this.easeTo(tt.extend({zoom:et},nt),rt)},i.prototype.zoomIn=function(tt,et){return this.zoomTo(this.getZoom()+1,tt,et),this},i.prototype.zoomOut=function(tt,et){return this.zoomTo(this.getZoom()-1,tt,et),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(tt,et){return this.jumpTo({bearing:tt},et),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(tt,et){return this.jumpTo({padding:tt},et),this},i.prototype.rotateTo=function(et,nt,rt){return this.easeTo(tt.extend({bearing:et},nt),rt)},i.prototype.resetNorth=function(et,nt){return this.rotateTo(0,tt.extend({duration:1e3},et),nt),this},i.prototype.resetNorthPitch=function(et,nt){return this.easeTo(tt.extend({bearing:0,pitch:0,duration:1e3},et),nt),this},i.prototype.snapToNorth=function(tt,et){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(tt,et):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(tt,et){return this.jumpTo({pitch:tt},et),this},i.prototype.cameraForBounds=function(et,nt){return et=tt.LngLatBounds.convert(et),this._cameraForBoxAndBearing(et.getNorthWest(),et.getSouthEast(),0,nt)},i.prototype._cameraForBoxAndBearing=function(et,nt,rt,it){var ot={top:0,bottom:0,right:0,left:0};if("number"==typeof(it=tt.extend({padding:ot,offset:[0,0],maxZoom:this.transform.maxZoom},it)).padding){var at=it.padding;it.padding={top:at,bottom:at,right:at,left:at}}it.padding=tt.extend(ot,it.padding);var st=this.transform,ct=st.padding,pt=st.project(tt.LngLat.convert(et)),ft=st.project(tt.LngLat.convert(nt)),dt=pt.rotate(-rt*Math.PI/180),mt=ft.rotate(-rt*Math.PI/180),yt=new tt.Point(Math.max(dt.x,mt.x),Math.max(dt.y,mt.y)),vt=new tt.Point(Math.min(dt.x,mt.x),Math.min(dt.y,mt.y)),Dt=yt.sub(vt),Ot=(st.width-(ct.left+ct.right+it.padding.left+it.padding.right))/Dt.x,Rt=(st.height-(ct.top+ct.bottom+it.padding.top+it.padding.bottom))/Dt.y;if(!(Rt<0||Ot<0)){var Bt=Math.min(st.scaleZoom(st.scale*Math.min(Ot,Rt)),it.maxZoom),Ne=tt.Point.convert(it.offset),rn=new tt.Point(Ne.x+(it.padding.left-it.padding.right)/2,Ne.y+(it.padding.top-it.padding.bottom)/2).mult(st.scale/st.zoomScale(Bt));return{center:st.unproject(pt.add(ft).div(2).sub(rn)),zoom:Bt,bearing:rt}}tt.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(tt,et,nt){return this._fitInternal(this.cameraForBounds(tt,et),et,nt)},i.prototype.fitScreenCoordinates=function(et,nt,rt,it,ot){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(tt.Point.convert(et)),this.transform.pointLocation(tt.Point.convert(nt)),rt,it),it,ot)},i.prototype._fitInternal=function(et,nt,rt){return et?(delete(nt=tt.extend(et,nt)).padding,nt.linear?this.easeTo(nt,rt):this.flyTo(nt,rt)):this},i.prototype.jumpTo=function(et,nt){this.stop();var rt=this.transform,it=!1,ot=!1,at=!1;return"zoom"in et&&rt.zoom!==+et.zoom&&(it=!0,rt.zoom=+et.zoom),void 0!==et.center&&(rt.center=tt.LngLat.convert(et.center)),"bearing"in et&&rt.bearing!==+et.bearing&&(ot=!0,rt.bearing=+et.bearing),"pitch"in et&&rt.pitch!==+et.pitch&&(at=!0,rt.pitch=+et.pitch),null==et.padding||rt.isPaddingEqual(et.padding)||(rt.padding=et.padding),this.fire(new tt.Event("movestart",nt)).fire(new tt.Event("move",nt)),it&&this.fire(new tt.Event("zoomstart",nt)).fire(new tt.Event("zoom",nt)).fire(new tt.Event("zoomend",nt)),ot&&this.fire(new tt.Event("rotatestart",nt)).fire(new tt.Event("rotate",nt)).fire(new tt.Event("rotateend",nt)),at&&this.fire(new tt.Event("pitchstart",nt)).fire(new tt.Event("pitch",nt)).fire(new tt.Event("pitchend",nt)),this.fire(new tt.Event("moveend",nt))},i.prototype.easeTo=function(et,nt){var rt=this;this._stop(!1,et.easeId),(!1===(et=tt.extend({offset:[0,0],duration:500,easing:tt.ease},et)).animate||!et.essential&&tt.browser.prefersReducedMotion)&&(et.duration=0);var it=this.transform,ot=this.getZoom(),at=this.getBearing(),st=this.getPitch(),ct=this.getPadding(),pt="zoom"in et?+et.zoom:ot,ft="bearing"in et?this._normalizeBearing(et.bearing,at):at,dt="pitch"in et?+et.pitch:st,mt="padding"in et?et.padding:it.padding,yt=tt.Point.convert(et.offset),vt=it.centerPoint.add(yt),Dt=it.pointLocation(vt),Ot=tt.LngLat.convert(et.center||Dt);this._normalizeCenter(Ot);var Rt,Bt,Ne=it.project(Dt),rn=it.project(Ot).sub(Ne),vn=it.zoomScale(pt-ot);et.around&&(Rt=tt.LngLat.convert(et.around),Bt=it.locationPoint(Rt));var bn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||pt!==ot,this._rotating=this._rotating||at!==ft,this._pitching=this._pitching||dt!==st,this._padding=!it.isPaddingEqual(mt),this._easeId=et.easeId,this._prepareEase(nt,et.noMoveStart,bn),clearTimeout(this._easeEndTimeoutID),this._ease((function(et){if(rt._zooming&&(it.zoom=tt.number(ot,pt,et)),rt._rotating&&(it.bearing=tt.number(at,ft,et)),rt._pitching&&(it.pitch=tt.number(st,dt,et)),rt._padding&&(it.interpolatePadding(ct,mt,et),vt=it.centerPoint.add(yt)),Rt)it.setLocationAtPoint(Rt,Bt);else{var Dt=it.zoomScale(it.zoom-ot),Ot=pt>ot?Math.min(2,vn):Math.max(.5,vn),bn=Math.pow(Ot,1-et),Tn=it.unproject(Ne.add(rn.mult(et*bn)).mult(Dt));it.setLocationAtPoint(it.renderWorldCopies?Tn.wrap():Tn,vt)}rt._fireMoveEvents(nt)}),(function(tt){rt._afterEase(nt,tt)}),et),this},i.prototype._prepareEase=function(et,nt,rt){void 0===rt&&(rt={}),this._moving=!0,nt||rt.moving||this.fire(new tt.Event("movestart",et)),this._zooming&&!rt.zooming&&this.fire(new tt.Event("zoomstart",et)),this._rotating&&!rt.rotating&&this.fire(new tt.Event("rotatestart",et)),this._pitching&&!rt.pitching&&this.fire(new tt.Event("pitchstart",et))},i.prototype._fireMoveEvents=function(et){this.fire(new tt.Event("move",et)),this._zooming&&this.fire(new tt.Event("zoom",et)),this._rotating&&this.fire(new tt.Event("rotate",et)),this._pitching&&this.fire(new tt.Event("pitch",et))},i.prototype._afterEase=function(et,nt){if(!this._easeId||!nt||this._easeId!==nt){delete this._easeId;var rt=this._zooming,it=this._rotating,ot=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,rt&&this.fire(new tt.Event("zoomend",et)),it&&this.fire(new tt.Event("rotateend",et)),ot&&this.fire(new tt.Event("pitchend",et)),this.fire(new tt.Event("moveend",et))}},i.prototype.flyTo=function(et,nt){var rt=this;if(!et.essential&&tt.browser.prefersReducedMotion){var it=tt.pick(et,["center","zoom","bearing","pitch","around"]);return this.jumpTo(it,nt)}this.stop(),et=tt.extend({offset:[0,0],speed:1.2,curve:1.42,easing:tt.ease},et);var ot=this.transform,at=this.getZoom(),st=this.getBearing(),ct=this.getPitch(),pt=this.getPadding(),ft="zoom"in et?tt.clamp(+et.zoom,ot.minZoom,ot.maxZoom):at,dt="bearing"in et?this._normalizeBearing(et.bearing,st):st,mt="pitch"in et?+et.pitch:ct,yt="padding"in et?et.padding:ot.padding,vt=ot.zoomScale(ft-at),Dt=tt.Point.convert(et.offset),Ot=ot.centerPoint.add(Dt),Rt=ot.pointLocation(Ot),Bt=tt.LngLat.convert(et.center||Rt);this._normalizeCenter(Bt);var Ne=ot.project(Rt),rn=ot.project(Bt).sub(Ne),vn=et.curve,bn=Math.max(ot.width,ot.height),Tn=bn/vt,Cn=rn.mag();if("minZoom"in et){var Ln=tt.clamp(Math.min(et.minZoom,at,ft),ot.minZoom,ot.maxZoom),In=bn/ot.zoomScale(Ln-at);vn=Math.sqrt(In/Cn*2)}var Mn=vn*vn;function C(tt){var et=(Tn*Tn-bn*bn+(tt?-1:1)*Mn*Mn*Cn*Cn)/(2*(tt?Tn:bn)*Mn*Cn);return Math.log(Math.sqrt(et*et+1)-et)}function z(tt){return(Math.exp(tt)-Math.exp(-tt))/2}function D(tt){return(Math.exp(tt)+Math.exp(-tt))/2}var zn=C(0),L=function(tt){return D(zn)/D(zn+vn*tt)},A=function(tt){return bn*((D(zn)*(z(et=zn+vn*tt)/D(et))-z(zn))/Mn)/Cn;var et},Bn=(C(1)-zn)/vn;if(Math.abs(Cn)<1e-6||!isFinite(Bn)){if(Math.abs(bn-Tn)<1e-6)return this.easeTo(et,nt);var Fn=Tn<bn?-1:1;Bn=Math.abs(Math.log(Tn/bn))/vn,A=function(){return 0},L=function(tt){return Math.exp(Fn*vn*tt)}}return et.duration="duration"in et?+et.duration:1e3*Bn/("screenSpeed"in et?+et.screenSpeed/vn:+et.speed),et.maxDuration&&et.duration>et.maxDuration&&(et.duration=0),this._zooming=!0,this._rotating=st!==dt,this._pitching=mt!==ct,this._padding=!ot.isPaddingEqual(yt),this._prepareEase(nt,!1),this._ease((function(et){var it=et*Bn,vt=1/L(it);ot.zoom=1===et?ft:at+ot.scaleZoom(vt),rt._rotating&&(ot.bearing=tt.number(st,dt,et)),rt._pitching&&(ot.pitch=tt.number(ct,mt,et)),rt._padding&&(ot.interpolatePadding(pt,yt,et),Ot=ot.centerPoint.add(Dt));var Rt=1===et?Bt:ot.unproject(Ne.add(rn.mult(A(it))).mult(vt));ot.setLocationAtPoint(ot.renderWorldCopies?Rt.wrap():Rt,Ot),rt._fireMoveEvents(nt)}),(function(){return rt._afterEase(nt)}),et),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(tt,et){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var nt=this._onEaseEnd;delete this._onEaseEnd,nt.call(this,et)}if(!tt){var rt=this.handlers;rt&&rt.stop()}return this},i.prototype._ease=function(et,nt,rt){!1===rt.animate||0===rt.duration?(et(1),nt()):(this._easeStart=tt.browser.now(),this._easeOptions=rt,this._onEaseFrame=et,this._onEaseEnd=nt,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var et=Math.min((tt.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(et)),et<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(et,nt){et=tt.wrap(et,-180,180);var rt=Math.abs(et-nt);return Math.abs(et-360-nt)<rt&&(et-=360),Math.abs(et+360-nt)<rt&&(et+=360),et},i.prototype._normalizeCenter=function(tt){var et=this.transform;if(et.renderWorldCopies&&!et.lngRange){var nt=tt.lng-et.center.lng;tt.lng+=nt>180?-360:nt<-180?360:0}},i}(tt.Evented),yr=function(et){void 0===et&&(et={}),this.options=et,tt.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};yr.prototype.getDefaultPosition=function(){return"bottom-right"},yr.prototype.onAdd=function(tt){var et=this.options&&this.options.compact;return this._map=tt,this._container=nt.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=nt.create("div","mapboxgl-ctrl-attrib-inner",this._container),et&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===et&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},yr.prototype.onRemove=function(){nt.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},yr.prototype._updateEditLink=function(){var et=this._editLink;et||(et=this._editLink=this._container.querySelector(".mapbox-improve-map"));var nt=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||tt.config.ACCESS_TOKEN}];if(et){var rt=nt.reduce((function(tt,et,rt){return et.value&&(tt+=et.key+"="+et.value+(rt<nt.length-1?"&":"")),tt}),"?");et.href=tt.config.FEEDBACK_URL+"/"+rt+(this._map._hash?this._map._hash.getHashString(!0):""),et.rel="noopener nofollow"}},yr.prototype._updateData=function(tt){!tt||"metadata"!==tt.sourceDataType&&"style"!==tt.dataType||(this._updateAttributions(),this._updateEditLink())},yr.prototype._updateAttributions=function(){if(this._map.style){var tt=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?tt=tt.concat(this.options.customAttribution.map((function(tt){return"string"!=typeof tt?"":tt}))):"string"==typeof this.options.customAttribution&&tt.push(this.options.customAttribution)),this._map.style.stylesheet){var et=this._map.style.stylesheet;this.styleOwner=et.owner,this.styleId=et.id}var nt=this._map.style.sourceCaches;for(var rt in nt){var it=nt[rt];if(it.used){var ot=it.getSource();ot.attribution&&tt.indexOf(ot.attribution)<0&&tt.push(ot.attribution)}}tt.sort((function(tt,et){return tt.length-et.length}));var at=(tt=tt.filter((function(et,nt){for(var rt=nt+1;rt<tt.length;rt++)if(tt[rt].indexOf(et)>=0)return!1;return!0}))).join(" | ");at!==this._attribHTML&&(this._attribHTML=at,tt.length?(this._innerContainer.innerHTML=at,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},yr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var xr=function(){tt.bindAll(["_updateLogo"],this),tt.bindAll(["_updateCompact"],this)};xr.prototype.onAdd=function(tt){this._map=tt,this._container=nt.create("div","mapboxgl-ctrl");var et=nt.create("a","mapboxgl-ctrl-logo");return et.target="_blank",et.rel="noopener nofollow",et.href="https://www.mapbox.com/",et.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),et.setAttribute("rel","noopener nofollow"),this._container.appendChild(et),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},xr.prototype.onRemove=function(){nt.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},xr.prototype.getDefaultPosition=function(){return"bottom-left"},xr.prototype._updateLogo=function(tt){tt&&"metadata"!==tt.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},xr.prototype._logoRequired=function(){if(this._map.style){var tt=this._map.style.sourceCaches;for(var et in tt)if(tt[et].getSource().mapbox_logo)return!0;return!1}},xr.prototype._updateCompact=function(){var tt=this._container.children;if(tt.length){var et=tt[0];this._map.getCanvasContainer().offsetWidth<250?et.classList.add("mapboxgl-compact"):et.classList.remove("mapboxgl-compact")}};var br=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};br.prototype.add=function(tt){var et=++this._id;return this._queue.push({callback:tt,id:et,cancelled:!1}),et},br.prototype.remove=function(tt){for(var et=this._currentlyRunning,nt=0,rt=et?this._queue.concat(et):this._queue;nt<rt.length;nt+=1){var it=rt[nt];if(it.id===tt)return void(it.cancelled=!0)}},br.prototype.run=function(tt){void 0===tt&&(tt=0);var et=this._currentlyRunning=this._queue;this._queue=[];for(var nt=0,rt=et;nt<rt.length;nt+=1){var it=rt[nt];if(!it.cancelled&&(it.callback(tt),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},br.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ip={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},op=tt.window.HTMLImageElement,ap=tt.window.HTMLElement,sp=tt.window.ImageBitmap,up={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},lp=function(rt){function r(et){var nt=this;if(null!=(et=tt.extend({},up,et)).minZoom&&null!=et.maxZoom&&et.minZoom>et.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=et.minPitch&&null!=et.maxPitch&&et.minPitch>et.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=et.minPitch&&et.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=et.maxPitch&&et.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var it=new To(et.minZoom,et.maxZoom,et.minPitch,et.maxPitch,et.renderWorldCopies);if(rt.call(this,it,et),this._interactive=et.interactive,this._maxTileCacheSize=et.maxTileCacheSize,this._failIfMajorPerformanceCaveat=et.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=et.preserveDrawingBuffer,this._antialias=et.antialias,this._trackResize=et.trackResize,this._bearingSnap=et.bearingSnap,this._refreshExpiredTiles=et.refreshExpiredTiles,this._fadeDuration=et.fadeDuration,this._crossSourceCollisions=et.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=et.collectResourceTiming,this._renderTaskQueue=new br,this._controls=[],this._mapId=tt.uniqueId(),this._locale=tt.extend({},ip,et.locale),this._requestManager=new tt.RequestManager(et.transformRequest,et.accessToken),"string"==typeof et.container){if(this._container=tt.window.document.getElementById(et.container),!this._container)throw new Error("Container '"+et.container+"' not found.")}else{if(!(et.container instanceof ap))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=et.container}if(et.maxBounds&&this.setMaxBounds(et.maxBounds),tt.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return nt._update(!1)})),this.on("moveend",(function(){return nt._update(!1)})),this.on("zoom",(function(){return nt._update(!0)})),void 0!==tt.window&&(tt.window.addEventListener("online",this._onWindowOnline,!1),tt.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new gr(this,et),this._hash=et.hash&&new Io("string"==typeof et.hash&&et.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:et.center,zoom:et.zoom,bearing:et.bearing,pitch:et.pitch}),et.bounds&&(this.resize(),this.fitBounds(et.bounds,tt.extend({},et.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=et.localIdeographFontFamily,et.style&&this.setStyle(et.style,{localIdeographFontFamily:et.localIdeographFontFamily}),et.attributionControl&&this.addControl(new yr({customAttribution:et.customAttribution})),this.addControl(new xr,et.logoPosition),this.on("style.load",(function(){nt.transform.unmodified&&nt.jumpTo(nt.style.stylesheet)})),this.on("data",(function(et){nt._update("style"===et.dataType),nt.fire(new tt.Event(et.dataType+"data",et))})),this.on("dataloading",(function(et){nt.fire(new tt.Event(et.dataType+"dataloading",et))}))}rt&&(r.__proto__=rt),(r.prototype=Object.create(rt&&rt.prototype)).constructor=r;var it={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(et,nt){if(void 0===nt&&et.getDefaultPosition&&(nt=et.getDefaultPosition()),void 0===nt&&(nt="top-right"),!et||!et.onAdd)return this.fire(new tt.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var rt=et.onAdd(this);this._controls.push(et);var it=this._controlPositions[nt];return-1!==nt.indexOf("bottom")?it.insertBefore(rt,it.firstChild):it.appendChild(rt),this},r.prototype.removeControl=function(et){if(!et||!et.onRemove)return this.fire(new tt.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var nt=this._controls.indexOf(et);return nt>-1&&this._controls.splice(nt,1),et.onRemove(this),this},r.prototype.resize=function(et){var nt=this._containerDimensions(),rt=nt[0],it=nt[1];this._resizeCanvas(rt,it),this.transform.resize(rt,it),this.painter.resize(rt,it);var ot=!this._moving;return ot&&(this.stop(),this.fire(new tt.Event("movestart",et)).fire(new tt.Event("move",et))),this.fire(new tt.Event("resize",et)),ot&&this.fire(new tt.Event("moveend",et)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(et){return this.transform.setMaxBounds(tt.LngLatBounds.convert(et)),this._update()},r.prototype.setMinZoom=function(tt){if((tt=null==tt?-2:tt)>=-2&&tt<=this.transform.maxZoom)return this.transform.minZoom=tt,this._update(),this.getZoom()<tt&&this.setZoom(tt),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(tt){if((tt=null==tt?22:tt)>=this.transform.minZoom)return this.transform.maxZoom=tt,this._update(),this.getZoom()>tt&&this.setZoom(tt),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.setMinPitch=function(tt){if((tt=null==tt?0:tt)<0)throw new Error("minPitch must be greater than or equal to 0");if(tt>=0&&tt<=this.transform.maxPitch)return this.transform.minPitch=tt,this._update(),this.getPitch()<tt&&this.setPitch(tt),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},r.prototype.getMinPitch=function(){return this.transform.minPitch},r.prototype.setMaxPitch=function(tt){if((tt=null==tt?60:tt)>60)throw new Error("maxPitch must be less than or equal to 60");if(tt>=this.transform.minPitch)return this.transform.maxPitch=tt,this._update(),this.getPitch()>tt&&this.setPitch(tt),this;throw new Error("maxPitch must be greater than the current minPitch")},r.prototype.getMaxPitch=function(){return this.transform.maxPitch},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(tt){return this.transform.renderWorldCopies=tt,this._update()},r.prototype.project=function(et){return this.transform.locationPoint(tt.LngLat.convert(et))},r.prototype.unproject=function(et){return this.transform.pointLocation(tt.Point.convert(et))},r.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},r.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},r.prototype._createDelegatedListener=function(tt,et,nt){var rt,it=this;if("mouseenter"===tt||"mouseover"===tt){var ot=!1;return{layer:et,listener:nt,delegates:{mousemove:function(rt){var at=it.getLayer(et)?it.queryRenderedFeatures(rt.point,{layers:[et]}):[];at.length?ot||(ot=!0,nt.call(it,new Ac(tt,it,rt.originalEvent,{features:at}))):ot=!1},mouseout:function(){ot=!1}}}}if("mouseleave"===tt||"mouseout"===tt){var at=!1;return{layer:et,listener:nt,delegates:{mousemove:function(rt){(it.getLayer(et)?it.queryRenderedFeatures(rt.point,{layers:[et]}):[]).length?at=!0:at&&(at=!1,nt.call(it,new Ac(tt,it,rt.originalEvent)))},mouseout:function(et){at&&(at=!1,nt.call(it,new Ac(tt,it,et.originalEvent)))}}}}return{layer:et,listener:nt,delegates:(rt={},rt[tt]=function(tt){var rt=it.getLayer(et)?it.queryRenderedFeatures(tt.point,{layers:[et]}):[];rt.length&&(tt.features=rt,nt.call(it,tt),delete tt.features)},rt)}},r.prototype.on=function(tt,et,nt){if(void 0===nt)return rt.prototype.on.call(this,tt,et);var it=this._createDelegatedListener(tt,et,nt);for(var ot in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[tt]=this._delegatedListeners[tt]||[],this._delegatedListeners[tt].push(it),it.delegates)this.on(ot,it.delegates[ot]);return this},r.prototype.once=function(tt,et,nt){if(void 0===nt)return rt.prototype.once.call(this,tt,et);var it=this._createDelegatedListener(tt,et,nt);for(var ot in it.delegates)this.once(ot,it.delegates[ot]);return this},r.prototype.off=function(tt,et,nt){var it=this;return void 0===nt?rt.prototype.off.call(this,tt,et):(this._delegatedListeners&&this._delegatedListeners[tt]&&function(rt){for(var ot=rt[tt],at=0;at<ot.length;at++){var st=ot[at];if(st.layer===et&&st.listener===nt){for(var ct in st.delegates)it.off(ct,st.delegates[ct]);return ot.splice(at,1),it}}}(this._delegatedListeners),this)},r.prototype.queryRenderedFeatures=function(et,nt){if(!this.style)return[];var rt;if(void 0!==nt||void 0===et||et instanceof tt.Point||Array.isArray(et)||(nt=et,et=void 0),nt=nt||{},(et=et||[[0,0],[this.transform.width,this.transform.height]])instanceof tt.Point||"number"==typeof et[0])rt=[tt.Point.convert(et)];else{var it=tt.Point.convert(et[0]),ot=tt.Point.convert(et[1]);rt=[it,new tt.Point(ot.x,it.y),ot,new tt.Point(it.x,ot.y),it]}return this.style.queryRenderedFeatures(rt,nt,this.transform)},r.prototype.querySourceFeatures=function(tt,et){return this.style.querySourceFeatures(tt,et)},r.prototype.setStyle=function(et,nt){return!1!==(nt=tt.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},nt)).diff&&nt.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&et?(this._diffStyle(et,nt),this):(this._localIdeographFontFamily=nt.localIdeographFontFamily,this._updateStyle(et,nt))},r.prototype._getUIString=function(tt){var et=this._locale[tt];if(null==et)throw new Error("Missing UI string '"+tt+"'");return et},r.prototype._updateStyle=function(tt,et){return this.style&&(this.style.setEventedParent(null),this.style._remove()),tt?(this.style=new Bs(this,et||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof tt?this.style.loadURL(tt):this.style.loadJSON(tt),this):(delete this.style,this)},r.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Bs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},r.prototype._diffStyle=function(et,nt){var rt=this;if("string"==typeof et){var it=this._requestManager.normalizeStyleURL(et),ot=this._requestManager.transformRequest(it,tt.ResourceType.Style);tt.getJSON(ot,(function(et,it){et?rt.fire(new tt.ErrorEvent(et)):it&&rt._updateDiff(it,nt)}))}else"object"==typeof et&&this._updateDiff(et,nt)},r.prototype._updateDiff=function(et,nt){try{this.style.setState(et)&&this._update(!0)}catch(rt){tt.warnOnce("Unable to perform style diff: "+(rt.message||rt.error||rt)+".  Rebuilding the style from scratch."),this._updateStyle(et,nt)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():tt.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(tt,et){return this._lazyInitEmptyStyle(),this.style.addSource(tt,et),this._update(!0)},r.prototype.isSourceLoaded=function(et){var nt=this.style&&this.style.sourceCaches[et];if(void 0!==nt)return nt.loaded();this.fire(new tt.ErrorEvent(new Error("There is no source with ID '"+et+"'")))},r.prototype.areTilesLoaded=function(){var tt=this.style&&this.style.sourceCaches;for(var et in tt){var nt=tt[et]._tiles;for(var rt in nt){var it=nt[rt];if("loaded"!==it.state&&"errored"!==it.state)return!1}}return!0},r.prototype.addSourceType=function(tt,et,nt){return this._lazyInitEmptyStyle(),this.style.addSourceType(tt,et,nt)},r.prototype.removeSource=function(tt){return this.style.removeSource(tt),this._update(!0)},r.prototype.getSource=function(tt){return this.style.getSource(tt)},r.prototype.addImage=function(et,nt,rt){void 0===rt&&(rt={});var it=rt.pixelRatio;void 0===it&&(it=1);var ot=rt.sdf;void 0===ot&&(ot=!1);var at=rt.stretchX,st=rt.stretchY,ct=rt.content;if(this._lazyInitEmptyStyle(),nt instanceof op||sp&&nt instanceof sp){var pt=tt.browser.getImageData(nt);this.style.addImage(et,{data:new tt.RGBAImage({width:pt.width,height:pt.height},pt.data),pixelRatio:it,stretchX:at,stretchY:st,content:ct,sdf:ot,version:0})}else{if(void 0===nt.width||void 0===nt.height)return this.fire(new tt.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ft=nt;this.style.addImage(et,{data:new tt.RGBAImage({width:nt.width,height:nt.height},new Uint8Array(nt.data)),pixelRatio:it,stretchX:at,stretchY:st,content:ct,sdf:ot,version:0,userImage:ft}),ft.onAdd&&ft.onAdd(this,et)}},r.prototype.updateImage=function(et,nt){var rt=this.style.getImage(et);if(!rt)return this.fire(new tt.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var it=nt instanceof op||sp&&nt instanceof sp?tt.browser.getImageData(nt):nt,ot=it.width,at=it.height,st=it.data;return void 0===ot||void 0===at?this.fire(new tt.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ot!==rt.data.width||at!==rt.data.height?this.fire(new tt.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(rt.data.replace(st,!(nt instanceof op||sp&&nt instanceof sp)),void this.style.updateImage(et,rt))},r.prototype.hasImage=function(et){return et?!!this.style.getImage(et):(this.fire(new tt.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(tt){this.style.removeImage(tt)},r.prototype.loadImage=function(et,nt){tt.getImage(this._requestManager.transformRequest(et,tt.ResourceType.Image),nt)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(tt,et){return this._lazyInitEmptyStyle(),this.style.addLayer(tt,et),this._update(!0)},r.prototype.moveLayer=function(tt,et){return this.style.moveLayer(tt,et),this._update(!0)},r.prototype.removeLayer=function(tt){return this.style.removeLayer(tt),this._update(!0)},r.prototype.getLayer=function(tt){return this.style.getLayer(tt)},r.prototype.setLayerZoomRange=function(tt,et,nt){return this.style.setLayerZoomRange(tt,et,nt),this._update(!0)},r.prototype.setFilter=function(tt,et,nt){return void 0===nt&&(nt={}),this.style.setFilter(tt,et,nt),this._update(!0)},r.prototype.getFilter=function(tt){return this.style.getFilter(tt)},r.prototype.setPaintProperty=function(tt,et,nt,rt){return void 0===rt&&(rt={}),this.style.setPaintProperty(tt,et,nt,rt),this._update(!0)},r.prototype.getPaintProperty=function(tt,et){return this.style.getPaintProperty(tt,et)},r.prototype.setLayoutProperty=function(tt,et,nt,rt){return void 0===rt&&(rt={}),this.style.setLayoutProperty(tt,et,nt,rt),this._update(!0)},r.prototype.getLayoutProperty=function(tt,et){return this.style.getLayoutProperty(tt,et)},r.prototype.setLight=function(tt,et){return void 0===et&&(et={}),this._lazyInitEmptyStyle(),this.style.setLight(tt,et),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(tt,et){return this.style.setFeatureState(tt,et),this._update()},r.prototype.removeFeatureState=function(tt,et){return this.style.removeFeatureState(tt,et),this._update()},r.prototype.getFeatureState=function(tt){return this.style.getFeatureState(tt)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var tt=0,et=0;return this._container&&(tt=this._container.clientWidth||400,et=this._container.clientHeight||300),[tt,et]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==tt.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&tt.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var tt=this._container;tt.classList.add("mapboxgl-map"),(this._missingCSSCanary=nt.create("div","mapboxgl-canary",tt)).style.visibility="hidden",this._detectMissingCSS();var et=this._canvasContainer=nt.create("div","mapboxgl-canvas-container",tt);this._interactive&&et.classList.add("mapboxgl-interactive"),this._canvas=nt.create("canvas","mapboxgl-canvas",et),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var rt=this._containerDimensions();this._resizeCanvas(rt[0],rt[1]);var it=this._controlContainer=nt.create("div","mapboxgl-control-container",tt),ot=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(tt){ot[tt]=nt.create("div","mapboxgl-ctrl-"+tt,it)}))},r.prototype._resizeCanvas=function(et,nt){var rt=tt.browser.devicePixelRatio||1;this._canvas.width=rt*et,this._canvas.height=rt*nt,this._canvas.style.width=et+"px",this._canvas.style.height=nt+"px"},r.prototype._setupPainter=function(){var nt=tt.extend({},et.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),rt=this._canvas.getContext("webgl",nt)||this._canvas.getContext("experimental-webgl",nt);rt?(this.painter=new yo(rt,this.transform),tt.webpSupported.testSupport(rt)):this.fire(new tt.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(et){et.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new tt.Event("webglcontextlost",{originalEvent:et}))},r.prototype._contextRestored=function(et){this._setupPainter(),this.resize(),this._update(),this.fire(new tt.Event("webglcontextrestored",{originalEvent:et}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(tt){return this.style?(this._styleDirty=this._styleDirty||tt,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(tt){return this._update(),this._renderTaskQueue.add(tt)},r.prototype._cancelRenderFrame=function(tt){this._renderTaskQueue.remove(tt)},r.prototype._render=function(et){var nt,rt=this,it=0,ot=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(nt=ot.createQueryEXT(),ot.beginQueryEXT(ot.TIME_ELAPSED_EXT,nt),it=tt.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(et),!this._removed){var at=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var st=this.transform.zoom,ct=tt.browser.now();this.style.zoomHistory.update(st,ct);var pt=new tt.EvaluationParameters(st,{now:ct,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ft=pt.crossFadingFactor();1===ft&&ft===this._crossFadingFactor||(at=!0,this._crossFadingFactor=ft),this.style.update(pt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new tt.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new tt.Event("load"))),this.style&&(this.style.hasTransitions()||at)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var dt=tt.browser.now()-it;ot.endQueryEXT(ot.TIME_ELAPSED_EXT,nt),setTimeout((function(){var et=ot.getQueryObjectEXT(nt,ot.QUERY_RESULT_EXT)/1e6;ot.deleteQueryEXT(nt),rt.fire(new tt.Event("gpu-timing-frame",{cpuTime:dt,gpuTime:et}))}),50)}if(this.listens("gpu-timing-layer")){var mt=this.painter.collectGpuTimers();setTimeout((function(){var et=rt.painter.queryGpuTimers(mt);rt.fire(new tt.Event("gpu-timing-layer",{layerTimes:et}))}),50)}var yt=this._sourcesDirty||this._styleDirty||this._placementDirty;return yt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new tt.Event("idle")),!this._loaded||this._fullyLoaded||yt||(this._fullyLoaded=!0),this}},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var et=0,nt=this._controls;et<nt.length;et+=1)nt[et].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==tt.window&&(tt.window.removeEventListener("resize",this._onWindowResize,!1),tt.window.removeEventListener("online",this._onWindowOnline,!1));var rt=this.painter.context.gl.getExtension("WEBGL_lose_context");rt&&rt.loseContext(),Cr(this._canvasContainer),Cr(this._controlContainer),Cr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new tt.Event("remove"))},r.prototype.triggerRepaint=function(){var et=this;this.style&&!this._frame&&(this._frame=tt.browser.frame((function(tt){et._frame=null,et._render(tt)})))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(tt){this._trackResize&&this.resize({originalEvent:tt})._update()},it.showTileBoundaries.get=function(){return!!this._showTileBoundaries},it.showTileBoundaries.set=function(tt){this._showTileBoundaries!==tt&&(this._showTileBoundaries=tt,this._update())},it.showPadding.get=function(){return!!this._showPadding},it.showPadding.set=function(tt){this._showPadding!==tt&&(this._showPadding=tt,this._update())},it.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},it.showCollisionBoxes.set=function(tt){this._showCollisionBoxes!==tt&&(this._showCollisionBoxes=tt,tt?this.style._generateCollisionBoxes():this._update())},it.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},it.showOverdrawInspector.set=function(tt){this._showOverdrawInspector!==tt&&(this._showOverdrawInspector=tt,this._update())},it.repaint.get=function(){return!!this._repaint},it.repaint.set=function(tt){this._repaint!==tt&&(this._repaint=tt,this.triggerRepaint())},it.vertices.get=function(){return!!this._vertices},it.vertices.set=function(tt){this._vertices=tt,this._update()},r.prototype._setCacheLimits=function(et,nt){tt.setCacheLimits(et,nt)},it.version.get=function(){return tt.version},Object.defineProperties(r.prototype,it),r}(rp);function Cr(tt){tt.parentNode&&tt.parentNode.removeChild(tt)}var cp={showCompass:!0,showZoom:!0,visualizePitch:!1},Dr=function(et){var rt=this;this.options=tt.extend({},cp,et),this._container=nt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(tt){return tt.preventDefault()})),this.options.showZoom&&(tt.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(tt){return rt._map.zoomIn({},{originalEvent:tt})})),nt.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(tt){return rt._map.zoomOut({},{originalEvent:tt})})),nt.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(tt.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(tt){rt.options.visualizePitch?rt._map.resetNorthPitch({},{originalEvent:tt}):rt._map.resetNorth({},{originalEvent:tt})})),this._compassIcon=nt.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Dr.prototype._updateZoomButtons=function(){var tt=this._map.getZoom();this._zoomInButton.disabled=tt===this._map.getMaxZoom(),this._zoomOutButton.disabled=tt===this._map.getMinZoom()},Dr.prototype._rotateCompassArrow=function(){var tt=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=tt},Dr.prototype.onAdd=function(tt){return this._map=tt,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mr(this._map,this._compass,this.options.visualizePitch)),this._container},Dr.prototype.onRemove=function(){nt.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Dr.prototype._createButton=function(tt,et){var rt=nt.create("button",tt,this._container);return rt.type="button",rt.addEventListener("click",et),rt},Dr.prototype._setButtonTitle=function(tt,et){var nt=this._map._getUIString("NavigationControl."+et);tt.title=nt,tt.setAttribute("aria-label",nt)};var Mr=function(et,rt,it){void 0===it&&(it=!1),this._clickTolerance=10,this.element=rt,this.mouseRotate=new Zc({clickTolerance:et.dragRotate._mouseRotate._clickTolerance}),this.map=et,it&&(this.mousePitch=new Hc({clickTolerance:et.dragRotate._mousePitch._clickTolerance})),tt.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),nt.addEventListener(rt,"mousedown",this.mousedown),nt.addEventListener(rt,"touchstart",this.touchstart,{passive:!1}),nt.addEventListener(rt,"touchmove",this.touchmove),nt.addEventListener(rt,"touchend",this.touchend),nt.addEventListener(rt,"touchcancel",this.reset)};function Lr(et,nt,rt){if(et=new tt.LngLat(et.lng,et.lat),nt){var it=new tt.LngLat(et.lng-360,et.lat),ot=new tt.LngLat(et.lng+360,et.lat),at=rt.locationPoint(et).distSqr(nt);rt.locationPoint(it).distSqr(nt)<at?et=it:rt.locationPoint(ot).distSqr(nt)<at&&(et=ot)}for(;Math.abs(et.lng-rt.center.lng)>180;){var st=rt.locationPoint(et);if(st.x>=0&&st.y>=0&&st.x<=rt.width&&st.y<=rt.height)break;et.lng>rt.center.lng?et.lng-=360:et.lng+=360}return et}Mr.prototype.down=function(tt,et){this.mouseRotate.mousedown(tt,et),this.mousePitch&&this.mousePitch.mousedown(tt,et),nt.disableDrag()},Mr.prototype.move=function(tt,et){var nt=this.map,rt=this.mouseRotate.mousemoveWindow(tt,et);if(rt&&rt.bearingDelta&&nt.setBearing(nt.getBearing()+rt.bearingDelta),this.mousePitch){var it=this.mousePitch.mousemoveWindow(tt,et);it&&it.pitchDelta&&nt.setPitch(nt.getPitch()+it.pitchDelta)}},Mr.prototype.off=function(){var tt=this.element;nt.removeEventListener(tt,"mousedown",this.mousedown),nt.removeEventListener(tt,"touchstart",this.touchstart,{passive:!1}),nt.removeEventListener(tt,"touchmove",this.touchmove),nt.removeEventListener(tt,"touchend",this.touchend),nt.removeEventListener(tt,"touchcancel",this.reset),this.offTemp()},Mr.prototype.offTemp=function(){nt.enableDrag(),nt.removeEventListener(tt.window,"mousemove",this.mousemove),nt.removeEventListener(tt.window,"mouseup",this.mouseup)},Mr.prototype.mousedown=function(et){this.down(tt.extend({},et,{ctrlKey:!0,preventDefault:function(){return et.preventDefault()}}),nt.mousePos(this.element,et)),nt.addEventListener(tt.window,"mousemove",this.mousemove),nt.addEventListener(tt.window,"mouseup",this.mouseup)},Mr.prototype.mousemove=function(tt){this.move(tt,nt.mousePos(this.element,tt))},Mr.prototype.mouseup=function(tt){this.mouseRotate.mouseupWindow(tt),this.mousePitch&&this.mousePitch.mouseupWindow(tt),this.offTemp()},Mr.prototype.touchstart=function(tt){1!==tt.targetTouches.length?this.reset():(this._startPos=this._lastPos=nt.touchPos(this.element,tt.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return tt.preventDefault()}},this._startPos))},Mr.prototype.touchmove=function(tt){1!==tt.targetTouches.length?this.reset():(this._lastPos=nt.touchPos(this.element,tt.targetTouches)[0],this.move({preventDefault:function(){return tt.preventDefault()}},this._lastPos))},Mr.prototype.touchend=function(tt){0===tt.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Mr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var pp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rr(tt,et,nt){var rt=tt.classList;for(var it in pp)rt.remove("mapboxgl-"+nt+"-anchor-"+it);rt.add("mapboxgl-"+nt+"-anchor-"+et)}var hp,fp=function(et){function o(rt,it){var ot=this;if(et.call(this),(rt instanceof tt.window.HTMLElement||it)&&(rt=tt.extend({element:rt},it)),tt.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=rt&&rt.anchor||"center",this._color=rt&&rt.color||"#3FB1CE",this._scale=rt&&rt.scale||1,this._draggable=rt&&rt.draggable||!1,this._state="inactive",this._rotation=rt&&rt.rotation||0,this._rotationAlignment=rt&&rt.rotationAlignment||"auto",this._pitchAlignment=rt&&rt.pitchAlignment&&"auto"!==rt.pitchAlignment?rt.pitchAlignment:this._rotationAlignment,rt&&rt.element)this._element=rt.element,this._offset=tt.Point.convert(rt&&rt.offset||[0,0]);else{this._defaultMarker=!0,this._element=nt.create("div"),this._element.setAttribute("aria-label","Map marker");var at=nt.createNS("http://www.w3.org/2000/svg","svg");at.setAttributeNS(null,"display","block"),at.setAttributeNS(null,"height","41px"),at.setAttributeNS(null,"width","27px"),at.setAttributeNS(null,"viewBox","0 0 27 41");var st=nt.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"stroke","none"),st.setAttributeNS(null,"stroke-width","1"),st.setAttributeNS(null,"fill","none"),st.setAttributeNS(null,"fill-rule","evenodd");var ct=nt.createNS("http://www.w3.org/2000/svg","g");ct.setAttributeNS(null,"fill-rule","nonzero");var pt=nt.createNS("http://www.w3.org/2000/svg","g");pt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),pt.setAttributeNS(null,"fill","#000000");for(var ft=0,dt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ft<dt.length;ft+=1){var mt=dt[ft],yt=nt.createNS("http://www.w3.org/2000/svg","ellipse");yt.setAttributeNS(null,"opacity","0.04"),yt.setAttributeNS(null,"cx","10.5"),yt.setAttributeNS(null,"cy","5.80029008"),yt.setAttributeNS(null,"rx",mt.rx),yt.setAttributeNS(null,"ry",mt.ry),pt.appendChild(yt)}var vt=nt.createNS("http://www.w3.org/2000/svg","g");vt.setAttributeNS(null,"fill",this._color);var Dt=nt.createNS("http://www.w3.org/2000/svg","path");Dt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),vt.appendChild(Dt);var Ot=nt.createNS("http://www.w3.org/2000/svg","g");Ot.setAttributeNS(null,"opacity","0.25"),Ot.setAttributeNS(null,"fill","#000000");var Rt=nt.createNS("http://www.w3.org/2000/svg","path");Rt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ot.appendChild(Rt);var Bt=nt.createNS("http://www.w3.org/2000/svg","g");Bt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Bt.setAttributeNS(null,"fill","#FFFFFF");var Ne=nt.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");var rn=nt.createNS("http://www.w3.org/2000/svg","circle");rn.setAttributeNS(null,"fill","#000000"),rn.setAttributeNS(null,"opacity","0.25"),rn.setAttributeNS(null,"cx","5.5"),rn.setAttributeNS(null,"cy","5.5"),rn.setAttributeNS(null,"r","5.4999962");var vn=nt.createNS("http://www.w3.org/2000/svg","circle");vn.setAttributeNS(null,"fill","#FFFFFF"),vn.setAttributeNS(null,"cx","5.5"),vn.setAttributeNS(null,"cy","5.5"),vn.setAttributeNS(null,"r","5.4999962"),Ne.appendChild(rn),Ne.appendChild(vn),ct.appendChild(pt),ct.appendChild(vt),ct.appendChild(Ot),ct.appendChild(Bt),ct.appendChild(Ne),at.appendChild(ct),at.setAttributeNS(null,"height",41*this._scale+"px"),at.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(at),this._offset=tt.Point.convert(rt&&rt.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(tt){tt.preventDefault()})),this._element.addEventListener("mousedown",(function(tt){tt.preventDefault()})),this._element.addEventListener("focus",(function(){var tt=ot._map.getContainer();tt.scrollTop=0,tt.scrollLeft=0})),Rr(this._element,this._anchor,"marker"),this._popup=null}return et&&(o.__proto__=et),(o.prototype=Object.create(et&&et.prototype)).constructor=o,o.prototype.addTo=function(tt){return this.remove(),this._map=tt,tt.getCanvasContainer().appendChild(this._element),tt.on("move",this._update),tt.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},o.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),nt.remove(this._element),this._popup&&this._popup.remove(),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(et){return this._lngLat=tt.LngLat.convert(et),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},o.prototype.getElement=function(){return this._element},o.prototype.setPopup=function(tt){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),tt){if(!("offset"in tt.options)){var et=Math.sqrt(Math.pow(13.5,2)/2);tt.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[et,-1*(24.6+et)],"bottom-right":[-et,-1*(24.6+et)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=tt,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},o.prototype._onKeyPress=function(tt){var et=tt.code,nt=tt.charCode||tt.keyCode;"Space"!==et&&"Enter"!==et&&32!==nt&&13!==nt||this.togglePopup()},o.prototype._onMapClick=function(tt){var et=tt.originalEvent.target,nt=this._element;this._popup&&(et===nt||nt.contains(et))&&this.togglePopup()},o.prototype.getPopup=function(){return this._popup},o.prototype.togglePopup=function(){var tt=this._popup;return tt?(tt.isOpen()?tt.remove():tt.addTo(this._map),this):this},o.prototype._update=function(tt){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Lr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var et="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?et="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(et="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var rt="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?rt="rotateX(0deg)":"map"===this._pitchAlignment&&(rt="rotateX("+this._map.getPitch()+"deg)"),tt&&"moveend"!==tt.type||(this._pos=this._pos.round()),nt.setTransform(this._element,pp[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+rt+" "+et)}},o.prototype.getOffset=function(){return this._offset},o.prototype.setOffset=function(et){return this._offset=tt.Point.convert(et),this._update(),this},o.prototype._onMove=function(et){this._pos=et.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new tt.Event("dragstart"))),this.fire(new tt.Event("drag"))},o.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new tt.Event("dragend")),this._state="inactive"},o.prototype._addDragHandler=function(tt){this._element.contains(tt.originalEvent.target)&&(tt.preventDefault(),this._positionDelta=tt.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},o.prototype.setDraggable=function(tt){return this._draggable=!!tt,this._map&&(tt?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},o.prototype.isDraggable=function(){return this._draggable},o.prototype.setRotation=function(tt){return this._rotation=tt||0,this._update(),this},o.prototype.getRotation=function(){return this._rotation},o.prototype.setRotationAlignment=function(tt){return this._rotationAlignment=tt||"auto",this._update(),this},o.prototype.getRotationAlignment=function(){return this._rotationAlignment},o.prototype.setPitchAlignment=function(tt){return this._pitchAlignment=tt&&"auto"!==tt?tt:this._rotationAlignment,this._update(),this},o.prototype.getPitchAlignment=function(){return this._pitchAlignment},o}(tt.Evented),dp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},mp=0,gp=!1,yp=function(et){function o(nt){et.call(this),this.options=tt.extend({},dp,nt),tt.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return et&&(o.__proto__=et),(o.prototype=Object.create(et&&et.prototype)).constructor=o,o.prototype.onAdd=function(et){var rt;return this._map=et,this._container=nt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),rt=this._setupUI,void 0!==hp?rt(hp):void 0!==tt.window.navigator.permissions?tt.window.navigator.permissions.query({name:"geolocation"}).then((function(tt){rt(hp="denied"!==tt.state)})):rt(hp=!!tt.window.navigator.geolocation),this._container},o.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(tt.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),nt.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,mp=0,gp=!1},o.prototype._isOutOfMapMaxBounds=function(tt){var et=this._map.getMaxBounds(),nt=tt.coords;return et&&(nt.longitude<et.getWest()||nt.longitude>et.getEast()||nt.latitude<et.getSouth()||nt.latitude>et.getNorth())},o.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},o.prototype._onSuccess=function(et){if(this._map){if(this._isOutOfMapMaxBounds(et))return this._setErrorState(),this.fire(new tt.Event("outofmaxbounds",et)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=et,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(et),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(et),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new tt.Event("geolocate",et)),this._finish()}},o.prototype._updateCamera=function(et){var nt=new tt.LngLat(et.coords.longitude,et.coords.latitude),rt=et.coords.accuracy,it=this._map.getBearing(),ot=tt.extend({bearing:it},this.options.fitBoundsOptions);this._map.fitBounds(nt.toBounds(rt),ot,{geolocateSource:!0})},o.prototype._updateMarker=function(et){if(et){var nt=new tt.LngLat(et.coords.longitude,et.coords.latitude);this._accuracyCircleMarker.setLngLat(nt).addTo(this._map),this._userLocationDotMarker.setLngLat(nt).addTo(this._map),this._accuracy=et.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},o.prototype._updateCircleRadius=function(){var tt=this._map._container.clientHeight/2,et=this._map.unproject([0,tt]),nt=this._map.unproject([1,tt]),rt=et.distanceTo(nt),it=Math.ceil(2*this._accuracy/rt);this._circleElement.style.width=it+"px",this._circleElement.style.height=it+"px"},o.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},o.prototype._onError=function(et){if(this._map){if(this.options.trackUserLocation)if(1===et.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var nt=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=nt,this._geolocateButton.setAttribute("aria-label",nt),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===et.code&&gp)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new tt.Event("error",et)),this._finish()}},o.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},o.prototype._setupUI=function(et){var rt=this;if(this._container.addEventListener("contextmenu",(function(tt){return tt.preventDefault()})),this._geolocateButton=nt.create("button","mapboxgl-ctrl-geolocate",this._container),nt.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===et){tt.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var it=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=it,this._geolocateButton.setAttribute("aria-label",it)}else{var ot=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ot,this._geolocateButton.setAttribute("aria-label",ot)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=nt.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new fp(this._dotElement),this._circleElement=nt.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(et){et.geolocateSource||"ACTIVE_LOCK"!==rt._watchState||et.originalEvent&&"resize"===et.originalEvent.type||(rt._watchState="BACKGROUND",rt._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),rt._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),rt.fire(new tt.Event("trackuserlocationend")))}))},o.prototype.trigger=function(){if(!this._setup)return tt.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new tt.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":mp--,gp=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new tt.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new tt.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var et;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++mp>1?(et={maximumAge:6e5,timeout:0},gp=!0):(et=this.options.positionOptions,gp=!1),this._geolocationWatchID=tt.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,et)}}else tt.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},o.prototype._clearWatch=function(){tt.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},o}(tt.Evented),vp={maxWidth:100,unit:"metric"},jr=function(et){this.options=tt.extend({},vp,et),tt.bindAll(["_onMove","setUnit"],this)};function qr(tt,et,nt){var rt=nt&&nt.maxWidth||100,it=tt._container.clientHeight/2,ot=tt.unproject([0,it]),at=tt.unproject([rt,it]),st=ot.distanceTo(at);if(nt&&"imperial"===nt.unit){var ct=3.2808*st;ct>5280?Vr(et,rt,ct/5280,tt._getUIString("ScaleControl.Miles")):Vr(et,rt,ct,tt._getUIString("ScaleControl.Feet"))}else nt&&"nautical"===nt.unit?Vr(et,rt,st/1852,tt._getUIString("ScaleControl.NauticalMiles")):st>=1e3?Vr(et,rt,st/1e3,tt._getUIString("ScaleControl.Kilometers")):Vr(et,rt,st,tt._getUIString("ScaleControl.Meters"))}function Vr(tt,et,nt,rt){var it,ot,at,st=(it=nt,(ot=Math.pow(10,(""+Math.floor(it)).length-1))*(at=(at=it/ot)>=10?10:at>=5?5:at>=3?3:at>=2?2:at>=1?1:function(tt){var et=Math.pow(10,Math.ceil(-Math.log(tt)/Math.LN10));return Math.round(tt*et)/et}(at)));tt.style.width=et*(st/nt)+"px",tt.innerHTML=st+"&nbsp;"+rt}jr.prototype.getDefaultPosition=function(){return"bottom-left"},jr.prototype._onMove=function(){qr(this._map,this._container,this.options)},jr.prototype.onAdd=function(tt){return this._map=tt,this._container=nt.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",tt.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},jr.prototype.onRemove=function(){nt.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},jr.prototype.setUnit=function(tt){this.options.unit=tt,qr(this._map,this._container,this.options)};var Gr=function(et){this._fullscreen=!1,et&&et.container&&(et.container instanceof tt.window.HTMLElement?this._container=et.container:tt.warnOnce("Full screen control 'container' must be a DOM element.")),tt.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in tt.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in tt.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in tt.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in tt.window.document&&(this._fullscreenchange="MSFullscreenChange")};Gr.prototype.onAdd=function(et){return this._map=et,this._container||(this._container=this._map.getContainer()),this._controlContainer=nt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",tt.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Gr.prototype.onRemove=function(){nt.remove(this._controlContainer),this._map=null,tt.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Gr.prototype._checkFullscreenSupport=function(){return!!(tt.window.document.fullscreenEnabled||tt.window.document.mozFullScreenEnabled||tt.window.document.msFullscreenEnabled||tt.window.document.webkitFullscreenEnabled)},Gr.prototype._setupUI=function(){var et=this._fullscreenButton=nt.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);nt.create("span","mapboxgl-ctrl-icon",et).setAttribute("aria-hidden",!0),et.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),tt.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Gr.prototype._updateTitle=function(){var tt=this._getTitle();this._fullscreenButton.setAttribute("aria-label",tt),this._fullscreenButton.title=tt},Gr.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Gr.prototype._isFullscreen=function(){return this._fullscreen},Gr.prototype._changeIcon=function(){(tt.window.document.fullscreenElement||tt.window.document.mozFullScreenElement||tt.window.document.webkitFullscreenElement||tt.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Gr.prototype._onClickFullscreen=function(){this._isFullscreen()?tt.window.document.exitFullscreen?tt.window.document.exitFullscreen():tt.window.document.mozCancelFullScreen?tt.window.document.mozCancelFullScreen():tt.window.document.msExitFullscreen?tt.window.document.msExitFullscreen():tt.window.document.webkitCancelFullScreen&&tt.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var _p={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},xp=function(et){function o(nt){et.call(this),this.options=tt.extend(Object.create(_p),nt),tt.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return et&&(o.__proto__=et),(o.prototype=Object.create(et&&et.prototype)).constructor=o,o.prototype.addTo=function(et){return this._map&&this.remove(),this._map=et,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new tt.Event("open")),this},o.prototype.isOpen=function(){return!!this._map},o.prototype.remove=function(){return this._content&&nt.remove(this._content),this._container&&(nt.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new tt.Event("close")),this},o.prototype.getLngLat=function(){return this._lngLat},o.prototype.setLngLat=function(et){return this._lngLat=tt.LngLat.convert(et),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},o.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},o.prototype.getElement=function(){return this._container},o.prototype.setText=function(et){return this.setDOMContent(tt.window.document.createTextNode(et))},o.prototype.setHTML=function(et){var nt,rt=tt.window.document.createDocumentFragment(),it=tt.window.document.createElement("body");for(it.innerHTML=et;nt=it.firstChild;)rt.appendChild(nt);return this.setDOMContent(rt)},o.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},o.prototype.setMaxWidth=function(tt){return this.options.maxWidth=tt,this._update(),this},o.prototype.setDOMContent=function(tt){return this._createContent(),this._content.appendChild(tt),this._update(),this},o.prototype.addClassName=function(tt){this._container&&this._container.classList.add(tt)},o.prototype.removeClassName=function(tt){this._container&&this._container.classList.remove(tt)},o.prototype.toggleClassName=function(tt){if(this._container)return this._container.classList.toggle(tt)},o.prototype._createContent=function(){this._content&&nt.remove(this._content),this._content=nt.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=nt.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},o.prototype._onMouseUp=function(tt){this._update(tt.point)},o.prototype._onMouseMove=function(tt){this._update(tt.point)},o.prototype._onDrag=function(tt){this._update(tt.point)},o.prototype._update=function(et){var rt=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=nt.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=nt.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(tt){return rt._container.classList.add(tt)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Lr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||et)){var it=this._pos=this._trackPointer&&et?et:this._map.project(this._lngLat),ot=this.options.anchor,at=function e(et){if(et){if("number"==typeof et){var nt=Math.round(Math.sqrt(.5*Math.pow(et,2)));return{center:new tt.Point(0,0),top:new tt.Point(0,et),"top-left":new tt.Point(nt,nt),"top-right":new tt.Point(-nt,nt),bottom:new tt.Point(0,-et),"bottom-left":new tt.Point(nt,-nt),"bottom-right":new tt.Point(-nt,-nt),left:new tt.Point(et,0),right:new tt.Point(-et,0)}}if(et instanceof tt.Point||Array.isArray(et)){var rt=tt.Point.convert(et);return{center:rt,top:rt,"top-left":rt,"top-right":rt,bottom:rt,"bottom-left":rt,"bottom-right":rt,left:rt,right:rt}}return{center:tt.Point.convert(et.center||[0,0]),top:tt.Point.convert(et.top||[0,0]),"top-left":tt.Point.convert(et["top-left"]||[0,0]),"top-right":tt.Point.convert(et["top-right"]||[0,0]),bottom:tt.Point.convert(et.bottom||[0,0]),"bottom-left":tt.Point.convert(et["bottom-left"]||[0,0]),"bottom-right":tt.Point.convert(et["bottom-right"]||[0,0]),left:tt.Point.convert(et.left||[0,0]),right:tt.Point.convert(et.right||[0,0])}}return e(new tt.Point(0,0))}(this.options.offset);if(!ot){var st,ct=this._container.offsetWidth,pt=this._container.offsetHeight;st=it.y+at.bottom.y<pt?["top"]:it.y>this._map.transform.height-pt?["bottom"]:[],it.x<ct/2?st.push("left"):it.x>this._map.transform.width-ct/2&&st.push("right"),ot=0===st.length?"bottom":st.join("-")}var ft=it.add(at[ot]).round();nt.setTransform(this._container,pp[ot]+" translate("+ft.x+"px,"+ft.y+"px)"),Rr(this._container,ot,"popup")}},o.prototype._onClose=function(){this.remove()},o}(tt.Evented),bp={version:tt.version,supported:et,setRTLTextPlugin:tt.setRTLTextPlugin,getRTLTextPluginStatus:tt.getRTLTextPluginStatus,Map:lp,NavigationControl:Dr,GeolocateControl:yp,AttributionControl:yr,ScaleControl:jr,FullscreenControl:Gr,Popup:xp,Marker:fp,Style:Bs,LngLat:tt.LngLat,LngLatBounds:tt.LngLatBounds,Point:tt.Point,MercatorCoordinate:tt.MercatorCoordinate,Evented:tt.Evented,config:tt.config,prewarm:function(){Ft().acquire(ss)},clearPrewarmedResources:function(){var tt=us;tt&&(tt.isPreloaded()&&1===tt.numActive()?(tt.release(ss),us=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return tt.config.ACCESS_TOKEN},set accessToken(et){tt.config.ACCESS_TOKEN=et},get baseApiUrl(){return tt.config.API_URL},set baseApiUrl(et){tt.config.API_URL=et},get workerCount(){return kt.workerCount},set workerCount(tt){kt.workerCount=tt},get maxParallelImageRequests(){return tt.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(et){tt.config.MAX_PARALLEL_IMAGE_REQUESTS=et},clearStorage:function(et){tt.clearTileCache(et)},workerUrl:""};return bp})),nt}()},,function(tt,et,nt){"use strict";var rt,it,ot,at,st=nt(3),ct=nt(2),pt=nt(7),ft=nt(9),dt=nt(116),mt=nt(44),yt=nt(117),vt=nt(118),Dt=nt(120),Ot=nt(21),Rt=nt(5),Bt=nt(121),Ne=nt(20),rn=nt(52),vn=nt(4),bn=nt(126),Tn=nt(13),Cn=nt(75).set,Ln=nt(128),In=nt(129),Mn=nt(130),zn=nt(78),Bn=nt(131),Fn=nt(67),Nn=nt(71),Vn=nt(12),Wn=nt(132),$n=Vn("species"),Yn="Promise",er=Fn.get,rr=Fn.set,vr=Fn.getterFor(Yn),wr=dt,Sr=pt.TypeError,ii=pt.document,qi=pt.process,uo=ft("fetch"),po=zn.f,vo=po,So="process"==Ne(qi),ta=!!(ii&&ii.createEvent&&pt.dispatchEvent),na=Nn(Yn,(function(){if(!(rn(wr)!==String(wr))){if(66===Wn)return!0;if(!So&&"function"!=typeof PromiseRejectionEvent)return!0}if(ct&&!wr.prototype.finally)return!0;if(Wn>=51&&/native code/.test(wr))return!1;var tt=wr.resolve(1),FakePromise=function(tt){tt((function(){}),(function(){}))};return(tt.constructor={})[$n]=FakePromise,!(tt.then((function(){}))instanceof FakePromise)})),ia=na||!bn((function(tt){wr.all(tt).catch((function(){}))})),isThenable=function(tt){var et;return!(!Ot(tt)||"function"!=typeof(et=tt.then))&&et},notify=function(tt,et,nt){if(!et.notified){et.notified=!0;var rt=et.reactions;Ln((function(){for(var it=et.value,ot=1==et.state,at=0;rt.length>at;){var st,ct,pt,ft=rt[at++],dt=ot?ft.ok:ft.fail,mt=ft.resolve,yt=ft.reject,vt=ft.domain;try{dt?(ot||(2===et.rejection&&onHandleUnhandled(tt,et),et.rejection=1),!0===dt?st=it:(vt&&vt.enter(),st=dt(it),vt&&(vt.exit(),pt=!0)),st===ft.promise?yt(Sr("Promise-chain cycle")):(ct=isThenable(st))?ct.call(st,mt,yt):mt(st)):yt(it)}catch(tt){vt&&!pt&&vt.exit(),yt(tt)}}et.reactions=[],et.notified=!1,nt&&!et.rejection&&onUnhandled(tt,et)}))}},dispatchEvent=function(tt,et,nt){var rt,it;ta?((rt=ii.createEvent("Event")).promise=et,rt.reason=nt,rt.initEvent(tt,!1,!0),pt.dispatchEvent(rt)):rt={promise:et,reason:nt},(it=pt["on"+tt])?it(rt):"unhandledrejection"===tt&&Mn("Unhandled promise rejection",nt)},onUnhandled=function(tt,et){Cn.call(pt,(function(){var nt,rt=et.value;if(isUnhandled(et)&&(nt=Bn((function(){So?qi.emit("unhandledRejection",rt,tt):dispatchEvent("unhandledrejection",tt,rt)})),et.rejection=So||isUnhandled(et)?2:1,nt.error))throw nt.value}))},isUnhandled=function(tt){return 1!==tt.rejection&&!tt.parent},onHandleUnhandled=function(tt,et){Cn.call(pt,(function(){So?qi.emit("rejectionHandled",tt):dispatchEvent("rejectionhandled",tt,et.value)}))},bind=function(tt,et,nt,rt){return function(it){tt(et,nt,it,rt)}},internalReject=function(tt,et,nt,rt){et.done||(et.done=!0,rt&&(et=rt),et.value=nt,et.state=2,notify(tt,et,!0))},internalResolve=function(tt,et,nt,rt){if(!et.done){et.done=!0,rt&&(et=rt);try{if(tt===nt)throw Sr("Promise can't be resolved itself");var it=isThenable(nt);it?Ln((function(){var rt={done:!1};try{it.call(nt,bind(internalResolve,tt,rt,et),bind(internalReject,tt,rt,et))}catch(nt){internalReject(tt,rt,nt,et)}})):(et.value=nt,et.state=1,notify(tt,et,!1))}catch(nt){internalReject(tt,{done:!1},nt,et)}}};na&&(wr=function Promise(tt){Bt(this,wr,Yn),Rt(tt),rt.call(this);var et=er(this);try{tt(bind(internalResolve,this,et),bind(internalReject,this,et))}catch(tt){internalReject(this,et,tt)}},(rt=function Promise(tt){rr(this,{type:Yn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=yt(wr.prototype,{then:function then(tt,et){var nt=vr(this),rt=po(Tn(this,wr));return rt.ok="function"!=typeof tt||tt,rt.fail="function"==typeof et&&et,rt.domain=So?qi.domain:void 0,nt.parent=!0,nt.reactions.push(rt),0!=nt.state&&notify(this,nt,!1),rt.promise},catch:function(tt){return this.then(void 0,tt)}}),it=function(){var tt=new rt,et=er(tt);this.promise=tt,this.resolve=bind(internalResolve,tt,et),this.reject=bind(internalReject,tt,et)},zn.f=po=function(tt){return tt===wr||tt===ot?new it(tt):vo(tt)},ct||"function"!=typeof dt||(at=dt.prototype.then,mt(dt.prototype,"then",(function then(tt,et){var nt=this;return new wr((function(tt,et){at.call(nt,tt,et)})).then(tt,et)}),{unsafe:!0}),"function"==typeof uo&&st({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(tt){return In(wr,uo.apply(pt,arguments))}}))),st({global:!0,wrap:!0,forced:na},{Promise:wr}),vt(wr,Yn,!1,!0),Dt(Yn),ot=ft(Yn),st({target:Yn,stat:!0,forced:na},{reject:function reject(tt){var et=po(this);return et.reject.call(void 0,tt),et.promise}}),st({target:Yn,stat:!0,forced:ct||na},{resolve:function resolve(tt){return In(ct&&this===ot?wr:this,tt)}}),st({target:Yn,stat:!0,forced:ia},{all:function all(tt){var et=this,nt=po(et),rt=nt.resolve,it=nt.reject,ot=Bn((function(){var nt=Rt(et.resolve),ot=[],at=0,st=1;vn(tt,(function(tt){var ct=at++,pt=!1;ot.push(void 0),st++,nt.call(et,tt).then((function(tt){pt||(pt=!0,ot[ct]=tt,--st||rt(ot))}),it)})),--st||rt(ot)}));return ot.error&&it(ot.value),nt.promise},race:function race(tt){var et=this,nt=po(et),rt=nt.reject,it=Bn((function(){var it=Rt(et.resolve);vn(tt,(function(tt){it.call(et,tt).then(nt.resolve,rt)}))}));return it.error&&rt(it.value),nt.promise}})},function(tt,et,nt){var rt=nt(22),it=nt(103),ot=nt(62),at=nt(50),st=nt(63),ct=nt(16),pt=nt(64),ft=Object.getOwnPropertyDescriptor;et.f=rt?ft:function getOwnPropertyDescriptor(tt,et){if(tt=at(tt),et=st(et,!0),pt)try{return ft(tt,et)}catch(tt){}if(ct(tt,et))return ot(!it.f.call(tt,et),tt[et])}},function(tt,et,nt){var rt=nt(104),it=nt(42);tt.exports=function(tt){return rt(it(tt))}},function(tt,et,nt){var rt=nt(7),it=nt(23);tt.exports=function(tt,et){try{it(rt,tt,et)}catch(nt){rt[tt]=et}return et}},function(tt,et,nt){var rt=nt(66),it=Function.toString;"function"!=typeof rt.inspectSource&&(rt.inspectSource=function(tt){return it.call(tt)}),tt.exports=rt.inspectSource},function(tt,et,nt){var rt=nt(45),it=Math.min;tt.exports=function(tt){return tt>0?it(rt(tt),9007199254740991):0}},function(tt,et,nt){"use strict";var rt,it,ot=nt(136),at=nt(137),st=RegExp.prototype.exec,ct=String.prototype.replace,pt=st,ft=(rt=/a/,it=/b*/g,st.call(rt,"a"),st.call(it,"a"),0!==rt.lastIndex||0!==it.lastIndex),dt=at.UNSUPPORTED_Y||at.BROKEN_CARET,mt=void 0!==/()??/.exec("")[1];(ft||mt||dt)&&(pt=function exec(tt){var et,nt,rt,it,at=this,pt=dt&&at.sticky,yt=ot.call(at),vt=at.source,Dt=0,Ot=tt;return pt&&(-1===(yt=yt.replace("y","")).indexOf("g")&&(yt+="g"),Ot=String(tt).slice(at.lastIndex),at.lastIndex>0&&(!at.multiline||at.multiline&&"\n"!==tt[at.lastIndex-1])&&(vt="(?: "+vt+")",Ot=" "+Ot,Dt++),nt=new RegExp("^(?:"+vt+")",yt)),mt&&(nt=new RegExp("^"+vt+"$(?!\\s)",yt)),ft&&(et=at.lastIndex),rt=st.call(pt?nt:at,Ot),pt?rt?(rt.input=rt.input.slice(Dt),rt[0]=rt[0].slice(Dt),rt.index=at.lastIndex,at.lastIndex+=rt[0].length):at.lastIndex=0:ft&&rt&&(at.lastIndex=at.global?rt.index+rt[0].length:et),mt&&rt&&rt.length>1&&ct.call(rt[0],nt,(function(){for(it=1;it<arguments.length-2;it++)void 0===arguments[it]&&(rt[it]=void 0)})),rt}),tt.exports=pt},function(tt,et,nt){var rt=nt(1),it=nt(74);tt.exports=function(tt){var et=it(tt);if("function"!=typeof et)throw TypeError(String(tt)+" is not iterable");return rt(et.call(tt))}},function(tt,et,nt){"use strict";Object.defineProperty(et,"__esModule",{value:!0});var rt=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt},it=function(){function defineProperties(tt,et){for(var nt=0;nt<et.length;nt++){var rt=et[nt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(tt,rt.key,rt)}}return function(tt,et,nt){return et&&defineProperties(tt.prototype,et),nt&&defineProperties(tt,nt),tt}}(),ot=nt(0),at=_interopRequireDefault(ot),st=_interopRequireDefault(nt(8));function _interopRequireDefault(tt){return tt&&tt.__esModule?tt:{default:tt}}var ct={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},pt=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],ft=function copyStyles(tt,et){et.style.fontSize=tt.fontSize,et.style.fontFamily=tt.fontFamily,et.style.fontWeight=tt.fontWeight,et.style.fontStyle=tt.fontStyle,et.style.letterSpacing=tt.letterSpacing,et.style.textTransform=tt.textTransform},dt=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),mt=function generateId(){return dt?"_"+Math.random().toString(36).substr(2,12):void 0},yt=function(tt){function AutosizeInput(tt){!function _classCallCheck(tt,et){if(!(tt instanceof et))throw new TypeError("Cannot call a class as a function")}(this,AutosizeInput);var et=function _possibleConstructorReturn(tt,et){if(!tt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!et||"object"!=typeof et&&"function"!=typeof et?tt:et}(this,(AutosizeInput.__proto__||Object.getPrototypeOf(AutosizeInput)).call(this,tt));return et.inputRef=function(tt){et.input=tt,"function"==typeof et.props.inputRef&&et.props.inputRef(tt)},et.placeHolderSizerRef=function(tt){et.placeHolderSizer=tt},et.sizerRef=function(tt){et.sizer=tt},et.state={inputWidth:tt.minWidth,inputId:tt.id||mt()},et}return function _inherits(tt,et){if("function"!=typeof et&&null!==et)throw new TypeError("Super expression must either be null or a function, not "+typeof et);tt.prototype=Object.create(et&&et.prototype,{constructor:{value:tt,enumerable:!1,writable:!0,configurable:!0}}),et&&(Object.setPrototypeOf?Object.setPrototypeOf(tt,et):tt.__proto__=et)}(AutosizeInput,tt),it(AutosizeInput,[{key:"componentDidMount",value:function componentDidMount(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(tt){var et=tt.id;et!==this.props.id&&this.setState({inputId:et||mt()})}},{key:"componentDidUpdate",value:function componentDidUpdate(tt,et){et.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=!1}},{key:"copyInputStyles",value:function copyInputStyles(){if(this.mounted&&window.getComputedStyle){var tt=this.input&&window.getComputedStyle(this.input);tt&&(ft(tt,this.sizer),this.placeHolderSizer&&ft(tt,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function updateInputWidth(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var tt=void 0;tt=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(tt+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(tt=this.props.minWidth),tt!==this.state.inputWidth&&this.setState({inputWidth:tt})}}},{key:"getInput",value:function getInput(){return this.input}},{key:"focus",value:function focus(){this.input.focus()}},{key:"blur",value:function blur(){this.input.blur()}},{key:"select",value:function select(){this.input.select()}},{key:"renderStyles",value:function renderStyles(){var tt=this.props.injectStyles;return dt&&tt?at.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function render(){var tt=[this.props.defaultValue,this.props.value,""].reduce((function(tt,et){return null!=tt?tt:et})),et=rt({},this.props.style);et.display||(et.display="inline-block");var nt=rt({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),it=function _objectWithoutProperties(tt,et){var nt={};for(var rt in tt)et.indexOf(rt)>=0||Object.prototype.hasOwnProperty.call(tt,rt)&&(nt[rt]=tt[rt]);return nt}(this.props,[]);return function cleanInputProps(tt){pt.forEach((function(et){return delete tt[et]}))}(it),it.className=this.props.inputClassName,it.id=this.state.inputId,it.style=nt,at.default.createElement("div",{className:this.props.className,style:et},this.renderStyles(),at.default.createElement("input",rt({},it,{ref:this.inputRef})),at.default.createElement("div",{ref:this.sizerRef,style:ct},tt),this.props.placeholder?at.default.createElement("div",{ref:this.placeHolderSizerRef,style:ct},this.props.placeholder):null)}}]),AutosizeInput}(ot.Component);yt.propTypes={className:st.default.string,defaultValue:st.default.any,extraWidth:st.default.oneOfType([st.default.number,st.default.string]),id:st.default.string,injectStyles:st.default.bool,inputClassName:st.default.string,inputRef:st.default.func,inputStyle:st.default.object,minWidth:st.default.oneOfType([st.default.number,st.default.string]),onAutosize:st.default.func,onChange:st.default.func,placeholder:st.default.string,placeholderIsMinWidth:st.default.bool,style:st.default.object,value:st.default.any},yt.defaultProps={minWidth:1,injectStyles:!0},et.default=yt},function(tt,et,nt){var rt=nt(40),it=nt(149);"string"==typeof(it=it.__esModule?it.default:it)&&(it=[[tt.i,it,""]]);var ot={insert:"head",singleton:!1},at=(rt(it,ot),it.locals?it.locals:{});tt.exports=at},function(tt,et,nt){"use strict";(function(tt){var rt=nt(0),it=nt.n(rt),ot=nt(11),at=nt(8),st=nt.n(at),ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==tt?tt:{};function createEventEmitter(tt){var et=[];return{on:function on(tt){et.push(tt)},off:function off(tt){et=et.filter((function(et){return et!==tt}))},get:function get(){return tt},set:function set(nt,rt){tt=nt,et.forEach((function(et){return et(tt,rt)}))}}}var pt=it.a.createContext||function createReactContext(tt,et){var nt,it,at="__create-react-context-"+function getUniqueId(){var tt="__global_unique_id__";return ct[tt]=(ct[tt]||0)+1}()+"__",pt=function(tt){function Provider(){var et;return(et=tt.apply(this,arguments)||this).emitter=createEventEmitter(et.props.value),et}Object(ot.a)(Provider,tt);var nt=Provider.prototype;return nt.getChildContext=function getChildContext(){var tt;return(tt={})[at]=this.emitter,tt},nt.componentWillReceiveProps=function componentWillReceiveProps(tt){if(this.props.value!==tt.value){var nt,rt=this.props.value,it=tt.value;!function objectIs(tt,et){return tt===et?0!==tt||1/tt==1/et:tt!=tt&&et!=et}(rt,it)?(nt="function"==typeof et?et(rt,it):1073741823,0!==(nt|=0)&&this.emitter.set(tt.value,nt)):nt=0}},nt.render=function render(){return this.props.children},Provider}(rt.Component);pt.childContextTypes=((nt={})[at]=st.a.object.isRequired,nt);var ft=function(et){function Consumer(){var tt;return(tt=et.apply(this,arguments)||this).state={value:tt.getValue()},tt.onUpdate=function(et,nt){0!=((0|tt.observedBits)&nt)&&tt.setState({value:tt.getValue()})},tt}Object(ot.a)(Consumer,et);var nt=Consumer.prototype;return nt.componentWillReceiveProps=function componentWillReceiveProps(tt){var et=tt.observedBits;this.observedBits=null==et?1073741823:et},nt.componentDidMount=function componentDidMount(){this.context[at]&&this.context[at].on(this.onUpdate);var tt=this.props.observedBits;this.observedBits=null==tt?1073741823:tt},nt.componentWillUnmount=function componentWillUnmount(){this.context[at]&&this.context[at].off(this.onUpdate)},nt.getValue=function getValue(){return this.context[at]?this.context[at].get():tt},nt.render=function render(){return function onlyChild(tt){return Array.isArray(tt)?tt[0]:tt}(this.props.children)(this.state.value)},Consumer}(rt.Component);return ft.contextTypes=((it={})[at]=st.a.object,it),{Provider:pt,Consumer:ft}};et.a=pt}).call(this,nt(61))},function(tt,et,nt){var rt=nt(150);tt.exports=pathToRegexp,tt.exports.parse=parse,tt.exports.compile=function compile(tt,et){return tokensToFunction(parse(tt,et),et)},tt.exports.tokensToFunction=tokensToFunction,tt.exports.tokensToRegExp=tokensToRegExp;var it=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse(tt,et){for(var nt,rt=[],ot=0,at=0,st="",ct=et&&et.delimiter||"/";null!=(nt=it.exec(tt));){var pt=nt[0],ft=nt[1],dt=nt.index;if(st+=tt.slice(at,dt),at=dt+pt.length,ft)st+=ft[1];else{var mt=tt[at],yt=nt[2],vt=nt[3],Dt=nt[4],Ot=nt[5],Rt=nt[6],Bt=nt[7];st&&(rt.push(st),st="");var Ne=null!=yt&&null!=mt&&mt!==yt,rn="+"===Rt||"*"===Rt,vn="?"===Rt||"*"===Rt,bn=nt[2]||ct,Tn=Dt||Ot;rt.push({name:vt||ot++,prefix:yt||"",delimiter:bn,optional:vn,repeat:rn,partial:Ne,asterisk:!!Bt,pattern:Tn?escapeGroup(Tn):Bt?".*":"[^"+escapeString(bn)+"]+?"})}}return at<tt.length&&(st+=tt.substr(at)),st&&rt.push(st),rt}function encodeURIComponentPretty(tt){return encodeURI(tt).replace(/[\/?#]/g,(function(tt){return"%"+tt.charCodeAt(0).toString(16).toUpperCase()}))}function tokensToFunction(tt,et){for(var nt=new Array(tt.length),it=0;it<tt.length;it++)"object"==typeof tt[it]&&(nt[it]=new RegExp("^(?:"+tt[it].pattern+")$",flags(et)));return function(et,it){for(var ot="",at=et||{},st=(it||{}).pretty?encodeURIComponentPretty:encodeURIComponent,ct=0;ct<tt.length;ct++){var pt=tt[ct];if("string"!=typeof pt){var ft,dt=at[pt.name];if(null==dt){if(pt.optional){pt.partial&&(ot+=pt.prefix);continue}throw new TypeError('Expected "'+pt.name+'" to be defined')}if(rt(dt)){if(!pt.repeat)throw new TypeError('Expected "'+pt.name+'" to not repeat, but received `'+JSON.stringify(dt)+"`");if(0===dt.length){if(pt.optional)continue;throw new TypeError('Expected "'+pt.name+'" to not be empty')}for(var mt=0;mt<dt.length;mt++){if(ft=st(dt[mt]),!nt[ct].test(ft))throw new TypeError('Expected all "'+pt.name+'" to match "'+pt.pattern+'", but received `'+JSON.stringify(ft)+"`");ot+=(0===mt?pt.prefix:pt.delimiter)+ft}}else{if(ft=pt.asterisk?encodeURI(dt).replace(/[?#]/g,(function(tt){return"%"+tt.charCodeAt(0).toString(16).toUpperCase()})):st(dt),!nt[ct].test(ft))throw new TypeError('Expected "'+pt.name+'" to match "'+pt.pattern+'", but received "'+ft+'"');ot+=pt.prefix+ft}}else ot+=pt}return ot}}function escapeString(tt){return tt.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function escapeGroup(tt){return tt.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(tt,et){return tt.keys=et,tt}function flags(tt){return tt&&tt.sensitive?"":"i"}function tokensToRegExp(tt,et,nt){rt(et)||(nt=et||nt,et=[]);for(var it=(nt=nt||{}).strict,ot=!1!==nt.end,at="",st=0;st<tt.length;st++){var ct=tt[st];if("string"==typeof ct)at+=escapeString(ct);else{var pt=escapeString(ct.prefix),ft="(?:"+ct.pattern+")";et.push(ct),ct.repeat&&(ft+="(?:"+pt+ft+")*"),at+=ft=ct.optional?ct.partial?pt+"("+ft+")?":"(?:"+pt+"("+ft+"))?":pt+"("+ft+")"}}var dt=escapeString(nt.delimiter||"/"),mt=at.slice(-dt.length)===dt;return it||(at=(mt?at.slice(0,-dt.length):at)+"(?:"+dt+"(?=$))?"),at+=ot?"$":it&&mt?"":"(?="+dt+"|$)",attachKeys(new RegExp("^"+at,flags(nt)),et)}function pathToRegexp(tt,et,nt){return rt(et)||(nt=et||nt,et=[]),nt=nt||{},tt instanceof RegExp?function regexpToRegexp(tt,et){var nt=tt.source.match(/\((?!\?)/g);if(nt)for(var rt=0;rt<nt.length;rt++)et.push({name:rt,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return attachKeys(tt,et)}(tt,et):rt(tt)?function arrayToRegexp(tt,et,nt){for(var rt=[],it=0;it<tt.length;it++)rt.push(pathToRegexp(tt[it],et,nt).source);return attachKeys(new RegExp("(?:"+rt.join("|")+")",flags(nt)),et)}(tt,et,nt):function stringToRegexp(tt,et,nt){return tokensToRegExp(parse(tt,nt),et,nt)}(tt,et,nt)}},function(tt,et,nt){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var rt=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;function toObject(tt){if(null==tt)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(tt)}tt.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var tt=new String("abc");if(tt[5]="de","5"===Object.getOwnPropertyNames(tt)[0])return!1;for(var et={},nt=0;nt<10;nt++)et["_"+String.fromCharCode(nt)]=nt;if("0123456789"!==Object.getOwnPropertyNames(et).map((function(tt){return et[tt]})).join(""))return!1;var rt={};return"abcdefghijklmnopqrst".split("").forEach((function(tt){rt[tt]=tt})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},rt)).join("")}catch(tt){return!1}}()?Object.assign:function(tt,et){for(var nt,at,st=toObject(tt),ct=1;ct<arguments.length;ct++){for(var pt in nt=Object(arguments[ct]))it.call(nt,pt)&&(st[pt]=nt[pt]);if(rt){at=rt(nt);for(var ft=0;ft<at.length;ft++)ot.call(nt,at[ft])&&(st[at[ft]]=nt[at[ft]])}}return st}},function(tt,et){var nt;nt=function(){return this}();try{nt=nt||new Function("return this")()}catch(tt){"object"==typeof window&&(nt=window)}tt.exports=nt},function(tt,et){tt.exports=function(tt,et){return{enumerable:!(1&tt),configurable:!(2&tt),writable:!(4&tt),value:et}}},function(tt,et,nt){var rt=nt(21);tt.exports=function(tt,et){if(!rt(tt))return tt;var nt,it;if(et&&"function"==typeof(nt=tt.toString)&&!rt(it=nt.call(tt)))return it;if("function"==typeof(nt=tt.valueOf)&&!rt(it=nt.call(tt)))return it;if(!et&&"function"==typeof(nt=tt.toString)&&!rt(it=nt.call(tt)))return it;throw TypeError("Can't convert object to primitive value")}},function(tt,et,nt){var rt=nt(22),it=nt(15),ot=nt(65);tt.exports=!rt&&!it((function(){return 7!=Object.defineProperty(ot("div"),"a",{get:function(){return 7}}).a}))},function(tt,et,nt){var rt=nt(7),it=nt(21),ot=rt.document,at=it(ot)&&it(ot.createElement);tt.exports=function(tt){return at?ot.createElement(tt):{}}},function(tt,et,nt){var rt=nt(7),it=nt(51),ot=rt["__core-js_shared__"]||it("__core-js_shared__",{});tt.exports=ot},function(tt,et,nt){var rt,it,ot,at=nt(105),st=nt(7),ct=nt(21),pt=nt(23),ft=nt(16),dt=nt(106),mt=nt(70),yt=st.WeakMap;if(at){var vt=new yt,Dt=vt.get,Ot=vt.has,Rt=vt.set;rt=function(tt,et){return Rt.call(vt,tt,et),et},it=function(tt){return Dt.call(vt,tt)||{}},ot=function(tt){return Ot.call(vt,tt)}}else{var Bt=dt("state");mt[Bt]=!0,rt=function(tt,et){return pt(tt,Bt,et),et},it=function(tt){return ft(tt,Bt)?tt[Bt]:{}},ot=function(tt){return ft(tt,Bt)}}tt.exports={set:rt,get:it,has:ot,enforce:function(tt){return ot(tt)?it(tt):rt(tt,{})},getterFor:function(tt){return function(et){var nt;if(!ct(et)||(nt=it(et)).type!==tt)throw TypeError("Incompatible receiver, "+tt+" required");return nt}}}},function(tt,et,nt){var rt=nt(2),it=nt(66);(tt.exports=function(tt,et){return it[tt]||(it[tt]=void 0!==et?et:{})})("versions",[]).push({version:"3.6.5",mode:rt?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(tt,et){var nt=0,rt=Math.random();tt.exports=function(tt){return"Symbol("+String(void 0===tt?"":tt)+")_"+(++nt+rt).toString(36)}},function(tt,et){tt.exports={}},function(tt,et,nt){var rt=nt(15),it=/#|\.prototype\./,isForced=function(tt,et){var nt=at[ot(tt)];return nt==ct||nt!=st&&("function"==typeof et?rt(et):!!et)},ot=isForced.normalize=function(tt){return String(tt).replace(it,".").toLowerCase()},at=isForced.data={},st=isForced.NATIVE="N",ct=isForced.POLYFILL="P";tt.exports=isForced},function(tt,et,nt){var rt=nt(15);tt.exports=!!Object.getOwnPropertySymbols&&!rt((function(){return!String(Symbol())}))},function(tt,et){tt.exports={}},function(tt,et,nt){var rt=nt(123),it=nt(73),ot=nt(12)("iterator");tt.exports=function(tt){if(null!=tt)return tt[ot]||tt["@@iterator"]||it[rt(tt)]}},function(tt,et,nt){var rt,it,ot,at=nt(7),st=nt(15),ct=nt(20),pt=nt(10),ft=nt(127),dt=nt(65),mt=nt(76),yt=at.location,vt=at.setImmediate,Dt=at.clearImmediate,Ot=at.process,Rt=at.MessageChannel,Bt=at.Dispatch,Ne=0,rn={},run=function(tt){if(rn.hasOwnProperty(tt)){var et=rn[tt];delete rn[tt],et()}},runner=function(tt){return function(){run(tt)}},listener=function(tt){run(tt.data)},post=function(tt){at.postMessage(tt+"",yt.protocol+"//"+yt.host)};vt&&Dt||(vt=function setImmediate(tt){for(var et=[],nt=1;arguments.length>nt;)et.push(arguments[nt++]);return rn[++Ne]=function(){("function"==typeof tt?tt:Function(tt)).apply(void 0,et)},rt(Ne),Ne},Dt=function clearImmediate(tt){delete rn[tt]},"process"==ct(Ot)?rt=function(tt){Ot.nextTick(runner(tt))}:Bt&&Bt.now?rt=function(tt){Bt.now(runner(tt))}:Rt&&!mt?(ot=(it=new Rt).port2,it.port1.onmessage=listener,rt=pt(ot.postMessage,ot,1)):!at.addEventListener||"function"!=typeof postMessage||at.importScripts||st(post)||"file:"===yt.protocol?rt="onreadystatechange"in dt("script")?function(tt){ft.appendChild(dt("script")).onreadystatechange=function(){ft.removeChild(this),run(tt)}}:function(tt){setTimeout(runner(tt),0)}:(rt=post,at.addEventListener("message",listener,!1))),tt.exports={set:vt,clear:Dt}},function(tt,et,nt){var rt=nt(77);tt.exports=/(iphone|ipod|ipad).*applewebkit/i.test(rt)},function(tt,et,nt){var rt=nt(9);tt.exports=rt("navigator","userAgent")||""},function(tt,et,nt){"use strict";var rt=nt(5),PromiseCapability=function(tt){var et,nt;this.promise=new tt((function(tt,rt){if(void 0!==et||void 0!==nt)throw TypeError("Bad Promise constructor");et=tt,nt=rt})),this.resolve=rt(et),this.reject=rt(nt)};tt.exports.f=function(tt){return new PromiseCapability(tt)}},function(tt,et,nt){"use strict";var rt=nt(1),it=nt(5);tt.exports=function(){for(var tt,et=rt(this),nt=it(et.delete),ot=!0,at=0,st=arguments.length;at<st;at++)tt=nt.call(et,arguments[at]),ot=ot&&tt;return!!ot}},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(79);rt({target:"Map",proto:!0,real:!0,forced:it},{deleteAll:function deleteAll(){return ot.apply(this,arguments)}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(10),st=nt(14),ct=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{every:function every(tt){var et=ot(this),nt=st(et),rt=at(tt,arguments.length>1?arguments[1]:void 0,3);return!ct(nt,(function(tt,nt){if(!rt(nt,tt,et))return ct.stop()}),void 0,!0,!0).stopped}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(10),pt=nt(13),ft=nt(14),dt=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{filter:function filter(tt){var et=at(this),nt=ft(et),rt=ct(tt,arguments.length>1?arguments[1]:void 0,3),it=new(pt(et,ot("Map"))),mt=st(it.set);return dt(nt,(function(tt,nt){rt(nt,tt,et)&&mt.call(it,tt,nt)}),void 0,!0,!0),it}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(10),st=nt(14),ct=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{find:function find(tt){var et=ot(this),nt=st(et),rt=at(tt,arguments.length>1?arguments[1]:void 0,3);return ct(nt,(function(tt,nt){if(rt(nt,tt,et))return ct.stop(nt)}),void 0,!0,!0).result}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(10),st=nt(14),ct=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{findKey:function findKey(tt){var et=ot(this),nt=st(et),rt=at(tt,arguments.length>1?arguments[1]:void 0,3);return ct(nt,(function(tt,nt){if(rt(nt,tt,et))return ct.stop(tt)}),void 0,!0,!0).result}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(14),st=nt(147),ct=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{includes:function includes(tt){return ct(at(ot(this)),(function(et,nt){if(st(nt,tt))return ct.stop()}),void 0,!0,!0).stopped}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(14),st=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{keyOf:function keyOf(tt){return st(at(ot(this)),(function(et,nt){if(nt===tt)return st.stop(et)}),void 0,!0,!0).result}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(10),pt=nt(13),ft=nt(14),dt=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{mapKeys:function mapKeys(tt){var et=at(this),nt=ft(et),rt=ct(tt,arguments.length>1?arguments[1]:void 0,3),it=new(pt(et,ot("Map"))),mt=st(it.set);return dt(nt,(function(tt,nt){mt.call(it,rt(nt,tt,et),nt)}),void 0,!0,!0),it}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(9),at=nt(1),st=nt(5),ct=nt(10),pt=nt(13),ft=nt(14),dt=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{mapValues:function mapValues(tt){var et=at(this),nt=ft(et),rt=ct(tt,arguments.length>1?arguments[1]:void 0,3),it=new(pt(et,ot("Map"))),mt=st(it.set);return dt(nt,(function(tt,nt){mt.call(it,tt,rt(nt,tt,et))}),void 0,!0,!0),it}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(5),st=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{merge:function merge(tt){for(var et=ot(this),nt=at(et.set),rt=0;rt<arguments.length;)st(arguments[rt++],nt,et,!0);return et}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(5),st=nt(14),ct=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{reduce:function reduce(tt){var et=ot(this),nt=st(et),rt=arguments.length<2,it=rt?void 0:arguments[1];if(at(tt),ct(nt,(function(nt,ot){rt?(rt=!1,it=ot):it=tt(it,ot,nt,et)}),void 0,!0,!0),rt)throw TypeError("Reduce of empty map with no initial value");return it}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(10),st=nt(14),ct=nt(4);rt({target:"Map",proto:!0,real:!0,forced:it},{some:function some(tt){var et=ot(this),nt=st(et),rt=at(tt,arguments.length>1?arguments[1]:void 0,3);return ct(nt,(function(tt,nt){if(rt(nt,tt,et))return ct.stop()}),void 0,!0,!0).stopped}})},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(2),ot=nt(1),at=nt(5);rt({target:"Map",proto:!0,real:!0,forced:it},{update:function update(tt,et){var nt=ot(this),rt=arguments.length;at(et);var it=nt.has(tt);if(!it&&rt<3)throw TypeError("Updating absent value");var st=it?nt.get(tt):at(rt>2?arguments[2]:void 0)(tt,nt);return nt.set(tt,et(st,tt,nt)),nt}})},function(tt,et,nt){"use strict";tt.exports=nt(151)},function(tt,et,nt){var rt=nt(40),it=nt(143);"string"==typeof(it=it.__esModule?it.default:it)&&(it=[[tt.i,it,""]]);var ot={insert:"head",singleton:!1},at=(rt(it,ot),it.locals?it.locals:{});tt.exports=at},function(tt,et){tt.exports=function _inheritsLoose(tt,et){tt.prototype=Object.create(et.prototype),tt.prototype.constructor=tt,tt.__proto__=et}},function(tt,et,nt){"use strict";var rt=nt(93),it={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ot={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},at={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},st={};function getStatics(tt){return rt.isMemo(tt)?at:st[tt.$$typeof]||it}st[rt.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},st[rt.Memo]=at;var ct=Object.defineProperty,pt=Object.getOwnPropertyNames,ft=Object.getOwnPropertySymbols,dt=Object.getOwnPropertyDescriptor,mt=Object.getPrototypeOf,yt=Object.prototype;tt.exports=function hoistNonReactStatics(tt,et,nt){if("string"!=typeof et){if(yt){var rt=mt(et);rt&&rt!==yt&&hoistNonReactStatics(tt,rt,nt)}var it=pt(et);ft&&(it=it.concat(ft(et)));for(var at=getStatics(tt),st=getStatics(et),vt=0;vt<it.length;++vt){var Dt=it[vt];if(!(ot[Dt]||nt&&nt[Dt]||st&&st[Dt]||at&&at[Dt])){var Ot=dt(et,Dt);try{ct(tt,Dt,Ot)}catch(tt){}}}}return tt}},function(tt,et,nt){"use strict";
/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt=nt(60),it="function"==typeof Symbol&&Symbol.for,ot=it?Symbol.for("react.element"):60103,at=it?Symbol.for("react.portal"):60106,st=it?Symbol.for("react.fragment"):60107,ct=it?Symbol.for("react.strict_mode"):60108,pt=it?Symbol.for("react.profiler"):60114,ft=it?Symbol.for("react.provider"):60109,dt=it?Symbol.for("react.context"):60110,mt=it?Symbol.for("react.forward_ref"):60112,yt=it?Symbol.for("react.suspense"):60113,vt=it?Symbol.for("react.memo"):60115,Dt=it?Symbol.for("react.lazy"):60116,Ot="function"==typeof Symbol&&Symbol.iterator;function C(tt){for(var et="https://reactjs.org/docs/error-decoder.html?invariant="+tt,nt=1;nt<arguments.length;nt++)et+="&args[]="+encodeURIComponent(arguments[nt]);return"Minified React error #"+tt+"; visit "+et+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bt={};function F(tt,et,nt){this.props=tt,this.context=et,this.refs=Bt,this.updater=nt||Rt}function G(){}function H(tt,et,nt){this.props=tt,this.context=et,this.refs=Bt,this.updater=nt||Rt}F.prototype.isReactComponent={},F.prototype.setState=function(tt,et){if("object"!=typeof tt&&"function"!=typeof tt&&null!=tt)throw Error(C(85));this.updater.enqueueSetState(this,tt,et,"setState")},F.prototype.forceUpdate=function(tt){this.updater.enqueueForceUpdate(this,tt,"forceUpdate")},G.prototype=F.prototype;var Ne=H.prototype=new G;Ne.constructor=H,rt(Ne,F.prototype),Ne.isPureReactComponent=!0;var rn={current:null},vn=Object.prototype.hasOwnProperty,bn={key:!0,ref:!0,__self:!0,__source:!0};function M(tt,et,nt){var rt,it={},at=null,st=null;if(null!=et)for(rt in void 0!==et.ref&&(st=et.ref),void 0!==et.key&&(at=""+et.key),et)vn.call(et,rt)&&!bn.hasOwnProperty(rt)&&(it[rt]=et[rt]);var ct=arguments.length-2;if(1===ct)it.children=nt;else if(1<ct){for(var pt=Array(ct),ft=0;ft<ct;ft++)pt[ft]=arguments[ft+2];it.children=pt}if(tt&&tt.defaultProps)for(rt in ct=tt.defaultProps)void 0===it[rt]&&(it[rt]=ct[rt]);return{$$typeof:ot,type:tt,key:at,ref:st,props:it,_owner:rn.current}}function O(tt){return"object"==typeof tt&&null!==tt&&tt.$$typeof===ot}var Tn=/\/+/g,Cn=[];function R(tt,et,nt,rt){if(Cn.length){var it=Cn.pop();return it.result=tt,it.keyPrefix=et,it.func=nt,it.context=rt,it.count=0,it}return{result:tt,keyPrefix:et,func:nt,context:rt,count:0}}function S(tt){tt.result=null,tt.keyPrefix=null,tt.func=null,tt.context=null,tt.count=0,10>Cn.length&&Cn.push(tt)}function V(tt,et,nt){return null==tt?0:function T(tt,et,nt,rt){var it=typeof tt;"undefined"!==it&&"boolean"!==it||(tt=null);var st=!1;if(null===tt)st=!0;else switch(it){case"string":case"number":st=!0;break;case"object":switch(tt.$$typeof){case ot:case at:st=!0}}if(st)return nt(rt,tt,""===et?"."+U(tt,0):et),1;if(st=0,et=""===et?".":et+":",Array.isArray(tt))for(var ct=0;ct<tt.length;ct++){var pt=et+U(it=tt[ct],ct);st+=T(it,pt,nt,rt)}else if(null===tt||"object"!=typeof tt?pt=null:pt="function"==typeof(pt=Ot&&tt[Ot]||tt["@@iterator"])?pt:null,"function"==typeof pt)for(tt=pt.call(tt),ct=0;!(it=tt.next()).done;)st+=T(it=it.value,pt=et+U(it,ct++),nt,rt);else if("object"===it)throw nt=""+tt,Error(C(31,"[object Object]"===nt?"object with keys {"+Object.keys(tt).join(", ")+"}":nt,""));return st}(tt,"",et,nt)}function U(tt,et){return"object"==typeof tt&&null!==tt&&null!=tt.key?function escape(tt){var et={"=":"=0",":":"=2"};return"$"+(""+tt).replace(/[=:]/g,(function(tt){return et[tt]}))}(tt.key):et.toString(36)}function W(tt,et){tt.func.call(tt.context,et,tt.count++)}function aa(tt,et,nt){var rt=tt.result,it=tt.keyPrefix;tt=tt.func.call(tt.context,et,tt.count++),Array.isArray(tt)?X(tt,rt,nt,(function(tt){return tt})):null!=tt&&(O(tt)&&(tt=function N(tt,et){return{$$typeof:ot,type:tt.type,key:et,ref:tt.ref,props:tt.props,_owner:tt._owner}}(tt,it+(!tt.key||et&&et.key===tt.key?"":(""+tt.key).replace(Tn,"$&/")+"/")+nt)),rt.push(tt))}function X(tt,et,nt,rt,it){var ot="";null!=nt&&(ot=(""+nt).replace(Tn,"$&/")+"/"),V(tt,aa,et=R(et,ot,rt,it)),S(et)}var Ln={current:null};function Z(){var tt=Ln.current;if(null===tt)throw Error(C(321));return tt}var In={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:rn,IsSomeRendererActing:{current:!1},assign:rt};et.Children={map:function(tt,et,nt){if(null==tt)return tt;var rt=[];return X(tt,rt,null,et,nt),rt},forEach:function(tt,et,nt){if(null==tt)return tt;V(tt,W,et=R(null,null,et,nt)),S(et)},count:function(tt){return V(tt,(function(){return null}),null)},toArray:function(tt){var et=[];return X(tt,et,null,(function(tt){return tt})),et},only:function(tt){if(!O(tt))throw Error(C(143));return tt}},et.Component=F,et.Fragment=st,et.Profiler=pt,et.PureComponent=H,et.StrictMode=ct,et.Suspense=yt,et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=In,et.cloneElement=function(tt,et,nt){if(null==tt)throw Error(C(267,tt));var it=rt({},tt.props),at=tt.key,st=tt.ref,ct=tt._owner;if(null!=et){if(void 0!==et.ref&&(st=et.ref,ct=rn.current),void 0!==et.key&&(at=""+et.key),tt.type&&tt.type.defaultProps)var pt=tt.type.defaultProps;for(ft in et)vn.call(et,ft)&&!bn.hasOwnProperty(ft)&&(it[ft]=void 0===et[ft]&&void 0!==pt?pt[ft]:et[ft])}var ft=arguments.length-2;if(1===ft)it.children=nt;else if(1<ft){pt=Array(ft);for(var dt=0;dt<ft;dt++)pt[dt]=arguments[dt+2];it.children=pt}return{$$typeof:ot,type:tt.type,key:at,ref:st,props:it,_owner:ct}},et.createContext=function(tt,et){return void 0===et&&(et=null),(tt={$$typeof:dt,_calculateChangedBits:et,_currentValue:tt,_currentValue2:tt,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:ft,_context:tt},tt.Consumer=tt},et.createElement=M,et.createFactory=function(tt){var et=M.bind(null,tt);return et.type=tt,et},et.createRef=function(){return{current:null}},et.forwardRef=function(tt){return{$$typeof:mt,render:tt}},et.isValidElement=O,et.lazy=function(tt){return{$$typeof:Dt,_ctor:tt,_status:-1,_result:null}},et.memo=function(tt,et){return{$$typeof:vt,type:tt,compare:void 0===et?null:et}},et.useCallback=function(tt,et){return Z().useCallback(tt,et)},et.useContext=function(tt,et){return Z().useContext(tt,et)},et.useDebugValue=function(){},et.useEffect=function(tt,et){return Z().useEffect(tt,et)},et.useImperativeHandle=function(tt,et,nt){return Z().useImperativeHandle(tt,et,nt)},et.useLayoutEffect=function(tt,et){return Z().useLayoutEffect(tt,et)},et.useMemo=function(tt,et){return Z().useMemo(tt,et)},et.useReducer=function(tt,et,nt){return Z().useReducer(tt,et,nt)},et.useRef=function(tt){return Z().useRef(tt)},et.useState=function(tt){return Z().useState(tt)},et.version="16.13.1"},function(tt,et,nt){"use strict";
/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt=nt(0),it=nt(60),ot=nt(99);function u(tt){for(var et="https://reactjs.org/docs/error-decoder.html?invariant="+tt,nt=1;nt<arguments.length;nt++)et+="&args[]="+encodeURIComponent(arguments[nt]);return"Minified React error #"+tt+"; visit "+et+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!rt)throw Error(u(227));function ba(tt,et,nt,rt,it,ot,at,st,ct){var pt=Array.prototype.slice.call(arguments,3);try{et.apply(nt,pt)}catch(tt){this.onError(tt)}}var at=!1,st=null,ct=!1,pt=null,ft={onError:function(tt){at=!0,st=tt}};function ja(tt,et,nt,rt,it,ot,ct,pt,dt){at=!1,st=null,ba.apply(ft,arguments)}var dt=null,mt=null,yt=null;function oa(tt,et,nt){var rt=tt.type||"unknown-event";tt.currentTarget=yt(nt),function ka(tt,et,nt,rt,it,ot,ft,dt,mt){if(ja.apply(this,arguments),at){if(!at)throw Error(u(198));var yt=st;at=!1,st=null,ct||(ct=!0,pt=yt)}}(rt,et,void 0,tt),tt.currentTarget=null}var vt=null,Dt={};function ra(){if(vt)for(var tt in Dt){var et=Dt[tt],nt=vt.indexOf(tt);if(!(-1<nt))throw Error(u(96,tt));if(!Ot[nt]){if(!et.extractEvents)throw Error(u(97,tt));for(var rt in Ot[nt]=et,nt=et.eventTypes){var it=void 0,ot=nt[rt],at=et,st=rt;if(Rt.hasOwnProperty(st))throw Error(u(99,st));Rt[st]=ot;var ct=ot.phasedRegistrationNames;if(ct){for(it in ct)ct.hasOwnProperty(it)&&ua(ct[it],at,st);it=!0}else ot.registrationName?(ua(ot.registrationName,at,st),it=!0):it=!1;if(!it)throw Error(u(98,rt,tt))}}}}function ua(tt,et,nt){if(Bt[tt])throw Error(u(100,tt));Bt[tt]=et,Ne[tt]=et.eventTypes[nt].dependencies}var Ot=[],Rt={},Bt={},Ne={};function xa(tt){var et,nt=!1;for(et in tt)if(tt.hasOwnProperty(et)){var rt=tt[et];if(!Dt.hasOwnProperty(et)||Dt[et]!==rt){if(Dt[et])throw Error(u(102,et));Dt[et]=rt,nt=!0}}nt&&ra()}var rn=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),vn=null,bn=null,Tn=null;function Ca(tt){if(tt=mt(tt)){if("function"!=typeof vn)throw Error(u(280));var et=tt.stateNode;et&&(et=dt(et),vn(tt.stateNode,tt.type,et))}}function Da(tt){bn?Tn?Tn.push(tt):Tn=[tt]:bn=tt}function Ea(){if(bn){var tt=bn,et=Tn;if(Tn=bn=null,Ca(tt),et)for(tt=0;tt<et.length;tt++)Ca(et[tt])}}function Fa(tt,et){return tt(et)}function Ga(tt,et,nt,rt,it){return tt(et,nt,rt,it)}function Ha(){}var Cn=Fa,Ln=!1,In=!1;function La(){null===bn&&null===Tn||(Ha(),Ea())}function Ma(tt,et,nt){if(In)return tt(et,nt);In=!0;try{return Cn(tt,et,nt)}finally{In=!1,La()}}var Mn=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zn=Object.prototype.hasOwnProperty,Bn={},Fn={};function v(tt,et,nt,rt,it,ot){this.acceptsBooleans=2===et||3===et||4===et,this.attributeName=rt,this.attributeNamespace=it,this.mustUseProperty=nt,this.propertyName=tt,this.type=et,this.sanitizeURL=ot}var Nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(tt){Nn[tt]=new v(tt,0,!1,tt,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(tt){var et=tt[0];Nn[et]=new v(et,1,!1,tt[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(tt){Nn[tt]=new v(tt,2,!1,tt.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(tt){Nn[tt]=new v(tt,2,!1,tt,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(tt){Nn[tt]=new v(tt,3,!1,tt.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(tt){Nn[tt]=new v(tt,3,!0,tt,null,!1)})),["capture","download"].forEach((function(tt){Nn[tt]=new v(tt,4,!1,tt,null,!1)})),["cols","rows","size","span"].forEach((function(tt){Nn[tt]=new v(tt,6,!1,tt,null,!1)})),["rowSpan","start"].forEach((function(tt){Nn[tt]=new v(tt,5,!1,tt.toLowerCase(),null,!1)}));var Vn=/[\-:]([a-z])/g;function Va(tt){return tt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(tt){var et=tt.replace(Vn,Va);Nn[et]=new v(et,1,!1,tt,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(tt){var et=tt.replace(Vn,Va);Nn[et]=new v(et,1,!1,tt,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(tt){var et=tt.replace(Vn,Va);Nn[et]=new v(et,1,!1,tt,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(tt){Nn[tt]=new v(tt,1,!1,tt.toLowerCase(),null,!1)})),Nn.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(tt){Nn[tt]=new v(tt,1,!1,tt.toLowerCase(),null,!0)}));var Wn=rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Xa(tt,et,nt,rt){var it=Nn.hasOwnProperty(et)?Nn[et]:null;(null!==it?0===it.type:!rt&&(2<et.length&&("o"===et[0]||"O"===et[0])&&("n"===et[1]||"N"===et[1])))||(function Ta(tt,et,nt,rt){if(null==et||function Sa(tt,et,nt,rt){if(null!==nt&&0===nt.type)return!1;switch(typeof et){case"function":case"symbol":return!0;case"boolean":return!rt&&(null!==nt?!nt.acceptsBooleans:"data-"!==(tt=tt.toLowerCase().slice(0,5))&&"aria-"!==tt);default:return!1}}(tt,et,nt,rt))return!0;if(rt)return!1;if(null!==nt)switch(nt.type){case 3:return!et;case 4:return!1===et;case 5:return isNaN(et);case 6:return isNaN(et)||1>et}return!1}(et,nt,it,rt)&&(nt=null),rt||null===it?function Ra(tt){return!!zn.call(Fn,tt)||!zn.call(Bn,tt)&&(Mn.test(tt)?Fn[tt]=!0:(Bn[tt]=!0,!1))}(et)&&(null===nt?tt.removeAttribute(et):tt.setAttribute(et,""+nt)):it.mustUseProperty?tt[it.propertyName]=null===nt?3!==it.type&&"":nt:(et=it.attributeName,rt=it.attributeNamespace,null===nt?tt.removeAttribute(et):(nt=3===(it=it.type)||4===it&&!0===nt?"":""+nt,rt?tt.setAttributeNS(rt,et,nt):tt.setAttribute(et,nt))))}Wn.hasOwnProperty("ReactCurrentDispatcher")||(Wn.ReactCurrentDispatcher={current:null}),Wn.hasOwnProperty("ReactCurrentBatchConfig")||(Wn.ReactCurrentBatchConfig={suspense:null});var $n=/^(.*)[\\\/]/,Yn="function"==typeof Symbol&&Symbol.for,er=Yn?Symbol.for("react.element"):60103,rr=Yn?Symbol.for("react.portal"):60106,vr=Yn?Symbol.for("react.fragment"):60107,wr=Yn?Symbol.for("react.strict_mode"):60108,Sr=Yn?Symbol.for("react.profiler"):60114,ii=Yn?Symbol.for("react.provider"):60109,qi=Yn?Symbol.for("react.context"):60110,uo=Yn?Symbol.for("react.concurrent_mode"):60111,po=Yn?Symbol.for("react.forward_ref"):60112,vo=Yn?Symbol.for("react.suspense"):60113,So=Yn?Symbol.for("react.suspense_list"):60120,ta=Yn?Symbol.for("react.memo"):60115,na=Yn?Symbol.for("react.lazy"):60116,ia=Yn?Symbol.for("react.block"):60121,sa="function"==typeof Symbol&&Symbol.iterator;function nb(tt){return null===tt||"object"!=typeof tt?null:"function"==typeof(tt=sa&&tt[sa]||tt["@@iterator"])?tt:null}function pb(tt){if(null==tt)return null;if("function"==typeof tt)return tt.displayName||tt.name||null;if("string"==typeof tt)return tt;switch(tt){case vr:return"Fragment";case rr:return"Portal";case Sr:return"Profiler";case wr:return"StrictMode";case vo:return"Suspense";case So:return"SuspenseList"}if("object"==typeof tt)switch(tt.$$typeof){case qi:return"Context.Consumer";case ii:return"Context.Provider";case po:var et=tt.render;return et=et.displayName||et.name||"",tt.displayName||(""!==et?"ForwardRef("+et+")":"ForwardRef");case ta:return pb(tt.type);case ia:return pb(tt.render);case na:if(tt=1===tt._status?tt._result:null)return pb(tt)}return null}function qb(tt){var et="";do{t:switch(tt.tag){case 3:case 4:case 6:case 7:case 10:case 9:var nt="";break t;default:var rt=tt._debugOwner,it=tt._debugSource,ot=pb(tt.type);nt=null,rt&&(nt=pb(rt.type)),rt=ot,ot="",it?ot=" (at "+it.fileName.replace($n,"")+":"+it.lineNumber+")":nt&&(ot=" (created by "+nt+")"),nt="\n    in "+(rt||"Unknown")+ot}et+=nt,tt=tt.return}while(tt);return et}function rb(tt){switch(typeof tt){case"boolean":case"number":case"object":case"string":case"undefined":return tt;default:return""}}function sb(tt){var et=tt.type;return(tt=tt.nodeName)&&"input"===tt.toLowerCase()&&("checkbox"===et||"radio"===et)}function xb(tt){tt._valueTracker||(tt._valueTracker=function tb(tt){var et=sb(tt)?"checked":"value",nt=Object.getOwnPropertyDescriptor(tt.constructor.prototype,et),rt=""+tt[et];if(!tt.hasOwnProperty(et)&&void 0!==nt&&"function"==typeof nt.get&&"function"==typeof nt.set){var it=nt.get,ot=nt.set;return Object.defineProperty(tt,et,{configurable:!0,get:function(){return it.call(this)},set:function(tt){rt=""+tt,ot.call(this,tt)}}),Object.defineProperty(tt,et,{enumerable:nt.enumerable}),{getValue:function(){return rt},setValue:function(tt){rt=""+tt},stopTracking:function(){tt._valueTracker=null,delete tt[et]}}}}(tt))}function yb(tt){if(!tt)return!1;var et=tt._valueTracker;if(!et)return!0;var nt=et.getValue(),rt="";return tt&&(rt=sb(tt)?tt.checked?"true":"false":tt.value),(tt=rt)!==nt&&(et.setValue(tt),!0)}function zb(tt,et){var nt=et.checked;return it({},et,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=nt?nt:tt._wrapperState.initialChecked})}function Ab(tt,et){var nt=null==et.defaultValue?"":et.defaultValue,rt=null!=et.checked?et.checked:et.defaultChecked;nt=rb(null!=et.value?et.value:nt),tt._wrapperState={initialChecked:rt,initialValue:nt,controlled:"checkbox"===et.type||"radio"===et.type?null!=et.checked:null!=et.value}}function Bb(tt,et){null!=(et=et.checked)&&Xa(tt,"checked",et,!1)}function Cb(tt,et){Bb(tt,et);var nt=rb(et.value),rt=et.type;if(null!=nt)"number"===rt?(0===nt&&""===tt.value||tt.value!=nt)&&(tt.value=""+nt):tt.value!==""+nt&&(tt.value=""+nt);else if("submit"===rt||"reset"===rt)return void tt.removeAttribute("value");et.hasOwnProperty("value")?Db(tt,et.type,nt):et.hasOwnProperty("defaultValue")&&Db(tt,et.type,rb(et.defaultValue)),null==et.checked&&null!=et.defaultChecked&&(tt.defaultChecked=!!et.defaultChecked)}function Eb(tt,et,nt){if(et.hasOwnProperty("value")||et.hasOwnProperty("defaultValue")){var rt=et.type;if(!("submit"!==rt&&"reset"!==rt||void 0!==et.value&&null!==et.value))return;et=""+tt._wrapperState.initialValue,nt||et===tt.value||(tt.value=et),tt.defaultValue=et}""!==(nt=tt.name)&&(tt.name=""),tt.defaultChecked=!!tt._wrapperState.initialChecked,""!==nt&&(tt.name=nt)}function Db(tt,et,nt){"number"===et&&tt.ownerDocument.activeElement===tt||(null==nt?tt.defaultValue=""+tt._wrapperState.initialValue:tt.defaultValue!==""+nt&&(tt.defaultValue=""+nt))}function Gb(tt,et){return tt=it({children:void 0},et),(et=function Fb(tt){var et="";return rt.Children.forEach(tt,(function(tt){null!=tt&&(et+=tt)})),et}(et.children))&&(tt.children=et),tt}function Hb(tt,et,nt,rt){if(tt=tt.options,et){et={};for(var it=0;it<nt.length;it++)et["$"+nt[it]]=!0;for(nt=0;nt<tt.length;nt++)it=et.hasOwnProperty("$"+tt[nt].value),tt[nt].selected!==it&&(tt[nt].selected=it),it&&rt&&(tt[nt].defaultSelected=!0)}else{for(nt=""+rb(nt),et=null,it=0;it<tt.length;it++){if(tt[it].value===nt)return tt[it].selected=!0,void(rt&&(tt[it].defaultSelected=!0));null!==et||tt[it].disabled||(et=tt[it])}null!==et&&(et.selected=!0)}}function Ib(tt,et){if(null!=et.dangerouslySetInnerHTML)throw Error(u(91));return it({},et,{value:void 0,defaultValue:void 0,children:""+tt._wrapperState.initialValue})}function Jb(tt,et){var nt=et.value;if(null==nt){if(nt=et.children,et=et.defaultValue,null!=nt){if(null!=et)throw Error(u(92));if(Array.isArray(nt)){if(!(1>=nt.length))throw Error(u(93));nt=nt[0]}et=nt}null==et&&(et=""),nt=et}tt._wrapperState={initialValue:rb(nt)}}function Kb(tt,et){var nt=rb(et.value),rt=rb(et.defaultValue);null!=nt&&((nt=""+nt)!==tt.value&&(tt.value=nt),null==et.defaultValue&&tt.defaultValue!==nt&&(tt.defaultValue=nt)),null!=rt&&(tt.defaultValue=""+rt)}function Lb(tt){var et=tt.textContent;et===tt._wrapperState.initialValue&&""!==et&&null!==et&&(tt.value=et)}var la="http://www.w3.org/1999/xhtml",pa="http://www.w3.org/2000/svg";function Nb(tt){switch(tt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(tt,et){return null==tt||"http://www.w3.org/1999/xhtml"===tt?Nb(et):"http://www.w3.org/2000/svg"===tt&&"foreignObject"===et?"http://www.w3.org/1999/xhtml":tt}var fa,ga=function(tt){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(et,nt,rt,it){MSApp.execUnsafeLocalFunction((function(){return tt(et,nt)}))}:tt}((function(tt,et){if(tt.namespaceURI!==pa||"innerHTML"in tt)tt.innerHTML=et;else{for((fa=fa||document.createElement("div")).innerHTML="<svg>"+et.valueOf().toString()+"</svg>",et=fa.firstChild;tt.firstChild;)tt.removeChild(tt.firstChild);for(;et.firstChild;)tt.appendChild(et.firstChild)}}));function Rb(tt,et){if(et){var nt=tt.firstChild;if(nt&&nt===tt.lastChild&&3===nt.nodeType)return void(nt.nodeValue=et)}tt.textContent=et}function Sb(tt,et){var nt={};return nt[tt.toLowerCase()]=et.toLowerCase(),nt["Webkit"+tt]="webkit"+et,nt["Moz"+tt]="moz"+et,nt}var va={animationend:Sb("Animation","AnimationEnd"),animationiteration:Sb("Animation","AnimationIteration"),animationstart:Sb("Animation","AnimationStart"),transitionend:Sb("Transition","TransitionEnd")},_a={},wa={};function Wb(tt){if(_a[tt])return _a[tt];if(!va[tt])return tt;var et,nt=va[tt];for(et in nt)if(nt.hasOwnProperty(et)&&et in wa)return _a[tt]=nt[et];return tt}rn&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);var Aa=Wb("animationend"),os=Wb("animationiteration"),as=Wb("animationstart"),ss=Wb("transitionend"),us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ls=new("function"==typeof WeakMap?WeakMap:Map);function cc(tt){var et=ls.get(tt);return void 0===et&&(et=new Map,ls.set(tt,et)),et}function dc(tt){var et=tt,nt=tt;if(tt.alternate)for(;et.return;)et=et.return;else{tt=et;do{0!=(1026&(et=tt).effectTag)&&(nt=et.return),tt=et.return}while(tt)}return 3===et.tag?nt:null}function ec(tt){if(13===tt.tag){var et=tt.memoizedState;if(null===et&&(null!==(tt=tt.alternate)&&(et=tt.memoizedState)),null!==et)return et.dehydrated}return null}function fc(tt){if(dc(tt)!==tt)throw Error(u(188))}function hc(tt){if(!(tt=function gc(tt){var et=tt.alternate;if(!et){if(null===(et=dc(tt)))throw Error(u(188));return et!==tt?null:tt}for(var nt=tt,rt=et;;){var it=nt.return;if(null===it)break;var ot=it.alternate;if(null===ot){if(null!==(rt=it.return)){nt=rt;continue}break}if(it.child===ot.child){for(ot=it.child;ot;){if(ot===nt)return fc(it),tt;if(ot===rt)return fc(it),et;ot=ot.sibling}throw Error(u(188))}if(nt.return!==rt.return)nt=it,rt=ot;else{for(var at=!1,st=it.child;st;){if(st===nt){at=!0,nt=it,rt=ot;break}if(st===rt){at=!0,rt=it,nt=ot;break}st=st.sibling}if(!at){for(st=ot.child;st;){if(st===nt){at=!0,nt=ot,rt=it;break}if(st===rt){at=!0,rt=ot,nt=it;break}st=st.sibling}if(!at)throw Error(u(189))}}if(nt.alternate!==rt)throw Error(u(190))}if(3!==nt.tag)throw Error(u(188));return nt.stateNode.current===nt?tt:et}(tt)))return null;for(var et=tt;;){if(5===et.tag||6===et.tag)return et;if(et.child)et.child.return=et,et=et.child;else{if(et===tt)break;for(;!et.sibling;){if(!et.return||et.return===tt)return null;et=et.return}et.sibling.return=et.return,et=et.sibling}}return null}function ic(tt,et){if(null==et)throw Error(u(30));return null==tt?et:Array.isArray(tt)?Array.isArray(et)?(tt.push.apply(tt,et),tt):(tt.push(et),tt):Array.isArray(et)?[tt].concat(et):[tt,et]}function jc(tt,et,nt){Array.isArray(tt)?tt.forEach(et,nt):tt&&et.call(nt,tt)}var fs=null;function lc(tt){if(tt){var et=tt._dispatchListeners,nt=tt._dispatchInstances;if(Array.isArray(et))for(var rt=0;rt<et.length&&!tt.isPropagationStopped();rt++)oa(tt,et[rt],nt[rt]);else et&&oa(tt,et,nt);tt._dispatchListeners=null,tt._dispatchInstances=null,tt.isPersistent()||tt.constructor.release(tt)}}function mc(tt){if(null!==tt&&(fs=ic(fs,tt)),tt=fs,fs=null,tt){if(jc(tt,lc),fs)throw Error(u(95));if(ct)throw tt=pt,ct=!1,pt=null,tt}}function nc(tt){return(tt=tt.target||tt.srcElement||window).correspondingUseElement&&(tt=tt.correspondingUseElement),3===tt.nodeType?tt.parentNode:tt}function oc(tt){if(!rn)return!1;var et=(tt="on"+tt)in document;return et||((et=document.createElement("div")).setAttribute(tt,"return;"),et="function"==typeof et[tt]),et}var gs=[];function qc(tt){tt.topLevelType=null,tt.nativeEvent=null,tt.targetInst=null,tt.ancestors.length=0,10>gs.length&&gs.push(tt)}function rc(tt,et,nt,rt){if(gs.length){var it=gs.pop();return it.topLevelType=tt,it.eventSystemFlags=rt,it.nativeEvent=et,it.targetInst=nt,it}return{topLevelType:tt,eventSystemFlags:rt,nativeEvent:et,targetInst:nt,ancestors:[]}}function sc(tt){var et=tt.targetInst,nt=et;do{if(!nt){tt.ancestors.push(nt);break}var rt=nt;if(3===rt.tag)rt=rt.stateNode.containerInfo;else{for(;rt.return;)rt=rt.return;rt=3!==rt.tag?null:rt.stateNode.containerInfo}if(!rt)break;5!==(et=nt.tag)&&6!==et||tt.ancestors.push(nt),nt=tc(rt)}while(nt);for(nt=0;nt<tt.ancestors.length;nt++){et=tt.ancestors[nt];var it=nc(tt.nativeEvent);rt=tt.topLevelType;var ot=tt.nativeEvent,at=tt.eventSystemFlags;0===nt&&(at|=64);for(var st=null,ct=0;ct<Ot.length;ct++){var pt=Ot[ct];pt&&(pt=pt.extractEvents(rt,et,ot,it,at))&&(st=ic(st,pt))}mc(st)}}function uc(tt,et,nt){if(!nt.has(tt)){switch(tt){case"scroll":vc(et,"scroll",!0);break;case"focus":case"blur":vc(et,"focus",!0),vc(et,"blur",!0),nt.set("blur",null),nt.set("focus",null);break;case"cancel":case"close":oc(tt)&&vc(et,tt,!0);break;case"invalid":case"submit":case"reset":break;default:-1===us.indexOf(tt)&&F(tt,et)}nt.set(tt,null)}}var vs,xs,Ss,Es=!1,Ps=[],Cs=null,Ls=null,As=null,Ms=new Map,zs=new Map,Os=[],Rs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Bs="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Kc(tt,et,nt,rt,it){return{blockedOn:tt,topLevelType:et,eventSystemFlags:32|nt,nativeEvent:it,container:rt}}function Lc(tt,et){switch(tt){case"focus":case"blur":Cs=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":Ms.delete(et.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(et.pointerId)}}function Mc(tt,et,nt,rt,it,ot){return null===tt||tt.nativeEvent!==ot?(tt=Kc(et,nt,rt,it,ot),null!==et&&(null!==(et=Nc(et))&&xs(et)),tt):(tt.eventSystemFlags|=rt,tt)}function Pc(tt){var et=tc(tt.target);if(null!==et){var nt=dc(et);if(null!==nt)if(13===(et=nt.tag)){if(null!==(et=ec(nt)))return tt.blockedOn=et,void ot.unstable_runWithPriority(tt.priority,(function(){Ss(nt)}))}else if(3===et&&nt.stateNode.hydrate)return void(tt.blockedOn=3===nt.tag?nt.stateNode.containerInfo:null)}tt.blockedOn=null}function Qc(tt){if(null!==tt.blockedOn)return!1;var et=Rc(tt.topLevelType,tt.eventSystemFlags,tt.container,tt.nativeEvent);if(null!==et){var nt=Nc(et);return null!==nt&&xs(nt),tt.blockedOn=et,!1}return!0}function Sc(tt,et,nt){Qc(tt)&&nt.delete(et)}function Tc(){for(Es=!1;0<Ps.length;){var tt=Ps[0];if(null!==tt.blockedOn){null!==(tt=Nc(tt.blockedOn))&&vs(tt);break}var et=Rc(tt.topLevelType,tt.eventSystemFlags,tt.container,tt.nativeEvent);null!==et?tt.blockedOn=et:Ps.shift()}null!==Cs&&Qc(Cs)&&(Cs=null),null!==Ls&&Qc(Ls)&&(Ls=null),null!==As&&Qc(As)&&(As=null),Ms.forEach(Sc),zs.forEach(Sc)}function Uc(tt,et){tt.blockedOn===et&&(tt.blockedOn=null,Es||(Es=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,Tc)))}function Vc(tt){function b(et){return Uc(et,tt)}if(0<Ps.length){Uc(Ps[0],tt);for(var et=1;et<Ps.length;et++){var nt=Ps[et];nt.blockedOn===tt&&(nt.blockedOn=null)}}for(null!==Cs&&Uc(Cs,tt),null!==Ls&&Uc(Ls,tt),null!==As&&Uc(As,tt),Ms.forEach(b),zs.forEach(b),et=0;et<Os.length;et++)(nt=Os[et]).blockedOn===tt&&(nt.blockedOn=null);for(;0<Os.length&&null===(et=Os[0]).blockedOn;)Pc(et),null===et.blockedOn&&Os.shift()}var Fs={},Ns=new Map,Vs=new Map,Us=["abort","abort",Aa,"animationEnd",os,"animationIteration",as,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ss,"transitionEnd","waiting","waiting"];function ad(tt,et){for(var nt=0;nt<tt.length;nt+=2){var rt=tt[nt],it=tt[nt+1],ot="on"+(it[0].toUpperCase()+it.slice(1));ot={phasedRegistrationNames:{bubbled:ot,captured:ot+"Capture"},dependencies:[rt],eventPriority:et},Vs.set(rt,et),Ns.set(rt,ot),Fs[it]=ot}}ad("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),ad("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),ad(Us,2);for(var js="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Zs=0;Zs<js.length;Zs++)Vs.set(js[Zs],0);var Js=ot.unstable_UserBlockingPriority,du=ot.unstable_runWithPriority,vu=!0;function F(tt,et){vc(et,tt,!1)}function vc(tt,et,nt){var rt=Vs.get(et);switch(void 0===rt?2:rt){case 0:rt=gd.bind(null,et,1,tt);break;case 1:rt=hd.bind(null,et,1,tt);break;default:rt=id.bind(null,et,1,tt)}nt?tt.addEventListener(et,rt,!0):tt.addEventListener(et,rt,!1)}function gd(tt,et,nt,rt){Ln||Ha();var it=id,ot=Ln;Ln=!0;try{Ga(it,tt,et,nt,rt)}finally{(Ln=ot)||La()}}function hd(tt,et,nt,rt){du(Js,id.bind(null,tt,et,nt,rt))}function id(tt,et,nt,rt){if(vu)if(0<Ps.length&&-1<Rs.indexOf(tt))tt=Kc(null,tt,et,nt,rt),Ps.push(tt);else{var it=Rc(tt,et,nt,rt);if(null===it)Lc(tt,rt);else if(-1<Rs.indexOf(tt))tt=Kc(it,tt,et,nt,rt),Ps.push(tt);else if(!function Oc(tt,et,nt,rt,it){switch(et){case"focus":return Cs=Mc(Cs,tt,et,nt,rt,it),!0;case"dragenter":return Ls=Mc(Ls,tt,et,nt,rt,it),!0;case"mouseover":return As=Mc(As,tt,et,nt,rt,it),!0;case"pointerover":var ot=it.pointerId;return Ms.set(ot,Mc(Ms.get(ot)||null,tt,et,nt,rt,it)),!0;case"gotpointercapture":return ot=it.pointerId,zs.set(ot,Mc(zs.get(ot)||null,tt,et,nt,rt,it)),!0}return!1}(it,tt,et,nt,rt)){Lc(tt,rt),tt=rc(tt,rt,null,et);try{Ma(sc,tt)}finally{qc(tt)}}}}function Rc(tt,et,nt,rt){if(null!==(nt=tc(nt=nc(rt)))){var it=dc(nt);if(null===it)nt=null;else{var ot=it.tag;if(13===ot){if(null!==(nt=ec(it)))return nt;nt=null}else if(3===ot){if(it.stateNode.hydrate)return 3===it.tag?it.stateNode.containerInfo:null;nt=null}else it!==nt&&(nt=null)}}tt=rc(tt,rt,nt,et);try{Ma(sc,tt)}finally{qc(tt)}return null}var _u={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wu=["Webkit","ms","Moz","O"];function ld(tt,et,nt){return null==et||"boolean"==typeof et||""===et?"":nt||"number"!=typeof et||0===et||_u.hasOwnProperty(tt)&&_u[tt]?(""+et).trim():et+"px"}function md(tt,et){for(var nt in tt=tt.style,et)if(et.hasOwnProperty(nt)){var rt=0===nt.indexOf("--"),it=ld(nt,et[nt],rt);"float"===nt&&(nt="cssFloat"),rt?tt.setProperty(nt,it):tt[nt]=it}}Object.keys(_u).forEach((function(tt){wu.forEach((function(et){et=et+tt.charAt(0).toUpperCase()+tt.substring(1),_u[et]=_u[tt]}))}));var Tu=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(tt,et){if(et){if(Tu[tt]&&(null!=et.children||null!=et.dangerouslySetInnerHTML))throw Error(u(137,tt,""));if(null!=et.dangerouslySetInnerHTML){if(null!=et.children)throw Error(u(60));if("object"!=typeof et.dangerouslySetInnerHTML||!("__html"in et.dangerouslySetInnerHTML))throw Error(u(61))}if(null!=et.style&&"object"!=typeof et.style)throw Error(u(62,""))}}function pd(tt,et){if(-1===tt.indexOf("-"))return"string"==typeof et.is;switch(tt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fu=la;function rd(tt,et){var nt=cc(tt=9===tt.nodeType||11===tt.nodeType?tt:tt.ownerDocument);et=Ne[et];for(var rt=0;rt<et.length;rt++)uc(et[rt],tt,nt)}function sd(){}function td(tt){if(void 0===(tt=tt||("undefined"!=typeof document?document:void 0)))return null;try{return tt.activeElement||tt.body}catch(et){return tt.body}}function ud(tt){for(;tt&&tt.firstChild;)tt=tt.firstChild;return tt}function vd(tt,et){var nt,rt=ud(tt);for(tt=0;rt;){if(3===rt.nodeType){if(nt=tt+rt.textContent.length,tt<=et&&nt>=et)return{node:rt,offset:et-tt};tt=nt}t:{for(;rt;){if(rt.nextSibling){rt=rt.nextSibling;break t}rt=rt.parentNode}rt=void 0}rt=ud(rt)}}function xd(){for(var tt=window,et=td();et instanceof tt.HTMLIFrameElement;){try{var nt="string"==typeof et.contentWindow.location.href}catch(tt){nt=!1}if(!nt)break;et=td((tt=et.contentWindow).document)}return et}function yd(tt){var et=tt&&tt.nodeName&&tt.nodeName.toLowerCase();return et&&("input"===et&&("text"===tt.type||"search"===tt.type||"tel"===tt.type||"url"===tt.type||"password"===tt.type)||"textarea"===et||"true"===tt.contentEditable)}var tl=null,ol=null;function Fd(tt,et){switch(tt){case"button":case"input":case"select":case"textarea":return!!et.autoFocus}return!1}function Gd(tt,et){return"textarea"===tt||"option"===tt||"noscript"===tt||"string"==typeof et.children||"number"==typeof et.children||"object"==typeof et.dangerouslySetInnerHTML&&null!==et.dangerouslySetInnerHTML&&null!=et.dangerouslySetInnerHTML.__html}var sl="function"==typeof setTimeout?setTimeout:void 0,dl="function"==typeof clearTimeout?clearTimeout:void 0;function Jd(tt){for(;null!=tt;tt=tt.nextSibling){var et=tt.nodeType;if(1===et||3===et)break}return tt}function Kd(tt){tt=tt.previousSibling;for(var et=0;tt;){if(8===tt.nodeType){var nt=tt.data;if("$"===nt||"$!"===nt||"$?"===nt){if(0===et)return tt;et--}else"/$"===nt&&et++}tt=tt.previousSibling}return null}var gl=Math.random().toString(36).slice(2),yl="__reactInternalInstance$"+gl,vl="__reactEventHandlers$"+gl,_l="__reactContainere$"+gl;function tc(tt){var et=tt[yl];if(et)return et;for(var nt=tt.parentNode;nt;){if(et=nt[_l]||nt[yl]){if(nt=et.alternate,null!==et.child||null!==nt&&null!==nt.child)for(tt=Kd(tt);null!==tt;){if(nt=tt[yl])return nt;tt=Kd(tt)}return et}nt=(tt=nt).parentNode}return null}function Nc(tt){return!(tt=tt[yl]||tt[_l])||5!==tt.tag&&6!==tt.tag&&13!==tt.tag&&3!==tt.tag?null:tt}function Pd(tt){if(5===tt.tag||6===tt.tag)return tt.stateNode;throw Error(u(33))}function Qd(tt){return tt[vl]||null}function Rd(tt){do{tt=tt.return}while(tt&&5!==tt.tag);return tt||null}function Sd(tt,et){var nt=tt.stateNode;if(!nt)return null;var rt=dt(nt);if(!rt)return null;nt=rt[et];t:switch(et){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(rt=!rt.disabled)||(rt=!("button"===(tt=tt.type)||"input"===tt||"select"===tt||"textarea"===tt)),tt=!rt;break t;default:tt=!1}if(tt)return null;if(nt&&"function"!=typeof nt)throw Error(u(231,et,typeof nt));return nt}function Td(tt,et,nt){(et=Sd(tt,nt.dispatchConfig.phasedRegistrationNames[et]))&&(nt._dispatchListeners=ic(nt._dispatchListeners,et),nt._dispatchInstances=ic(nt._dispatchInstances,tt))}function Ud(tt){if(tt&&tt.dispatchConfig.phasedRegistrationNames){for(var et=tt._targetInst,nt=[];et;)nt.push(et),et=Rd(et);for(et=nt.length;0<et--;)Td(nt[et],"captured",tt);for(et=0;et<nt.length;et++)Td(nt[et],"bubbled",tt)}}function Vd(tt,et,nt){tt&&nt&&nt.dispatchConfig.registrationName&&(et=Sd(tt,nt.dispatchConfig.registrationName))&&(nt._dispatchListeners=ic(nt._dispatchListeners,et),nt._dispatchInstances=ic(nt._dispatchInstances,tt))}function Wd(tt){tt&&tt.dispatchConfig.registrationName&&Vd(tt._targetInst,null,tt)}function Xd(tt){jc(tt,Ud)}var xl=null,bl=null,wl=null;function ae(){if(wl)return wl;var tt,et,nt=bl,rt=nt.length,it="value"in xl?xl.value:xl.textContent,ot=it.length;for(tt=0;tt<rt&&nt[tt]===it[tt];tt++);var at=rt-tt;for(et=1;et<=at&&nt[rt-et]===it[ot-et];et++);return wl=it.slice(tt,1<et?1-et:void 0)}function be(){return!0}function ce(){return!1}function G(tt,et,nt,rt){for(var it in this.dispatchConfig=tt,this._targetInst=et,this.nativeEvent=nt,tt=this.constructor.Interface)tt.hasOwnProperty(it)&&((et=tt[it])?this[it]=et(nt):"target"===it?this.target=rt:this[it]=nt[it]);return this.isDefaultPrevented=(null!=nt.defaultPrevented?nt.defaultPrevented:!1===nt.returnValue)?be:ce,this.isPropagationStopped=ce,this}function ee(tt,et,nt,rt){if(this.eventPool.length){var it=this.eventPool.pop();return this.call(it,tt,et,nt,rt),it}return new this(tt,et,nt,rt)}function fe(tt){if(!(tt instanceof this))throw Error(u(279));tt.destructor(),10>this.eventPool.length&&this.eventPool.push(tt)}function de(tt){tt.eventPool=[],tt.getPooled=ee,tt.release=fe}it(G.prototype,{preventDefault:function(){this.defaultPrevented=!0;var tt=this.nativeEvent;tt&&(tt.preventDefault?tt.preventDefault():"unknown"!=typeof tt.returnValue&&(tt.returnValue=!1),this.isDefaultPrevented=be)},stopPropagation:function(){var tt=this.nativeEvent;tt&&(tt.stopPropagation?tt.stopPropagation():"unknown"!=typeof tt.cancelBubble&&(tt.cancelBubble=!0),this.isPropagationStopped=be)},persist:function(){this.isPersistent=be},isPersistent:ce,destructor:function(){var tt,et=this.constructor.Interface;for(tt in et)this[tt]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce,this._dispatchInstances=this._dispatchListeners=null}}),G.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(tt){return tt.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},G.extend=function(tt){function b(){}function c(){return et.apply(this,arguments)}var et=this;b.prototype=et.prototype;var nt=new b;return it(nt,c.prototype),c.prototype=nt,c.prototype.constructor=c,c.Interface=it({},et.Interface,tt),c.extend=et.extend,de(c),c},de(G);var Sl=G.extend({data:null}),Cl=G.extend({data:null}),kl=[9,13,27,32],Il=rn&&"CompositionEvent"in window,Al=null;rn&&"documentMode"in document&&(Al=document.documentMode);var zl=rn&&"TextEvent"in window&&!Al,Fl=rn&&(!Il||Al&&8<Al&&11>=Al),Hl=String.fromCharCode(32),ac={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},pc=!1;function qe(tt,et){switch(tt){case"keyup":return-1!==kl.indexOf(et.keyCode);case"keydown":return 229!==et.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function re(tt){return"object"==typeof(tt=tt.detail)&&"data"in tt?tt.data:null}var yc=!1;var _c={eventTypes:ac,extractEvents:function(tt,et,nt,rt){var it;if(Il)t:{switch(tt){case"compositionstart":var ot=ac.compositionStart;break t;case"compositionend":ot=ac.compositionEnd;break t;case"compositionupdate":ot=ac.compositionUpdate;break t}ot=void 0}else yc?qe(tt,nt)&&(ot=ac.compositionEnd):"keydown"===tt&&229===nt.keyCode&&(ot=ac.compositionStart);return ot?(Fl&&"ko"!==nt.locale&&(yc||ot!==ac.compositionStart?ot===ac.compositionEnd&&yc&&(it=ae()):(bl="value"in(xl=rt)?xl.value:xl.textContent,yc=!0)),ot=Sl.getPooled(ot,et,nt,rt),it?ot.data=it:null!==(it=re(nt))&&(ot.data=it),Xd(ot),it=ot):it=null,(tt=zl?function te(tt,et){switch(tt){case"compositionend":return re(et);case"keypress":return 32!==et.which?null:(pc=!0,Hl);case"textInput":return(tt=et.data)===Hl&&pc?null:tt;default:return null}}(tt,nt):function ue(tt,et){if(yc)return"compositionend"===tt||!Il&&qe(tt,et)?(tt=ae(),wl=bl=xl=null,yc=!1,tt):null;switch(tt){case"paste":return null;case"keypress":if(!(et.ctrlKey||et.altKey||et.metaKey)||et.ctrlKey&&et.altKey){if(et.char&&1<et.char.length)return et.char;if(et.which)return String.fromCharCode(et.which)}return null;case"compositionend":return Fl&&"ko"!==et.locale?null:et.data;default:return null}}(tt,nt))?((et=Cl.getPooled(ac.beforeInput,et,nt,rt)).data=tt,Xd(et)):et=null,null===it?et:null===et?it:[it,et]}},xc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xe(tt){var et=tt&&tt.nodeName&&tt.nodeName.toLowerCase();return"input"===et?!!xc[tt.type]:"textarea"===et}var bc={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function ze(tt,et,nt){return(tt=G.getPooled(bc.change,tt,et,nt)).type="change",Da(nt),Xd(tt),tt}var wc=null,Ec=null;function Ce(tt){mc(tt)}function De(tt){if(yb(Pd(tt)))return tt}function Ee(tt,et){if("change"===tt)return et}var Cc=!1;function Ge(){wc&&(wc.detachEvent("onpropertychange",He),Ec=wc=null)}function He(tt){if("value"===tt.propertyName&&De(Ec))if(tt=ze(Ec,tt,nc(tt)),Ln)mc(tt);else{Ln=!0;try{Fa(Ce,tt)}finally{Ln=!1,La()}}}function Ie(tt,et,nt){"focus"===tt?(Ge(),Ec=nt,(wc=et).attachEvent("onpropertychange",He)):"blur"===tt&&Ge()}function Je(tt){if("selectionchange"===tt||"keyup"===tt||"keydown"===tt)return De(Ec)}function Ke(tt,et){if("click"===tt)return De(et)}function Le(tt,et){if("input"===tt||"change"===tt)return De(et)}rn&&(Cc=oc("input")&&(!document.documentMode||9<document.documentMode));var kc={eventTypes:bc,_isInputEventSupported:Cc,extractEvents:function(tt,et,nt,rt){var it=et?Pd(et):window,ot=it.nodeName&&it.nodeName.toLowerCase();if("select"===ot||"input"===ot&&"file"===it.type)var at=Ee;else if(xe(it))if(Cc)at=Le;else{at=Je;var st=Ie}else(ot=it.nodeName)&&"input"===ot.toLowerCase()&&("checkbox"===it.type||"radio"===it.type)&&(at=Ke);if(at&&(at=at(tt,et)))return ze(at,nt,rt);st&&st(tt,it,et),"blur"===tt&&(tt=it._wrapperState)&&tt.controlled&&"number"===it.type&&Db(it,"number",it.value)}},Ic=G.extend({view:null,detail:null}),Ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pe(tt){var et=this.nativeEvent;return et.getModifierState?et.getModifierState(tt):!!(tt=Ac[tt])&&!!et[tt]}function Qe(){return Pe}var zc=0,Dc=0,Bc=!1,Fc=!1,Zc=Ic.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Qe,button:null,buttons:null,relatedTarget:function(tt){return tt.relatedTarget||(tt.fromElement===tt.srcElement?tt.toElement:tt.fromElement)},movementX:function(tt){if("movementX"in tt)return tt.movementX;var et=zc;return zc=tt.screenX,Bc?"mousemove"===tt.type?tt.screenX-et:0:(Bc=!0,0)},movementY:function(tt){if("movementY"in tt)return tt.movementY;var et=Dc;return Dc=tt.screenY,Fc?"mousemove"===tt.type?tt.screenY-et:0:(Fc=!0,0)}}),Hc=Zc.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Wc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Gc={eventTypes:Wc,extractEvents:function(tt,et,nt,rt,it){var ot="mouseover"===tt||"pointerover"===tt,at="mouseout"===tt||"pointerout"===tt;if(ot&&0==(32&it)&&(nt.relatedTarget||nt.fromElement)||!at&&!ot)return null;(ot=rt.window===rt?rt:(ot=rt.ownerDocument)?ot.defaultView||ot.parentWindow:window,at)?(at=et,null!==(et=(et=nt.relatedTarget||nt.toElement)?tc(et):null)&&(et!==dc(et)||5!==et.tag&&6!==et.tag)&&(et=null)):at=null;if(at===et)return null;if("mouseout"===tt||"mouseover"===tt)var st=Zc,ct=Wc.mouseLeave,pt=Wc.mouseEnter,ft="mouse";else"pointerout"!==tt&&"pointerover"!==tt||(st=Hc,ct=Wc.pointerLeave,pt=Wc.pointerEnter,ft="pointer");if(tt=null==at?ot:Pd(at),ot=null==et?ot:Pd(et),(ct=st.getPooled(ct,at,nt,rt)).type=ft+"leave",ct.target=tt,ct.relatedTarget=ot,(nt=st.getPooled(pt,et,nt,rt)).type=ft+"enter",nt.target=ot,nt.relatedTarget=tt,ft=et,(rt=at)&&ft)t:{for(pt=ft,at=0,tt=st=rt;tt;tt=Rd(tt))at++;for(tt=0,et=pt;et;et=Rd(et))tt++;for(;0<at-tt;)st=Rd(st),at--;for(;0<tt-at;)pt=Rd(pt),tt--;for(;at--;){if(st===pt||st===pt.alternate)break t;st=Rd(st),pt=Rd(pt)}st=null}else st=null;for(pt=st,st=[];rt&&rt!==pt&&(null===(at=rt.alternate)||at!==pt);)st.push(rt),rt=Rd(rt);for(rt=[];ft&&ft!==pt&&(null===(at=ft.alternate)||at!==pt);)rt.push(ft),ft=Rd(ft);for(ft=0;ft<st.length;ft++)Vd(st[ft],"bubbled",ct);for(ft=rt.length;0<ft--;)Vd(rt[ft],"captured",nt);return 0==(64&it)?[ct]:[ct,nt]}};var Xc="function"==typeof Object.is?Object.is:function Ze(tt,et){return tt===et&&(0!==tt||1/tt==1/et)||tt!=tt&&et!=et},$c=Object.prototype.hasOwnProperty;function bf(tt,et){if(Xc(tt,et))return!0;if("object"!=typeof tt||null===tt||"object"!=typeof et||null===et)return!1;var nt=Object.keys(tt),rt=Object.keys(et);if(nt.length!==rt.length)return!1;for(rt=0;rt<nt.length;rt++)if(!$c.call(et,nt[rt])||!Xc(tt[nt[rt]],et[nt[rt]]))return!1;return!0}var Yc=rn&&"documentMode"in document&&11>=document.documentMode,rp={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ip=null,op=null,ap=null,sp=!1;function jf(tt,et){var nt=et.window===et?et.document:9===et.nodeType?et:et.ownerDocument;return sp||null==ip||ip!==td(nt)?null:("selectionStart"in(nt=ip)&&yd(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:nt={anchorNode:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset},ap&&bf(ap,nt)?null:(ap=nt,(tt=G.getPooled(rp.select,op,tt,et)).type="select",tt.target=ip,Xd(tt),tt))}var up={eventTypes:rp,extractEvents:function(tt,et,nt,rt,it,ot){if(!(ot=!(it=ot||(rt.window===rt?rt.document:9===rt.nodeType?rt:rt.ownerDocument)))){t:{it=cc(it),ot=Ne.onSelect;for(var at=0;at<ot.length;at++)if(!it.has(ot[at])){it=!1;break t}it=!0}ot=!it}if(ot)return null;switch(it=et?Pd(et):window,tt){case"focus":(xe(it)||"true"===it.contentEditable)&&(ip=it,op=et,ap=null);break;case"blur":ap=op=ip=null;break;case"mousedown":sp=!0;break;case"contextmenu":case"mouseup":case"dragend":return sp=!1,jf(nt,rt);case"selectionchange":if(Yc)break;case"keydown":case"keyup":return jf(nt,rt)}return null}},lp=G.extend({animationName:null,elapsedTime:null,pseudoElement:null}),cp=G.extend({clipboardData:function(tt){return"clipboardData"in tt?tt.clipboardData:window.clipboardData}}),pp=Ic.extend({relatedTarget:null});function of(tt){var et=tt.keyCode;return"charCode"in tt?0===(tt=tt.charCode)&&13===et&&(tt=13):tt=et,10===tt&&(tt=13),32<=tt||13===tt?tt:0}var hp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dp=Ic.extend({key:function(tt){if(tt.key){var et=hp[tt.key]||tt.key;if("Unidentified"!==et)return et}return"keypress"===tt.type?13===(tt=of(tt))?"Enter":String.fromCharCode(tt):"keydown"===tt.type||"keyup"===tt.type?fp[tt.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Qe,charCode:function(tt){return"keypress"===tt.type?of(tt):0},keyCode:function(tt){return"keydown"===tt.type||"keyup"===tt.type?tt.keyCode:0},which:function(tt){return"keypress"===tt.type?of(tt):"keydown"===tt.type||"keyup"===tt.type?tt.keyCode:0}}),mp=Zc.extend({dataTransfer:null}),gp=Ic.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Qe}),yp=G.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vp=Zc.extend({deltaX:function(tt){return"deltaX"in tt?tt.deltaX:"wheelDeltaX"in tt?-tt.wheelDeltaX:0},deltaY:function(tt){return"deltaY"in tt?tt.deltaY:"wheelDeltaY"in tt?-tt.wheelDeltaY:"wheelDelta"in tt?-tt.wheelDelta:0},deltaZ:null,deltaMode:null}),_p={eventTypes:Fs,extractEvents:function(tt,et,nt,rt){var it=Ns.get(tt);if(!it)return null;switch(tt){case"keypress":if(0===of(nt))return null;case"keydown":case"keyup":tt=dp;break;case"blur":case"focus":tt=pp;break;case"click":if(2===nt.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=Zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=gp;break;case Aa:case os:case as:tt=lp;break;case ss:tt=yp;break;case"scroll":tt=Ic;break;case"wheel":tt=vp;break;case"copy":case"cut":case"paste":tt=cp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=Hc;break;default:tt=G}return Xd(et=tt.getPooled(it,et,nt,rt)),et}};if(vt)throw Error(u(101));vt=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),ra(),dt=Qd,mt=Nc,yt=Pd,xa({SimpleEventPlugin:_p,EnterLeaveEventPlugin:Gc,ChangeEventPlugin:kc,SelectEventPlugin:up,BeforeInputEventPlugin:_c});var xp=[],bp=-1;function H(tt){0>bp||(tt.current=xp[bp],xp[bp]=null,bp--)}function I(tt,et){bp++,xp[bp]=tt.current,tt.current=et}var wp={},Sp={current:wp},Ep={current:!1},Tp=wp;function Cf(tt,et){var nt=tt.type.contextTypes;if(!nt)return wp;var rt=tt.stateNode;if(rt&&rt.__reactInternalMemoizedUnmaskedChildContext===et)return rt.__reactInternalMemoizedMaskedChildContext;var it,ot={};for(it in nt)ot[it]=et[it];return rt&&((tt=tt.stateNode).__reactInternalMemoizedUnmaskedChildContext=et,tt.__reactInternalMemoizedMaskedChildContext=ot),ot}function L(tt){return null!=(tt=tt.childContextTypes)}function Df(){H(Ep),H(Sp)}function Ef(tt,et,nt){if(Sp.current!==wp)throw Error(u(168));I(Sp,et),I(Ep,nt)}function Ff(tt,et,nt){var rt=tt.stateNode;if(tt=et.childContextTypes,"function"!=typeof rt.getChildContext)return nt;for(var ot in rt=rt.getChildContext())if(!(ot in tt))throw Error(u(108,pb(et)||"Unknown",ot));return it({},nt,{},rt)}function Gf(tt){return tt=(tt=tt.stateNode)&&tt.__reactInternalMemoizedMergedChildContext||wp,Tp=Sp.current,I(Sp,tt),I(Ep,Ep.current),!0}function Hf(tt,et,nt){var rt=tt.stateNode;if(!rt)throw Error(u(169));nt?(tt=Ff(tt,et,Tp),rt.__reactInternalMemoizedMergedChildContext=tt,H(Ep),H(Sp),I(Sp,tt)):H(Ep),I(Ep,nt)}var Pp=ot.unstable_runWithPriority,Cp=ot.unstable_scheduleCallback,kp=ot.unstable_cancelCallback,Lp=ot.unstable_requestPaint,Ip=ot.unstable_now,Ap=ot.unstable_getCurrentPriorityLevel,Mp=ot.unstable_ImmediatePriority,zp=ot.unstable_UserBlockingPriority,Dp=ot.unstable_NormalPriority,Op=ot.unstable_LowPriority,Rp=ot.unstable_IdlePriority,Bp={},Fp=ot.unstable_shouldYield,Np=void 0!==Lp?Lp:function(){},Vp=null,Up=null,jp=!1,Zp=Ip(),qp=1e4>Zp?Ip:function(){return Ip()-Zp};function ag(){switch(Ap()){case Mp:return 99;case zp:return 98;case Dp:return 97;case Op:return 96;case Rp:return 95;default:throw Error(u(332))}}function bg(tt){switch(tt){case 99:return Mp;case 98:return zp;case 97:return Dp;case 96:return Op;case 95:return Rp;default:throw Error(u(332))}}function cg(tt,et){return tt=bg(tt),Pp(tt,et)}function dg(tt,et,nt){return tt=bg(tt),Cp(tt,et,nt)}function eg(tt){return null===Vp?(Vp=[tt],Up=Cp(Mp,fg)):Vp.push(tt),Bp}function gg(){if(null!==Up){var tt=Up;Up=null,kp(tt)}fg()}function fg(){if(!jp&&null!==Vp){jp=!0;var tt=0;try{var et=Vp;cg(99,(function(){for(;tt<et.length;tt++){var nt=et[tt];do{nt=nt(!0)}while(null!==nt)}})),Vp=null}catch(et){throw null!==Vp&&(Vp=Vp.slice(tt+1)),Cp(Mp,gg),et}finally{jp=!1}}}function hg(tt,et,nt){return 1073741821-(1+((1073741821-tt+et/10)/(nt/=10)|0))*nt}function ig(tt,et){if(tt&&tt.defaultProps)for(var nt in et=it({},et),tt=tt.defaultProps)void 0===et[nt]&&(et[nt]=tt[nt]);return et}var Hp={current:null},Wp=null,Gp=null,Xp=null;function ng(){Xp=Gp=Wp=null}function og(tt){var et=Hp.current;H(Hp),tt.type._context._currentValue=et}function pg(tt,et){for(;null!==tt;){var nt=tt.alternate;if(tt.childExpirationTime<et)tt.childExpirationTime=et,null!==nt&&nt.childExpirationTime<et&&(nt.childExpirationTime=et);else{if(!(null!==nt&&nt.childExpirationTime<et))break;nt.childExpirationTime=et}tt=tt.return}}function qg(tt,et){Wp=tt,Xp=Gp=null,null!==(tt=tt.dependencies)&&null!==tt.firstContext&&(tt.expirationTime>=et&&(lf=!0),tt.firstContext=null)}function sg(tt,et){if(Xp!==tt&&!1!==et&&0!==et)if("number"==typeof et&&1073741823!==et||(Xp=tt,et=1073741823),et={context:tt,observedBits:et,next:null},null===Gp){if(null===Wp)throw Error(u(308));Gp=et,Wp.dependencies={expirationTime:0,firstContext:et,responders:null}}else Gp=Gp.next=et;return tt._currentValue}var $p=!1;function ug(tt){tt.updateQueue={baseState:tt.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function vg(tt,et){tt=tt.updateQueue,et.updateQueue===tt&&(et.updateQueue={baseState:tt.baseState,baseQueue:tt.baseQueue,shared:tt.shared,effects:tt.effects})}function wg(tt,et){return(tt={expirationTime:tt,suspenseConfig:et,tag:0,payload:null,callback:null,next:null}).next=tt}function xg(tt,et){if(null!==(tt=tt.updateQueue)){var nt=(tt=tt.shared).pending;null===nt?et.next=et:(et.next=nt.next,nt.next=et),tt.pending=et}}function yg(tt,et){var nt=tt.alternate;null!==nt&&vg(nt,tt),null===(nt=(tt=tt.updateQueue).baseQueue)?(tt.baseQueue=et.next=et,et.next=et):(et.next=nt.next,nt.next=et)}function zg(tt,et,nt,rt){var ot=tt.updateQueue;$p=!1;var at=ot.baseQueue,st=ot.shared.pending;if(null!==st){if(null!==at){var ct=at.next;at.next=st.next,st.next=ct}at=st,ot.shared.pending=null,null!==(ct=tt.alternate)&&(null!==(ct=ct.updateQueue)&&(ct.baseQueue=st))}if(null!==at){ct=at.next;var pt=ot.baseState,ft=0,dt=null,mt=null,yt=null;if(null!==ct)for(var vt=ct;;){if((st=vt.expirationTime)<rt){var Dt={expirationTime:vt.expirationTime,suspenseConfig:vt.suspenseConfig,tag:vt.tag,payload:vt.payload,callback:vt.callback,next:null};null===yt?(mt=yt=Dt,dt=pt):yt=yt.next=Dt,st>ft&&(ft=st)}else{null!==yt&&(yt=yt.next={expirationTime:1073741823,suspenseConfig:vt.suspenseConfig,tag:vt.tag,payload:vt.payload,callback:vt.callback,next:null}),Ag(st,vt.suspenseConfig);t:{var Ot=tt,Rt=vt;switch(st=et,Dt=nt,Rt.tag){case 1:if("function"==typeof(Ot=Rt.payload)){pt=Ot.call(Dt,pt,st);break t}pt=Ot;break t;case 3:Ot.effectTag=-4097&Ot.effectTag|64;case 0:if(null==(st="function"==typeof(Ot=Rt.payload)?Ot.call(Dt,pt,st):Ot))break t;pt=it({},pt,st);break t;case 2:$p=!0}}null!==vt.callback&&(tt.effectTag|=32,null===(st=ot.effects)?ot.effects=[vt]:st.push(vt))}if(null===(vt=vt.next)||vt===ct){if(null===(st=ot.shared.pending))break;vt=at.next=st.next,st.next=ct,ot.baseQueue=at=st,ot.shared.pending=null}}null===yt?dt=pt:yt.next=mt,ot.baseState=dt,ot.baseQueue=yt,Bg(ft),tt.expirationTime=ft,tt.memoizedState=pt}}function Cg(tt,et,nt){if(tt=et.effects,et.effects=null,null!==tt)for(et=0;et<tt.length;et++){var rt=tt[et],it=rt.callback;if(null!==it){if(rt.callback=null,rt=it,it=nt,"function"!=typeof rt)throw Error(u(191,rt));rt.call(it)}}}var Kp=Wn.ReactCurrentBatchConfig,Yp=(new rt.Component).refs;function Fg(tt,et,nt,rt){nt=null==(nt=nt(rt,et=tt.memoizedState))?et:it({},et,nt),tt.memoizedState=nt,0===tt.expirationTime&&(tt.updateQueue.baseState=nt)}var Jp={isMounted:function(tt){return!!(tt=tt._reactInternalFiber)&&dc(tt)===tt},enqueueSetState:function(tt,et,nt){tt=tt._reactInternalFiber;var rt=Gg(),it=Kp.suspense;(it=wg(rt=Hg(rt,tt,it),it)).payload=et,null!=nt&&(it.callback=nt),xg(tt,it),Ig(tt,rt)},enqueueReplaceState:function(tt,et,nt){tt=tt._reactInternalFiber;var rt=Gg(),it=Kp.suspense;(it=wg(rt=Hg(rt,tt,it),it)).tag=1,it.payload=et,null!=nt&&(it.callback=nt),xg(tt,it),Ig(tt,rt)},enqueueForceUpdate:function(tt,et){tt=tt._reactInternalFiber;var nt=Gg(),rt=Kp.suspense;(rt=wg(nt=Hg(nt,tt,rt),rt)).tag=2,null!=et&&(rt.callback=et),xg(tt,rt),Ig(tt,nt)}};function Kg(tt,et,nt,rt,it,ot,at){return"function"==typeof(tt=tt.stateNode).shouldComponentUpdate?tt.shouldComponentUpdate(rt,ot,at):!et.prototype||!et.prototype.isPureReactComponent||(!bf(nt,rt)||!bf(it,ot))}function Lg(tt,et,nt){var rt=!1,it=wp,ot=et.contextType;return"object"==typeof ot&&null!==ot?ot=sg(ot):(it=L(et)?Tp:Sp.current,ot=(rt=null!=(rt=et.contextTypes))?Cf(tt,it):wp),et=new et(nt,ot),tt.memoizedState=null!==et.state&&void 0!==et.state?et.state:null,et.updater=Jp,tt.stateNode=et,et._reactInternalFiber=tt,rt&&((tt=tt.stateNode).__reactInternalMemoizedUnmaskedChildContext=it,tt.__reactInternalMemoizedMaskedChildContext=ot),et}function Mg(tt,et,nt,rt){tt=et.state,"function"==typeof et.componentWillReceiveProps&&et.componentWillReceiveProps(nt,rt),"function"==typeof et.UNSAFE_componentWillReceiveProps&&et.UNSAFE_componentWillReceiveProps(nt,rt),et.state!==tt&&Jp.enqueueReplaceState(et,et.state,null)}function Ng(tt,et,nt,rt){var it=tt.stateNode;it.props=nt,it.state=tt.memoizedState,it.refs=Yp,ug(tt);var ot=et.contextType;"object"==typeof ot&&null!==ot?it.context=sg(ot):(ot=L(et)?Tp:Sp.current,it.context=Cf(tt,ot)),zg(tt,nt,it,rt),it.state=tt.memoizedState,"function"==typeof(ot=et.getDerivedStateFromProps)&&(Fg(tt,et,ot,nt),it.state=tt.memoizedState),"function"==typeof et.getDerivedStateFromProps||"function"==typeof it.getSnapshotBeforeUpdate||"function"!=typeof it.UNSAFE_componentWillMount&&"function"!=typeof it.componentWillMount||(et=it.state,"function"==typeof it.componentWillMount&&it.componentWillMount(),"function"==typeof it.UNSAFE_componentWillMount&&it.UNSAFE_componentWillMount(),et!==it.state&&Jp.enqueueReplaceState(it,it.state,null),zg(tt,nt,it,rt),it.state=tt.memoizedState),"function"==typeof it.componentDidMount&&(tt.effectTag|=4)}var Qp=Array.isArray;function Pg(tt,et,nt){if(null!==(tt=nt.ref)&&"function"!=typeof tt&&"object"!=typeof tt){if(nt._owner){if(nt=nt._owner){if(1!==nt.tag)throw Error(u(309));var rt=nt.stateNode}if(!rt)throw Error(u(147,tt));var it=""+tt;return null!==et&&null!==et.ref&&"function"==typeof et.ref&&et.ref._stringRef===it?et.ref:((et=function(tt){var et=rt.refs;et===Yp&&(et=rt.refs={}),null===tt?delete et[it]:et[it]=tt})._stringRef=it,et)}if("string"!=typeof tt)throw Error(u(284));if(!nt._owner)throw Error(u(290,tt))}return tt}function Qg(tt,et){if("textarea"!==tt.type)throw Error(u(31,"[object Object]"===Object.prototype.toString.call(et)?"object with keys {"+Object.keys(et).join(", ")+"}":et,""))}function Rg(tt){function b(et,nt){if(tt){var rt=et.lastEffect;null!==rt?(rt.nextEffect=nt,et.lastEffect=nt):et.firstEffect=et.lastEffect=nt,nt.nextEffect=null,nt.effectTag=8}}function c(et,nt){if(!tt)return null;for(;null!==nt;)b(et,nt),nt=nt.sibling;return null}function d(tt,et){for(tt=new Map;null!==et;)null!==et.key?tt.set(et.key,et):tt.set(et.index,et),et=et.sibling;return tt}function e(tt,et){return(tt=Sg(tt,et)).index=0,tt.sibling=null,tt}function f(et,nt,rt){return et.index=rt,tt?null!==(rt=et.alternate)?(rt=rt.index)<nt?(et.effectTag=2,nt):rt:(et.effectTag=2,nt):nt}function g(et){return tt&&null===et.alternate&&(et.effectTag=2),et}function h(tt,et,nt,rt){return null===et||6!==et.tag?((et=Tg(nt,tt.mode,rt)).return=tt,et):((et=e(et,nt)).return=tt,et)}function k(tt,et,nt,rt){return null!==et&&et.elementType===nt.type?((rt=e(et,nt.props)).ref=Pg(tt,et,nt),rt.return=tt,rt):((rt=Ug(nt.type,nt.key,nt.props,null,tt.mode,rt)).ref=Pg(tt,et,nt),rt.return=tt,rt)}function l(tt,et,nt,rt){return null===et||4!==et.tag||et.stateNode.containerInfo!==nt.containerInfo||et.stateNode.implementation!==nt.implementation?((et=Vg(nt,tt.mode,rt)).return=tt,et):((et=e(et,nt.children||[])).return=tt,et)}function m(tt,et,nt,rt,it){return null===et||7!==et.tag?((et=Wg(nt,tt.mode,rt,it)).return=tt,et):((et=e(et,nt)).return=tt,et)}function p(tt,et,nt){if("string"==typeof et||"number"==typeof et)return(et=Tg(""+et,tt.mode,nt)).return=tt,et;if("object"==typeof et&&null!==et){switch(et.$$typeof){case er:return(nt=Ug(et.type,et.key,et.props,null,tt.mode,nt)).ref=Pg(tt,null,et),nt.return=tt,nt;case rr:return(et=Vg(et,tt.mode,nt)).return=tt,et}if(Qp(et)||nb(et))return(et=Wg(et,tt.mode,nt,null)).return=tt,et;Qg(tt,et)}return null}function x(tt,et,nt,rt){var it=null!==et?et.key:null;if("string"==typeof nt||"number"==typeof nt)return null!==it?null:h(tt,et,""+nt,rt);if("object"==typeof nt&&null!==nt){switch(nt.$$typeof){case er:return nt.key===it?nt.type===vr?m(tt,et,nt.props.children,rt,it):k(tt,et,nt,rt):null;case rr:return nt.key===it?l(tt,et,nt,rt):null}if(Qp(nt)||nb(nt))return null!==it?null:m(tt,et,nt,rt,null);Qg(tt,nt)}return null}function z(tt,et,nt,rt,it){if("string"==typeof rt||"number"==typeof rt)return h(et,tt=tt.get(nt)||null,""+rt,it);if("object"==typeof rt&&null!==rt){switch(rt.$$typeof){case er:return tt=tt.get(null===rt.key?nt:rt.key)||null,rt.type===vr?m(et,tt,rt.props.children,it,rt.key):k(et,tt,rt,it);case rr:return l(et,tt=tt.get(null===rt.key?nt:rt.key)||null,rt,it)}if(Qp(rt)||nb(rt))return m(et,tt=tt.get(nt)||null,rt,it,null);Qg(et,rt)}return null}function ca(et,nt,rt,it){for(var ot=null,at=null,st=nt,ct=nt=0,pt=null;null!==st&&ct<rt.length;ct++){st.index>ct?(pt=st,st=null):pt=st.sibling;var ft=x(et,st,rt[ct],it);if(null===ft){null===st&&(st=pt);break}tt&&st&&null===ft.alternate&&b(et,st),nt=f(ft,nt,ct),null===at?ot=ft:at.sibling=ft,at=ft,st=pt}if(ct===rt.length)return c(et,st),ot;if(null===st){for(;ct<rt.length;ct++)null!==(st=p(et,rt[ct],it))&&(nt=f(st,nt,ct),null===at?ot=st:at.sibling=st,at=st);return ot}for(st=d(et,st);ct<rt.length;ct++)null!==(pt=z(st,et,ct,rt[ct],it))&&(tt&&null!==pt.alternate&&st.delete(null===pt.key?ct:pt.key),nt=f(pt,nt,ct),null===at?ot=pt:at.sibling=pt,at=pt);return tt&&st.forEach((function(tt){return b(et,tt)})),ot}function D(et,nt,rt,it){var ot=nb(rt);if("function"!=typeof ot)throw Error(u(150));if(null==(rt=ot.call(rt)))throw Error(u(151));for(var at=ot=null,st=nt,ct=nt=0,pt=null,ft=rt.next();null!==st&&!ft.done;ct++,ft=rt.next()){st.index>ct?(pt=st,st=null):pt=st.sibling;var dt=x(et,st,ft.value,it);if(null===dt){null===st&&(st=pt);break}tt&&st&&null===dt.alternate&&b(et,st),nt=f(dt,nt,ct),null===at?ot=dt:at.sibling=dt,at=dt,st=pt}if(ft.done)return c(et,st),ot;if(null===st){for(;!ft.done;ct++,ft=rt.next())null!==(ft=p(et,ft.value,it))&&(nt=f(ft,nt,ct),null===at?ot=ft:at.sibling=ft,at=ft);return ot}for(st=d(et,st);!ft.done;ct++,ft=rt.next())null!==(ft=z(st,et,ct,ft.value,it))&&(tt&&null!==ft.alternate&&st.delete(null===ft.key?ct:ft.key),nt=f(ft,nt,ct),null===at?ot=ft:at.sibling=ft,at=ft);return tt&&st.forEach((function(tt){return b(et,tt)})),ot}return function(tt,et,nt,rt){var it="object"==typeof nt&&null!==nt&&nt.type===vr&&null===nt.key;it&&(nt=nt.props.children);var ot="object"==typeof nt&&null!==nt;if(ot)switch(nt.$$typeof){case er:t:{for(ot=nt.key,it=et;null!==it;){if(it.key===ot){switch(it.tag){case 7:if(nt.type===vr){c(tt,it.sibling),(et=e(it,nt.props.children)).return=tt,tt=et;break t}break;default:if(it.elementType===nt.type){c(tt,it.sibling),(et=e(it,nt.props)).ref=Pg(tt,it,nt),et.return=tt,tt=et;break t}}c(tt,it);break}b(tt,it),it=it.sibling}nt.type===vr?((et=Wg(nt.props.children,tt.mode,rt,nt.key)).return=tt,tt=et):((rt=Ug(nt.type,nt.key,nt.props,null,tt.mode,rt)).ref=Pg(tt,et,nt),rt.return=tt,tt=rt)}return g(tt);case rr:t:{for(it=nt.key;null!==et;){if(et.key===it){if(4===et.tag&&et.stateNode.containerInfo===nt.containerInfo&&et.stateNode.implementation===nt.implementation){c(tt,et.sibling),(et=e(et,nt.children||[])).return=tt,tt=et;break t}c(tt,et);break}b(tt,et),et=et.sibling}(et=Vg(nt,tt.mode,rt)).return=tt,tt=et}return g(tt)}if("string"==typeof nt||"number"==typeof nt)return nt=""+nt,null!==et&&6===et.tag?(c(tt,et.sibling),(et=e(et,nt)).return=tt,tt=et):(c(tt,et),(et=Tg(nt,tt.mode,rt)).return=tt,tt=et),g(tt);if(Qp(nt))return ca(tt,et,nt,rt);if(nb(nt))return D(tt,et,nt,rt);if(ot&&Qg(tt,nt),void 0===nt&&!it)switch(tt.tag){case 1:case 0:throw tt=tt.type,Error(u(152,tt.displayName||tt.name||"Component"))}return c(tt,et)}}var rh=Rg(!0),ah=Rg(!1),sh={},lh={current:sh},ph={current:sh},mh={current:sh};function ch(tt){if(tt===sh)throw Error(u(174));return tt}function dh(tt,et){switch(I(mh,et),I(ph,tt),I(lh,sh),tt=et.nodeType){case 9:case 11:et=(et=et.documentElement)?et.namespaceURI:Ob(null,"");break;default:et=Ob(et=(tt=8===tt?et.parentNode:et).namespaceURI||null,tt=tt.tagName)}H(lh),I(lh,et)}function eh(){H(lh),H(ph),H(mh)}function fh(tt){ch(mh.current);var et=ch(lh.current),nt=Ob(et,tt.type);et!==nt&&(I(ph,tt),I(lh,nt))}function gh(tt){ph.current===tt&&(H(lh),H(ph))}var _h={current:0};function hh(tt){for(var et=tt;null!==et;){if(13===et.tag){var nt=et.memoizedState;if(null!==nt&&(null===(nt=nt.dehydrated)||"$?"===nt.data||"$!"===nt.data))return et}else if(19===et.tag&&void 0!==et.memoizedProps.revealOrder){if(0!=(64&et.effectTag))return et}else if(null!==et.child){et.child.return=et,et=et.child;continue}if(et===tt)break;for(;null===et.sibling;){if(null===et.return||et.return===tt)return null;et=et.return}et.sibling.return=et.return,et=et.sibling}return null}function ih(tt,et){return{responder:tt,props:et}}var bh=Wn.ReactCurrentDispatcher,Ph=Wn.ReactCurrentBatchConfig,kh=0,Oh=null,jh=null,qh=null,Yh=!1;function Q(){throw Error(u(321))}function nh(tt,et){if(null===et)return!1;for(var nt=0;nt<et.length&&nt<tt.length;nt++)if(!Xc(tt[nt],et[nt]))return!1;return!0}function oh(tt,et,nt,rt,it,ot){if(kh=ot,Oh=et,et.memoizedState=null,et.updateQueue=null,et.expirationTime=0,bh.current=null===tt||null===tt.memoizedState?tf:ef,tt=nt(rt,it),et.expirationTime===kh){ot=0;do{if(et.expirationTime=0,!(25>ot))throw Error(u(301));ot+=1,qh=jh=null,et.updateQueue=null,bh.current=nf,tt=nt(rt,it)}while(et.expirationTime===kh)}if(bh.current=Qh,et=null!==jh&&null!==jh.next,kh=0,qh=jh=Oh=null,Yh=!1,et)throw Error(u(300));return tt}function th(){var tt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===qh?Oh.memoizedState=qh=tt:qh=qh.next=tt,qh}function uh(){if(null===jh){var tt=Oh.alternate;tt=null!==tt?tt.memoizedState:null}else tt=jh.next;var et=null===qh?Oh.memoizedState:qh.next;if(null!==et)qh=et,jh=tt;else{if(null===tt)throw Error(u(310));tt={memoizedState:(jh=tt).memoizedState,baseState:jh.baseState,baseQueue:jh.baseQueue,queue:jh.queue,next:null},null===qh?Oh.memoizedState=qh=tt:qh=qh.next=tt}return qh}function vh(tt,et){return"function"==typeof et?et(tt):et}function wh(tt){var et=uh(),nt=et.queue;if(null===nt)throw Error(u(311));nt.lastRenderedReducer=tt;var rt=jh,it=rt.baseQueue,ot=nt.pending;if(null!==ot){if(null!==it){var at=it.next;it.next=ot.next,ot.next=at}rt.baseQueue=it=ot,nt.pending=null}if(null!==it){it=it.next,rt=rt.baseState;var st=at=ot=null,ct=it;do{var pt=ct.expirationTime;if(pt<kh){var ft={expirationTime:ct.expirationTime,suspenseConfig:ct.suspenseConfig,action:ct.action,eagerReducer:ct.eagerReducer,eagerState:ct.eagerState,next:null};null===st?(at=st=ft,ot=rt):st=st.next=ft,pt>Oh.expirationTime&&(Oh.expirationTime=pt,Bg(pt))}else null!==st&&(st=st.next={expirationTime:1073741823,suspenseConfig:ct.suspenseConfig,action:ct.action,eagerReducer:ct.eagerReducer,eagerState:ct.eagerState,next:null}),Ag(pt,ct.suspenseConfig),rt=ct.eagerReducer===tt?ct.eagerState:tt(rt,ct.action);ct=ct.next}while(null!==ct&&ct!==it);null===st?ot=rt:st.next=at,Xc(rt,et.memoizedState)||(lf=!0),et.memoizedState=rt,et.baseState=ot,et.baseQueue=st,nt.lastRenderedState=rt}return[et.memoizedState,nt.dispatch]}function xh(tt){var et=uh(),nt=et.queue;if(null===nt)throw Error(u(311));nt.lastRenderedReducer=tt;var rt=nt.dispatch,it=nt.pending,ot=et.memoizedState;if(null!==it){nt.pending=null;var at=it=it.next;do{ot=tt(ot,at.action),at=at.next}while(at!==it);Xc(ot,et.memoizedState)||(lf=!0),et.memoizedState=ot,null===et.baseQueue&&(et.baseState=ot),nt.lastRenderedState=ot}return[ot,rt]}function yh(tt){var et=th();return"function"==typeof tt&&(tt=tt()),et.memoizedState=et.baseState=tt,tt=(tt=et.queue={pending:null,dispatch:null,lastRenderedReducer:vh,lastRenderedState:tt}).dispatch=zh.bind(null,Oh,tt),[et.memoizedState,tt]}function Ah(tt,et,nt,rt){return tt={tag:tt,create:et,destroy:nt,deps:rt,next:null},null===(et=Oh.updateQueue)?(et={lastEffect:null},Oh.updateQueue=et,et.lastEffect=tt.next=tt):null===(nt=et.lastEffect)?et.lastEffect=tt.next=tt:(rt=nt.next,nt.next=tt,tt.next=rt,et.lastEffect=tt),tt}function Bh(){return uh().memoizedState}function Ch(tt,et,nt,rt){var it=th();Oh.effectTag|=tt,it.memoizedState=Ah(1|et,nt,void 0,void 0===rt?null:rt)}function Dh(tt,et,nt,rt){var it=uh();rt=void 0===rt?null:rt;var ot=void 0;if(null!==jh){var at=jh.memoizedState;if(ot=at.destroy,null!==rt&&nh(rt,at.deps))return void Ah(et,nt,ot,rt)}Oh.effectTag|=tt,it.memoizedState=Ah(1|et,nt,ot,rt)}function Eh(tt,et){return Ch(516,4,tt,et)}function Fh(tt,et){return Dh(516,4,tt,et)}function Gh(tt,et){return Dh(4,2,tt,et)}function Hh(tt,et){return"function"==typeof et?(tt=tt(),et(tt),function(){et(null)}):null!=et?(tt=tt(),et.current=tt,function(){et.current=null}):void 0}function Ih(tt,et,nt){return nt=null!=nt?nt.concat([tt]):null,Dh(4,2,Hh.bind(null,et,tt),nt)}function Jh(){}function Kh(tt,et){return th().memoizedState=[tt,void 0===et?null:et],tt}function Lh(tt,et){var nt=uh();et=void 0===et?null:et;var rt=nt.memoizedState;return null!==rt&&null!==et&&nh(et,rt[1])?rt[0]:(nt.memoizedState=[tt,et],tt)}function Mh(tt,et){var nt=uh();et=void 0===et?null:et;var rt=nt.memoizedState;return null!==rt&&null!==et&&nh(et,rt[1])?rt[0]:(tt=tt(),nt.memoizedState=[tt,et],tt)}function Nh(tt,et,nt){var rt=ag();cg(98>rt?98:rt,(function(){tt(!0)})),cg(97<rt?97:rt,(function(){var rt=Ph.suspense;Ph.suspense=void 0===et?null:et;try{tt(!1),nt()}finally{Ph.suspense=rt}}))}function zh(tt,et,nt){var rt=Gg(),it=Kp.suspense;it={expirationTime:rt=Hg(rt,tt,it),suspenseConfig:it,action:nt,eagerReducer:null,eagerState:null,next:null};var ot=et.pending;if(null===ot?it.next=it:(it.next=ot.next,ot.next=it),et.pending=it,ot=tt.alternate,tt===Oh||null!==ot&&ot===Oh)Yh=!0,it.expirationTime=kh,Oh.expirationTime=kh;else{if(0===tt.expirationTime&&(null===ot||0===ot.expirationTime)&&null!==(ot=et.lastRenderedReducer))try{var at=et.lastRenderedState,st=ot(at,nt);if(it.eagerReducer=ot,it.eagerState=st,Xc(st,at))return}catch(tt){}Ig(tt,rt)}}var Qh={readContext:sg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useResponder:Q,useDeferredValue:Q,useTransition:Q},tf={readContext:sg,useCallback:Kh,useContext:sg,useEffect:Eh,useImperativeHandle:function(tt,et,nt){return nt=null!=nt?nt.concat([tt]):null,Ch(4,2,Hh.bind(null,et,tt),nt)},useLayoutEffect:function(tt,et){return Ch(4,2,tt,et)},useMemo:function(tt,et){var nt=th();return et=void 0===et?null:et,tt=tt(),nt.memoizedState=[tt,et],tt},useReducer:function(tt,et,nt){var rt=th();return et=void 0!==nt?nt(et):et,rt.memoizedState=rt.baseState=et,tt=(tt=rt.queue={pending:null,dispatch:null,lastRenderedReducer:tt,lastRenderedState:et}).dispatch=zh.bind(null,Oh,tt),[rt.memoizedState,tt]},useRef:function(tt){return tt={current:tt},th().memoizedState=tt},useState:yh,useDebugValue:Jh,useResponder:ih,useDeferredValue:function(tt,et){var nt=yh(tt),rt=nt[0],it=nt[1];return Eh((function(){var nt=Ph.suspense;Ph.suspense=void 0===et?null:et;try{it(tt)}finally{Ph.suspense=nt}}),[tt,et]),rt},useTransition:function(tt){var et=yh(!1),nt=et[0];return et=et[1],[Kh(Nh.bind(null,et,tt),[et,tt]),nt]}},ef={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:wh,useRef:Bh,useState:function(){return wh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(tt,et){var nt=wh(vh),rt=nt[0],it=nt[1];return Fh((function(){var nt=Ph.suspense;Ph.suspense=void 0===et?null:et;try{it(tt)}finally{Ph.suspense=nt}}),[tt,et]),rt},useTransition:function(tt){var et=wh(vh),nt=et[0];return et=et[1],[Lh(Nh.bind(null,et,tt),[et,tt]),nt]}},nf={readContext:sg,useCallback:Lh,useContext:sg,useEffect:Fh,useImperativeHandle:Ih,useLayoutEffect:Gh,useMemo:Mh,useReducer:xh,useRef:Bh,useState:function(){return xh(vh)},useDebugValue:Jh,useResponder:ih,useDeferredValue:function(tt,et){var nt=xh(vh),rt=nt[0],it=nt[1];return Fh((function(){var nt=Ph.suspense;Ph.suspense=void 0===et?null:et;try{it(tt)}finally{Ph.suspense=nt}}),[tt,et]),rt},useTransition:function(tt){var et=xh(vh),nt=et[0];return et=et[1],[Lh(Nh.bind(null,et,tt),[et,tt]),nt]}},rf=null,af=null,sf=!1;function Rh(tt,et){var nt=Sh(5,null,null,0);nt.elementType="DELETED",nt.type="DELETED",nt.stateNode=et,nt.return=tt,nt.effectTag=8,null!==tt.lastEffect?(tt.lastEffect.nextEffect=nt,tt.lastEffect=nt):tt.firstEffect=tt.lastEffect=nt}function Th(tt,et){switch(tt.tag){case 5:var nt=tt.type;return null!==(et=1!==et.nodeType||nt.toLowerCase()!==et.nodeName.toLowerCase()?null:et)&&(tt.stateNode=et,!0);case 6:return null!==(et=""===tt.pendingProps||3!==et.nodeType?null:et)&&(tt.stateNode=et,!0);case 13:default:return!1}}function Uh(tt){if(sf){var et=af;if(et){var nt=et;if(!Th(tt,et)){if(!(et=Jd(nt.nextSibling))||!Th(tt,et))return tt.effectTag=-1025&tt.effectTag|2,sf=!1,void(rf=tt);Rh(rf,nt)}rf=tt,af=Jd(et.firstChild)}else tt.effectTag=-1025&tt.effectTag|2,sf=!1,rf=tt}}function Vh(tt){for(tt=tt.return;null!==tt&&5!==tt.tag&&3!==tt.tag&&13!==tt.tag;)tt=tt.return;rf=tt}function Wh(tt){if(tt!==rf)return!1;if(!sf)return Vh(tt),sf=!0,!1;var et=tt.type;if(5!==tt.tag||"head"!==et&&"body"!==et&&!Gd(et,tt.memoizedProps))for(et=af;et;)Rh(tt,et),et=Jd(et.nextSibling);if(Vh(tt),13===tt.tag){if(!(tt=null!==(tt=tt.memoizedState)?tt.dehydrated:null))throw Error(u(317));t:{for(tt=tt.nextSibling,et=0;tt;){if(8===tt.nodeType){var nt=tt.data;if("/$"===nt){if(0===et){af=Jd(tt.nextSibling);break t}et--}else"$"!==nt&&"$!"!==nt&&"$?"!==nt||et++}tt=tt.nextSibling}af=null}}else af=rf?Jd(tt.stateNode.nextSibling):null;return!0}function Xh(){af=rf=null,sf=!1}var uf=Wn.ReactCurrentOwner,lf=!1;function R(tt,et,nt,rt){et.child=null===tt?ah(et,null,nt,rt):rh(et,tt.child,nt,rt)}function Zh(tt,et,nt,rt,it){nt=nt.render;var ot=et.ref;return qg(et,it),rt=oh(tt,et,nt,rt,ot,it),null===tt||lf?(et.effectTag|=1,R(tt,et,rt,it),et.child):(et.updateQueue=tt.updateQueue,et.effectTag&=-517,tt.expirationTime<=it&&(tt.expirationTime=0),$h(tt,et,it))}function ai(tt,et,nt,rt,it,ot){if(null===tt){var at=nt.type;return"function"!=typeof at||bi(at)||void 0!==at.defaultProps||null!==nt.compare||void 0!==nt.defaultProps?((tt=Ug(nt.type,null,rt,null,et.mode,ot)).ref=et.ref,tt.return=et,et.child=tt):(et.tag=15,et.type=at,ci(tt,et,at,rt,it,ot))}return at=tt.child,it<ot&&(it=at.memoizedProps,(nt=null!==(nt=nt.compare)?nt:bf)(it,rt)&&tt.ref===et.ref)?$h(tt,et,ot):(et.effectTag|=1,(tt=Sg(at,rt)).ref=et.ref,tt.return=et,et.child=tt)}function ci(tt,et,nt,rt,it,ot){return null!==tt&&bf(tt.memoizedProps,rt)&&tt.ref===et.ref&&(lf=!1,it<ot)?(et.expirationTime=tt.expirationTime,$h(tt,et,ot)):di(tt,et,nt,rt,ot)}function ei(tt,et){var nt=et.ref;(null===tt&&null!==nt||null!==tt&&tt.ref!==nt)&&(et.effectTag|=128)}function di(tt,et,nt,rt,it){var ot=L(nt)?Tp:Sp.current;return ot=Cf(et,ot),qg(et,it),nt=oh(tt,et,nt,rt,ot,it),null===tt||lf?(et.effectTag|=1,R(tt,et,nt,it),et.child):(et.updateQueue=tt.updateQueue,et.effectTag&=-517,tt.expirationTime<=it&&(tt.expirationTime=0),$h(tt,et,it))}function fi(tt,et,nt,rt,it){if(L(nt)){var ot=!0;Gf(et)}else ot=!1;if(qg(et,it),null===et.stateNode)null!==tt&&(tt.alternate=null,et.alternate=null,et.effectTag|=2),Lg(et,nt,rt),Ng(et,nt,rt,it),rt=!0;else if(null===tt){var at=et.stateNode,st=et.memoizedProps;at.props=st;var ct=at.context,pt=nt.contextType;"object"==typeof pt&&null!==pt?pt=sg(pt):pt=Cf(et,pt=L(nt)?Tp:Sp.current);var ft=nt.getDerivedStateFromProps,dt="function"==typeof ft||"function"==typeof at.getSnapshotBeforeUpdate;dt||"function"!=typeof at.UNSAFE_componentWillReceiveProps&&"function"!=typeof at.componentWillReceiveProps||(st!==rt||ct!==pt)&&Mg(et,at,rt,pt),$p=!1;var mt=et.memoizedState;at.state=mt,zg(et,rt,at,it),ct=et.memoizedState,st!==rt||mt!==ct||Ep.current||$p?("function"==typeof ft&&(Fg(et,nt,ft,rt),ct=et.memoizedState),(st=$p||Kg(et,nt,st,rt,mt,ct,pt))?(dt||"function"!=typeof at.UNSAFE_componentWillMount&&"function"!=typeof at.componentWillMount||("function"==typeof at.componentWillMount&&at.componentWillMount(),"function"==typeof at.UNSAFE_componentWillMount&&at.UNSAFE_componentWillMount()),"function"==typeof at.componentDidMount&&(et.effectTag|=4)):("function"==typeof at.componentDidMount&&(et.effectTag|=4),et.memoizedProps=rt,et.memoizedState=ct),at.props=rt,at.state=ct,at.context=pt,rt=st):("function"==typeof at.componentDidMount&&(et.effectTag|=4),rt=!1)}else at=et.stateNode,vg(tt,et),st=et.memoizedProps,at.props=et.type===et.elementType?st:ig(et.type,st),ct=at.context,"object"==typeof(pt=nt.contextType)&&null!==pt?pt=sg(pt):pt=Cf(et,pt=L(nt)?Tp:Sp.current),(dt="function"==typeof(ft=nt.getDerivedStateFromProps)||"function"==typeof at.getSnapshotBeforeUpdate)||"function"!=typeof at.UNSAFE_componentWillReceiveProps&&"function"!=typeof at.componentWillReceiveProps||(st!==rt||ct!==pt)&&Mg(et,at,rt,pt),$p=!1,ct=et.memoizedState,at.state=ct,zg(et,rt,at,it),mt=et.memoizedState,st!==rt||ct!==mt||Ep.current||$p?("function"==typeof ft&&(Fg(et,nt,ft,rt),mt=et.memoizedState),(ft=$p||Kg(et,nt,st,rt,ct,mt,pt))?(dt||"function"!=typeof at.UNSAFE_componentWillUpdate&&"function"!=typeof at.componentWillUpdate||("function"==typeof at.componentWillUpdate&&at.componentWillUpdate(rt,mt,pt),"function"==typeof at.UNSAFE_componentWillUpdate&&at.UNSAFE_componentWillUpdate(rt,mt,pt)),"function"==typeof at.componentDidUpdate&&(et.effectTag|=4),"function"==typeof at.getSnapshotBeforeUpdate&&(et.effectTag|=256)):("function"!=typeof at.componentDidUpdate||st===tt.memoizedProps&&ct===tt.memoizedState||(et.effectTag|=4),"function"!=typeof at.getSnapshotBeforeUpdate||st===tt.memoizedProps&&ct===tt.memoizedState||(et.effectTag|=256),et.memoizedProps=rt,et.memoizedState=mt),at.props=rt,at.state=mt,at.context=pt,rt=ft):("function"!=typeof at.componentDidUpdate||st===tt.memoizedProps&&ct===tt.memoizedState||(et.effectTag|=4),"function"!=typeof at.getSnapshotBeforeUpdate||st===tt.memoizedProps&&ct===tt.memoizedState||(et.effectTag|=256),rt=!1);return gi(tt,et,nt,rt,ot,it)}function gi(tt,et,nt,rt,it,ot){ei(tt,et);var at=0!=(64&et.effectTag);if(!rt&&!at)return it&&Hf(et,nt,!1),$h(tt,et,ot);rt=et.stateNode,uf.current=et;var st=at&&"function"!=typeof nt.getDerivedStateFromError?null:rt.render();return et.effectTag|=1,null!==tt&&at?(et.child=rh(et,tt.child,null,ot),et.child=rh(et,null,st,ot)):R(tt,et,st,ot),et.memoizedState=rt.state,it&&Hf(et,nt,!0),et.child}function hi(tt){var et=tt.stateNode;et.pendingContext?Ef(0,et.pendingContext,et.pendingContext!==et.context):et.context&&Ef(0,et.context,!1),dh(tt,et.containerInfo)}var cf,pf,hf,ff={dehydrated:null,retryTime:0};function ji(tt,et,nt){var rt,it=et.mode,ot=et.pendingProps,at=_h.current,st=!1;if((rt=0!=(64&et.effectTag))||(rt=0!=(2&at)&&(null===tt||null!==tt.memoizedState)),rt?(st=!0,et.effectTag&=-65):null!==tt&&null===tt.memoizedState||void 0===ot.fallback||!0===ot.unstable_avoidThisFallback||(at|=1),I(_h,1&at),null===tt){if(void 0!==ot.fallback&&Uh(et),st){if(st=ot.fallback,(ot=Wg(null,it,0,null)).return=et,0==(2&et.mode))for(tt=null!==et.memoizedState?et.child.child:et.child,ot.child=tt;null!==tt;)tt.return=ot,tt=tt.sibling;return(nt=Wg(st,it,nt,null)).return=et,ot.sibling=nt,et.memoizedState=ff,et.child=ot,nt}return it=ot.children,et.memoizedState=null,et.child=ah(et,null,it,nt)}if(null!==tt.memoizedState){if(it=(tt=tt.child).sibling,st){if(ot=ot.fallback,(nt=Sg(tt,tt.pendingProps)).return=et,0==(2&et.mode)&&(st=null!==et.memoizedState?et.child.child:et.child)!==tt.child)for(nt.child=st;null!==st;)st.return=nt,st=st.sibling;return(it=Sg(it,ot)).return=et,nt.sibling=it,nt.childExpirationTime=0,et.memoizedState=ff,et.child=nt,it}return nt=rh(et,tt.child,ot.children,nt),et.memoizedState=null,et.child=nt}if(tt=tt.child,st){if(st=ot.fallback,(ot=Wg(null,it,0,null)).return=et,ot.child=tt,null!==tt&&(tt.return=ot),0==(2&et.mode))for(tt=null!==et.memoizedState?et.child.child:et.child,ot.child=tt;null!==tt;)tt.return=ot,tt=tt.sibling;return(nt=Wg(st,it,nt,null)).return=et,ot.sibling=nt,nt.effectTag|=2,ot.childExpirationTime=0,et.memoizedState=ff,et.child=ot,nt}return et.memoizedState=null,et.child=rh(et,tt,ot.children,nt)}function ki(tt,et){tt.expirationTime<et&&(tt.expirationTime=et);var nt=tt.alternate;null!==nt&&nt.expirationTime<et&&(nt.expirationTime=et),pg(tt.return,et)}function li(tt,et,nt,rt,it,ot){var at=tt.memoizedState;null===at?tt.memoizedState={isBackwards:et,rendering:null,renderingStartTime:0,last:rt,tail:nt,tailExpiration:0,tailMode:it,lastEffect:ot}:(at.isBackwards=et,at.rendering=null,at.renderingStartTime=0,at.last=rt,at.tail=nt,at.tailExpiration=0,at.tailMode=it,at.lastEffect=ot)}function mi(tt,et,nt){var rt=et.pendingProps,it=rt.revealOrder,ot=rt.tail;if(R(tt,et,rt.children,nt),0!=(2&(rt=_h.current)))rt=1&rt|2,et.effectTag|=64;else{if(null!==tt&&0!=(64&tt.effectTag))t:for(tt=et.child;null!==tt;){if(13===tt.tag)null!==tt.memoizedState&&ki(tt,nt);else if(19===tt.tag)ki(tt,nt);else if(null!==tt.child){tt.child.return=tt,tt=tt.child;continue}if(tt===et)break t;for(;null===tt.sibling;){if(null===tt.return||tt.return===et)break t;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}rt&=1}if(I(_h,rt),0==(2&et.mode))et.memoizedState=null;else switch(it){case"forwards":for(nt=et.child,it=null;null!==nt;)null!==(tt=nt.alternate)&&null===hh(tt)&&(it=nt),nt=nt.sibling;null===(nt=it)?(it=et.child,et.child=null):(it=nt.sibling,nt.sibling=null),li(et,!1,it,nt,ot,et.lastEffect);break;case"backwards":for(nt=null,it=et.child,et.child=null;null!==it;){if(null!==(tt=it.alternate)&&null===hh(tt)){et.child=it;break}tt=it.sibling,it.sibling=nt,nt=it,it=tt}li(et,!0,nt,null,ot,et.lastEffect);break;case"together":li(et,!1,null,null,void 0,et.lastEffect);break;default:et.memoizedState=null}return et.child}function $h(tt,et,nt){null!==tt&&(et.dependencies=tt.dependencies);var rt=et.expirationTime;if(0!==rt&&Bg(rt),et.childExpirationTime<nt)return null;if(null!==tt&&et.child!==tt.child)throw Error(u(153));if(null!==et.child){for(nt=Sg(tt=et.child,tt.pendingProps),et.child=nt,nt.return=et;null!==tt.sibling;)tt=tt.sibling,(nt=nt.sibling=Sg(tt,tt.pendingProps)).return=et;nt.sibling=null}return et.child}function ri(tt,et){switch(tt.tailMode){case"hidden":et=tt.tail;for(var nt=null;null!==et;)null!==et.alternate&&(nt=et),et=et.sibling;null===nt?tt.tail=null:nt.sibling=null;break;case"collapsed":nt=tt.tail;for(var rt=null;null!==nt;)null!==nt.alternate&&(rt=nt),nt=nt.sibling;null===rt?et||null===tt.tail?tt.tail=null:tt.tail.sibling=null:rt.sibling=null}}function si(tt,et,nt){var rt=et.pendingProps;switch(et.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return L(et.type)&&Df(),null;case 3:return eh(),H(Ep),H(Sp),(nt=et.stateNode).pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),null!==tt&&null!==tt.child||!Wh(et)||(et.effectTag|=4),null;case 5:gh(et),nt=ch(mh.current);var ot=et.type;if(null!==tt&&null!=et.stateNode)pf(tt,et,ot,rt,nt),tt.ref!==et.ref&&(et.effectTag|=128);else{if(!rt){if(null===et.stateNode)throw Error(u(166));return null}if(tt=ch(lh.current),Wh(et)){rt=et.stateNode,ot=et.type;var at=et.memoizedProps;switch(rt[yl]=et,rt[vl]=at,ot){case"iframe":case"object":case"embed":F("load",rt);break;case"video":case"audio":for(tt=0;tt<us.length;tt++)F(us[tt],rt);break;case"source":F("error",rt);break;case"img":case"image":case"link":F("error",rt),F("load",rt);break;case"form":F("reset",rt),F("submit",rt);break;case"details":F("toggle",rt);break;case"input":Ab(rt,at),F("invalid",rt),rd(nt,"onChange");break;case"select":rt._wrapperState={wasMultiple:!!at.multiple},F("invalid",rt),rd(nt,"onChange");break;case"textarea":Jb(rt,at),F("invalid",rt),rd(nt,"onChange")}for(var st in od(ot,at),tt=null,at)if(at.hasOwnProperty(st)){var ct=at[st];"children"===st?"string"==typeof ct?rt.textContent!==ct&&(tt=["children",ct]):"number"==typeof ct&&rt.textContent!==""+ct&&(tt=["children",""+ct]):Bt.hasOwnProperty(st)&&null!=ct&&rd(nt,st)}switch(ot){case"input":xb(rt),Eb(rt,at,!0);break;case"textarea":xb(rt),Lb(rt);break;case"select":case"option":break;default:"function"==typeof at.onClick&&(rt.onclick=sd)}nt=tt,et.updateQueue=nt,null!==nt&&(et.effectTag|=4)}else{switch(st=9===nt.nodeType?nt:nt.ownerDocument,tt===Fu&&(tt=Nb(ot)),tt===Fu?"script"===ot?((tt=st.createElement("div")).innerHTML="<script><\/script>",tt=tt.removeChild(tt.firstChild)):"string"==typeof rt.is?tt=st.createElement(ot,{is:rt.is}):(tt=st.createElement(ot),"select"===ot&&(st=tt,rt.multiple?st.multiple=!0:rt.size&&(st.size=rt.size))):tt=st.createElementNS(tt,ot),tt[yl]=et,tt[vl]=rt,cf(tt,et),et.stateNode=tt,st=pd(ot,rt),ot){case"iframe":case"object":case"embed":F("load",tt),ct=rt;break;case"video":case"audio":for(ct=0;ct<us.length;ct++)F(us[ct],tt);ct=rt;break;case"source":F("error",tt),ct=rt;break;case"img":case"image":case"link":F("error",tt),F("load",tt),ct=rt;break;case"form":F("reset",tt),F("submit",tt),ct=rt;break;case"details":F("toggle",tt),ct=rt;break;case"input":Ab(tt,rt),ct=zb(tt,rt),F("invalid",tt),rd(nt,"onChange");break;case"option":ct=Gb(tt,rt);break;case"select":tt._wrapperState={wasMultiple:!!rt.multiple},ct=it({},rt,{value:void 0}),F("invalid",tt),rd(nt,"onChange");break;case"textarea":Jb(tt,rt),ct=Ib(tt,rt),F("invalid",tt),rd(nt,"onChange");break;default:ct=rt}od(ot,ct);var pt=ct;for(at in pt)if(pt.hasOwnProperty(at)){var ft=pt[at];"style"===at?md(tt,ft):"dangerouslySetInnerHTML"===at?null!=(ft=ft?ft.__html:void 0)&&ga(tt,ft):"children"===at?"string"==typeof ft?("textarea"!==ot||""!==ft)&&Rb(tt,ft):"number"==typeof ft&&Rb(tt,""+ft):"suppressContentEditableWarning"!==at&&"suppressHydrationWarning"!==at&&"autoFocus"!==at&&(Bt.hasOwnProperty(at)?null!=ft&&rd(nt,at):null!=ft&&Xa(tt,at,ft,st))}switch(ot){case"input":xb(tt),Eb(tt,rt,!1);break;case"textarea":xb(tt),Lb(tt);break;case"option":null!=rt.value&&tt.setAttribute("value",""+rb(rt.value));break;case"select":tt.multiple=!!rt.multiple,null!=(nt=rt.value)?Hb(tt,!!rt.multiple,nt,!1):null!=rt.defaultValue&&Hb(tt,!!rt.multiple,rt.defaultValue,!0);break;default:"function"==typeof ct.onClick&&(tt.onclick=sd)}Fd(ot,rt)&&(et.effectTag|=4)}null!==et.ref&&(et.effectTag|=128)}return null;case 6:if(tt&&null!=et.stateNode)hf(0,et,tt.memoizedProps,rt);else{if("string"!=typeof rt&&null===et.stateNode)throw Error(u(166));nt=ch(mh.current),ch(lh.current),Wh(et)?(nt=et.stateNode,rt=et.memoizedProps,nt[yl]=et,nt.nodeValue!==rt&&(et.effectTag|=4)):((nt=(9===nt.nodeType?nt:nt.ownerDocument).createTextNode(rt))[yl]=et,et.stateNode=nt)}return null;case 13:return H(_h),rt=et.memoizedState,0!=(64&et.effectTag)?(et.expirationTime=nt,et):(nt=null!==rt,rt=!1,null===tt?void 0!==et.memoizedProps.fallback&&Wh(et):(rt=null!==(ot=tt.memoizedState),nt||null===ot||null!==(ot=tt.child.sibling)&&(null!==(at=et.firstEffect)?(et.firstEffect=ot,ot.nextEffect=at):(et.firstEffect=et.lastEffect=ot,ot.nextEffect=null),ot.effectTag=8)),nt&&!rt&&0!=(2&et.mode)&&(null===tt&&!0!==et.memoizedProps.unstable_avoidThisFallback||0!=(1&_h.current)?If===xf&&(If=wf):(If!==xf&&If!==wf||(If=Sf),0!==Rf&&null!==Pf&&(xi(Pf,Lf),yi(Pf,Rf)))),(nt||rt)&&(et.effectTag|=4),null);case 4:return eh(),null;case 10:return og(et),null;case 17:return L(et.type)&&Df(),null;case 19:if(H(_h),null===(rt=et.memoizedState))return null;if(ot=0!=(64&et.effectTag),null===(at=rt.rendering)){if(ot)ri(rt,!1);else if(If!==xf||null!==tt&&0!=(64&tt.effectTag))for(at=et.child;null!==at;){if(null!==(tt=hh(at))){for(et.effectTag|=64,ri(rt,!1),null!==(ot=tt.updateQueue)&&(et.updateQueue=ot,et.effectTag|=4),null===rt.lastEffect&&(et.firstEffect=null),et.lastEffect=rt.lastEffect,rt=et.child;null!==rt;)at=nt,(ot=rt).effectTag&=2,ot.nextEffect=null,ot.firstEffect=null,ot.lastEffect=null,null===(tt=ot.alternate)?(ot.childExpirationTime=0,ot.expirationTime=at,ot.child=null,ot.memoizedProps=null,ot.memoizedState=null,ot.updateQueue=null,ot.dependencies=null):(ot.childExpirationTime=tt.childExpirationTime,ot.expirationTime=tt.expirationTime,ot.child=tt.child,ot.memoizedProps=tt.memoizedProps,ot.memoizedState=tt.memoizedState,ot.updateQueue=tt.updateQueue,at=tt.dependencies,ot.dependencies=null===at?null:{expirationTime:at.expirationTime,firstContext:at.firstContext,responders:at.responders}),rt=rt.sibling;return I(_h,1&_h.current|2),et.child}at=at.sibling}}else{if(!ot)if(null!==(tt=hh(at))){if(et.effectTag|=64,ot=!0,null!==(nt=tt.updateQueue)&&(et.updateQueue=nt,et.effectTag|=4),ri(rt,!0),null===rt.tail&&"hidden"===rt.tailMode&&!at.alternate)return null!==(et=et.lastEffect=rt.lastEffect)&&(et.nextEffect=null),null}else 2*qp()-rt.renderingStartTime>rt.tailExpiration&&1<nt&&(et.effectTag|=64,ot=!0,ri(rt,!1),et.expirationTime=et.childExpirationTime=nt-1);rt.isBackwards?(at.sibling=et.child,et.child=at):(null!==(nt=rt.last)?nt.sibling=at:et.child=at,rt.last=at)}return null!==rt.tail?(0===rt.tailExpiration&&(rt.tailExpiration=qp()+500),nt=rt.tail,rt.rendering=nt,rt.tail=nt.sibling,rt.lastEffect=et.lastEffect,rt.renderingStartTime=qp(),nt.sibling=null,et=_h.current,I(_h,ot?1&et|2:1&et),nt):null}throw Error(u(156,et.tag))}function zi(tt){switch(tt.tag){case 1:L(tt.type)&&Df();var et=tt.effectTag;return 4096&et?(tt.effectTag=-4097&et|64,tt):null;case 3:if(eh(),H(Ep),H(Sp),0!=(64&(et=tt.effectTag)))throw Error(u(285));return tt.effectTag=-4097&et|64,tt;case 5:return gh(tt),null;case 13:return H(_h),4096&(et=tt.effectTag)?(tt.effectTag=-4097&et|64,tt):null;case 19:return H(_h),null;case 4:return eh(),null;case 10:return og(tt),null;default:return null}}function Ai(tt,et){return{value:tt,source:et,stack:qb(et)}}cf=function(tt,et){for(var nt=et.child;null!==nt;){if(5===nt.tag||6===nt.tag)tt.appendChild(nt.stateNode);else if(4!==nt.tag&&null!==nt.child){nt.child.return=nt,nt=nt.child;continue}if(nt===et)break;for(;null===nt.sibling;){if(null===nt.return||nt.return===et)return;nt=nt.return}nt.sibling.return=nt.return,nt=nt.sibling}},pf=function(tt,et,nt,rt,ot){var at=tt.memoizedProps;if(at!==rt){var st,ct,pt=et.stateNode;switch(ch(lh.current),tt=null,nt){case"input":at=zb(pt,at),rt=zb(pt,rt),tt=[];break;case"option":at=Gb(pt,at),rt=Gb(pt,rt),tt=[];break;case"select":at=it({},at,{value:void 0}),rt=it({},rt,{value:void 0}),tt=[];break;case"textarea":at=Ib(pt,at),rt=Ib(pt,rt),tt=[];break;default:"function"!=typeof at.onClick&&"function"==typeof rt.onClick&&(pt.onclick=sd)}for(st in od(nt,rt),nt=null,at)if(!rt.hasOwnProperty(st)&&at.hasOwnProperty(st)&&null!=at[st])if("style"===st)for(ct in pt=at[st])pt.hasOwnProperty(ct)&&(nt||(nt={}),nt[ct]="");else"dangerouslySetInnerHTML"!==st&&"children"!==st&&"suppressContentEditableWarning"!==st&&"suppressHydrationWarning"!==st&&"autoFocus"!==st&&(Bt.hasOwnProperty(st)?tt||(tt=[]):(tt=tt||[]).push(st,null));for(st in rt){var ft=rt[st];if(pt=null!=at?at[st]:void 0,rt.hasOwnProperty(st)&&ft!==pt&&(null!=ft||null!=pt))if("style"===st)if(pt){for(ct in pt)!pt.hasOwnProperty(ct)||ft&&ft.hasOwnProperty(ct)||(nt||(nt={}),nt[ct]="");for(ct in ft)ft.hasOwnProperty(ct)&&pt[ct]!==ft[ct]&&(nt||(nt={}),nt[ct]=ft[ct])}else nt||(tt||(tt=[]),tt.push(st,nt)),nt=ft;else"dangerouslySetInnerHTML"===st?(ft=ft?ft.__html:void 0,pt=pt?pt.__html:void 0,null!=ft&&pt!==ft&&(tt=tt||[]).push(st,ft)):"children"===st?pt===ft||"string"!=typeof ft&&"number"!=typeof ft||(tt=tt||[]).push(st,""+ft):"suppressContentEditableWarning"!==st&&"suppressHydrationWarning"!==st&&(Bt.hasOwnProperty(st)?(null!=ft&&rd(ot,st),tt||pt===ft||(tt=[])):(tt=tt||[]).push(st,ft))}nt&&(tt=tt||[]).push("style",nt),ot=tt,(et.updateQueue=ot)&&(et.effectTag|=4)}},hf=function(tt,et,nt,rt){nt!==rt&&(et.effectTag|=4)};var df="function"==typeof WeakSet?WeakSet:Set;function Ci(tt,et){var nt=et.source,rt=et.stack;null===rt&&null!==nt&&(rt=qb(nt)),null!==nt&&pb(nt.type),et=et.value,null!==tt&&1===tt.tag&&pb(tt.type);try{console.error(et)}catch(tt){setTimeout((function(){throw tt}))}}function Fi(tt){var et=tt.ref;if(null!==et)if("function"==typeof et)try{et(null)}catch(et){Ei(tt,et)}else et.current=null}function Gi(tt,et){switch(et.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&et.effectTag&&null!==tt){var nt=tt.memoizedProps,rt=tt.memoizedState;et=(tt=et.stateNode).getSnapshotBeforeUpdate(et.elementType===et.type?nt:ig(et.type,nt),rt),tt.__reactInternalSnapshotBeforeUpdate=et}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(u(163))}function Hi(tt,et){if(null!==(et=null!==(et=et.updateQueue)?et.lastEffect:null)){var nt=et=et.next;do{if((nt.tag&tt)===tt){var rt=nt.destroy;nt.destroy=void 0,void 0!==rt&&rt()}nt=nt.next}while(nt!==et)}}function Ii(tt,et){if(null!==(et=null!==(et=et.updateQueue)?et.lastEffect:null)){var nt=et=et.next;do{if((nt.tag&tt)===tt){var rt=nt.create;nt.destroy=rt()}nt=nt.next}while(nt!==et)}}function Ji(tt,et,nt){switch(nt.tag){case 0:case 11:case 15:case 22:return void Ii(3,nt);case 1:if(tt=nt.stateNode,4&nt.effectTag)if(null===et)tt.componentDidMount();else{var rt=nt.elementType===nt.type?et.memoizedProps:ig(nt.type,et.memoizedProps);tt.componentDidUpdate(rt,et.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}return void(null!==(et=nt.updateQueue)&&Cg(nt,et,tt));case 3:if(null!==(et=nt.updateQueue)){if(tt=null,null!==nt.child)switch(nt.child.tag){case 5:tt=nt.child.stateNode;break;case 1:tt=nt.child.stateNode}Cg(nt,et,tt)}return;case 5:return tt=nt.stateNode,void(null===et&&4&nt.effectTag&&Fd(nt.type,nt.memoizedProps)&&tt.focus());case 6:case 4:case 12:return;case 13:return void(null===nt.memoizedState&&(nt=nt.alternate,null!==nt&&(nt=nt.memoizedState,null!==nt&&(nt=nt.dehydrated,null!==nt&&Vc(nt)))));case 19:case 17:case 20:case 21:return}throw Error(u(163))}function Ki(tt,et,nt){switch("function"==typeof nd&&nd(et),et.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(tt=et.updateQueue)&&null!==(tt=tt.lastEffect)){var rt=tt.next;cg(97<nt?97:nt,(function(){var tt=rt;do{var nt=tt.destroy;if(void 0!==nt){var it=et;try{nt()}catch(tt){Ei(it,tt)}}tt=tt.next}while(tt!==rt)}))}break;case 1:Fi(et),"function"==typeof(nt=et.stateNode).componentWillUnmount&&function Di(tt,et){try{et.props=tt.memoizedProps,et.state=tt.memoizedState,et.componentWillUnmount()}catch(et){Ei(tt,et)}}(et,nt);break;case 5:Fi(et);break;case 4:Mi(tt,et,nt)}}function Ni(tt){var et=tt.alternate;tt.return=null,tt.child=null,tt.memoizedState=null,tt.updateQueue=null,tt.dependencies=null,tt.alternate=null,tt.firstEffect=null,tt.lastEffect=null,tt.pendingProps=null,tt.memoizedProps=null,tt.stateNode=null,null!==et&&Ni(et)}function Oi(tt){return 5===tt.tag||3===tt.tag||4===tt.tag}function Pi(tt){t:{for(var et=tt.return;null!==et;){if(Oi(et)){var nt=et;break t}et=et.return}throw Error(u(160))}switch(et=nt.stateNode,nt.tag){case 5:var rt=!1;break;case 3:case 4:et=et.containerInfo,rt=!0;break;default:throw Error(u(161))}16&nt.effectTag&&(Rb(et,""),nt.effectTag&=-17);t:e:for(nt=tt;;){for(;null===nt.sibling;){if(null===nt.return||Oi(nt.return)){nt=null;break t}nt=nt.return}for(nt.sibling.return=nt.return,nt=nt.sibling;5!==nt.tag&&6!==nt.tag&&18!==nt.tag;){if(2&nt.effectTag)continue e;if(null===nt.child||4===nt.tag)continue e;nt.child.return=nt,nt=nt.child}if(!(2&nt.effectTag)){nt=nt.stateNode;break t}}rt?function Qi(tt,et,nt){var rt=tt.tag,it=5===rt||6===rt;if(it)tt=it?tt.stateNode:tt.stateNode.instance,et?8===nt.nodeType?nt.parentNode.insertBefore(tt,et):nt.insertBefore(tt,et):(8===nt.nodeType?(et=nt.parentNode).insertBefore(tt,nt):(et=nt).appendChild(tt),null!==(nt=nt._reactRootContainer)&&void 0!==nt||null!==et.onclick||(et.onclick=sd));else if(4!==rt&&null!==(tt=tt.child))for(Qi(tt,et,nt),tt=tt.sibling;null!==tt;)Qi(tt,et,nt),tt=tt.sibling}(tt,nt,et):function Ri(tt,et,nt){var rt=tt.tag,it=5===rt||6===rt;if(it)tt=it?tt.stateNode:tt.stateNode.instance,et?nt.insertBefore(tt,et):nt.appendChild(tt);else if(4!==rt&&null!==(tt=tt.child))for(Ri(tt,et,nt),tt=tt.sibling;null!==tt;)Ri(tt,et,nt),tt=tt.sibling}(tt,nt,et)}function Mi(tt,et,nt){for(var rt,it,ot=et,at=!1;;){if(!at){at=ot.return;t:for(;;){if(null===at)throw Error(u(160));switch(rt=at.stateNode,at.tag){case 5:it=!1;break t;case 3:case 4:rt=rt.containerInfo,it=!0;break t}at=at.return}at=!0}if(5===ot.tag||6===ot.tag){t:for(var st=tt,ct=ot,pt=nt,ft=ct;;)if(Ki(st,ft,pt),null!==ft.child&&4!==ft.tag)ft.child.return=ft,ft=ft.child;else{if(ft===ct)break t;for(;null===ft.sibling;){if(null===ft.return||ft.return===ct)break t;ft=ft.return}ft.sibling.return=ft.return,ft=ft.sibling}it?(st=rt,ct=ot.stateNode,8===st.nodeType?st.parentNode.removeChild(ct):st.removeChild(ct)):rt.removeChild(ot.stateNode)}else if(4===ot.tag){if(null!==ot.child){rt=ot.stateNode.containerInfo,it=!0,ot.child.return=ot,ot=ot.child;continue}}else if(Ki(tt,ot,nt),null!==ot.child){ot.child.return=ot,ot=ot.child;continue}if(ot===et)break;for(;null===ot.sibling;){if(null===ot.return||ot.return===et)return;4===(ot=ot.return).tag&&(at=!1)}ot.sibling.return=ot.return,ot=ot.sibling}}function Si(tt,et){switch(et.tag){case 0:case 11:case 14:case 15:case 22:return void Hi(3,et);case 1:return;case 5:var nt=et.stateNode;if(null!=nt){var rt=et.memoizedProps,it=null!==tt?tt.memoizedProps:rt;tt=et.type;var ot=et.updateQueue;if(et.updateQueue=null,null!==ot){for(nt[vl]=rt,"input"===tt&&"radio"===rt.type&&null!=rt.name&&Bb(nt,rt),pd(tt,it),et=pd(tt,rt),it=0;it<ot.length;it+=2){var at=ot[it],st=ot[it+1];"style"===at?md(nt,st):"dangerouslySetInnerHTML"===at?ga(nt,st):"children"===at?Rb(nt,st):Xa(nt,at,st,et)}switch(tt){case"input":Cb(nt,rt);break;case"textarea":Kb(nt,rt);break;case"select":et=nt._wrapperState.wasMultiple,nt._wrapperState.wasMultiple=!!rt.multiple,null!=(tt=rt.value)?Hb(nt,!!rt.multiple,tt,!1):et!==!!rt.multiple&&(null!=rt.defaultValue?Hb(nt,!!rt.multiple,rt.defaultValue,!0):Hb(nt,!!rt.multiple,rt.multiple?[]:"",!1))}}}return;case 6:if(null===et.stateNode)throw Error(u(162));return void(et.stateNode.nodeValue=et.memoizedProps);case 3:return void((et=et.stateNode).hydrate&&(et.hydrate=!1,Vc(et.containerInfo)));case 12:return;case 13:if(nt=et,null===et.memoizedState?rt=!1:(rt=!0,nt=et.child,Nf=qp()),null!==nt)t:for(tt=nt;;){if(5===tt.tag)ot=tt.stateNode,rt?"function"==typeof(ot=ot.style).setProperty?ot.setProperty("display","none","important"):ot.display="none":(ot=tt.stateNode,it=null!=(it=tt.memoizedProps.style)&&it.hasOwnProperty("display")?it.display:null,ot.style.display=ld("display",it));else if(6===tt.tag)tt.stateNode.nodeValue=rt?"":tt.memoizedProps;else{if(13===tt.tag&&null!==tt.memoizedState&&null===tt.memoizedState.dehydrated){(ot=tt.child.sibling).return=tt,tt=ot;continue}if(null!==tt.child){tt.child.return=tt,tt=tt.child;continue}}if(tt===nt)break;for(;null===tt.sibling;){if(null===tt.return||tt.return===nt)break t;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}return void Ui(et);case 19:return void Ui(et);case 17:return}throw Error(u(163))}function Ui(tt){var et=tt.updateQueue;if(null!==et){tt.updateQueue=null;var nt=tt.stateNode;null===nt&&(nt=tt.stateNode=new df),et.forEach((function(et){var rt=Vi.bind(null,tt,et);nt.has(et)||(nt.add(et),et.then(rt,rt))}))}}var mf="function"==typeof WeakMap?WeakMap:Map;function Xi(tt,et,nt){(nt=wg(nt,null)).tag=3,nt.payload={element:null};var rt=et.value;return nt.callback=function(){Uf||(Uf=!0,Zf=rt),Ci(tt,et)},nt}function $i(tt,et,nt){(nt=wg(nt,null)).tag=3;var rt=tt.type.getDerivedStateFromError;if("function"==typeof rt){var it=et.value;nt.payload=function(){return Ci(tt,et),rt(it)}}var ot=tt.stateNode;return null!==ot&&"function"==typeof ot.componentDidCatch&&(nt.callback=function(){"function"!=typeof rt&&(null===qf?qf=new Set([this]):qf.add(this),Ci(tt,et));var nt=et.stack;this.componentDidCatch(et.value,{componentStack:null!==nt?nt:""})}),nt}var gf,yf=Math.ceil,vf=Wn.ReactCurrentDispatcher,_f=Wn.ReactCurrentOwner,xf=0,wf=3,Sf=4,Tf=0,Pf=null,kf=null,Lf=0,If=xf,Af=null,Mf=1073741823,zf=1073741823,Of=null,Rf=0,Bf=!1,Nf=0,Vf=null,Uf=!1,Zf=null,qf=null,Wf=!1,Xf=null,$f=90,Kf=null,Yf=0,Jf=null,Qf=0;function Gg(){return 0!=(48&Tf)?1073741821-(qp()/10|0):0!==Qf?Qf:Qf=1073741821-(qp()/10|0)}function Hg(tt,et,nt){if(0==(2&(et=et.mode)))return 1073741823;var rt=ag();if(0==(4&et))return 99===rt?1073741823:1073741822;if(0!=(16&Tf))return Lf;if(null!==nt)tt=hg(tt,0|nt.timeoutMs||5e3,250);else switch(rt){case 99:tt=1073741823;break;case 98:tt=hg(tt,150,100);break;case 97:case 96:tt=hg(tt,5e3,250);break;case 95:tt=2;break;default:throw Error(u(326))}return null!==Pf&&tt===Lf&&--tt,tt}function Ig(tt,et){if(50<Yf)throw Yf=0,Jf=null,Error(u(185));if(null!==(tt=xj(tt,et))){var nt=ag();1073741823===et?0!=(8&Tf)&&0==(48&Tf)?yj(tt):(Z(tt),0===Tf&&gg()):Z(tt),0==(4&Tf)||98!==nt&&99!==nt||(null===Kf?Kf=new Map([[tt,et]]):(void 0===(nt=Kf.get(tt))||nt>et)&&Kf.set(tt,et))}}function xj(tt,et){tt.expirationTime<et&&(tt.expirationTime=et);var nt=tt.alternate;null!==nt&&nt.expirationTime<et&&(nt.expirationTime=et);var rt=tt.return,it=null;if(null===rt&&3===tt.tag)it=tt.stateNode;else for(;null!==rt;){if(nt=rt.alternate,rt.childExpirationTime<et&&(rt.childExpirationTime=et),null!==nt&&nt.childExpirationTime<et&&(nt.childExpirationTime=et),null===rt.return&&3===rt.tag){it=rt.stateNode;break}rt=rt.return}return null!==it&&(Pf===it&&(Bg(et),If===Sf&&xi(it,Lf)),yi(it,et)),it}function zj(tt){var et=tt.lastExpiredTime;if(0!==et)return et;if(!Aj(tt,et=tt.firstPendingTime))return et;var nt=tt.lastPingedTime;return 2>=(tt=nt>(tt=tt.nextKnownPendingLevel)?nt:tt)&&et!==tt?0:tt}function Z(tt){if(0!==tt.lastExpiredTime)tt.callbackExpirationTime=1073741823,tt.callbackPriority=99,tt.callbackNode=eg(yj.bind(null,tt));else{var et=zj(tt),nt=tt.callbackNode;if(0===et)null!==nt&&(tt.callbackNode=null,tt.callbackExpirationTime=0,tt.callbackPriority=90);else{var rt=Gg();if(1073741823===et?rt=99:1===et||2===et?rt=95:rt=0>=(rt=10*(1073741821-et)-10*(1073741821-rt))?99:250>=rt?98:5250>=rt?97:95,null!==nt){var it=tt.callbackPriority;if(tt.callbackExpirationTime===et&&it>=rt)return;nt!==Bp&&kp(nt)}tt.callbackExpirationTime=et,tt.callbackPriority=rt,et=1073741823===et?eg(yj.bind(null,tt)):dg(rt,Bj.bind(null,tt),{timeout:10*(1073741821-et)-qp()}),tt.callbackNode=et}}}function Bj(tt,et){if(Qf=0,et)return Cj(tt,et=Gg()),Z(tt),null;var nt=zj(tt);if(0!==nt){if(et=tt.callbackNode,0!=(48&Tf))throw Error(u(327));if(Dj(),tt===Pf&&nt===Lf||Ej(tt,nt),null!==kf){var rt=Tf;Tf|=16;for(var it=Fj();;)try{Gj();break}catch(et){Hj(tt,et)}if(ng(),Tf=rt,vf.current=it,1===If)throw et=Af,Ej(tt,nt),xi(tt,nt),Z(tt),et;if(null===kf)switch(it=tt.finishedWork=tt.current.alternate,tt.finishedExpirationTime=nt,rt=If,Pf=null,rt){case xf:case 1:throw Error(u(345));case 2:Cj(tt,2<nt?2:nt);break;case wf:if(xi(tt,nt),nt===(rt=tt.lastSuspendedTime)&&(tt.nextKnownPendingLevel=Ij(it)),1073741823===Mf&&10<(it=Nf+500-qp())){if(Bf){var ot=tt.lastPingedTime;if(0===ot||ot>=nt){tt.lastPingedTime=nt,Ej(tt,nt);break}}if(0!==(ot=zj(tt))&&ot!==nt)break;if(0!==rt&&rt!==nt){tt.lastPingedTime=rt;break}tt.timeoutHandle=sl(Jj.bind(null,tt),it);break}Jj(tt);break;case Sf:if(xi(tt,nt),nt===(rt=tt.lastSuspendedTime)&&(tt.nextKnownPendingLevel=Ij(it)),Bf&&(0===(it=tt.lastPingedTime)||it>=nt)){tt.lastPingedTime=nt,Ej(tt,nt);break}if(0!==(it=zj(tt))&&it!==nt)break;if(0!==rt&&rt!==nt){tt.lastPingedTime=rt;break}if(1073741823!==zf?rt=10*(1073741821-zf)-qp():1073741823===Mf?rt=0:(rt=10*(1073741821-Mf)-5e3,0>(rt=(it=qp())-rt)&&(rt=0),(nt=10*(1073741821-nt)-it)<(rt=(120>rt?120:480>rt?480:1080>rt?1080:1920>rt?1920:3e3>rt?3e3:4320>rt?4320:1960*yf(rt/1960))-rt)&&(rt=nt)),10<rt){tt.timeoutHandle=sl(Jj.bind(null,tt),rt);break}Jj(tt);break;case 5:if(1073741823!==Mf&&null!==Of){ot=Mf;var at=Of;if(0>=(rt=0|at.busyMinDurationMs)?rt=0:(it=0|at.busyDelayMs,rt=(ot=qp()-(10*(1073741821-ot)-(0|at.timeoutMs||5e3)))<=it?0:it+rt-ot),10<rt){xi(tt,nt),tt.timeoutHandle=sl(Jj.bind(null,tt),rt);break}}Jj(tt);break;default:throw Error(u(329))}if(Z(tt),tt.callbackNode===et)return Bj.bind(null,tt)}}return null}function yj(tt){var et=tt.lastExpiredTime;if(et=0!==et?et:1073741823,0!=(48&Tf))throw Error(u(327));if(Dj(),tt===Pf&&et===Lf||Ej(tt,et),null!==kf){var nt=Tf;Tf|=16;for(var rt=Fj();;)try{Kj();break}catch(et){Hj(tt,et)}if(ng(),Tf=nt,vf.current=rt,1===If)throw nt=Af,Ej(tt,et),xi(tt,et),Z(tt),nt;if(null!==kf)throw Error(u(261));tt.finishedWork=tt.current.alternate,tt.finishedExpirationTime=et,Pf=null,Jj(tt),Z(tt)}return null}function Mj(tt,et){var nt=Tf;Tf|=1;try{return tt(et)}finally{0===(Tf=nt)&&gg()}}function Nj(tt,et){var nt=Tf;Tf&=-2,Tf|=8;try{return tt(et)}finally{0===(Tf=nt)&&gg()}}function Ej(tt,et){tt.finishedWork=null,tt.finishedExpirationTime=0;var nt=tt.timeoutHandle;if(-1!==nt&&(tt.timeoutHandle=-1,dl(nt)),null!==kf)for(nt=kf.return;null!==nt;){var rt=nt;switch(rt.tag){case 1:null!=(rt=rt.type.childContextTypes)&&Df();break;case 3:eh(),H(Ep),H(Sp);break;case 5:gh(rt);break;case 4:eh();break;case 13:case 19:H(_h);break;case 10:og(rt)}nt=nt.return}Pf=tt,kf=Sg(tt.current,null),Lf=et,If=xf,Af=null,zf=Mf=1073741823,Of=null,Rf=0,Bf=!1}function Hj(tt,et){for(;;){try{if(ng(),bh.current=Qh,Yh)for(var nt=Oh.memoizedState;null!==nt;){var rt=nt.queue;null!==rt&&(rt.pending=null),nt=nt.next}if(kh=0,qh=jh=Oh=null,Yh=!1,null===kf||null===kf.return)return If=1,Af=et,kf=null;t:{var it=tt,ot=kf.return,at=kf,st=et;if(et=Lf,at.effectTag|=2048,at.firstEffect=at.lastEffect=null,null!==st&&"object"==typeof st&&"function"==typeof st.then){var ct=st;if(0==(2&at.mode)){var pt=at.alternate;pt?(at.updateQueue=pt.updateQueue,at.memoizedState=pt.memoizedState,at.expirationTime=pt.expirationTime):(at.updateQueue=null,at.memoizedState=null)}var ft=0!=(1&_h.current),dt=ot;do{var mt;if(mt=13===dt.tag){var yt=dt.memoizedState;if(null!==yt)mt=null!==yt.dehydrated;else{var vt=dt.memoizedProps;mt=void 0!==vt.fallback&&(!0!==vt.unstable_avoidThisFallback||!ft)}}if(mt){var Dt=dt.updateQueue;if(null===Dt){var Ot=new Set;Ot.add(ct),dt.updateQueue=Ot}else Dt.add(ct);if(0==(2&dt.mode)){if(dt.effectTag|=64,at.effectTag&=-2981,1===at.tag)if(null===at.alternate)at.tag=17;else{var Rt=wg(1073741823,null);Rt.tag=2,xg(at,Rt)}at.expirationTime=1073741823;break t}st=void 0,at=et;var Bt=it.pingCache;if(null===Bt?(Bt=it.pingCache=new mf,st=new Set,Bt.set(ct,st)):void 0===(st=Bt.get(ct))&&(st=new Set,Bt.set(ct,st)),!st.has(at)){st.add(at);var Ne=Oj.bind(null,it,ct,at);ct.then(Ne,Ne)}dt.effectTag|=4096,dt.expirationTime=et;break t}dt=dt.return}while(null!==dt);st=Error((pb(at.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+qb(at))}5!==If&&(If=2),st=Ai(st,at),dt=ot;do{switch(dt.tag){case 3:ct=st,dt.effectTag|=4096,dt.expirationTime=et,yg(dt,Xi(dt,ct,et));break t;case 1:ct=st;var rn=dt.type,vn=dt.stateNode;if(0==(64&dt.effectTag)&&("function"==typeof rn.getDerivedStateFromError||null!==vn&&"function"==typeof vn.componentDidCatch&&(null===qf||!qf.has(vn)))){dt.effectTag|=4096,dt.expirationTime=et,yg(dt,$i(dt,ct,et));break t}}dt=dt.return}while(null!==dt)}kf=Pj(kf)}catch(tt){et=tt;continue}break}}function Fj(){var tt=vf.current;return vf.current=Qh,null===tt?Qh:tt}function Ag(tt,et){tt<Mf&&2<tt&&(Mf=tt),null!==et&&tt<zf&&2<tt&&(zf=tt,Of=et)}function Bg(tt){tt>Rf&&(Rf=tt)}function Kj(){for(;null!==kf;)kf=Qj(kf)}function Gj(){for(;null!==kf&&!Fp();)kf=Qj(kf)}function Qj(tt){var et=gf(tt.alternate,tt,Lf);return tt.memoizedProps=tt.pendingProps,null===et&&(et=Pj(tt)),_f.current=null,et}function Pj(tt){kf=tt;do{var et=kf.alternate;if(tt=kf.return,0==(2048&kf.effectTag)){if(et=si(et,kf,Lf),1===Lf||1!==kf.childExpirationTime){for(var nt=0,rt=kf.child;null!==rt;){var it=rt.expirationTime,ot=rt.childExpirationTime;it>nt&&(nt=it),ot>nt&&(nt=ot),rt=rt.sibling}kf.childExpirationTime=nt}if(null!==et)return et;null!==tt&&0==(2048&tt.effectTag)&&(null===tt.firstEffect&&(tt.firstEffect=kf.firstEffect),null!==kf.lastEffect&&(null!==tt.lastEffect&&(tt.lastEffect.nextEffect=kf.firstEffect),tt.lastEffect=kf.lastEffect),1<kf.effectTag&&(null!==tt.lastEffect?tt.lastEffect.nextEffect=kf:tt.firstEffect=kf,tt.lastEffect=kf))}else{if(null!==(et=zi(kf)))return et.effectTag&=2047,et;null!==tt&&(tt.firstEffect=tt.lastEffect=null,tt.effectTag|=2048)}if(null!==(et=kf.sibling))return et;kf=tt}while(null!==kf);return If===xf&&(If=5),null}function Ij(tt){var et=tt.expirationTime;return et>(tt=tt.childExpirationTime)?et:tt}function Jj(tt){var et=ag();return cg(99,Sj.bind(null,tt,et)),null}function Sj(tt,et){do{Dj()}while(null!==Xf);if(0!=(48&Tf))throw Error(u(327));var nt=tt.finishedWork,rt=tt.finishedExpirationTime;if(null===nt)return null;if(tt.finishedWork=null,tt.finishedExpirationTime=0,nt===tt.current)throw Error(u(177));tt.callbackNode=null,tt.callbackExpirationTime=0,tt.callbackPriority=90,tt.nextKnownPendingLevel=0;var it=Ij(nt);if(tt.firstPendingTime=it,rt<=tt.lastSuspendedTime?tt.firstSuspendedTime=tt.lastSuspendedTime=tt.nextKnownPendingLevel=0:rt<=tt.firstSuspendedTime&&(tt.firstSuspendedTime=rt-1),rt<=tt.lastPingedTime&&(tt.lastPingedTime=0),rt<=tt.lastExpiredTime&&(tt.lastExpiredTime=0),tt===Pf&&(kf=Pf=null,Lf=0),1<nt.effectTag?null!==nt.lastEffect?(nt.lastEffect.nextEffect=nt,it=nt.firstEffect):it=nt:it=nt.firstEffect,null!==it){var ot=Tf;Tf|=32,_f.current=null,tl=vu;var at=xd();if(yd(at)){if("selectionStart"in at)var st={start:at.selectionStart,end:at.selectionEnd};else t:{var ct=(st=(st=at.ownerDocument)&&st.defaultView||window).getSelection&&st.getSelection();if(ct&&0!==ct.rangeCount){st=ct.anchorNode;var pt=ct.anchorOffset,ft=ct.focusNode;ct=ct.focusOffset;try{st.nodeType,ft.nodeType}catch(tt){st=null;break t}var dt=0,mt=-1,yt=-1,vt=0,Dt=0,Ot=at,Rt=null;e:for(;;){for(var Bt;Ot!==st||0!==pt&&3!==Ot.nodeType||(mt=dt+pt),Ot!==ft||0!==ct&&3!==Ot.nodeType||(yt=dt+ct),3===Ot.nodeType&&(dt+=Ot.nodeValue.length),null!==(Bt=Ot.firstChild);)Rt=Ot,Ot=Bt;for(;;){if(Ot===at)break e;if(Rt===st&&++vt===pt&&(mt=dt),Rt===ft&&++Dt===ct&&(yt=dt),null!==(Bt=Ot.nextSibling))break;Rt=(Ot=Rt).parentNode}Ot=Bt}st=-1===mt||-1===yt?null:{start:mt,end:yt}}else st=null}st=st||{start:0,end:0}}else st=null;ol={activeElementDetached:null,focusedElem:at,selectionRange:st},vu=!1,Vf=it;do{try{Tj()}catch(tt){if(null===Vf)throw Error(u(330));Ei(Vf,tt),Vf=Vf.nextEffect}}while(null!==Vf);Vf=it;do{try{for(at=tt,st=et;null!==Vf;){var Ne=Vf.effectTag;if(16&Ne&&Rb(Vf.stateNode,""),128&Ne){var rn=Vf.alternate;if(null!==rn){var vn=rn.ref;null!==vn&&("function"==typeof vn?vn(null):vn.current=null)}}switch(1038&Ne){case 2:Pi(Vf),Vf.effectTag&=-3;break;case 6:Pi(Vf),Vf.effectTag&=-3,Si(Vf.alternate,Vf);break;case 1024:Vf.effectTag&=-1025;break;case 1028:Vf.effectTag&=-1025,Si(Vf.alternate,Vf);break;case 4:Si(Vf.alternate,Vf);break;case 8:Mi(at,pt=Vf,st),Ni(pt)}Vf=Vf.nextEffect}}catch(tt){if(null===Vf)throw Error(u(330));Ei(Vf,tt),Vf=Vf.nextEffect}}while(null!==Vf);if(vn=ol,rn=xd(),Ne=vn.focusedElem,st=vn.selectionRange,rn!==Ne&&Ne&&Ne.ownerDocument&&function wd(tt,et){return!(!tt||!et)&&(tt===et||(!tt||3!==tt.nodeType)&&(et&&3===et.nodeType?wd(tt,et.parentNode):"contains"in tt?tt.contains(et):!!tt.compareDocumentPosition&&!!(16&tt.compareDocumentPosition(et))))}(Ne.ownerDocument.documentElement,Ne)){null!==st&&yd(Ne)&&(rn=st.start,void 0===(vn=st.end)&&(vn=rn),"selectionStart"in Ne?(Ne.selectionStart=rn,Ne.selectionEnd=Math.min(vn,Ne.value.length)):(vn=(rn=Ne.ownerDocument||document)&&rn.defaultView||window).getSelection&&(vn=vn.getSelection(),pt=Ne.textContent.length,at=Math.min(st.start,pt),st=void 0===st.end?at:Math.min(st.end,pt),!vn.extend&&at>st&&(pt=st,st=at,at=pt),pt=vd(Ne,at),ft=vd(Ne,st),pt&&ft&&(1!==vn.rangeCount||vn.anchorNode!==pt.node||vn.anchorOffset!==pt.offset||vn.focusNode!==ft.node||vn.focusOffset!==ft.offset)&&((rn=rn.createRange()).setStart(pt.node,pt.offset),vn.removeAllRanges(),at>st?(vn.addRange(rn),vn.extend(ft.node,ft.offset)):(rn.setEnd(ft.node,ft.offset),vn.addRange(rn))))),rn=[];for(vn=Ne;vn=vn.parentNode;)1===vn.nodeType&&rn.push({element:vn,left:vn.scrollLeft,top:vn.scrollTop});for("function"==typeof Ne.focus&&Ne.focus(),Ne=0;Ne<rn.length;Ne++)(vn=rn[Ne]).element.scrollLeft=vn.left,vn.element.scrollTop=vn.top}vu=!!tl,ol=tl=null,tt.current=nt,Vf=it;do{try{for(Ne=tt;null!==Vf;){var bn=Vf.effectTag;if(36&bn&&Ji(Ne,Vf.alternate,Vf),128&bn){rn=void 0;var Tn=Vf.ref;if(null!==Tn){var Cn=Vf.stateNode;switch(Vf.tag){case 5:rn=Cn;break;default:rn=Cn}"function"==typeof Tn?Tn(rn):Tn.current=rn}}Vf=Vf.nextEffect}}catch(tt){if(null===Vf)throw Error(u(330));Ei(Vf,tt),Vf=Vf.nextEffect}}while(null!==Vf);Vf=null,Np(),Tf=ot}else tt.current=nt;if(Wf)Wf=!1,Xf=tt,$f=et;else for(Vf=it;null!==Vf;)et=Vf.nextEffect,Vf.nextEffect=null,Vf=et;if(0===(et=tt.firstPendingTime)&&(qf=null),1073741823===et?tt===Jf?Yf++:(Yf=0,Jf=tt):Yf=0,"function"==typeof ed&&ed(nt.stateNode,rt),Z(tt),Uf)throw Uf=!1,tt=Zf,Zf=null,tt;return 0!=(8&Tf)||gg(),null}function Tj(){for(;null!==Vf;){var tt=Vf.effectTag;0!=(256&tt)&&Gi(Vf.alternate,Vf),0==(512&tt)||Wf||(Wf=!0,dg(97,(function(){return Dj(),null}))),Vf=Vf.nextEffect}}function Dj(){if(90!==$f){var tt=97<$f?97:$f;return $f=90,cg(tt,Vj)}}function Vj(){if(null===Xf)return!1;var tt=Xf;if(Xf=null,0!=(48&Tf))throw Error(u(331));var et=Tf;for(Tf|=32,tt=tt.current.firstEffect;null!==tt;){try{var nt=tt;if(0!=(512&nt.effectTag))switch(nt.tag){case 0:case 11:case 15:case 22:Hi(5,nt),Ii(5,nt)}}catch(et){if(null===tt)throw Error(u(330));Ei(tt,et)}nt=tt.nextEffect,tt.nextEffect=null,tt=nt}return Tf=et,gg(),!0}function Wj(tt,et,nt){xg(tt,et=Xi(tt,et=Ai(nt,et),1073741823)),null!==(tt=xj(tt,1073741823))&&Z(tt)}function Ei(tt,et){if(3===tt.tag)Wj(tt,tt,et);else for(var nt=tt.return;null!==nt;){if(3===nt.tag){Wj(nt,tt,et);break}if(1===nt.tag){var rt=nt.stateNode;if("function"==typeof nt.type.getDerivedStateFromError||"function"==typeof rt.componentDidCatch&&(null===qf||!qf.has(rt))){xg(nt,tt=$i(nt,tt=Ai(et,tt),1073741823)),null!==(nt=xj(nt,1073741823))&&Z(nt);break}}nt=nt.return}}function Oj(tt,et,nt){var rt=tt.pingCache;null!==rt&&rt.delete(et),Pf===tt&&Lf===nt?If===Sf||If===wf&&1073741823===Mf&&qp()-Nf<500?Ej(tt,Lf):Bf=!0:Aj(tt,nt)&&(0!==(et=tt.lastPingedTime)&&et<nt||(tt.lastPingedTime=nt,Z(tt)))}function Vi(tt,et){var nt=tt.stateNode;null!==nt&&nt.delete(et),0===(et=0)&&(et=Hg(et=Gg(),tt,null)),null!==(tt=xj(tt,et))&&Z(tt)}gf=function(tt,et,nt){var rt=et.expirationTime;if(null!==tt){var it=et.pendingProps;if(tt.memoizedProps!==it||Ep.current)lf=!0;else{if(rt<nt){switch(lf=!1,et.tag){case 3:hi(et),Xh();break;case 5:if(fh(et),4&et.mode&&1!==nt&&it.hidden)return et.expirationTime=et.childExpirationTime=1,null;break;case 1:L(et.type)&&Gf(et);break;case 4:dh(et,et.stateNode.containerInfo);break;case 10:rt=et.memoizedProps.value,it=et.type._context,I(Hp,it._currentValue),it._currentValue=rt;break;case 13:if(null!==et.memoizedState)return 0!==(rt=et.child.childExpirationTime)&&rt>=nt?ji(tt,et,nt):(I(_h,1&_h.current),null!==(et=$h(tt,et,nt))?et.sibling:null);I(_h,1&_h.current);break;case 19:if(rt=et.childExpirationTime>=nt,0!=(64&tt.effectTag)){if(rt)return mi(tt,et,nt);et.effectTag|=64}if(null!==(it=et.memoizedState)&&(it.rendering=null,it.tail=null),I(_h,_h.current),!rt)return null}return $h(tt,et,nt)}lf=!1}}else lf=!1;switch(et.expirationTime=0,et.tag){case 2:if(rt=et.type,null!==tt&&(tt.alternate=null,et.alternate=null,et.effectTag|=2),tt=et.pendingProps,it=Cf(et,Sp.current),qg(et,nt),it=oh(null,et,rt,tt,it,nt),et.effectTag|=1,"object"==typeof it&&null!==it&&"function"==typeof it.render&&void 0===it.$$typeof){if(et.tag=1,et.memoizedState=null,et.updateQueue=null,L(rt)){var ot=!0;Gf(et)}else ot=!1;et.memoizedState=null!==it.state&&void 0!==it.state?it.state:null,ug(et);var at=rt.getDerivedStateFromProps;"function"==typeof at&&Fg(et,rt,at,tt),it.updater=Jp,et.stateNode=it,it._reactInternalFiber=et,Ng(et,rt,tt,nt),et=gi(null,et,rt,!0,ot,nt)}else et.tag=0,R(null,et,it,nt),et=et.child;return et;case 16:t:{if(it=et.elementType,null!==tt&&(tt.alternate=null,et.alternate=null,et.effectTag|=2),tt=et.pendingProps,function ob(tt){if(-1===tt._status){tt._status=0;var et=tt._ctor;et=et(),tt._result=et,et.then((function(et){0===tt._status&&(et=et.default,tt._status=1,tt._result=et)}),(function(et){0===tt._status&&(tt._status=2,tt._result=et)}))}}(it),1!==it._status)throw it._result;switch(it=it._result,et.type=it,ot=et.tag=function Xj(tt){if("function"==typeof tt)return bi(tt)?1:0;if(null!=tt){if((tt=tt.$$typeof)===po)return 11;if(tt===ta)return 14}return 2}(it),tt=ig(it,tt),ot){case 0:et=di(null,et,it,tt,nt);break t;case 1:et=fi(null,et,it,tt,nt);break t;case 11:et=Zh(null,et,it,tt,nt);break t;case 14:et=ai(null,et,it,ig(it.type,tt),rt,nt);break t}throw Error(u(306,it,""))}return et;case 0:return rt=et.type,it=et.pendingProps,di(tt,et,rt,it=et.elementType===rt?it:ig(rt,it),nt);case 1:return rt=et.type,it=et.pendingProps,fi(tt,et,rt,it=et.elementType===rt?it:ig(rt,it),nt);case 3:if(hi(et),rt=et.updateQueue,null===tt||null===rt)throw Error(u(282));if(rt=et.pendingProps,it=null!==(it=et.memoizedState)?it.element:null,vg(tt,et),zg(et,rt,null,nt),(rt=et.memoizedState.element)===it)Xh(),et=$h(tt,et,nt);else{if((it=et.stateNode.hydrate)&&(af=Jd(et.stateNode.containerInfo.firstChild),rf=et,it=sf=!0),it)for(nt=ah(et,null,rt,nt),et.child=nt;nt;)nt.effectTag=-3&nt.effectTag|1024,nt=nt.sibling;else R(tt,et,rt,nt),Xh();et=et.child}return et;case 5:return fh(et),null===tt&&Uh(et),rt=et.type,it=et.pendingProps,ot=null!==tt?tt.memoizedProps:null,at=it.children,Gd(rt,it)?at=null:null!==ot&&Gd(rt,ot)&&(et.effectTag|=16),ei(tt,et),4&et.mode&&1!==nt&&it.hidden?(et.expirationTime=et.childExpirationTime=1,et=null):(R(tt,et,at,nt),et=et.child),et;case 6:return null===tt&&Uh(et),null;case 13:return ji(tt,et,nt);case 4:return dh(et,et.stateNode.containerInfo),rt=et.pendingProps,null===tt?et.child=rh(et,null,rt,nt):R(tt,et,rt,nt),et.child;case 11:return rt=et.type,it=et.pendingProps,Zh(tt,et,rt,it=et.elementType===rt?it:ig(rt,it),nt);case 7:return R(tt,et,et.pendingProps,nt),et.child;case 8:case 12:return R(tt,et,et.pendingProps.children,nt),et.child;case 10:t:{rt=et.type._context,it=et.pendingProps,at=et.memoizedProps,ot=it.value;var st=et.type._context;if(I(Hp,st._currentValue),st._currentValue=ot,null!==at)if(st=at.value,0===(ot=Xc(st,ot)?0:0|("function"==typeof rt._calculateChangedBits?rt._calculateChangedBits(st,ot):1073741823))){if(at.children===it.children&&!Ep.current){et=$h(tt,et,nt);break t}}else for(null!==(st=et.child)&&(st.return=et);null!==st;){var ct=st.dependencies;if(null!==ct){at=st.child;for(var pt=ct.firstContext;null!==pt;){if(pt.context===rt&&0!=(pt.observedBits&ot)){1===st.tag&&((pt=wg(nt,null)).tag=2,xg(st,pt)),st.expirationTime<nt&&(st.expirationTime=nt),null!==(pt=st.alternate)&&pt.expirationTime<nt&&(pt.expirationTime=nt),pg(st.return,nt),ct.expirationTime<nt&&(ct.expirationTime=nt);break}pt=pt.next}}else at=10===st.tag&&st.type===et.type?null:st.child;if(null!==at)at.return=st;else for(at=st;null!==at;){if(at===et){at=null;break}if(null!==(st=at.sibling)){st.return=at.return,at=st;break}at=at.return}st=at}R(tt,et,it.children,nt),et=et.child}return et;case 9:return it=et.type,rt=(ot=et.pendingProps).children,qg(et,nt),rt=rt(it=sg(it,ot.unstable_observedBits)),et.effectTag|=1,R(tt,et,rt,nt),et.child;case 14:return ot=ig(it=et.type,et.pendingProps),ai(tt,et,it,ot=ig(it.type,ot),rt,nt);case 15:return ci(tt,et,et.type,et.pendingProps,rt,nt);case 17:return rt=et.type,it=et.pendingProps,it=et.elementType===rt?it:ig(rt,it),null!==tt&&(tt.alternate=null,et.alternate=null,et.effectTag|=2),et.tag=1,L(rt)?(tt=!0,Gf(et)):tt=!1,qg(et,nt),Lg(et,rt,it),Ng(et,rt,it,nt),gi(null,et,rt,!0,tt,nt);case 19:return mi(tt,et,nt)}throw Error(u(156,et.tag))};var ed=null,nd=null;function Zj(tt,et,nt,rt){this.tag=tt,this.key=nt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=et,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=rt,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sh(tt,et,nt,rt){return new Zj(tt,et,nt,rt)}function bi(tt){return!(!(tt=tt.prototype)||!tt.isReactComponent)}function Sg(tt,et){var nt=tt.alternate;return null===nt?((nt=Sh(tt.tag,et,tt.key,tt.mode)).elementType=tt.elementType,nt.type=tt.type,nt.stateNode=tt.stateNode,nt.alternate=tt,tt.alternate=nt):(nt.pendingProps=et,nt.effectTag=0,nt.nextEffect=null,nt.firstEffect=null,nt.lastEffect=null),nt.childExpirationTime=tt.childExpirationTime,nt.expirationTime=tt.expirationTime,nt.child=tt.child,nt.memoizedProps=tt.memoizedProps,nt.memoizedState=tt.memoizedState,nt.updateQueue=tt.updateQueue,et=tt.dependencies,nt.dependencies=null===et?null:{expirationTime:et.expirationTime,firstContext:et.firstContext,responders:et.responders},nt.sibling=tt.sibling,nt.index=tt.index,nt.ref=tt.ref,nt}function Ug(tt,et,nt,rt,it,ot){var at=2;if(rt=tt,"function"==typeof tt)bi(tt)&&(at=1);else if("string"==typeof tt)at=5;else t:switch(tt){case vr:return Wg(nt.children,it,ot,et);case uo:at=8,it|=7;break;case wr:at=8,it|=1;break;case Sr:return(tt=Sh(12,nt,et,8|it)).elementType=Sr,tt.type=Sr,tt.expirationTime=ot,tt;case vo:return(tt=Sh(13,nt,et,it)).type=vo,tt.elementType=vo,tt.expirationTime=ot,tt;case So:return(tt=Sh(19,nt,et,it)).elementType=So,tt.expirationTime=ot,tt;default:if("object"==typeof tt&&null!==tt)switch(tt.$$typeof){case ii:at=10;break t;case qi:at=9;break t;case po:at=11;break t;case ta:at=14;break t;case na:at=16,rt=null;break t;case ia:at=22;break t}throw Error(u(130,null==tt?tt:typeof tt,""))}return(et=Sh(at,nt,et,it)).elementType=tt,et.type=rt,et.expirationTime=ot,et}function Wg(tt,et,nt,rt){return(tt=Sh(7,tt,rt,et)).expirationTime=nt,tt}function Tg(tt,et,nt){return(tt=Sh(6,tt,null,et)).expirationTime=nt,tt}function Vg(tt,et,nt){return(et=Sh(4,null!==tt.children?tt.children:[],tt.key,et)).expirationTime=nt,et.stateNode={containerInfo:tt.containerInfo,pendingChildren:null,implementation:tt.implementation},et}function ak(tt,et,nt){this.tag=et,this.current=null,this.containerInfo=tt,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=nt,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Aj(tt,et){var nt=tt.firstSuspendedTime;return tt=tt.lastSuspendedTime,0!==nt&&nt>=et&&tt<=et}function xi(tt,et){var nt=tt.firstSuspendedTime,rt=tt.lastSuspendedTime;nt<et&&(tt.firstSuspendedTime=et),(rt>et||0===nt)&&(tt.lastSuspendedTime=et),et<=tt.lastPingedTime&&(tt.lastPingedTime=0),et<=tt.lastExpiredTime&&(tt.lastExpiredTime=0)}function yi(tt,et){et>tt.firstPendingTime&&(tt.firstPendingTime=et);var nt=tt.firstSuspendedTime;0!==nt&&(et>=nt?tt.firstSuspendedTime=tt.lastSuspendedTime=tt.nextKnownPendingLevel=0:et>=tt.lastSuspendedTime&&(tt.lastSuspendedTime=et+1),et>tt.nextKnownPendingLevel&&(tt.nextKnownPendingLevel=et))}function Cj(tt,et){var nt=tt.lastExpiredTime;(0===nt||nt>et)&&(tt.lastExpiredTime=et)}function bk(tt,et,nt,rt){var it=et.current,ot=Gg(),at=Kp.suspense;ot=Hg(ot,it,at);t:if(nt){e:{if(dc(nt=nt._reactInternalFiber)!==nt||1!==nt.tag)throw Error(u(170));var st=nt;do{switch(st.tag){case 3:st=st.stateNode.context;break e;case 1:if(L(st.type)){st=st.stateNode.__reactInternalMemoizedMergedChildContext;break e}}st=st.return}while(null!==st);throw Error(u(171))}if(1===nt.tag){var ct=nt.type;if(L(ct)){nt=Ff(nt,ct,st);break t}}nt=st}else nt=wp;return null===et.context?et.context=nt:et.pendingContext=nt,(et=wg(ot,at)).payload={element:tt},null!==(rt=void 0===rt?null:rt)&&(et.callback=rt),xg(it,et),Ig(it,ot),ot}function ck(tt){if(!(tt=tt.current).child)return null;switch(tt.child.tag){case 5:default:return tt.child.stateNode}}function dk(tt,et){null!==(tt=tt.memoizedState)&&null!==tt.dehydrated&&tt.retryTime<et&&(tt.retryTime=et)}function ek(tt,et){dk(tt,et),(tt=tt.alternate)&&dk(tt,et)}function fk(tt,et,nt){var rt=new ak(tt,et,nt=null!=nt&&!0===nt.hydrate),it=Sh(3,null,null,2===et?7:1===et?3:0);rt.current=it,it.stateNode=rt,ug(it),tt[_l]=rt.current,nt&&0!==et&&function Jc(tt,et){var nt=cc(et);Rs.forEach((function(tt){uc(tt,et,nt)})),Bs.forEach((function(tt){uc(tt,et,nt)}))}(0,9===tt.nodeType?tt:tt.ownerDocument),this._internalRoot=rt}function gk(tt){return!(!tt||1!==tt.nodeType&&9!==tt.nodeType&&11!==tt.nodeType&&(8!==tt.nodeType||" react-mount-point-unstable "!==tt.nodeValue))}function ik(tt,et,nt,rt,it){var ot=nt._reactRootContainer;if(ot){var at=ot._internalRoot;if("function"==typeof it){var st=it;it=function(){var tt=ck(at);st.call(tt)}}bk(et,at,tt,it)}else{if(ot=nt._reactRootContainer=function hk(tt,et){if(et||(et=!(!(et=tt?9===tt.nodeType?tt.documentElement:tt.firstChild:null)||1!==et.nodeType||!et.hasAttribute("data-reactroot"))),!et)for(var nt;nt=tt.lastChild;)tt.removeChild(nt);return new fk(tt,0,et?{hydrate:!0}:void 0)}(nt,rt),at=ot._internalRoot,"function"==typeof it){var ct=it;it=function(){var tt=ck(at);ct.call(tt)}}Nj((function(){bk(et,at,tt,it)}))}return ck(at)}function jk(tt,et,nt){var rt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:rr,key:null==rt?null:""+rt,children:tt,containerInfo:et,implementation:nt}}function kk(tt,et){var nt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!gk(et))throw Error(u(200));return jk(tt,et,null,nt)}fk.prototype.render=function(tt){bk(tt,this._internalRoot,null,null)},fk.prototype.unmount=function(){var tt=this._internalRoot,et=tt.containerInfo;bk(null,tt,null,(function(){et[_l]=null}))},vs=function(tt){if(13===tt.tag){var et=hg(Gg(),150,100);Ig(tt,et),ek(tt,et)}},xs=function(tt){13===tt.tag&&(Ig(tt,3),ek(tt,3))},Ss=function(tt){if(13===tt.tag){var et=Gg();Ig(tt,et=Hg(et,tt,null)),ek(tt,et)}},vn=function(tt,et,nt){switch(et){case"input":if(Cb(tt,nt),et=nt.name,"radio"===nt.type&&null!=et){for(nt=tt;nt.parentNode;)nt=nt.parentNode;for(nt=nt.querySelectorAll("input[name="+JSON.stringify(""+et)+'][type="radio"]'),et=0;et<nt.length;et++){var rt=nt[et];if(rt!==tt&&rt.form===tt.form){var it=Qd(rt);if(!it)throw Error(u(90));yb(rt),Cb(rt,it)}}}break;case"textarea":Kb(tt,nt);break;case"select":null!=(et=nt.value)&&Hb(tt,!!nt.multiple,et,!1)}},Fa=Mj,Ga=function(tt,et,nt,rt,it){var ot=Tf;Tf|=4;try{return cg(98,tt.bind(null,et,nt,rt,it))}finally{0===(Tf=ot)&&gg()}},Ha=function(){0==(49&Tf)&&(function Lj(){if(null!==Kf){var tt=Kf;Kf=null,tt.forEach((function(tt,et){Cj(et,tt),Z(et)})),gg()}}(),Dj())},Cn=function(tt,et){var nt=Tf;Tf|=2;try{return tt(et)}finally{0===(Tf=nt)&&gg()}};var cd,fd,dd={Events:[Nc,Pd,Qd,xa,Rt,Xd,function(tt){jc(tt,Wd)},Da,Ea,id,mc,Dj,{current:!1}]};fd=(cd={findFiberByHostInstance:tc,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}).findFiberByHostInstance,function Yj(tt){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var et=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(et.isDisabled||!et.supportsFiber)return!0;try{var nt=et.inject(tt);ed=function(tt){try{et.onCommitFiberRoot(nt,tt,void 0,64==(64&tt.current.effectTag))}catch(tt){}},nd=function(tt){try{et.onCommitFiberUnmount(nt,tt)}catch(tt){}}}catch(tt){}return!0}(it({},cd,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(tt){return null===(tt=hc(tt))?null:tt.stateNode},findFiberByHostInstance:function(tt){return fd?fd(tt):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dd,et.createPortal=kk,et.findDOMNode=function(tt){if(null==tt)return null;if(1===tt.nodeType)return tt;var et=tt._reactInternalFiber;if(void 0===et){if("function"==typeof tt.render)throw Error(u(188));throw Error(u(268,Object.keys(tt)))}return tt=null===(tt=hc(et))?null:tt.stateNode},et.flushSync=function(tt,et){if(0!=(48&Tf))throw Error(u(187));var nt=Tf;Tf|=1;try{return cg(99,tt.bind(null,et))}finally{Tf=nt,gg()}},et.hydrate=function(tt,et,nt){if(!gk(et))throw Error(u(200));return ik(null,tt,et,!0,nt)},et.render=function(tt,et,nt){if(!gk(et))throw Error(u(200));return ik(null,tt,et,!1,nt)},et.unmountComponentAtNode=function(tt){if(!gk(tt))throw Error(u(40));return!!tt._reactRootContainer&&(Nj((function(){ik(null,null,tt,!1,(function(){tt._reactRootContainer=null,tt[_l]=null}))})),!0)},et.unstable_batchedUpdates=Mj,et.unstable_createPortal=function(tt,et){return kk(tt,et,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},et.unstable_renderSubtreeIntoContainer=function(tt,et,nt,rt){if(!gk(nt))throw Error(u(200));if(null==tt||void 0===tt._reactInternalFiber)throw Error(u(38));return ik(tt,et,nt,!1,rt)},et.version="16.13.1"},function(tt,et,nt){"use strict";tt.exports=nt(100)},function(tt,et,nt){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt,it,ot,at,st;if("undefined"==typeof window||"function"!=typeof MessageChannel){var ct=null,pt=null,t=function(){if(null!==ct)try{var tt=et.unstable_now();ct(!0,tt),ct=null}catch(tt){throw setTimeout(t,0),tt}},ft=Date.now();et.unstable_now=function(){return Date.now()-ft},rt=function(tt){null!==ct?setTimeout(rt,0,tt):(ct=tt,setTimeout(t,0))},it=function(tt,et){pt=setTimeout(tt,et)},ot=function(){clearTimeout(pt)},at=function(){return!1},st=et.unstable_forceFrameRate=function(){}}else{var dt=window.performance,mt=window.Date,yt=window.setTimeout,vt=window.clearTimeout;if("undefined"!=typeof console){var Dt=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof Dt&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof dt&&"function"==typeof dt.now)et.unstable_now=function(){return dt.now()};else{var Ot=mt.now();et.unstable_now=function(){return mt.now()-Ot}}var Rt=!1,Bt=null,Ne=-1,rn=5,vn=0;at=function(){return et.unstable_now()>=vn},st=function(){},et.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):rn=0<tt?Math.floor(1e3/tt):5};var bn=new MessageChannel,Tn=bn.port2;bn.port1.onmessage=function(){if(null!==Bt){var tt=et.unstable_now();vn=tt+rn;try{Bt(!0,tt)?Tn.postMessage(null):(Rt=!1,Bt=null)}catch(tt){throw Tn.postMessage(null),tt}}else Rt=!1},rt=function(tt){Bt=tt,Rt||(Rt=!0,Tn.postMessage(null))},it=function(tt,nt){Ne=yt((function(){tt(et.unstable_now())}),nt)},ot=function(){vt(Ne),Ne=-1}}function J(tt,et){var nt=tt.length;tt.push(et);t:for(;;){var rt=nt-1>>>1,it=tt[rt];if(!(void 0!==it&&0<K(it,et)))break t;tt[rt]=et,tt[nt]=it,nt=rt}}function L(tt){return void 0===(tt=tt[0])?null:tt}function M(tt){var et=tt[0];if(void 0!==et){var nt=tt.pop();if(nt!==et){tt[0]=nt;t:for(var rt=0,it=tt.length;rt<it;){var ot=2*(rt+1)-1,at=tt[ot],st=ot+1,ct=tt[st];if(void 0!==at&&0>K(at,nt))void 0!==ct&&0>K(ct,at)?(tt[rt]=ct,tt[st]=nt,rt=st):(tt[rt]=at,tt[ot]=nt,rt=ot);else{if(!(void 0!==ct&&0>K(ct,nt)))break t;tt[rt]=ct,tt[st]=nt,rt=st}}}return et}return null}function K(tt,et){var nt=tt.sortIndex-et.sortIndex;return 0!==nt?nt:tt.id-et.id}var Cn=[],Ln=[],In=1,Mn=null,zn=3,Bn=!1,Fn=!1,Nn=!1;function V(tt){for(var et=L(Ln);null!==et;){if(null===et.callback)M(Ln);else{if(!(et.startTime<=tt))break;M(Ln),et.sortIndex=et.expirationTime,J(Cn,et)}et=L(Ln)}}function W(tt){if(Nn=!1,V(tt),!Fn)if(null!==L(Cn))Fn=!0,rt(X);else{var et=L(Ln);null!==et&&it(W,et.startTime-tt)}}function X(tt,nt){Fn=!1,Nn&&(Nn=!1,ot()),Bn=!0;var rt=zn;try{for(V(nt),Mn=L(Cn);null!==Mn&&(!(Mn.expirationTime>nt)||tt&&!at());){var st=Mn.callback;if(null!==st){Mn.callback=null,zn=Mn.priorityLevel;var ct=st(Mn.expirationTime<=nt);nt=et.unstable_now(),"function"==typeof ct?Mn.callback=ct:Mn===L(Cn)&&M(Cn),V(nt)}else M(Cn);Mn=L(Cn)}if(null!==Mn)var pt=!0;else{var ft=L(Ln);null!==ft&&it(W,ft.startTime-nt),pt=!1}return pt}finally{Mn=null,zn=rt,Bn=!1}}function Y(tt){switch(tt){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Vn=st;et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(tt){tt.callback=null},et.unstable_continueExecution=function(){Fn||Bn||(Fn=!0,rt(X))},et.unstable_getCurrentPriorityLevel=function(){return zn},et.unstable_getFirstCallbackNode=function(){return L(Cn)},et.unstable_next=function(tt){switch(zn){case 1:case 2:case 3:var et=3;break;default:et=zn}var nt=zn;zn=et;try{return tt()}finally{zn=nt}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=Vn,et.unstable_runWithPriority=function(tt,et){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var nt=zn;zn=tt;try{return et()}finally{zn=nt}},et.unstable_scheduleCallback=function(tt,nt,at){var st=et.unstable_now();if("object"==typeof at&&null!==at){var ct=at.delay;ct="number"==typeof ct&&0<ct?st+ct:st,at="number"==typeof at.timeout?at.timeout:Y(tt)}else at=Y(tt),ct=st;return tt={id:In++,callback:nt,priorityLevel:tt,startTime:ct,expirationTime:at=ct+at,sortIndex:-1},ct>st?(tt.sortIndex=ct,J(Ln,tt),null===L(Cn)&&tt===L(Ln)&&(Nn?ot():Nn=!0,it(W,ct-st))):(tt.sortIndex=at,J(Cn,tt),Fn||Bn||(Fn=!0,rt(X))),tt},et.unstable_shouldYield=function(){var tt=et.unstable_now();V(tt);var nt=L(Cn);return nt!==Mn&&null!==Mn&&null!==nt&&null!==nt.callback&&nt.startTime<=tt&&nt.expirationTime<Mn.expirationTime||at()},et.unstable_wrapCallback=function(tt){var et=zn;return function(){var nt=zn;zn=et;try{return tt.apply(this,arguments)}finally{zn=nt}}}},function(tt,et,nt){var rt=nt(40),it=nt(102);"string"==typeof(it=it.__esModule?it.default:it)&&(it=[[tt.i,it,""]]);var ot={insert:"head",singleton:!1},at=(rt(it,ot),it.locals?it.locals:{});tt.exports=at},function(tt,et,nt){(et=nt(41)(!1)).push([tt.i,"body {\n\tmargin: 0;\n\twidth: 100vw;\n}\n\n/* stylelint-disable */\n@media (--phablet) {\n\thtml {\n\t\tfont-size: 0.875rem;\n\t}\n}\n\nh1 {\n\tmargin: 0;\n\tfont-family: 'Nunito Sans', sans-serif;\n\tfont-weight: 600;\n\tfont-size: 2.125rem;\n\tline-height: 2.875rem;\n}\n\nh2 {\n\tmargin: 0;\n\tfont-family: 'Nunito Sans', sans-serif;\n\tfont-weight: 600;\n\tfont-size: 1.625rem;\n\tline-height: 2.1875rem;\n}\n\nh3 {\n\tmargin: 0;\n\tfont-family: 'Nunito Sans', sans-serif;\n\tfont-weight: 600;\n\tfont-size: 1.25rem;\n\tline-height: 1.6875rem;\n}\n\nh4 {\n\tdisplay: inline-block;\n\tmargin: 0;\n\tfont-family: 'Nunito Sans', sans-serif;\n\tfont-weight: 700;\n\tfont-size: 1rem;\n\tline-height: 1.375rem;\n}\n\nh5 {\n\tdisplay: inline-block;\n\tmargin: 0;\n\tfont-family: 'Nunito Sans', sans-serif;\n\tfont-weight: 600;\n\tfont-size: 1rem;\n\tline-height: 1.375rem;\n}\n\nh6 {\n\tdisplay: inline-block;\n\tmargin: 0;\n\tfont-family: 'Nunito Sans', sans-serif;\n\tfont-weight: 600;\n\tfont-size: 0.75rem;\n\tline-height: 0.9rem;\n}\n\nsmall {\n\tfont-family: 'Nunito Sans', sans-serif;\n\tfont-weight: 600;\n\tfont-size: 0.625rem;\n\tline-height: 0.875rem;\n}\n\np:not(:last-of-type) {\n\tmargin-bottom: 0.375rem;\n}\np {\n\tmargin-bottom: 0;\n\tmargin-top: 0;\n\t-webkit-margin-before: 0;\n\t-webkit-margin-after: 0;\n}\n\nstrong {\n\tfont-family: var(--font-extraBold);\n}\n\nhr {\n\tmargin: 0;\n\tborder: 0.03125rem solid var(--color-grey4);\n\tclear: both;\n}\n\n#styles_root-3WD {\n\twidth: 100%;\n\theight: 100%;\n}\n\nhtml {\n\tcolor: var(--color-base);\n\theight: 100%;\n\tfont-family: 'Nunito Sans', sans-serif;\n\tfont-weight: 600;\n}\nhtml,\nbody {\n\tposition: relative;\n\twidth: 100%;\n\tmargin: 0;\n\tpadding: 0;\n\tbackground-color: white;\n\tbox-sizing: border-box;\n\t-moz-osx-font-smoothing: grayscale; /* fixes bold fonts in firefox */\n\t-webkit-font-smoothing: antialiased;\n\t-moz-font-smoothing: antialiased;\n\t-o-font-smoothing: antialiased;\n\tline-height: 1;\n}\n\nbody {\n\tmin-width: 64rem;\n\tmin-height: 100%;\n\theight: auto;\n\toverflow: auto;\n\tfont-size: 0.875rem;\n\tline-height: 1.1875rem;\n}\n\na {\n\ttext-decoration: none;\n\tcolor: var(--color-customDark);\n}\n\na:hover,\na:focus {\n\ttext-decoration: underline;\n\tcolor: var(--color-customDark);\n}\n\n*,\n*:before,\n*:after {\n\tbox-sizing: border-box;\n}\n\n*:focus {\n\toutline: 0;\n}\n\n::-moz-selection {\n\tbackground: var(--color-customBackground); /* WebKit/Blink Browsers */\n}\n\n::selection {\n\tbackground: var(--color-customBackground); /* WebKit/Blink Browsers */\n}\n\nimg {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n\ninput,\ntextarea,\nbody,\ntext {\n\tcolor: var(--color-base);\n\tfont-family: 'Nunito Sans', sans-serif;\n\tfont-weight: 600;\n\tfont-weight: inherit;\n\ttext-rendering: geometricPrecision;\n}\n\nbutton,\nselect,\ntextarea,\ninput,\ntext {\n\tfont-family: inherit;\n\tfont-size: inherit;\n\tfont-weight: inherit;\n\tline-height: inherit;\n\ttext-rendering: geometricPrecision;\n}\n\npre {\n\tfont-family: inherit;\n}\n\n/* Typography resets */\ndiv,\ndl,\ndt,\ndd,\nul,\nol,\nli,\npre,\nform,\nth,\ntd {\n\tmargin: 0;\n\tpadding: 0;\n}\n\n/* Unordered Lists */\nul li {\n\tlist-style: none;\n}\n\n",""]),et.locals={root:"styles_root-3WD"},tt.exports=et},function(tt,et,nt){"use strict";var rt={}.propertyIsEnumerable,it=Object.getOwnPropertyDescriptor,ot=it&&!rt.call({1:2},1);et.f=ot?function propertyIsEnumerable(tt){var et=it(this,tt);return!!et&&et.enumerable}:rt},function(tt,et,nt){var rt=nt(15),it=nt(20),ot="".split;tt.exports=rt((function(){return!Object("z").propertyIsEnumerable(0)}))?function(tt){return"String"==it(tt)?ot.call(tt,""):Object(tt)}:Object},function(tt,et,nt){var rt=nt(7),it=nt(52),ot=rt.WeakMap;tt.exports="function"==typeof ot&&/native code/.test(it(ot))},function(tt,et,nt){var rt=nt(68),it=nt(69),ot=rt("keys");tt.exports=function(tt){return ot[tt]||(ot[tt]=it(tt))}},function(tt,et,nt){var rt=nt(16),it=nt(108),ot=nt(49),at=nt(43);tt.exports=function(tt,et){for(var nt=it(et),st=at.f,ct=ot.f,pt=0;pt<nt.length;pt++){var ft=nt[pt];rt(tt,ft)||st(tt,ft,ct(et,ft))}}},function(tt,et,nt){var rt=nt(9),it=nt(110),ot=nt(115),at=nt(1);tt.exports=rt("Reflect","ownKeys")||function ownKeys(tt){var et=it.f(at(tt)),nt=ot.f;return nt?et.concat(nt(tt)):et}},function(tt,et,nt){var rt=nt(7);tt.exports=rt},function(tt,et,nt){var rt=nt(111),it=nt(114).concat("length","prototype");et.f=Object.getOwnPropertyNames||function getOwnPropertyNames(tt){return rt(tt,it)}},function(tt,et,nt){var rt=nt(16),it=nt(50),ot=nt(112).indexOf,at=nt(70);tt.exports=function(tt,et){var nt,st=it(tt),ct=0,pt=[];for(nt in st)!rt(at,nt)&&rt(st,nt)&&pt.push(nt);for(;et.length>ct;)rt(st,nt=et[ct++])&&(~ot(pt,nt)||pt.push(nt));return pt}},function(tt,et,nt){var rt=nt(50),it=nt(53),ot=nt(113),createMethod=function(tt){return function(et,nt,at){var st,ct=rt(et),pt=it(ct.length),ft=ot(at,pt);if(tt&&nt!=nt){for(;pt>ft;)if((st=ct[ft++])!=st)return!0}else for(;pt>ft;ft++)if((tt||ft in ct)&&ct[ft]===nt)return tt||ft||0;return!tt&&-1}};tt.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(tt,et,nt){var rt=nt(45),it=Math.max,ot=Math.min;tt.exports=function(tt,et){var nt=rt(tt);return nt<0?it(nt+et,0):ot(nt,et)}},function(tt,et){tt.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(tt,et){et.f=Object.getOwnPropertySymbols},function(tt,et,nt){var rt=nt(7);tt.exports=rt.Promise},function(tt,et,nt){var rt=nt(44);tt.exports=function(tt,et,nt){for(var it in et)rt(tt,it,et[it],nt);return tt}},function(tt,et,nt){var rt=nt(43).f,it=nt(16),ot=nt(12)("toStringTag");tt.exports=function(tt,et,nt){tt&&!it(tt=nt?tt:tt.prototype,ot)&&rt(tt,ot,{configurable:!0,value:et})}},function(tt,et,nt){var rt=nt(72);tt.exports=rt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(tt,et,nt){"use strict";var rt=nt(9),it=nt(43),ot=nt(12),at=nt(22),st=ot("species");tt.exports=function(tt){var et=rt(tt),nt=it.f;at&&et&&!et[st]&&nt(et,st,{configurable:!0,get:function(){return this}})}},function(tt,et){tt.exports=function(tt,et,nt){if(!(tt instanceof et))throw TypeError("Incorrect "+(nt?nt+" ":"")+"invocation");return tt}},function(tt,et,nt){var rt=nt(12),it=nt(73),ot=rt("iterator"),at=Array.prototype;tt.exports=function(tt){return void 0!==tt&&(it.Array===tt||at[ot]===tt)}},function(tt,et,nt){var rt=nt(124),it=nt(20),ot=nt(12)("toStringTag"),at="Arguments"==it(function(){return arguments}());tt.exports=rt?it:function(tt){var et,nt,rt;return void 0===tt?"Undefined":null===tt?"Null":"string"==typeof(nt=function(tt,et){try{return tt[et]}catch(tt){}}(et=Object(tt),ot))?nt:at?it(et):"Object"==(rt=it(et))&&"function"==typeof et.callee?"Arguments":rt}},function(tt,et,nt){var rt={};rt[nt(12)("toStringTag")]="z",tt.exports="[object z]"===String(rt)},function(tt,et,nt){var rt=nt(1);tt.exports=function(tt,et,nt,it){try{return it?et(rt(nt)[0],nt[1]):et(nt)}catch(et){var ot=tt.return;throw void 0!==ot&&rt(ot.call(tt)),et}}},function(tt,et,nt){var rt=nt(12)("iterator"),it=!1;try{var ot=0,at={next:function(){return{done:!!ot++}},return:function(){it=!0}};at[rt]=function(){return this},Array.from(at,(function(){throw 2}))}catch(tt){}tt.exports=function(tt,et){if(!et&&!it)return!1;var nt=!1;try{var ot={};ot[rt]=function(){return{next:function(){return{done:nt=!0}}}},tt(ot)}catch(tt){}return nt}},function(tt,et,nt){var rt=nt(9);tt.exports=rt("document","documentElement")},function(tt,et,nt){var rt,it,ot,at,st,ct,pt,ft,dt=nt(7),mt=nt(49).f,yt=nt(20),vt=nt(75).set,Dt=nt(76),Ot=dt.MutationObserver||dt.WebKitMutationObserver,Rt=dt.process,Bt=dt.Promise,Ne="process"==yt(Rt),rn=mt(dt,"queueMicrotask"),vn=rn&&rn.value;vn||(rt=function(){var tt,et;for(Ne&&(tt=Rt.domain)&&tt.exit();it;){et=it.fn,it=it.next;try{et()}catch(tt){throw it?at():ot=void 0,tt}}ot=void 0,tt&&tt.enter()},Ne?at=function(){Rt.nextTick(rt)}:Ot&&!Dt?(st=!0,ct=document.createTextNode(""),new Ot(rt).observe(ct,{characterData:!0}),at=function(){ct.data=st=!st}):Bt&&Bt.resolve?(pt=Bt.resolve(void 0),ft=pt.then,at=function(){ft.call(pt,rt)}):at=function(){vt.call(dt,rt)}),tt.exports=vn||function(tt){var et={fn:tt,next:void 0};ot&&(ot.next=et),it||(it=et,at()),ot=et}},function(tt,et,nt){var rt=nt(1),it=nt(21),ot=nt(78);tt.exports=function(tt,et){if(rt(tt),it(et)&&et.constructor===tt)return et;var nt=ot.f(tt);return(0,nt.resolve)(et),nt.promise}},function(tt,et,nt){var rt=nt(7);tt.exports=function(tt,et){var nt=rt.console;nt&&nt.error&&(1===arguments.length?nt.error(tt):nt.error(tt,et))}},function(tt,et){tt.exports=function(tt){try{return{error:!1,value:tt()}}catch(tt){return{error:!0,value:tt}}}},function(tt,et,nt){var rt,it,ot=nt(7),at=nt(77),st=ot.process,ct=st&&st.versions,pt=ct&&ct.v8;pt?it=(rt=pt.split("."))[0]+rt[1]:at&&(!(rt=at.match(/Edge\/(\d+)/))||rt[1]>=74)&&(rt=at.match(/Chrome\/(\d+)/))&&(it=rt[1]),tt.exports=it&&+it},function(tt,et,nt){"use strict";var rt=nt(134),it=nt(1),ot=nt(138),at=nt(53),st=nt(45),ct=nt(42),pt=nt(139),ft=nt(141),dt=Math.max,mt=Math.min,yt=Math.floor,vt=/\$([$&'`]|\d\d?|<[^>]*>)/g,Dt=/\$([$&'`]|\d\d?)/g;rt("replace",2,(function(tt,et,nt,rt){var Ot=rt.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Rt=rt.REPLACE_KEEPS_$0,Bt=Ot?"$":"$0";return[function replace(nt,rt){var it=ct(this),ot=null==nt?void 0:nt[tt];return void 0!==ot?ot.call(nt,it,rt):et.call(String(it),nt,rt)},function(tt,rt){if(!Ot&&Rt||"string"==typeof rt&&-1===rt.indexOf(Bt)){var ot=nt(et,tt,this,rt);if(ot.done)return ot.value}var ct=it(tt),yt=String(this),vt="function"==typeof rt;vt||(rt=String(rt));var Dt=ct.global;if(Dt){var Ne=ct.unicode;ct.lastIndex=0}for(var rn=[];;){var vn=ft(ct,yt);if(null===vn)break;if(rn.push(vn),!Dt)break;""===String(vn[0])&&(ct.lastIndex=pt(yt,at(ct.lastIndex),Ne))}for(var bn,Tn="",Cn=0,Ln=0;Ln<rn.length;Ln++){vn=rn[Ln];for(var In=String(vn[0]),Mn=dt(mt(st(vn.index),yt.length),0),zn=[],Bn=1;Bn<vn.length;Bn++)zn.push(void 0===(bn=vn[Bn])?bn:String(bn));var Fn=vn.groups;if(vt){var Nn=[In].concat(zn,Mn,yt);void 0!==Fn&&Nn.push(Fn);var Vn=String(rt.apply(void 0,Nn))}else Vn=getSubstitution(In,yt,Mn,zn,Fn,rt);Mn>=Cn&&(Tn+=yt.slice(Cn,Mn)+Vn,Cn=Mn+In.length)}return Tn+yt.slice(Cn)}];function getSubstitution(tt,nt,rt,it,at,st){var ct=rt+tt.length,pt=it.length,ft=Dt;return void 0!==at&&(at=ot(at),ft=vt),et.call(st,ft,(function(et,ot){var st;switch(ot.charAt(0)){case"$":return"$";case"&":return tt;case"`":return nt.slice(0,rt);case"'":return nt.slice(ct);case"<":st=at[ot.slice(1,-1)];break;default:var ft=+ot;if(0===ft)return et;if(ft>pt){var dt=yt(ft/10);return 0===dt?et:dt<=pt?void 0===it[dt-1]?ot.charAt(1):it[dt-1]+ot.charAt(1):et}st=it[ft-1]}return void 0===st?"":st}))}}))},function(tt,et,nt){"use strict";nt(135);var rt=nt(44),it=nt(15),ot=nt(12),at=nt(54),st=nt(23),ct=ot("species"),pt=!it((function(){var tt=/./;return tt.exec=function(){var tt=[];return tt.groups={a:"7"},tt},"7"!=="".replace(tt,"$<a>")})),ft="$0"==="a".replace(/./,"$0"),dt=ot("replace"),mt=!!/./[dt]&&""===/./[dt]("a","$0"),yt=!it((function(){var tt=/(?:)/,et=tt.exec;tt.exec=function(){return et.apply(this,arguments)};var nt="ab".split(tt);return 2!==nt.length||"a"!==nt[0]||"b"!==nt[1]}));tt.exports=function(tt,et,nt,dt){var vt=ot(tt),Dt=!it((function(){var et={};return et[vt]=function(){return 7},7!=""[tt](et)})),Ot=Dt&&!it((function(){var et=!1,nt=/a/;return"split"===tt&&((nt={}).constructor={},nt.constructor[ct]=function(){return nt},nt.flags="",nt[vt]=/./[vt]),nt.exec=function(){return et=!0,null},nt[vt](""),!et}));if(!Dt||!Ot||"replace"===tt&&(!pt||!ft||mt)||"split"===tt&&!yt){var Rt=/./[vt],Bt=nt(vt,""[tt],(function(tt,et,nt,rt,it){return et.exec===at?Dt&&!it?{done:!0,value:Rt.call(et,nt,rt)}:{done:!0,value:tt.call(nt,et,rt)}:{done:!1}}),{REPLACE_KEEPS_$0:ft,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:mt}),Ne=Bt[0],rn=Bt[1];rt(String.prototype,tt,Ne),rt(RegExp.prototype,vt,2==et?function(tt,et){return rn.call(tt,this,et)}:function(tt){return rn.call(tt,this)})}dt&&st(RegExp.prototype[vt],"sham",!0)}},function(tt,et,nt){"use strict";var rt=nt(3),it=nt(54);rt({target:"RegExp",proto:!0,forced:/./.exec!==it},{exec:it})},function(tt,et,nt){"use strict";var rt=nt(1);tt.exports=function(){var tt=rt(this),et="";return tt.global&&(et+="g"),tt.ignoreCase&&(et+="i"),tt.multiline&&(et+="m"),tt.dotAll&&(et+="s"),tt.unicode&&(et+="u"),tt.sticky&&(et+="y"),et}},function(tt,et,nt){"use strict";var rt=nt(15);function RE(tt,et){return RegExp(tt,et)}et.UNSUPPORTED_Y=rt((function(){var tt=RE("a","y");return tt.lastIndex=2,null!=tt.exec("abcd")})),et.BROKEN_CARET=rt((function(){var tt=RE("^r","gy");return tt.lastIndex=2,null!=tt.exec("str")}))},function(tt,et,nt){var rt=nt(42);tt.exports=function(tt){return Object(rt(tt))}},function(tt,et,nt){"use strict";var rt=nt(140).charAt;tt.exports=function(tt,et,nt){return et+(nt?rt(tt,et).length:1)}},function(tt,et,nt){var rt=nt(45),it=nt(42),createMethod=function(tt){return function(et,nt){var ot,at,st=String(it(et)),ct=rt(nt),pt=st.length;return ct<0||ct>=pt?tt?"":void 0:(ot=st.charCodeAt(ct))<55296||ot>56319||ct+1===pt||(at=st.charCodeAt(ct+1))<56320||at>57343?tt?st.charAt(ct):ot:tt?st.slice(ct,ct+2):at-56320+(ot-55296<<10)+65536}};tt.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},function(tt,et,nt){var rt=nt(20),it=nt(54);tt.exports=function(tt,et){var nt=tt.exec;if("function"==typeof nt){var ot=nt.call(tt,et);if("object"!=typeof ot)throw TypeError("RegExp exec method returned something other than an Object or null");return ot}if("RegExp"!==rt(tt))throw TypeError("RegExp#exec called on incompatible receiver");return it.call(tt,et)}},function(tt,et,nt){"use strict";var rt=nt(1),it=nt(5);tt.exports=function(){for(var tt=rt(this),et=it(tt.add),nt=0,ot=arguments.length;nt<ot;nt++)et.call(tt,arguments[nt]);return tt}},function(tt,et,nt){(et=nt(41)(!1)).push([tt.i,".styles_appWrapper-36G{\n    display: flex;\n    height: 100%;\n}\n\n\n",""]),et.locals={appWrapper:"styles_appWrapper-36G"},tt.exports=et},function(tt,et,nt){(et=nt(41)(!1)).push([tt.i,".styles_sideBarWrapper-ars{\n    width: 31.25rem;\n    overflow: auto;\n    padding: 1.875rem;\n    border-radius: 0 0.1875rem 0.1875rem 0;\n}\n\n.styles_bodyWrapper-2cj{\n    margin-top: 1.25rem;\n}\n\n.styles_vectorFiltersWrapper-2az{\n    margin-top: 1.25rem;\n}\n\n.styles_sectionWrapper-EPe{\n    margin-top: 1.25rem;\n}\n.styles_sectionHeader-joQ{\n    font-weight: bold;\n    margin-bottom: 0.625rem;\n}\n\n.styles_vectorName-1o2{\n    font-weight: bold;\n    margin-bottom: 0.625rem;\n}\n\n.styles_filterWrapper-1M7{\n    border: 0.0625rem solid hsl(0, 0%, 80%);\n    border-radius: 0.1875rem;\n    margin-top: 0.625rem;\n    padding: 1.25rem;\n}\n\n.styles_filter-3N0{\n    margin-top: 0.625rem;\n}\n\n.styles_filterName-3Ch{\n    font-style: italic;\n    margin-bottom: 0.3125rem;\n}\n\n.styles_empty-2GV{\n    font-style: italic;\n    color: hsl(0, 0%, 60%);\n}\n\n.styles_groupWrapper-1hP{\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.styles_groupBadge-2eI {\n    background-color: #EBECF0;\n    border-radius: 2em;\n    color: #172B4D;\n    display: inline-block;\n    font-size: 12;\n    font-weight: normal;\n    line-height: 1;\n    min-width: 1;\n    padding: 0.16666666666667em 0.5em;\n    text-align: center;\n}",""]),et.locals={sideBarWrapper:"styles_sideBarWrapper-ars",bodyWrapper:"styles_bodyWrapper-2cj",vectorFiltersWrapper:"styles_vectorFiltersWrapper-2az",sectionWrapper:"styles_sectionWrapper-EPe",sectionHeader:"styles_sectionHeader-joQ",vectorName:"styles_vectorName-1o2",filterWrapper:"styles_filterWrapper-1M7",filter:"styles_filter-3N0",filterName:"styles_filterName-3Ch",empty:"styles_empty-2GV",groupWrapper:"styles_groupWrapper-1hP",groupBadge:"styles_groupBadge-2eI"},tt.exports=et},function(tt,et,nt){"use strict";var rt=nt(146);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,tt.exports=function(){function shim(tt,et,nt,it,ot,at){if(at!==rt){var st=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw st.name="Invariant Violation",st}}function getShim(){return shim}shim.isRequired=shim;var tt={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return tt.PropTypes=tt,tt}},function(tt,et,nt){"use strict";tt.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(tt,et){tt.exports=function(tt,et){return tt===et||tt!=tt&&et!=et}},function(tt,et,nt){
/* @preserve
 * Leaflet 1.6.0, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(tt){"use strict";var et=Object.freeze;function extend(tt){var et,nt,rt,it;for(nt=1,rt=arguments.length;nt<rt;nt++)for(et in it=arguments[nt])tt[et]=it[et];return tt}Object.freeze=function(tt){return tt};var nt=Object.create||function(){function F(){}return function(tt){return F.prototype=tt,new F}}();function bind(tt,et){var nt=Array.prototype.slice;if(tt.bind)return tt.bind.apply(tt,nt.call(arguments,1));var rt=nt.call(arguments,2);return function(){return tt.apply(et,rt.length?rt.concat(nt.call(arguments)):arguments)}}var rt=0;function stamp(tt){return tt._leaflet_id=tt._leaflet_id||++rt,tt._leaflet_id}function throttle(tt,et,nt){var rt,it,ot,at;return at=function(){rt=!1,it&&(ot.apply(nt,it),it=!1)},ot=function(){rt?it=arguments:(tt.apply(nt,arguments),setTimeout(at,et),rt=!0)}}function wrapNum(tt,et,nt){var rt=et[1],it=et[0],ot=rt-it;return tt===rt&&nt?tt:((tt-it)%ot+ot)%ot+it}function falseFn(){return!1}function formatNum(tt,et){var nt=Math.pow(10,void 0===et?6:et);return Math.round(tt*nt)/nt}function trim(tt){return tt.trim?tt.trim():tt.replace(/^\s+|\s+$/g,"")}function splitWords(tt){return trim(tt).split(/\s+/)}function setOptions(tt,et){for(var rt in tt.hasOwnProperty("options")||(tt.options=tt.options?nt(tt.options):{}),et)tt.options[rt]=et[rt];return tt.options}function getParamString(tt,et,nt){var rt=[];for(var it in tt)rt.push(encodeURIComponent(nt?it.toUpperCase():it)+"="+encodeURIComponent(tt[it]));return(et&&-1!==et.indexOf("?")?"&":"?")+rt.join("&")}var it=/\{ *([\w_-]+) *\}/g;function template(tt,et){return tt.replace(it,(function(tt,nt){var rt=et[nt];if(void 0===rt)throw new Error("No value provided for variable "+tt);return"function"==typeof rt&&(rt=rt(et)),rt}))}var ot=Array.isArray||function(tt){return"[object Array]"===Object.prototype.toString.call(tt)};function indexOf(tt,et){for(var nt=0;nt<tt.length;nt++)if(tt[nt]===et)return nt;return-1}var at="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function getPrefixed(tt){return window["webkit"+tt]||window["moz"+tt]||window["ms"+tt]}var st=0;function timeoutDefer(tt){var et=+new Date,nt=Math.max(0,16-(et-st));return st=et+nt,window.setTimeout(tt,nt)}var ct=window.requestAnimationFrame||getPrefixed("RequestAnimationFrame")||timeoutDefer,pt=window.cancelAnimationFrame||getPrefixed("CancelAnimationFrame")||getPrefixed("CancelRequestAnimationFrame")||function(tt){window.clearTimeout(tt)};function requestAnimFrame(tt,et,nt){if(!nt||ct!==timeoutDefer)return ct.call(window,bind(tt,et));tt.call(et)}function cancelAnimFrame(tt){tt&&pt.call(window,tt)}var ft=(Object.freeze||Object)({freeze:et,extend:extend,create:nt,bind:bind,lastId:rt,stamp:stamp,throttle:throttle,wrapNum:wrapNum,falseFn:falseFn,formatNum:formatNum,trim:trim,splitWords:splitWords,setOptions:setOptions,getParamString:getParamString,template:template,isArray:ot,indexOf:indexOf,emptyImageUrl:at,requestFn:ct,cancelFn:pt,requestAnimFrame:requestAnimFrame,cancelAnimFrame:cancelAnimFrame});function Class(){}Class.extend=function(tt){var NewClass=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},et=NewClass.__super__=this.prototype,rt=nt(et);for(var it in rt.constructor=NewClass,NewClass.prototype=rt,this)this.hasOwnProperty(it)&&"prototype"!==it&&"__super__"!==it&&(NewClass[it]=this[it]);return tt.statics&&(extend(NewClass,tt.statics),delete tt.statics),tt.includes&&(function checkDeprecatedMixinEvents(tt){if("undefined"!=typeof L&&L&&L.Mixin){tt=ot(tt)?tt:[tt];for(var et=0;et<tt.length;et++)tt[et]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(tt.includes),extend.apply(null,[rt].concat(tt.includes)),delete tt.includes),rt.options&&(tt.options=extend(nt(rt.options),tt.options)),extend(rt,tt),rt._initHooks=[],rt.callInitHooks=function(){if(!this._initHooksCalled){et.callInitHooks&&et.callInitHooks.call(this),this._initHooksCalled=!0;for(var tt=0,nt=rt._initHooks.length;tt<nt;tt++)rt._initHooks[tt].call(this)}},NewClass},Class.include=function(tt){return extend(this.prototype,tt),this},Class.mergeOptions=function(tt){return extend(this.prototype.options,tt),this},Class.addInitHook=function(tt){var et=Array.prototype.slice.call(arguments,1),nt="function"==typeof tt?tt:function(){this[tt].apply(this,et)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(nt),this};var dt={on:function(tt,et,nt){if("object"==typeof tt)for(var rt in tt)this._on(rt,tt[rt],et);else for(var it=0,ot=(tt=splitWords(tt)).length;it<ot;it++)this._on(tt[it],et,nt);return this},off:function(tt,et,nt){if(tt)if("object"==typeof tt)for(var rt in tt)this._off(rt,tt[rt],et);else for(var it=0,ot=(tt=splitWords(tt)).length;it<ot;it++)this._off(tt[it],et,nt);else delete this._events;return this},_on:function(tt,et,nt){this._events=this._events||{};var rt=this._events[tt];rt||(rt=[],this._events[tt]=rt),nt===this&&(nt=void 0);for(var it={fn:et,ctx:nt},ot=rt,at=0,st=ot.length;at<st;at++)if(ot[at].fn===et&&ot[at].ctx===nt)return;ot.push(it)},_off:function(tt,et,nt){var rt,it,ot;if(this._events&&(rt=this._events[tt]))if(et){if(nt===this&&(nt=void 0),rt)for(it=0,ot=rt.length;it<ot;it++){var at=rt[it];if(at.ctx===nt&&at.fn===et)return at.fn=falseFn,this._firingCount&&(this._events[tt]=rt=rt.slice()),void rt.splice(it,1)}}else{for(it=0,ot=rt.length;it<ot;it++)rt[it].fn=falseFn;delete this._events[tt]}},fire:function(tt,et,nt){if(!this.listens(tt,nt))return this;var rt=extend({},et,{type:tt,target:this,sourceTarget:et&&et.sourceTarget||this});if(this._events){var it=this._events[tt];if(it){this._firingCount=this._firingCount+1||1;for(var ot=0,at=it.length;ot<at;ot++){var st=it[ot];st.fn.call(st.ctx||this,rt)}this._firingCount--}}return nt&&this._propagateEvent(rt),this},listens:function(tt,et){var nt=this._events&&this._events[tt];if(nt&&nt.length)return!0;if(et)for(var rt in this._eventParents)if(this._eventParents[rt].listens(tt,et))return!0;return!1},once:function(tt,et,nt){if("object"==typeof tt){for(var rt in tt)this.once(rt,tt[rt],et);return this}var it=bind((function(){this.off(tt,et,nt).off(tt,it,nt)}),this);return this.on(tt,et,nt).on(tt,it,nt)},addEventParent:function(tt){return this._eventParents=this._eventParents||{},this._eventParents[stamp(tt)]=tt,this},removeEventParent:function(tt){return this._eventParents&&delete this._eventParents[stamp(tt)],this},_propagateEvent:function(tt){for(var et in this._eventParents)this._eventParents[et].fire(tt.type,extend({layer:tt.target,propagatedFrom:tt.target},tt),!0)}};dt.addEventListener=dt.on,dt.removeEventListener=dt.clearAllEventListeners=dt.off,dt.addOneTimeEventListener=dt.once,dt.fireEvent=dt.fire,dt.hasEventListeners=dt.listens;var mt=Class.extend(dt);function Point(tt,et,nt){this.x=nt?Math.round(tt):tt,this.y=nt?Math.round(et):et}var yt=Math.trunc||function(tt){return tt>0?Math.floor(tt):Math.ceil(tt)};function toPoint(tt,et,nt){return tt instanceof Point?tt:ot(tt)?new Point(tt[0],tt[1]):null==tt?tt:"object"==typeof tt&&"x"in tt&&"y"in tt?new Point(tt.x,tt.y):new Point(tt,et,nt)}function Bounds(tt,et){if(tt)for(var nt=et?[tt,et]:tt,rt=0,it=nt.length;rt<it;rt++)this.extend(nt[rt])}function toBounds(tt,et){return!tt||tt instanceof Bounds?tt:new Bounds(tt,et)}function LatLngBounds(tt,et){if(tt)for(var nt=et?[tt,et]:tt,rt=0,it=nt.length;rt<it;rt++)this.extend(nt[rt])}function toLatLngBounds(tt,et){return tt instanceof LatLngBounds?tt:new LatLngBounds(tt,et)}function LatLng(tt,et,nt){if(isNaN(tt)||isNaN(et))throw new Error("Invalid LatLng object: ("+tt+", "+et+")");this.lat=+tt,this.lng=+et,void 0!==nt&&(this.alt=+nt)}function toLatLng(tt,et,nt){return tt instanceof LatLng?tt:ot(tt)&&"object"!=typeof tt[0]?3===tt.length?new LatLng(tt[0],tt[1],tt[2]):2===tt.length?new LatLng(tt[0],tt[1]):null:null==tt?tt:"object"==typeof tt&&"lat"in tt?new LatLng(tt.lat,"lng"in tt?tt.lng:tt.lon,tt.alt):void 0===et?null:new LatLng(tt,et,nt)}Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(tt){return this.clone()._add(toPoint(tt))},_add:function(tt){return this.x+=tt.x,this.y+=tt.y,this},subtract:function(tt){return this.clone()._subtract(toPoint(tt))},_subtract:function(tt){return this.x-=tt.x,this.y-=tt.y,this},divideBy:function(tt){return this.clone()._divideBy(tt)},_divideBy:function(tt){return this.x/=tt,this.y/=tt,this},multiplyBy:function(tt){return this.clone()._multiplyBy(tt)},_multiplyBy:function(tt){return this.x*=tt,this.y*=tt,this},scaleBy:function(tt){return new Point(this.x*tt.x,this.y*tt.y)},unscaleBy:function(tt){return new Point(this.x/tt.x,this.y/tt.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=yt(this.x),this.y=yt(this.y),this},distanceTo:function(tt){var et=(tt=toPoint(tt)).x-this.x,nt=tt.y-this.y;return Math.sqrt(et*et+nt*nt)},equals:function(tt){return(tt=toPoint(tt)).x===this.x&&tt.y===this.y},contains:function(tt){return tt=toPoint(tt),Math.abs(tt.x)<=Math.abs(this.x)&&Math.abs(tt.y)<=Math.abs(this.y)},toString:function(){return"Point("+formatNum(this.x)+", "+formatNum(this.y)+")"}},Bounds.prototype={extend:function(tt){return tt=toPoint(tt),this.min||this.max?(this.min.x=Math.min(tt.x,this.min.x),this.max.x=Math.max(tt.x,this.max.x),this.min.y=Math.min(tt.y,this.min.y),this.max.y=Math.max(tt.y,this.max.y)):(this.min=tt.clone(),this.max=tt.clone()),this},getCenter:function(tt){return new Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,tt)},getBottomLeft:function(){return new Point(this.min.x,this.max.y)},getTopRight:function(){return new Point(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(tt){var et,nt;return(tt="number"==typeof tt[0]||tt instanceof Point?toPoint(tt):toBounds(tt))instanceof Bounds?(et=tt.min,nt=tt.max):et=nt=tt,et.x>=this.min.x&&nt.x<=this.max.x&&et.y>=this.min.y&&nt.y<=this.max.y},intersects:function(tt){tt=toBounds(tt);var et=this.min,nt=this.max,rt=tt.min,it=tt.max,ot=it.x>=et.x&&rt.x<=nt.x,at=it.y>=et.y&&rt.y<=nt.y;return ot&&at},overlaps:function(tt){tt=toBounds(tt);var et=this.min,nt=this.max,rt=tt.min,it=tt.max,ot=it.x>et.x&&rt.x<nt.x,at=it.y>et.y&&rt.y<nt.y;return ot&&at},isValid:function(){return!(!this.min||!this.max)}},LatLngBounds.prototype={extend:function(tt){var et,nt,rt=this._southWest,it=this._northEast;if(tt instanceof LatLng)et=tt,nt=tt;else{if(!(tt instanceof LatLngBounds))return tt?this.extend(toLatLng(tt)||toLatLngBounds(tt)):this;if(et=tt._southWest,nt=tt._northEast,!et||!nt)return this}return rt||it?(rt.lat=Math.min(et.lat,rt.lat),rt.lng=Math.min(et.lng,rt.lng),it.lat=Math.max(nt.lat,it.lat),it.lng=Math.max(nt.lng,it.lng)):(this._southWest=new LatLng(et.lat,et.lng),this._northEast=new LatLng(nt.lat,nt.lng)),this},pad:function(tt){var et=this._southWest,nt=this._northEast,rt=Math.abs(et.lat-nt.lat)*tt,it=Math.abs(et.lng-nt.lng)*tt;return new LatLngBounds(new LatLng(et.lat-rt,et.lng-it),new LatLng(nt.lat+rt,nt.lng+it))},getCenter:function(){return new LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(tt){tt="number"==typeof tt[0]||tt instanceof LatLng||"lat"in tt?toLatLng(tt):toLatLngBounds(tt);var et,nt,rt=this._southWest,it=this._northEast;return tt instanceof LatLngBounds?(et=tt.getSouthWest(),nt=tt.getNorthEast()):et=nt=tt,et.lat>=rt.lat&&nt.lat<=it.lat&&et.lng>=rt.lng&&nt.lng<=it.lng},intersects:function(tt){tt=toLatLngBounds(tt);var et=this._southWest,nt=this._northEast,rt=tt.getSouthWest(),it=tt.getNorthEast(),ot=it.lat>=et.lat&&rt.lat<=nt.lat,at=it.lng>=et.lng&&rt.lng<=nt.lng;return ot&&at},overlaps:function(tt){tt=toLatLngBounds(tt);var et=this._southWest,nt=this._northEast,rt=tt.getSouthWest(),it=tt.getNorthEast(),ot=it.lat>et.lat&&rt.lat<nt.lat,at=it.lng>et.lng&&rt.lng<nt.lng;return ot&&at},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(tt,et){return!!tt&&(tt=toLatLngBounds(tt),this._southWest.equals(tt.getSouthWest(),et)&&this._northEast.equals(tt.getNorthEast(),et))},isValid:function(){return!(!this._southWest||!this._northEast)}},LatLng.prototype={equals:function(tt,et){return!!tt&&(tt=toLatLng(tt),Math.max(Math.abs(this.lat-tt.lat),Math.abs(this.lng-tt.lng))<=(void 0===et?1e-9:et))},toString:function(tt){return"LatLng("+formatNum(this.lat,tt)+", "+formatNum(this.lng,tt)+")"},distanceTo:function(tt){return Ot.distance(this,toLatLng(tt))},wrap:function(){return Ot.wrapLatLng(this)},toBounds:function(tt){var et=180*tt/40075017,nt=et/Math.cos(Math.PI/180*this.lat);return toLatLngBounds([this.lat-et,this.lng-nt],[this.lat+et,this.lng+nt])},clone:function(){return new LatLng(this.lat,this.lng,this.alt)}};var vt,Dt={latLngToPoint:function(tt,et){var nt=this.projection.project(tt),rt=this.scale(et);return this.transformation._transform(nt,rt)},pointToLatLng:function(tt,et){var nt=this.scale(et),rt=this.transformation.untransform(tt,nt);return this.projection.unproject(rt)},project:function(tt){return this.projection.project(tt)},unproject:function(tt){return this.projection.unproject(tt)},scale:function(tt){return 256*Math.pow(2,tt)},zoom:function(tt){return Math.log(tt/256)/Math.LN2},getProjectedBounds:function(tt){if(this.infinite)return null;var et=this.projection.bounds,nt=this.scale(tt);return new Bounds(this.transformation.transform(et.min,nt),this.transformation.transform(et.max,nt))},infinite:!1,wrapLatLng:function(tt){var et=this.wrapLng?wrapNum(tt.lng,this.wrapLng,!0):tt.lng;return new LatLng(this.wrapLat?wrapNum(tt.lat,this.wrapLat,!0):tt.lat,et,tt.alt)},wrapLatLngBounds:function(tt){var et=tt.getCenter(),nt=this.wrapLatLng(et),rt=et.lat-nt.lat,it=et.lng-nt.lng;if(0===rt&&0===it)return tt;var ot=tt.getSouthWest(),at=tt.getNorthEast();return new LatLngBounds(new LatLng(ot.lat-rt,ot.lng-it),new LatLng(at.lat-rt,at.lng-it))}},Ot=extend({},Dt,{wrapLng:[-180,180],R:6371e3,distance:function(tt,et){var nt=Math.PI/180,rt=tt.lat*nt,it=et.lat*nt,ot=Math.sin((et.lat-tt.lat)*nt/2),at=Math.sin((et.lng-tt.lng)*nt/2),st=ot*ot+Math.cos(rt)*Math.cos(it)*at*at,ct=2*Math.atan2(Math.sqrt(st),Math.sqrt(1-st));return this.R*ct}}),Rt={R:6378137,MAX_LATITUDE:85.0511287798,project:function(tt){var et=Math.PI/180,nt=this.MAX_LATITUDE,rt=Math.max(Math.min(nt,tt.lat),-nt),it=Math.sin(rt*et);return new Point(this.R*tt.lng*et,this.R*Math.log((1+it)/(1-it))/2)},unproject:function(tt){var et=180/Math.PI;return new LatLng((2*Math.atan(Math.exp(tt.y/this.R))-Math.PI/2)*et,tt.x*et/this.R)},bounds:(vt=6378137*Math.PI,new Bounds([-vt,-vt],[vt,vt]))};function Transformation(tt,et,nt,rt){if(ot(tt))return this._a=tt[0],this._b=tt[1],this._c=tt[2],void(this._d=tt[3]);this._a=tt,this._b=et,this._c=nt,this._d=rt}function toTransformation(tt,et,nt,rt){return new Transformation(tt,et,nt,rt)}Transformation.prototype={transform:function(tt,et){return this._transform(tt.clone(),et)},_transform:function(tt,et){return et=et||1,tt.x=et*(this._a*tt.x+this._b),tt.y=et*(this._c*tt.y+this._d),tt},untransform:function(tt,et){return et=et||1,new Point((tt.x/et-this._b)/this._a,(tt.y/et-this._d)/this._c)}};var Bt=extend({},Ot,{code:"EPSG:3857",projection:Rt,transformation:function(){var tt=.5/(Math.PI*Rt.R);return toTransformation(tt,.5,-tt,.5)}()}),Ne=extend({},Bt,{code:"EPSG:900913"});function svgCreate(tt){return document.createElementNS("http://www.w3.org/2000/svg",tt)}function pointsToPath(tt,et){var nt,rt,it,ot,at,st,ct="";for(nt=0,it=tt.length;nt<it;nt++){for(rt=0,ot=(at=tt[nt]).length;rt<ot;rt++)ct+=(rt?"L":"M")+(st=at[rt]).x+" "+st.y;ct+=et?sa?"z":"x":""}return ct||"M0 0"}var rn=document.documentElement.style,vn="ActiveXObject"in window,bn=vn&&!document.addEventListener,Tn="msLaunchUri"in navigator&&!("documentMode"in document),Cn=userAgentContains("webkit"),Ln=userAgentContains("android"),In=userAgentContains("android 2")||userAgentContains("android 3"),Mn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),zn=Ln&&userAgentContains("Google")&&Mn<537&&!("AudioNode"in window),Bn=!!window.opera,Fn=userAgentContains("chrome"),Nn=userAgentContains("gecko")&&!Cn&&!Bn&&!vn,Vn=!Fn&&userAgentContains("safari"),Wn=userAgentContains("phantom"),$n="OTransition"in rn,Yn=0===navigator.platform.indexOf("Win"),er=vn&&"transition"in rn,rr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!In,vr="MozPerspective"in rn,wr=!window.L_DISABLE_3D&&(er||rr||vr)&&!$n&&!Wn,Sr="undefined"!=typeof orientation||userAgentContains("mobile"),ii=Sr&&Cn,qi=Sr&&rr,uo=!window.PointerEvent&&window.MSPointerEvent,po=!(Cn||!window.PointerEvent&&!uo),vo=!window.L_NO_TOUCH&&(po||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),So=Sr&&Bn,ta=Sr&&Nn,na=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,passiveEvents=function(){var tt=!1;try{var et=Object.defineProperty({},"passive",{get:function(){tt=!0}});window.addEventListener("testPassiveEventSupport",falseFn,et),window.removeEventListener("testPassiveEventSupport",falseFn,et)}catch(tt){}return tt},ia=!!document.createElement("canvas").getContext,sa=!(!document.createElementNS||!svgCreate("svg").createSVGRect),la=!sa&&function(){try{var tt=document.createElement("div");tt.innerHTML='<v:shape adj="1"/>';var et=tt.firstChild;return et.style.behavior="url(#default#VML)",et&&"object"==typeof et.adj}catch(tt){return!1}}();function userAgentContains(tt){return navigator.userAgent.toLowerCase().indexOf(tt)>=0}var pa=(Object.freeze||Object)({ie:vn,ielt9:bn,edge:Tn,webkit:Cn,android:Ln,android23:In,androidStock:zn,opera:Bn,chrome:Fn,gecko:Nn,safari:Vn,phantom:Wn,opera12:$n,win:Yn,ie3d:er,webkit3d:rr,gecko3d:vr,any3d:wr,mobile:Sr,mobileWebkit:ii,mobileWebkit3d:qi,msPointer:uo,pointer:po,touch:vo,mobileOpera:So,mobileGecko:ta,retina:na,passiveEvents:passiveEvents,canvas:ia,svg:sa,vml:la}),fa=uo?"MSPointerDown":"pointerdown",ga=uo?"MSPointerMove":"pointermove",va=uo?"MSPointerUp":"pointerup",_a=uo?"MSPointerCancel":"pointercancel",wa=["INPUT","SELECT","OPTION"],Aa={},os=!1,as=0;function addPointerListener(tt,et,nt,rt){return"touchstart"===et?function _addPointerStart(tt,et,nt){var rt=bind((function(tt){if("mouse"!==tt.pointerType&&tt.MSPOINTER_TYPE_MOUSE&&tt.pointerType!==tt.MSPOINTER_TYPE_MOUSE){if(!(wa.indexOf(tt.target.tagName)<0))return;preventDefault(tt)}_handlePointer(tt,et)}));tt["_leaflet_touchstart"+nt]=rt,tt.addEventListener(fa,rt,!1),os||(document.documentElement.addEventListener(fa,_globalPointerDown,!0),document.documentElement.addEventListener(ga,_globalPointerMove,!0),document.documentElement.addEventListener(va,_globalPointerUp,!0),document.documentElement.addEventListener(_a,_globalPointerUp,!0),os=!0)}(tt,nt,rt):"touchmove"===et?function _addPointerMove(tt,et,nt){var onMove=function(tt){(tt.pointerType!==tt.MSPOINTER_TYPE_MOUSE&&"mouse"!==tt.pointerType||0!==tt.buttons)&&_handlePointer(tt,et)};tt["_leaflet_touchmove"+nt]=onMove,tt.addEventListener(ga,onMove,!1)}(tt,nt,rt):"touchend"===et&&function _addPointerEnd(tt,et,nt){var onUp=function(tt){_handlePointer(tt,et)};tt["_leaflet_touchend"+nt]=onUp,tt.addEventListener(va,onUp,!1),tt.addEventListener(_a,onUp,!1)}(tt,nt,rt),this}function _globalPointerDown(tt){Aa[tt.pointerId]=tt,as++}function _globalPointerMove(tt){Aa[tt.pointerId]&&(Aa[tt.pointerId]=tt)}function _globalPointerUp(tt){delete Aa[tt.pointerId],as--}function _handlePointer(tt,et){for(var nt in tt.touches=[],Aa)tt.touches.push(Aa[nt]);tt.changedTouches=[tt],et(tt)}var ss=uo?"MSPointerDown":po?"pointerdown":"touchstart",us=uo?"MSPointerUp":po?"pointerup":"touchend",ls="_leaflet_";function addDoubleTapListener(tt,et,nt){var rt,it,ot=!1;function onTouchStart(tt){var et;if(po){if(!Tn||"mouse"===tt.pointerType)return;et=as}else et=tt.touches.length;if(!(et>1)){var nt=Date.now(),at=nt-(rt||nt);it=tt.touches?tt.touches[0]:tt,ot=at>0&&at<=250,rt=nt}}function onTouchEnd(tt){if(ot&&!it.cancelBubble){if(po){if(!Tn||"mouse"===tt.pointerType)return;var nt,at,st={};for(at in it)nt=it[at],st[at]=nt&&nt.bind?nt.bind(it):nt;it=st}it.type="dblclick",it.button=0,et(it),rt=null}}return tt[ls+ss+nt]=onTouchStart,tt[ls+us+nt]=onTouchEnd,tt[ls+"dblclick"+nt]=et,tt.addEventListener(ss,onTouchStart,!!passiveEvents&&{passive:!1}),tt.addEventListener(us,onTouchEnd,!!passiveEvents&&{passive:!1}),tt.addEventListener("dblclick",et,!1),this}function removeDoubleTapListener(tt,et){var nt=tt[ls+ss+et],rt=tt[ls+us+et],it=tt[ls+"dblclick"+et];return tt.removeEventListener(ss,nt,!!passiveEvents&&{passive:!1}),tt.removeEventListener(us,rt,!!passiveEvents&&{passive:!1}),Tn||tt.removeEventListener("dblclick",it,!1),this}var fs,gs,vs,xs,Ss,Es=testProp(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ps=testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Cs="webkitTransition"===Ps||"OTransition"===Ps?Ps+"End":"transitionend";function get(tt){return"string"==typeof tt?document.getElementById(tt):tt}function getStyle(tt,et){var nt=tt.style[et]||tt.currentStyle&&tt.currentStyle[et];if((!nt||"auto"===nt)&&document.defaultView){var rt=document.defaultView.getComputedStyle(tt,null);nt=rt?rt[et]:null}return"auto"===nt?null:nt}function create$1(tt,et,nt){var rt=document.createElement(tt);return rt.className=et||"",nt&&nt.appendChild(rt),rt}function remove(tt){var et=tt.parentNode;et&&et.removeChild(tt)}function empty(tt){for(;tt.firstChild;)tt.removeChild(tt.firstChild)}function toFront(tt){var et=tt.parentNode;et&&et.lastChild!==tt&&et.appendChild(tt)}function toBack(tt){var et=tt.parentNode;et&&et.firstChild!==tt&&et.insertBefore(tt,et.firstChild)}function hasClass(tt,et){if(void 0!==tt.classList)return tt.classList.contains(et);var nt=getClass(tt);return nt.length>0&&new RegExp("(^|\\s)"+et+"(\\s|$)").test(nt)}function addClass(tt,et){if(void 0!==tt.classList)for(var nt=splitWords(et),rt=0,it=nt.length;rt<it;rt++)tt.classList.add(nt[rt]);else if(!hasClass(tt,et)){var ot=getClass(tt);setClass(tt,(ot?ot+" ":"")+et)}}function removeClass(tt,et){void 0!==tt.classList?tt.classList.remove(et):setClass(tt,trim((" "+getClass(tt)+" ").replace(" "+et+" "," ")))}function setClass(tt,et){void 0===tt.className.baseVal?tt.className=et:tt.className.baseVal=et}function getClass(tt){return tt.correspondingElement&&(tt=tt.correspondingElement),void 0===tt.className.baseVal?tt.className:tt.className.baseVal}function setOpacity(tt,et){"opacity"in tt.style?tt.style.opacity=et:"filter"in tt.style&&function _setOpacityIE(tt,et){var nt=!1,rt="DXImageTransform.Microsoft.Alpha";try{nt=tt.filters.item(rt)}catch(tt){if(1===et)return}et=Math.round(100*et),nt?(nt.Enabled=100!==et,nt.Opacity=et):tt.style.filter+=" progid:"+rt+"(opacity="+et+")"}(tt,et)}function testProp(tt){for(var et=document.documentElement.style,nt=0;nt<tt.length;nt++)if(tt[nt]in et)return tt[nt];return!1}function setTransform(tt,et,nt){var rt=et||new Point(0,0);tt.style[Es]=(er?"translate("+rt.x+"px,"+rt.y+"px)":"translate3d("+rt.x+"px,"+rt.y+"px,0)")+(nt?" scale("+nt+")":"")}function setPosition(tt,et){tt._leaflet_pos=et,wr?setTransform(tt,et):(tt.style.left=et.x+"px",tt.style.top=et.y+"px")}function getPosition(tt){return tt._leaflet_pos||new Point(0,0)}if("onselectstart"in document)fs=function(){on(window,"selectstart",preventDefault)},gs=function(){off(window,"selectstart",preventDefault)};else{var Ls=testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);fs=function(){if(Ls){var tt=document.documentElement.style;vs=tt[Ls],tt[Ls]="none"}},gs=function(){Ls&&(document.documentElement.style[Ls]=vs,vs=void 0)}}function disableImageDrag(){on(window,"dragstart",preventDefault)}function enableImageDrag(){off(window,"dragstart",preventDefault)}function preventOutline(tt){for(;-1===tt.tabIndex;)tt=tt.parentNode;tt.style&&(restoreOutline(),xs=tt,Ss=tt.style.outline,tt.style.outline="none",on(window,"keydown",restoreOutline))}function restoreOutline(){xs&&(xs.style.outline=Ss,xs=void 0,Ss=void 0,off(window,"keydown",restoreOutline))}function getSizedParentNode(tt){do{tt=tt.parentNode}while(!(tt.offsetWidth&&tt.offsetHeight||tt===document.body));return tt}function getScale(tt){var et=tt.getBoundingClientRect();return{x:et.width/tt.offsetWidth||1,y:et.height/tt.offsetHeight||1,boundingClientRect:et}}var As=(Object.freeze||Object)({TRANSFORM:Es,TRANSITION:Ps,TRANSITION_END:Cs,get:get,getStyle:getStyle,create:create$1,remove:remove,empty:empty,toFront:toFront,toBack:toBack,hasClass:hasClass,addClass:addClass,removeClass:removeClass,setClass:setClass,getClass:getClass,setOpacity:setOpacity,testProp:testProp,setTransform:setTransform,setPosition:setPosition,getPosition:getPosition,disableTextSelection:fs,enableTextSelection:gs,disableImageDrag:disableImageDrag,enableImageDrag:enableImageDrag,preventOutline:preventOutline,restoreOutline:restoreOutline,getSizedParentNode:getSizedParentNode,getScale:getScale});function on(tt,et,nt,rt){if("object"==typeof et)for(var it in et)addOne(tt,it,et[it],nt);else for(var ot=0,at=(et=splitWords(et)).length;ot<at;ot++)addOne(tt,et[ot],nt,rt);return this}var Ms="_leaflet_events";function off(tt,et,nt,rt){if("object"==typeof et)for(var it in et)removeOne(tt,it,et[it],nt);else if(et)for(var ot=0,at=(et=splitWords(et)).length;ot<at;ot++)removeOne(tt,et[ot],nt,rt);else{for(var st in tt[Ms])removeOne(tt,st,tt[Ms][st]);delete tt[Ms]}return this}function addOne(tt,et,nt,rt){var it=et+stamp(nt)+(rt?"_"+stamp(rt):"");if(tt[Ms]&&tt[Ms][it])return this;var handler=function(et){return nt.call(rt||tt,et||window.event)},ot=handler;po&&0===et.indexOf("touch")?addPointerListener(tt,et,handler,it):!vo||"dblclick"!==et||!addDoubleTapListener||po&&Fn?"addEventListener"in tt?"mousewheel"===et?tt.addEventListener("onwheel"in tt?"wheel":"mousewheel",handler,!!passiveEvents&&{passive:!1}):"mouseenter"===et||"mouseleave"===et?(handler=function(et){et=et||window.event,isExternalTarget(tt,et)&&ot(et)},tt.addEventListener("mouseenter"===et?"mouseover":"mouseout",handler,!1)):("click"===et&&Ln&&(handler=function(tt){!function filterClick(tt,et){var nt=tt.timeStamp||tt.originalEvent&&tt.originalEvent.timeStamp,rt=Os&&nt-Os;rt&&rt>100&&rt<500||tt.target._simulatedClick&&!tt._simulated?stop(tt):(Os=nt,et(tt))}(tt,ot)}),tt.addEventListener(et,handler,!1)):"attachEvent"in tt&&tt.attachEvent("on"+et,handler):addDoubleTapListener(tt,handler,it),tt[Ms]=tt[Ms]||{},tt[Ms][it]=handler}function removeOne(tt,et,nt,rt){var it=et+stamp(nt)+(rt?"_"+stamp(rt):""),ot=tt[Ms]&&tt[Ms][it];if(!ot)return this;po&&0===et.indexOf("touch")?function removePointerListener(tt,et,nt){var rt=tt["_leaflet_"+et+nt];return"touchstart"===et?tt.removeEventListener(fa,rt,!1):"touchmove"===et?tt.removeEventListener(ga,rt,!1):"touchend"===et&&(tt.removeEventListener(va,rt,!1),tt.removeEventListener(_a,rt,!1)),this}(tt,et,it):!vo||"dblclick"!==et||!removeDoubleTapListener||po&&Fn?"removeEventListener"in tt?"mousewheel"===et?tt.removeEventListener("onwheel"in tt?"wheel":"mousewheel",ot,!!passiveEvents&&{passive:!1}):tt.removeEventListener("mouseenter"===et?"mouseover":"mouseleave"===et?"mouseout":et,ot,!1):"detachEvent"in tt&&tt.detachEvent("on"+et,ot):removeDoubleTapListener(tt,it),tt[Ms][it]=null}function stopPropagation(tt){return tt.stopPropagation?tt.stopPropagation():tt.originalEvent?tt.originalEvent._stopped=!0:tt.cancelBubble=!0,skipped(tt),this}function disableScrollPropagation(tt){return addOne(tt,"mousewheel",stopPropagation),this}function disableClickPropagation(tt){return on(tt,"mousedown touchstart dblclick",stopPropagation),addOne(tt,"click",fakeStop),this}function preventDefault(tt){return tt.preventDefault?tt.preventDefault():tt.returnValue=!1,this}function stop(tt){return preventDefault(tt),stopPropagation(tt),this}function getMousePosition(tt,et){if(!et)return new Point(tt.clientX,tt.clientY);var nt=getScale(et),rt=nt.boundingClientRect;return new Point((tt.clientX-rt.left)/nt.x-et.clientLeft,(tt.clientY-rt.top)/nt.y-et.clientTop)}var zs=Yn&&Fn?2*window.devicePixelRatio:Nn?window.devicePixelRatio:1;function getWheelDelta(tt){return Tn?tt.wheelDeltaY/2:tt.deltaY&&0===tt.deltaMode?-tt.deltaY/zs:tt.deltaY&&1===tt.deltaMode?20*-tt.deltaY:tt.deltaY&&2===tt.deltaMode?60*-tt.deltaY:tt.deltaX||tt.deltaZ?0:tt.wheelDelta?(tt.wheelDeltaY||tt.wheelDelta)/2:tt.detail&&Math.abs(tt.detail)<32765?20*-tt.detail:tt.detail?tt.detail/-32765*60:0}var Os,Rs={};function fakeStop(tt){Rs[tt.type]=!0}function skipped(tt){var et=Rs[tt.type];return Rs[tt.type]=!1,et}function isExternalTarget(tt,et){var nt=et.relatedTarget;if(!nt)return!0;try{for(;nt&&nt!==tt;)nt=nt.parentNode}catch(tt){return!1}return nt!==tt}var Bs=(Object.freeze||Object)({on:on,off:off,stopPropagation:stopPropagation,disableScrollPropagation:disableScrollPropagation,disableClickPropagation:disableClickPropagation,preventDefault:preventDefault,stop:stop,getMousePosition:getMousePosition,getWheelDelta:getWheelDelta,fakeStop:fakeStop,skipped:skipped,isExternalTarget:isExternalTarget,addListener:on,removeListener:off}),Fs=mt.extend({run:function(tt,et,nt,rt){this.stop(),this._el=tt,this._inProgress=!0,this._duration=nt||.25,this._easeOutPower=1/Math.max(rt||.5,.2),this._startPos=getPosition(tt),this._offset=et.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=requestAnimFrame(this._animate,this),this._step()},_step:function(tt){var et=+new Date-this._startTime,nt=1e3*this._duration;et<nt?this._runFrame(this._easeOut(et/nt),tt):(this._runFrame(1),this._complete())},_runFrame:function(tt,et){var nt=this._startPos.add(this._offset.multiplyBy(tt));et&&nt._round(),setPosition(this._el,nt),this.fire("step")},_complete:function(){cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(tt){return 1-Math.pow(1-tt,this._easeOutPower)}}),Ns=mt.extend({options:{crs:Bt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(tt,et){et=setOptions(this,et),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(tt),this._initLayout(),this._onResize=bind(this._onResize,this),this._initEvents(),et.maxBounds&&this.setMaxBounds(et.maxBounds),void 0!==et.zoom&&(this._zoom=this._limitZoom(et.zoom)),et.center&&void 0!==et.zoom&&this.setView(toLatLng(et.center),et.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ps&&wr&&!So&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),on(this._proxy,Cs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(tt,et,nt){return et=void 0===et?this._zoom:this._limitZoom(et),tt=this._limitCenter(toLatLng(tt),et,this.options.maxBounds),nt=nt||{},this._stop(),this._loaded&&!nt.reset&&!0!==nt&&(void 0!==nt.animate&&(nt.zoom=extend({animate:nt.animate},nt.zoom),nt.pan=extend({animate:nt.animate,duration:nt.duration},nt.pan)),this._zoom!==et?this._tryAnimatedZoom&&this._tryAnimatedZoom(tt,et,nt.zoom):this._tryAnimatedPan(tt,nt.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(tt,et),this)},setZoom:function(tt,et){return this._loaded?this.setView(this.getCenter(),tt,{zoom:et}):(this._zoom=tt,this)},zoomIn:function(tt,et){return tt=tt||(wr?this.options.zoomDelta:1),this.setZoom(this._zoom+tt,et)},zoomOut:function(tt,et){return tt=tt||(wr?this.options.zoomDelta:1),this.setZoom(this._zoom-tt,et)},setZoomAround:function(tt,et,nt){var rt=this.getZoomScale(et),it=this.getSize().divideBy(2),ot=(tt instanceof Point?tt:this.latLngToContainerPoint(tt)).subtract(it).multiplyBy(1-1/rt),at=this.containerPointToLatLng(it.add(ot));return this.setView(at,et,{zoom:nt})},_getBoundsCenterZoom:function(tt,et){et=et||{},tt=tt.getBounds?tt.getBounds():toLatLngBounds(tt);var nt=toPoint(et.paddingTopLeft||et.padding||[0,0]),rt=toPoint(et.paddingBottomRight||et.padding||[0,0]),it=this.getBoundsZoom(tt,!1,nt.add(rt));if((it="number"==typeof et.maxZoom?Math.min(et.maxZoom,it):it)===1/0)return{center:tt.getCenter(),zoom:it};var ot=rt.subtract(nt).divideBy(2),at=this.project(tt.getSouthWest(),it),st=this.project(tt.getNorthEast(),it);return{center:this.unproject(at.add(st).divideBy(2).add(ot),it),zoom:it}},fitBounds:function(tt,et){if(!(tt=toLatLngBounds(tt)).isValid())throw new Error("Bounds are not valid.");var nt=this._getBoundsCenterZoom(tt,et);return this.setView(nt.center,nt.zoom,et)},fitWorld:function(tt){return this.fitBounds([[-90,-180],[90,180]],tt)},panTo:function(tt,et){return this.setView(tt,this._zoom,{pan:et})},panBy:function(tt,et){if(et=et||{},!(tt=toPoint(tt).round()).x&&!tt.y)return this.fire("moveend");if(!0!==et.animate&&!this.getSize().contains(tt))return this._resetView(this.unproject(this.project(this.getCenter()).add(tt)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),et.noMoveStart||this.fire("movestart"),!1!==et.animate){addClass(this._mapPane,"leaflet-pan-anim");var nt=this._getMapPanePos().subtract(tt).round();this._panAnim.run(this._mapPane,nt,et.duration||.25,et.easeLinearity)}else this._rawPanBy(tt),this.fire("move").fire("moveend");return this},flyTo:function(tt,et,nt){if(!1===(nt=nt||{}).animate||!wr)return this.setView(tt,et,nt);this._stop();var rt=this.project(this.getCenter()),it=this.project(tt),ot=this.getSize(),at=this._zoom;tt=toLatLng(tt),et=void 0===et?at:et;var st=Math.max(ot.x,ot.y),ct=st*this.getZoomScale(at,et),pt=it.distanceTo(rt)||1;function r(tt){var et=(ct*ct-st*st+2.0164*(tt?-1:1)*2.0164*pt*pt)/(2*(tt?ct:st)*2.0164*pt),nt=Math.sqrt(et*et+1)-et;return nt<1e-9?-18:Math.log(nt)}function sinh(tt){return(Math.exp(tt)-Math.exp(-tt))/2}function cosh(tt){return(Math.exp(tt)+Math.exp(-tt))/2}var ft=r(0);function u(tt){return st*(cosh(ft)*function tanh(tt){return sinh(tt)/cosh(tt)}(ft+1.42*tt)-sinh(ft))/2.0164}var dt=Date.now(),mt=(r(1)-ft)/1.42,yt=nt.duration?1e3*nt.duration:1e3*mt*.8;return this._moveStart(!0,nt.noMoveStart),function frame(){var nt=(Date.now()-dt)/yt,ot=function easeOut(tt){return 1-Math.pow(1-tt,1.5)}(nt)*mt;nt<=1?(this._flyToFrame=requestAnimFrame(frame,this),this._move(this.unproject(rt.add(it.subtract(rt).multiplyBy(u(ot)/pt)),at),this.getScaleZoom(st/function w(tt){return st*(cosh(ft)/cosh(ft+1.42*tt))}(ot),at),{flyTo:!0})):this._move(tt,et)._moveEnd(!0)}.call(this),this},flyToBounds:function(tt,et){var nt=this._getBoundsCenterZoom(tt,et);return this.flyTo(nt.center,nt.zoom,et)},setMaxBounds:function(tt){return(tt=toLatLngBounds(tt)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=tt,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(tt){var et=this.options.minZoom;return this.options.minZoom=tt,this._loaded&&et!==tt&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(tt):this},setMaxZoom:function(tt){var et=this.options.maxZoom;return this.options.maxZoom=tt,this._loaded&&et!==tt&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(tt):this},panInsideBounds:function(tt,et){this._enforcingBounds=!0;var nt=this.getCenter(),rt=this._limitCenter(nt,this._zoom,toLatLngBounds(tt));return nt.equals(rt)||this.panTo(rt,et),this._enforcingBounds=!1,this},panInside:function(tt,et){var nt=toPoint((et=et||{}).paddingTopLeft||et.padding||[0,0]),rt=toPoint(et.paddingBottomRight||et.padding||[0,0]),it=this.getCenter(),ot=this.project(it),at=this.project(tt),st=this.getPixelBounds(),ct=st.getSize().divideBy(2),pt=toBounds([st.min.add(nt),st.max.subtract(rt)]);if(!pt.contains(at)){this._enforcingBounds=!0;var ft=ot.subtract(at),dt=toPoint(at.x+ft.x,at.y+ft.y);(at.x<pt.min.x||at.x>pt.max.x)&&(dt.x=ot.x-ft.x,ft.x>0?dt.x+=ct.x-nt.x:dt.x-=ct.x-rt.x),(at.y<pt.min.y||at.y>pt.max.y)&&(dt.y=ot.y-ft.y,ft.y>0?dt.y+=ct.y-nt.y:dt.y-=ct.y-rt.y),this.panTo(this.unproject(dt),et),this._enforcingBounds=!1}return this},invalidateSize:function(tt){if(!this._loaded)return this;tt=extend({animate:!1,pan:!0},!0===tt?{animate:!0}:tt);var et=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var nt=this.getSize(),rt=et.divideBy(2).round(),it=nt.divideBy(2).round(),ot=rt.subtract(it);return ot.x||ot.y?(tt.animate&&tt.pan?this.panBy(ot):(tt.pan&&this._rawPanBy(ot),this.fire("move"),tt.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:et,newSize:nt})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(tt){if(tt=this._locateOptions=extend({timeout:1e4,watch:!1},tt),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var et=bind(this._handleGeolocationResponse,this),nt=bind(this._handleGeolocationError,this);return tt.watch?this._locationWatchId=navigator.geolocation.watchPosition(et,nt,tt):navigator.geolocation.getCurrentPosition(et,nt,tt),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(tt){var et=tt.code,nt=tt.message||(1===et?"permission denied":2===et?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:et,message:"Geolocation error: "+nt+"."})},_handleGeolocationResponse:function(tt){var et=new LatLng(tt.coords.latitude,tt.coords.longitude),nt=et.toBounds(2*tt.coords.accuracy),rt=this._locateOptions;if(rt.setView){var it=this.getBoundsZoom(nt);this.setView(et,rt.maxZoom?Math.min(it,rt.maxZoom):it)}var ot={latlng:et,bounds:nt,timestamp:tt.timestamp};for(var at in tt.coords)"number"==typeof tt.coords[at]&&(ot[at]=tt.coords[at]);this.fire("locationfound",ot)},addHandler:function(tt,et){if(!et)return this;var nt=this[tt]=new et(this);return this._handlers.push(nt),this.options[tt]&&nt.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(tt){this._container._leaflet_id=void 0,this._containerId=void 0}var tt;for(tt in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(cancelAnimFrame(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[tt].remove();for(tt in this._panes)remove(this._panes[tt]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(tt,et){var nt=create$1("div","leaflet-pane"+(tt?" leaflet-"+tt.replace("Pane","")+"-pane":""),et||this._mapPane);return tt&&(this._panes[tt]=nt),nt},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var tt=this.getPixelBounds();return new LatLngBounds(this.unproject(tt.getBottomLeft()),this.unproject(tt.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(tt,et,nt){tt=toLatLngBounds(tt),nt=toPoint(nt||[0,0]);var rt=this.getZoom()||0,it=this.getMinZoom(),ot=this.getMaxZoom(),at=tt.getNorthWest(),st=tt.getSouthEast(),ct=this.getSize().subtract(nt),pt=toBounds(this.project(st,rt),this.project(at,rt)).getSize(),ft=wr?this.options.zoomSnap:1,dt=ct.x/pt.x,mt=ct.y/pt.y,yt=et?Math.max(dt,mt):Math.min(dt,mt);return rt=this.getScaleZoom(yt,rt),ft&&(rt=Math.round(rt/(ft/100))*(ft/100),rt=et?Math.ceil(rt/ft)*ft:Math.floor(rt/ft)*ft),Math.max(it,Math.min(ot,rt))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(tt,et){var nt=this._getTopLeftPoint(tt,et);return new Bounds(nt,nt.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(tt){return this.options.crs.getProjectedBounds(void 0===tt?this.getZoom():tt)},getPane:function(tt){return"string"==typeof tt?this._panes[tt]:tt},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(tt,et){var nt=this.options.crs;return et=void 0===et?this._zoom:et,nt.scale(tt)/nt.scale(et)},getScaleZoom:function(tt,et){var nt=this.options.crs;et=void 0===et?this._zoom:et;var rt=nt.zoom(tt*nt.scale(et));return isNaN(rt)?1/0:rt},project:function(tt,et){return et=void 0===et?this._zoom:et,this.options.crs.latLngToPoint(toLatLng(tt),et)},unproject:function(tt,et){return et=void 0===et?this._zoom:et,this.options.crs.pointToLatLng(toPoint(tt),et)},layerPointToLatLng:function(tt){var et=toPoint(tt).add(this.getPixelOrigin());return this.unproject(et)},latLngToLayerPoint:function(tt){return this.project(toLatLng(tt))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(tt){return this.options.crs.wrapLatLng(toLatLng(tt))},wrapLatLngBounds:function(tt){return this.options.crs.wrapLatLngBounds(toLatLngBounds(tt))},distance:function(tt,et){return this.options.crs.distance(toLatLng(tt),toLatLng(et))},containerPointToLayerPoint:function(tt){return toPoint(tt).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(tt){return toPoint(tt).add(this._getMapPanePos())},containerPointToLatLng:function(tt){var et=this.containerPointToLayerPoint(toPoint(tt));return this.layerPointToLatLng(et)},latLngToContainerPoint:function(tt){return this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(tt)))},mouseEventToContainerPoint:function(tt){return getMousePosition(tt,this._container)},mouseEventToLayerPoint:function(tt){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(tt))},mouseEventToLatLng:function(tt){return this.layerPointToLatLng(this.mouseEventToLayerPoint(tt))},_initContainer:function(tt){var et=this._container=get(tt);if(!et)throw new Error("Map container not found.");if(et._leaflet_id)throw new Error("Map container is already initialized.");on(et,"scroll",this._onScroll,this),this._containerId=stamp(et)},_initLayout:function(){var tt=this._container;this._fadeAnimated=this.options.fadeAnimation&&wr,addClass(tt,"leaflet-container"+(vo?" leaflet-touch":"")+(na?" leaflet-retina":"")+(bn?" leaflet-oldie":"")+(Vn?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var et=getStyle(tt,"position");"absolute"!==et&&"relative"!==et&&"fixed"!==et&&(tt.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var tt=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),setPosition(this._mapPane,new Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(addClass(tt.markerPane,"leaflet-zoom-hide"),addClass(tt.shadowPane,"leaflet-zoom-hide"))},_resetView:function(tt,et){setPosition(this._mapPane,new Point(0,0));var nt=!this._loaded;this._loaded=!0,et=this._limitZoom(et),this.fire("viewprereset");var rt=this._zoom!==et;this._moveStart(rt,!1)._move(tt,et)._moveEnd(rt),this.fire("viewreset"),nt&&this.fire("load")},_moveStart:function(tt,et){return tt&&this.fire("zoomstart"),et||this.fire("movestart"),this},_move:function(tt,et,nt){void 0===et&&(et=this._zoom);var rt=this._zoom!==et;return this._zoom=et,this._lastCenter=tt,this._pixelOrigin=this._getNewPixelOrigin(tt),(rt||nt&&nt.pinch)&&this.fire("zoom",nt),this.fire("move",nt)},_moveEnd:function(tt){return tt&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(tt){setPosition(this._mapPane,this._getMapPanePos().subtract(tt))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(tt){this._targets={},this._targets[stamp(this._container)]=this;var et=tt?off:on;et(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&et(window,"resize",this._onResize,this),wr&&this.options.transform3DLimit&&(tt?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){cancelAnimFrame(this._resizeRequest),this._resizeRequest=requestAnimFrame((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var tt=this._getMapPanePos();Math.max(Math.abs(tt.x),Math.abs(tt.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(tt,et){for(var nt,rt=[],it="mouseout"===et||"mouseover"===et,ot=tt.target||tt.srcElement,at=!1;ot;){if((nt=this._targets[stamp(ot)])&&("click"===et||"preclick"===et)&&!tt._simulated&&this._draggableMoved(nt)){at=!0;break}if(nt&&nt.listens(et,!0)){if(it&&!isExternalTarget(ot,tt))break;if(rt.push(nt),it)break}if(ot===this._container)break;ot=ot.parentNode}return rt.length||at||it||!isExternalTarget(ot,tt)||(rt=[this]),rt},_handleDOMEvent:function(tt){if(this._loaded&&!skipped(tt)){var et=tt.type;"mousedown"!==et&&"keypress"!==et&&"keyup"!==et&&"keydown"!==et||preventOutline(tt.target||tt.srcElement),this._fireDOMEvent(tt,et)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(tt,et,nt){if("click"===tt.type){var rt=extend({},tt);rt.type="preclick",this._fireDOMEvent(rt,rt.type,nt)}if(!tt._stopped&&(nt=(nt||[]).concat(this._findEventTargets(tt,et))).length){var it=nt[0];"contextmenu"===et&&it.listens(et,!0)&&preventDefault(tt);var ot={originalEvent:tt};if("keypress"!==tt.type&&"keydown"!==tt.type&&"keyup"!==tt.type){var at=it.getLatLng&&(!it._radius||it._radius<=10);ot.containerPoint=at?this.latLngToContainerPoint(it.getLatLng()):this.mouseEventToContainerPoint(tt),ot.layerPoint=this.containerPointToLayerPoint(ot.containerPoint),ot.latlng=at?it.getLatLng():this.layerPointToLatLng(ot.layerPoint)}for(var st=0;st<nt.length;st++)if(nt[st].fire(et,ot,!0),ot.originalEvent._stopped||!1===nt[st].options.bubblingMouseEvents&&-1!==indexOf(this._mouseEvents,et))return}},_draggableMoved:function(tt){return(tt=tt.dragging&&tt.dragging.enabled()?tt:this).dragging&&tt.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var tt=0,et=this._handlers.length;tt<et;tt++)this._handlers[tt].disable()},whenReady:function(tt,et){return this._loaded?tt.call(et||this,{target:this}):this.on("load",tt,et),this},_getMapPanePos:function(){return getPosition(this._mapPane)||new Point(0,0)},_moved:function(){var tt=this._getMapPanePos();return tt&&!tt.equals([0,0])},_getTopLeftPoint:function(tt,et){return(tt&&void 0!==et?this._getNewPixelOrigin(tt,et):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(tt,et){var nt=this.getSize()._divideBy(2);return this.project(tt,et)._subtract(nt)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(tt,et,nt){var rt=this._getNewPixelOrigin(nt,et);return this.project(tt,et)._subtract(rt)},_latLngBoundsToNewLayerBounds:function(tt,et,nt){var rt=this._getNewPixelOrigin(nt,et);return toBounds([this.project(tt.getSouthWest(),et)._subtract(rt),this.project(tt.getNorthWest(),et)._subtract(rt),this.project(tt.getSouthEast(),et)._subtract(rt),this.project(tt.getNorthEast(),et)._subtract(rt)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(tt){return this.latLngToLayerPoint(tt).subtract(this._getCenterLayerPoint())},_limitCenter:function(tt,et,nt){if(!nt)return tt;var rt=this.project(tt,et),it=this.getSize().divideBy(2),ot=new Bounds(rt.subtract(it),rt.add(it)),at=this._getBoundsOffset(ot,nt,et);return at.round().equals([0,0])?tt:this.unproject(rt.add(at),et)},_limitOffset:function(tt,et){if(!et)return tt;var nt=this.getPixelBounds(),rt=new Bounds(nt.min.add(tt),nt.max.add(tt));return tt.add(this._getBoundsOffset(rt,et))},_getBoundsOffset:function(tt,et,nt){var rt=toBounds(this.project(et.getNorthEast(),nt),this.project(et.getSouthWest(),nt)),it=rt.min.subtract(tt.min),ot=rt.max.subtract(tt.max);return new Point(this._rebound(it.x,-ot.x),this._rebound(it.y,-ot.y))},_rebound:function(tt,et){return tt+et>0?Math.round(tt-et)/2:Math.max(0,Math.ceil(tt))-Math.max(0,Math.floor(et))},_limitZoom:function(tt){var et=this.getMinZoom(),nt=this.getMaxZoom(),rt=wr?this.options.zoomSnap:1;return rt&&(tt=Math.round(tt/rt)*rt),Math.max(et,Math.min(nt,tt))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(tt,et){var nt=this._getCenterOffset(tt)._trunc();return!(!0!==(et&&et.animate)&&!this.getSize().contains(nt)||(this.panBy(nt,et),0))},_createAnimProxy:function(){var tt=this._proxy=create$1("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(tt),this.on("zoomanim",(function(tt){var et=Es,nt=this._proxy.style[et];setTransform(this._proxy,this.project(tt.center,tt.zoom),this.getZoomScale(tt.zoom,1)),nt===this._proxy.style[et]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){remove(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var tt=this.getCenter(),et=this.getZoom();setTransform(this._proxy,this.project(tt,et),this.getZoomScale(et,1))},_catchTransitionEnd:function(tt){this._animatingZoom&&tt.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(tt,et,nt){if(this._animatingZoom)return!0;if(nt=nt||{},!this._zoomAnimated||!1===nt.animate||this._nothingToAnimate()||Math.abs(et-this._zoom)>this.options.zoomAnimationThreshold)return!1;var rt=this.getZoomScale(et),it=this._getCenterOffset(tt)._divideBy(1-1/rt);return!(!0!==nt.animate&&!this.getSize().contains(it)||(requestAnimFrame((function(){this._moveStart(!0,!1)._animateZoom(tt,et,!0)}),this),0))},_animateZoom:function(tt,et,nt,rt){this._mapPane&&(nt&&(this._animatingZoom=!0,this._animateToCenter=tt,this._animateToZoom=et,addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:tt,zoom:et,noUpdate:rt}),setTimeout(bind(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),requestAnimFrame((function(){this._moveEnd(!0)}),this))}}),Vs=Class.extend({options:{position:"topright"},initialize:function(tt){setOptions(this,tt)},getPosition:function(){return this.options.position},setPosition:function(tt){var et=this._map;return et&&et.removeControl(this),this.options.position=tt,et&&et.addControl(this),this},getContainer:function(){return this._container},addTo:function(tt){this.remove(),this._map=tt;var et=this._container=this.onAdd(tt),nt=this.getPosition(),rt=tt._controlCorners[nt];return addClass(et,"leaflet-control"),-1!==nt.indexOf("bottom")?rt.insertBefore(et,rt.firstChild):rt.appendChild(et),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(remove(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(tt){this._map&&tt&&tt.screenX>0&&tt.screenY>0&&this._map.getContainer().focus()}}),control=function(tt){return new Vs(tt)};Ns.include({addControl:function(tt){return tt.addTo(this),this},removeControl:function(tt){return tt.remove(),this},_initControlPos:function(){var tt=this._controlCorners={},et="leaflet-",nt=this._controlContainer=create$1("div",et+"control-container",this._container);function createCorner(rt,it){var ot=et+rt+" "+et+it;tt[rt+it]=create$1("div",ot,nt)}createCorner("top","left"),createCorner("top","right"),createCorner("bottom","left"),createCorner("bottom","right")},_clearControlPos:function(){for(var tt in this._controlCorners)remove(this._controlCorners[tt]);remove(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Us=Vs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(tt,et,nt,rt){return nt<rt?-1:rt<nt?1:0}},initialize:function(tt,et,nt){for(var rt in setOptions(this,nt),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,tt)this._addLayer(tt[rt],rt);for(rt in et)this._addLayer(et[rt],rt,!0)},onAdd:function(tt){this._initLayout(),this._update(),this._map=tt,tt.on("zoomend",this._checkDisabledLayers,this);for(var et=0;et<this._layers.length;et++)this._layers[et].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(tt){return Vs.prototype.addTo.call(this,tt),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var tt=0;tt<this._layers.length;tt++)this._layers[tt].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(tt,et){return this._addLayer(tt,et),this._map?this._update():this},addOverlay:function(tt,et){return this._addLayer(tt,et,!0),this._map?this._update():this},removeLayer:function(tt){tt.off("add remove",this._onLayerChange,this);var et=this._getLayer(stamp(tt));return et&&this._layers.splice(this._layers.indexOf(et),1),this._map?this._update():this},expand:function(){addClass(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var tt=this._map.getSize().y-(this._container.offsetTop+50);return tt<this._section.clientHeight?(addClass(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=tt+"px"):removeClass(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var tt="leaflet-control-layers",et=this._container=create$1("div",tt),nt=this.options.collapsed;et.setAttribute("aria-haspopup",!0),disableClickPropagation(et),disableScrollPropagation(et);var rt=this._section=create$1("section",tt+"-list");nt&&(this._map.on("click",this.collapse,this),Ln||on(et,{mouseenter:this.expand,mouseleave:this.collapse},this));var it=this._layersLink=create$1("a",tt+"-toggle",et);it.href="#",it.title="Layers",vo?(on(it,"click",stop),on(it,"click",this.expand,this)):on(it,"focus",this.expand,this),nt||this.expand(),this._baseLayersList=create$1("div",tt+"-base",rt),this._separator=create$1("div",tt+"-separator",rt),this._overlaysList=create$1("div",tt+"-overlays",rt),et.appendChild(rt)},_getLayer:function(tt){for(var et=0;et<this._layers.length;et++)if(this._layers[et]&&stamp(this._layers[et].layer)===tt)return this._layers[et]},_addLayer:function(tt,et,nt){this._map&&tt.on("add remove",this._onLayerChange,this),this._layers.push({layer:tt,name:et,overlay:nt}),this.options.sortLayers&&this._layers.sort(bind((function(tt,et){return this.options.sortFunction(tt.layer,et.layer,tt.name,et.name)}),this)),this.options.autoZIndex&&tt.setZIndex&&(this._lastZIndex++,tt.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;empty(this._baseLayersList),empty(this._overlaysList),this._layerControlInputs=[];var tt,et,nt,rt,it=0;for(nt=0;nt<this._layers.length;nt++)rt=this._layers[nt],this._addItem(rt),et=et||rt.overlay,tt=tt||!rt.overlay,it+=rt.overlay?0:1;return this.options.hideSingleBase&&(tt=tt&&it>1,this._baseLayersList.style.display=tt?"":"none"),this._separator.style.display=et&&tt?"":"none",this},_onLayerChange:function(tt){this._handlingClick||this._update();var et=this._getLayer(stamp(tt.target)),nt=et.overlay?"add"===tt.type?"overlayadd":"overlayremove":"add"===tt.type?"baselayerchange":null;nt&&this._map.fire(nt,et)},_createRadioElement:function(tt,et){var nt='<input type="radio" class="leaflet-control-layers-selector" name="'+tt+'"'+(et?' checked="checked"':"")+"/>",rt=document.createElement("div");return rt.innerHTML=nt,rt.firstChild},_addItem:function(tt){var et,nt=document.createElement("label"),rt=this._map.hasLayer(tt.layer);tt.overlay?((et=document.createElement("input")).type="checkbox",et.className="leaflet-control-layers-selector",et.defaultChecked=rt):et=this._createRadioElement("leaflet-base-layers_"+stamp(this),rt),this._layerControlInputs.push(et),et.layerId=stamp(tt.layer),on(et,"click",this._onInputClick,this);var it=document.createElement("span");it.innerHTML=" "+tt.name;var ot=document.createElement("div");return nt.appendChild(ot),ot.appendChild(et),ot.appendChild(it),(tt.overlay?this._overlaysList:this._baseLayersList).appendChild(nt),this._checkDisabledLayers(),nt},_onInputClick:function(){var tt,et,nt=this._layerControlInputs,rt=[],it=[];this._handlingClick=!0;for(var ot=nt.length-1;ot>=0;ot--)tt=nt[ot],et=this._getLayer(tt.layerId).layer,tt.checked?rt.push(et):tt.checked||it.push(et);for(ot=0;ot<it.length;ot++)this._map.hasLayer(it[ot])&&this._map.removeLayer(it[ot]);for(ot=0;ot<rt.length;ot++)this._map.hasLayer(rt[ot])||this._map.addLayer(rt[ot]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var tt,et,nt=this._layerControlInputs,rt=this._map.getZoom(),it=nt.length-1;it>=0;it--)tt=nt[it],et=this._getLayer(tt.layerId).layer,tt.disabled=void 0!==et.options.minZoom&&rt<et.options.minZoom||void 0!==et.options.maxZoom&&rt>et.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),js=Vs.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(tt){var et="leaflet-control-zoom",nt=create$1("div",et+" leaflet-bar"),rt=this.options;return this._zoomInButton=this._createButton(rt.zoomInText,rt.zoomInTitle,et+"-in",nt,this._zoomIn),this._zoomOutButton=this._createButton(rt.zoomOutText,rt.zoomOutTitle,et+"-out",nt,this._zoomOut),this._updateDisabled(),tt.on("zoomend zoomlevelschange",this._updateDisabled,this),nt},onRemove:function(tt){tt.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(tt){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(tt.shiftKey?3:1))},_zoomOut:function(tt){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(tt.shiftKey?3:1))},_createButton:function(tt,et,nt,rt,it){var ot=create$1("a",nt,rt);return ot.innerHTML=tt,ot.href="#",ot.title=et,ot.setAttribute("role","button"),ot.setAttribute("aria-label",et),disableClickPropagation(ot),on(ot,"click",stop),on(ot,"click",it,this),on(ot,"click",this._refocusOnMap,this),ot},_updateDisabled:function(){var tt=this._map,et="leaflet-disabled";removeClass(this._zoomInButton,et),removeClass(this._zoomOutButton,et),(this._disabled||tt._zoom===tt.getMinZoom())&&addClass(this._zoomOutButton,et),(this._disabled||tt._zoom===tt.getMaxZoom())&&addClass(this._zoomInButton,et)}});Ns.mergeOptions({zoomControl:!0}),Ns.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new js,this.addControl(this.zoomControl))}));var Zs=Vs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(tt){var et=create$1("div","leaflet-control-scale"),nt=this.options;return this._addScales(nt,"leaflet-control-scale-line",et),tt.on(nt.updateWhenIdle?"moveend":"move",this._update,this),tt.whenReady(this._update,this),et},onRemove:function(tt){tt.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(tt,et,nt){tt.metric&&(this._mScale=create$1("div",et,nt)),tt.imperial&&(this._iScale=create$1("div",et,nt))},_update:function(){var tt=this._map,et=tt.getSize().y/2,nt=tt.distance(tt.containerPointToLatLng([0,et]),tt.containerPointToLatLng([this.options.maxWidth,et]));this._updateScales(nt)},_updateScales:function(tt){this.options.metric&&tt&&this._updateMetric(tt),this.options.imperial&&tt&&this._updateImperial(tt)},_updateMetric:function(tt){var et=this._getRoundNum(tt),nt=et<1e3?et+" m":et/1e3+" km";this._updateScale(this._mScale,nt,et/tt)},_updateImperial:function(tt){var et,nt,rt,it=3.2808399*tt;it>5280?(et=it/5280,nt=this._getRoundNum(et),this._updateScale(this._iScale,nt+" mi",nt/et)):(rt=this._getRoundNum(it),this._updateScale(this._iScale,rt+" ft",rt/it))},_updateScale:function(tt,et,nt){tt.style.width=Math.round(this.options.maxWidth*nt)+"px",tt.innerHTML=et},_getRoundNum:function(tt){var et=Math.pow(10,(Math.floor(tt)+"").length-1),nt=tt/et;return et*(nt=nt>=10?10:nt>=5?5:nt>=3?3:nt>=2?2:1)}}),Js=Vs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(tt){setOptions(this,tt),this._attributions={}},onAdd:function(tt){for(var et in tt.attributionControl=this,this._container=create$1("div","leaflet-control-attribution"),disableClickPropagation(this._container),tt._layers)tt._layers[et].getAttribution&&this.addAttribution(tt._layers[et].getAttribution());return this._update(),this._container},setPrefix:function(tt){return this.options.prefix=tt,this._update(),this},addAttribution:function(tt){return tt?(this._attributions[tt]||(this._attributions[tt]=0),this._attributions[tt]++,this._update(),this):this},removeAttribution:function(tt){return tt?(this._attributions[tt]&&(this._attributions[tt]--,this._update()),this):this},_update:function(){if(this._map){var tt=[];for(var et in this._attributions)this._attributions[et]&&tt.push(et);var nt=[];this.options.prefix&&nt.push(this.options.prefix),tt.length&&nt.push(tt.join(", ")),this._container.innerHTML=nt.join(" | ")}}});Ns.mergeOptions({attributionControl:!0}),Ns.addInitHook((function(){this.options.attributionControl&&(new Js).addTo(this)})),Vs.Layers=Us,Vs.Zoom=js,Vs.Scale=Zs,Vs.Attribution=Js,control.layers=function(tt,et,nt){return new Us(tt,et,nt)},control.zoom=function(tt){return new js(tt)},control.scale=function(tt){return new Zs(tt)},control.attribution=function(tt){return new Js(tt)};var du=Class.extend({initialize:function(tt){this._map=tt},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});du.addTo=function(tt,et){return tt.addHandler(et,this),this};var vu,_u={Events:dt},wu=vo?"touchstart mousedown":"mousedown",Tu={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Fu={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},tl=mt.extend({options:{clickTolerance:3},initialize:function(tt,et,nt,rt){setOptions(this,rt),this._element=tt,this._dragStartTarget=et||tt,this._preventOutline=nt},enable:function(){this._enabled||(on(this._dragStartTarget,wu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(tl._dragging===this&&this.finishDrag(),off(this._dragStartTarget,wu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(tt){if(!tt._simulated&&this._enabled&&(this._moved=!1,!hasClass(this._element,"leaflet-zoom-anim")&&!(tl._dragging||tt.shiftKey||1!==tt.which&&1!==tt.button&&!tt.touches||(tl._dragging=this,this._preventOutline&&preventOutline(this._element),disableImageDrag(),fs(),this._moving)))){this.fire("down");var et=tt.touches?tt.touches[0]:tt,nt=getSizedParentNode(this._element);this._startPoint=new Point(et.clientX,et.clientY),this._parentScale=getScale(nt),on(document,Fu[tt.type],this._onMove,this),on(document,Tu[tt.type],this._onUp,this)}},_onMove:function(tt){if(!tt._simulated&&this._enabled)if(tt.touches&&tt.touches.length>1)this._moved=!0;else{var et=tt.touches&&1===tt.touches.length?tt.touches[0]:tt,nt=new Point(et.clientX,et.clientY)._subtract(this._startPoint);(nt.x||nt.y)&&(Math.abs(nt.x)+Math.abs(nt.y)<this.options.clickTolerance||(nt.x/=this._parentScale.x,nt.y/=this._parentScale.y,preventDefault(tt),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=getPosition(this._element).subtract(nt),addClass(document.body,"leaflet-dragging"),this._lastTarget=tt.target||tt.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(nt),this._moving=!0,cancelAnimFrame(this._animRequest),this._lastEvent=tt,this._animRequest=requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var tt={originalEvent:this._lastEvent};this.fire("predrag",tt),setPosition(this._element,this._newPos),this.fire("drag",tt)},_onUp:function(tt){!tt._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var tt in removeClass(document.body,"leaflet-dragging"),this._lastTarget&&(removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fu)off(document,Fu[tt],this._onMove,this),off(document,Tu[tt],this._onUp,this);enableImageDrag(),gs(),this._moved&&this._moving&&(cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,tl._dragging=!1}});function simplify(tt,et){if(!et||!tt.length)return tt.slice();var nt=et*et;return tt=function _simplifyDP(tt,et){var nt=tt.length,rt=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(nt);rt[0]=rt[nt-1]=1,function _simplifyDPStep(tt,et,nt,rt,it){var ot,at,st,ct=0;for(at=rt+1;at<=it-1;at++)(st=_sqClosestPointOnSegment(tt[at],tt[rt],tt[it],!0))>ct&&(ot=at,ct=st);ct>nt&&(et[ot]=1,_simplifyDPStep(tt,et,nt,rt,ot),_simplifyDPStep(tt,et,nt,ot,it))}(tt,rt,et,0,nt-1);var it,ot=[];for(it=0;it<nt;it++)rt[it]&&ot.push(tt[it]);return ot}(tt=function _reducePoints(tt,et){for(var nt=[tt[0]],rt=1,it=0,ot=tt.length;rt<ot;rt++)at=tt[rt],st=tt[it],ct=void 0,pt=void 0,ct=st.x-at.x,pt=st.y-at.y,ct*ct+pt*pt>et&&(nt.push(tt[rt]),it=rt);var at,st,ct,pt;return it<ot-1&&nt.push(tt[ot-1]),nt}(tt,nt),nt)}function pointToSegmentDistance(tt,et,nt){return Math.sqrt(_sqClosestPointOnSegment(tt,et,nt,!0))}function clipSegment(tt,et,nt,rt,it){var ot,at,st,ct=rt?vu:_getBitCode(tt,nt),pt=_getBitCode(et,nt);for(vu=pt;;){if(!(ct|pt))return[tt,et];if(ct&pt)return!1;st=_getBitCode(at=_getEdgeIntersection(tt,et,ot=ct||pt,nt,it),nt),ot===ct?(tt=at,ct=st):(et=at,pt=st)}}function _getEdgeIntersection(tt,et,nt,rt,it){var ot,at,st=et.x-tt.x,ct=et.y-tt.y,pt=rt.min,ft=rt.max;return 8&nt?(ot=tt.x+st*(ft.y-tt.y)/ct,at=ft.y):4&nt?(ot=tt.x+st*(pt.y-tt.y)/ct,at=pt.y):2&nt?(ot=ft.x,at=tt.y+ct*(ft.x-tt.x)/st):1&nt&&(ot=pt.x,at=tt.y+ct*(pt.x-tt.x)/st),new Point(ot,at,it)}function _getBitCode(tt,et){var nt=0;return tt.x<et.min.x?nt|=1:tt.x>et.max.x&&(nt|=2),tt.y<et.min.y?nt|=4:tt.y>et.max.y&&(nt|=8),nt}function _sqClosestPointOnSegment(tt,et,nt,rt){var it,ot=et.x,at=et.y,st=nt.x-ot,ct=nt.y-at,pt=st*st+ct*ct;return pt>0&&((it=((tt.x-ot)*st+(tt.y-at)*ct)/pt)>1?(ot=nt.x,at=nt.y):it>0&&(ot+=st*it,at+=ct*it)),st=tt.x-ot,ct=tt.y-at,rt?st*st+ct*ct:new Point(ot,at)}function isFlat(tt){return!ot(tt[0])||"object"!=typeof tt[0][0]&&void 0!==tt[0][0]}function _flat(tt){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),isFlat(tt)}var ol=(Object.freeze||Object)({simplify:simplify,pointToSegmentDistance:pointToSegmentDistance,closestPointOnSegment:function closestPointOnSegment(tt,et,nt){return _sqClosestPointOnSegment(tt,et,nt)},clipSegment:clipSegment,_getEdgeIntersection:_getEdgeIntersection,_getBitCode:_getBitCode,_sqClosestPointOnSegment:_sqClosestPointOnSegment,isFlat:isFlat,_flat:_flat});function clipPolygon(tt,et,nt){var rt,it,ot,at,st,ct,pt,ft,dt,mt=[1,4,2,8];for(it=0,pt=tt.length;it<pt;it++)tt[it]._code=_getBitCode(tt[it],et);for(at=0;at<4;at++){for(ft=mt[at],rt=[],it=0,ot=(pt=tt.length)-1;it<pt;ot=it++)st=tt[it],ct=tt[ot],st._code&ft?ct._code&ft||((dt=_getEdgeIntersection(ct,st,ft,et,nt))._code=_getBitCode(dt,et),rt.push(dt)):(ct._code&ft&&((dt=_getEdgeIntersection(ct,st,ft,et,nt))._code=_getBitCode(dt,et),rt.push(dt)),rt.push(st));tt=rt}return tt}var sl=(Object.freeze||Object)({clipPolygon:clipPolygon}),dl={project:function(tt){return new Point(tt.lng,tt.lat)},unproject:function(tt){return new LatLng(tt.y,tt.x)},bounds:new Bounds([-180,-90],[180,90])},gl={R:6378137,R_MINOR:6356752.314245179,bounds:new Bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(tt){var et=Math.PI/180,nt=this.R,rt=tt.lat*et,it=this.R_MINOR/nt,ot=Math.sqrt(1-it*it),at=ot*Math.sin(rt),st=Math.tan(Math.PI/4-rt/2)/Math.pow((1-at)/(1+at),ot/2);return rt=-nt*Math.log(Math.max(st,1e-10)),new Point(tt.lng*et*nt,rt)},unproject:function(tt){for(var et,nt=180/Math.PI,rt=this.R,it=this.R_MINOR/rt,ot=Math.sqrt(1-it*it),at=Math.exp(-tt.y/rt),st=Math.PI/2-2*Math.atan(at),ct=0,pt=.1;ct<15&&Math.abs(pt)>1e-7;ct++)et=ot*Math.sin(st),et=Math.pow((1-et)/(1+et),ot/2),st+=pt=Math.PI/2-2*Math.atan(at*et)-st;return new LatLng(st*nt,tt.x*nt/rt)}},yl=(Object.freeze||Object)({LonLat:dl,Mercator:gl,SphericalMercator:Rt}),vl=extend({},Ot,{code:"EPSG:3395",projection:gl,transformation:function(){var tt=.5/(Math.PI*gl.R);return toTransformation(tt,.5,-tt,.5)}()}),_l=extend({},Ot,{code:"EPSG:4326",projection:dl,transformation:toTransformation(1/180,1,-1/180,.5)}),xl=extend({},Dt,{projection:dl,transformation:toTransformation(1,0,-1,0),scale:function(tt){return Math.pow(2,tt)},zoom:function(tt){return Math.log(tt)/Math.LN2},distance:function(tt,et){var nt=et.lng-tt.lng,rt=et.lat-tt.lat;return Math.sqrt(nt*nt+rt*rt)},infinite:!0});Dt.Earth=Ot,Dt.EPSG3395=vl,Dt.EPSG3857=Bt,Dt.EPSG900913=Ne,Dt.EPSG4326=_l,Dt.Simple=xl;var bl=mt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(tt){return tt.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(tt){return tt&&tt.removeLayer(this),this},getPane:function(tt){return this._map.getPane(tt?this.options[tt]||tt:this.options.pane)},addInteractiveTarget:function(tt){return this._map._targets[stamp(tt)]=this,this},removeInteractiveTarget:function(tt){return delete this._map._targets[stamp(tt)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(tt){var et=tt.target;if(et.hasLayer(this)){if(this._map=et,this._zoomAnimated=et._zoomAnimated,this.getEvents){var nt=this.getEvents();et.on(nt,this),this.once("remove",(function(){et.off(nt,this)}),this)}this.onAdd(et),this.getAttribution&&et.attributionControl&&et.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),et.fire("layeradd",{layer:this})}}});Ns.include({addLayer:function(tt){if(!tt._layerAdd)throw new Error("The provided object is not a Layer.");var et=stamp(tt);return this._layers[et]||(this._layers[et]=tt,tt._mapToAdd=this,tt.beforeAdd&&tt.beforeAdd(this),this.whenReady(tt._layerAdd,tt)),this},removeLayer:function(tt){var et=stamp(tt);return this._layers[et]?(this._loaded&&tt.onRemove(this),tt.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(tt.getAttribution()),delete this._layers[et],this._loaded&&(this.fire("layerremove",{layer:tt}),tt.fire("remove")),tt._map=tt._mapToAdd=null,this):this},hasLayer:function(tt){return!!tt&&stamp(tt)in this._layers},eachLayer:function(tt,et){for(var nt in this._layers)tt.call(et,this._layers[nt]);return this},_addLayers:function(tt){for(var et=0,nt=(tt=tt?ot(tt)?tt:[tt]:[]).length;et<nt;et++)this.addLayer(tt[et])},_addZoomLimit:function(tt){!isNaN(tt.options.maxZoom)&&isNaN(tt.options.minZoom)||(this._zoomBoundLayers[stamp(tt)]=tt,this._updateZoomLevels())},_removeZoomLimit:function(tt){var et=stamp(tt);this._zoomBoundLayers[et]&&(delete this._zoomBoundLayers[et],this._updateZoomLevels())},_updateZoomLevels:function(){var tt=1/0,et=-1/0,nt=this._getZoomSpan();for(var rt in this._zoomBoundLayers){var it=this._zoomBoundLayers[rt].options;tt=void 0===it.minZoom?tt:Math.min(tt,it.minZoom),et=void 0===it.maxZoom?et:Math.max(et,it.maxZoom)}this._layersMaxZoom=et===-1/0?void 0:et,this._layersMinZoom=tt===1/0?void 0:tt,nt!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var wl=bl.extend({initialize:function(tt,et){var nt,rt;if(setOptions(this,et),this._layers={},tt)for(nt=0,rt=tt.length;nt<rt;nt++)this.addLayer(tt[nt])},addLayer:function(tt){var et=this.getLayerId(tt);return this._layers[et]=tt,this._map&&this._map.addLayer(tt),this},removeLayer:function(tt){var et=tt in this._layers?tt:this.getLayerId(tt);return this._map&&this._layers[et]&&this._map.removeLayer(this._layers[et]),delete this._layers[et],this},hasLayer:function(tt){return!!tt&&(tt in this._layers||this.getLayerId(tt)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(tt){var et,nt,rt=Array.prototype.slice.call(arguments,1);for(et in this._layers)(nt=this._layers[et])[tt]&&nt[tt].apply(nt,rt);return this},onAdd:function(tt){this.eachLayer(tt.addLayer,tt)},onRemove:function(tt){this.eachLayer(tt.removeLayer,tt)},eachLayer:function(tt,et){for(var nt in this._layers)tt.call(et,this._layers[nt]);return this},getLayer:function(tt){return this._layers[tt]},getLayers:function(){var tt=[];return this.eachLayer(tt.push,tt),tt},setZIndex:function(tt){return this.invoke("setZIndex",tt)},getLayerId:function(tt){return stamp(tt)}}),Sl=wl.extend({addLayer:function(tt){return this.hasLayer(tt)?this:(tt.addEventParent(this),wl.prototype.addLayer.call(this,tt),this.fire("layeradd",{layer:tt}))},removeLayer:function(tt){return this.hasLayer(tt)?(tt in this._layers&&(tt=this._layers[tt]),tt.removeEventParent(this),wl.prototype.removeLayer.call(this,tt),this.fire("layerremove",{layer:tt})):this},setStyle:function(tt){return this.invoke("setStyle",tt)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var tt=new LatLngBounds;for(var et in this._layers){var nt=this._layers[et];tt.extend(nt.getBounds?nt.getBounds():nt.getLatLng())}return tt}}),Cl=Class.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(tt){setOptions(this,tt)},createIcon:function(tt){return this._createIcon("icon",tt)},createShadow:function(tt){return this._createIcon("shadow",tt)},_createIcon:function(tt,et){var nt=this._getIconUrl(tt);if(!nt){if("icon"===tt)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var rt=this._createImg(nt,et&&"IMG"===et.tagName?et:null);return this._setIconStyles(rt,tt),rt},_setIconStyles:function(tt,et){var nt=this.options,rt=nt[et+"Size"];"number"==typeof rt&&(rt=[rt,rt]);var it=toPoint(rt),ot=toPoint("shadow"===et&&nt.shadowAnchor||nt.iconAnchor||it&&it.divideBy(2,!0));tt.className="leaflet-marker-"+et+" "+(nt.className||""),ot&&(tt.style.marginLeft=-ot.x+"px",tt.style.marginTop=-ot.y+"px"),it&&(tt.style.width=it.x+"px",tt.style.height=it.y+"px")},_createImg:function(tt,et){return(et=et||document.createElement("img")).src=tt,et},_getIconUrl:function(tt){return na&&this.options[tt+"RetinaUrl"]||this.options[tt+"Url"]}}),kl=Cl.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(tt){return kl.imagePath||(kl.imagePath=this._detectIconPath()),(this.options.imagePath||kl.imagePath)+Cl.prototype._getIconUrl.call(this,tt)},_detectIconPath:function(){var tt=create$1("div","leaflet-default-icon-path",document.body),et=getStyle(tt,"background-image")||getStyle(tt,"backgroundImage");return document.body.removeChild(tt),et=null===et||0!==et.indexOf("url")?"":et.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Il=du.extend({initialize:function(tt){this._marker=tt},addHooks:function(){var tt=this._marker._icon;this._draggable||(this._draggable=new tl(tt,tt,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),addClass(tt,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(tt){var et=this._marker,nt=et._map,rt=this._marker.options.autoPanSpeed,it=this._marker.options.autoPanPadding,ot=getPosition(et._icon),at=nt.getPixelBounds(),st=nt.getPixelOrigin(),ct=toBounds(at.min._subtract(st).add(it),at.max._subtract(st).subtract(it));if(!ct.contains(ot)){var pt=toPoint((Math.max(ct.max.x,ot.x)-ct.max.x)/(at.max.x-ct.max.x)-(Math.min(ct.min.x,ot.x)-ct.min.x)/(at.min.x-ct.min.x),(Math.max(ct.max.y,ot.y)-ct.max.y)/(at.max.y-ct.max.y)-(Math.min(ct.min.y,ot.y)-ct.min.y)/(at.min.y-ct.min.y)).multiplyBy(rt);nt.panBy(pt,{animate:!1}),this._draggable._newPos._add(pt),this._draggable._startPos._add(pt),setPosition(et._icon,this._draggable._newPos),this._onDrag(tt),this._panRequest=requestAnimFrame(this._adjustPan.bind(this,tt))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(tt){this._marker.options.autoPan&&(cancelAnimFrame(this._panRequest),this._panRequest=requestAnimFrame(this._adjustPan.bind(this,tt)))},_onDrag:function(tt){var et=this._marker,nt=et._shadow,rt=getPosition(et._icon),it=et._map.layerPointToLatLng(rt);nt&&setPosition(nt,rt),et._latlng=it,tt.latlng=it,tt.oldLatLng=this._oldLatLng,et.fire("move",tt).fire("drag",tt)},_onDragEnd:function(tt){cancelAnimFrame(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",tt)}}),Al=bl.extend({options:{icon:new kl,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(tt,et){setOptions(this,et),this._latlng=toLatLng(tt)},onAdd:function(tt){this._zoomAnimated=this._zoomAnimated&&tt.options.markerZoomAnimation,this._zoomAnimated&&tt.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(tt){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&tt.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(tt){var et=this._latlng;return this._latlng=toLatLng(tt),this.update(),this.fire("move",{oldLatLng:et,latlng:this._latlng})},setZIndexOffset:function(tt){return this.options.zIndexOffset=tt,this.update()},getIcon:function(){return this.options.icon},setIcon:function(tt){return this.options.icon=tt,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var tt=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(tt)}return this},_initIcon:function(){var tt=this.options,et="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),nt=tt.icon.createIcon(this._icon),rt=!1;nt!==this._icon&&(this._icon&&this._removeIcon(),rt=!0,tt.title&&(nt.title=tt.title),"IMG"===nt.tagName&&(nt.alt=tt.alt||"")),addClass(nt,et),tt.keyboard&&(nt.tabIndex="0"),this._icon=nt,tt.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var it=tt.icon.createShadow(this._shadow),ot=!1;it!==this._shadow&&(this._removeShadow(),ot=!0),it&&(addClass(it,et),it.alt=""),this._shadow=it,tt.opacity<1&&this._updateOpacity(),rt&&this.getPane().appendChild(this._icon),this._initInteraction(),it&&ot&&this.getPane(tt.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&remove(this._shadow),this._shadow=null},_setPos:function(tt){this._icon&&setPosition(this._icon,tt),this._shadow&&setPosition(this._shadow,tt),this._zIndex=tt.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(tt){this._icon&&(this._icon.style.zIndex=this._zIndex+tt)},_animateZoom:function(tt){var et=this._map._latLngToNewLayerPoint(this._latlng,tt.zoom,tt.center).round();this._setPos(et)},_initInteraction:function(){if(this.options.interactive&&(addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Il)){var tt=this.options.draggable;this.dragging&&(tt=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Il(this),tt&&this.dragging.enable()}},setOpacity:function(tt){return this.options.opacity=tt,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var tt=this.options.opacity;this._icon&&setOpacity(this._icon,tt),this._shadow&&setOpacity(this._shadow,tt)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),zl=bl.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(tt){this._renderer=tt.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(tt){return setOptions(this,tt),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&tt&&tt.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Fl=zl.extend({options:{fill:!0,radius:10},initialize:function(tt,et){setOptions(this,et),this._latlng=toLatLng(tt),this._radius=this.options.radius},setLatLng:function(tt){var et=this._latlng;return this._latlng=toLatLng(tt),this.redraw(),this.fire("move",{oldLatLng:et,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(tt){return this.options.radius=this._radius=tt,this.redraw()},getRadius:function(){return this._radius},setStyle:function(tt){var et=tt&&tt.radius||this._radius;return zl.prototype.setStyle.call(this,tt),this.setRadius(et),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var tt=this._radius,et=this._radiusY||tt,nt=this._clickTolerance(),rt=[tt+nt,et+nt];this._pxBounds=new Bounds(this._point.subtract(rt),this._point.add(rt))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(tt){return tt.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Hl=Fl.extend({initialize:function(tt,et,nt){if("number"==typeof et&&(et=extend({},nt,{radius:et})),setOptions(this,et),this._latlng=toLatLng(tt),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(tt){return this._mRadius=tt,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var tt=[this._radius,this._radiusY||this._radius];return new LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(tt)),this._map.layerPointToLatLng(this._point.add(tt)))},setStyle:zl.prototype.setStyle,_project:function(){var tt=this._latlng.lng,et=this._latlng.lat,nt=this._map,rt=nt.options.crs;if(rt.distance===Ot.distance){var it=Math.PI/180,ot=this._mRadius/Ot.R/it,at=nt.project([et+ot,tt]),st=nt.project([et-ot,tt]),ct=at.add(st).divideBy(2),pt=nt.unproject(ct).lat,ft=Math.acos((Math.cos(ot*it)-Math.sin(et*it)*Math.sin(pt*it))/(Math.cos(et*it)*Math.cos(pt*it)))/it;(isNaN(ft)||0===ft)&&(ft=ot/Math.cos(Math.PI/180*et)),this._point=ct.subtract(nt.getPixelOrigin()),this._radius=isNaN(ft)?0:ct.x-nt.project([pt,tt-ft]).x,this._radiusY=ct.y-at.y}else{var dt=rt.unproject(rt.project(this._latlng).subtract([this._mRadius,0]));this._point=nt.latLngToLayerPoint(this._latlng),this._radius=this._point.x-nt.latLngToLayerPoint(dt).x}this._updateBounds()}}),ac=zl.extend({options:{smoothFactor:1,noClip:!1},initialize:function(tt,et){setOptions(this,et),this._setLatLngs(tt)},getLatLngs:function(){return this._latlngs},setLatLngs:function(tt){return this._setLatLngs(tt),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(tt){for(var et,nt,rt=1/0,it=null,ot=_sqClosestPointOnSegment,at=0,st=this._parts.length;at<st;at++)for(var ct=this._parts[at],pt=1,ft=ct.length;pt<ft;pt++){var dt=ot(tt,et=ct[pt-1],nt=ct[pt],!0);dt<rt&&(rt=dt,it=ot(tt,et,nt))}return it&&(it.distance=Math.sqrt(rt)),it},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var tt,et,nt,rt,it,ot,at,st=this._rings[0],ct=st.length;if(!ct)return null;for(tt=0,et=0;tt<ct-1;tt++)et+=st[tt].distanceTo(st[tt+1])/2;if(0===et)return this._map.layerPointToLatLng(st[0]);for(tt=0,rt=0;tt<ct-1;tt++)if(it=st[tt],ot=st[tt+1],(rt+=nt=it.distanceTo(ot))>et)return at=(rt-et)/nt,this._map.layerPointToLatLng([ot.x-at*(ot.x-it.x),ot.y-at*(ot.y-it.y)])},getBounds:function(){return this._bounds},addLatLng:function(tt,et){return et=et||this._defaultShape(),tt=toLatLng(tt),et.push(tt),this._bounds.extend(tt),this.redraw()},_setLatLngs:function(tt){this._bounds=new LatLngBounds,this._latlngs=this._convertLatLngs(tt)},_defaultShape:function(){return isFlat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(tt){for(var et=[],nt=isFlat(tt),rt=0,it=tt.length;rt<it;rt++)nt?(et[rt]=toLatLng(tt[rt]),this._bounds.extend(et[rt])):et[rt]=this._convertLatLngs(tt[rt]);return et},_project:function(){var tt=new Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,tt),this._bounds.isValid()&&tt.isValid()&&(this._rawPxBounds=tt,this._updateBounds())},_updateBounds:function(){var tt=this._clickTolerance(),et=new Point(tt,tt);this._pxBounds=new Bounds([this._rawPxBounds.min.subtract(et),this._rawPxBounds.max.add(et)])},_projectLatlngs:function(tt,et,nt){var rt,it,ot=tt[0]instanceof LatLng,at=tt.length;if(ot){for(it=[],rt=0;rt<at;rt++)it[rt]=this._map.latLngToLayerPoint(tt[rt]),nt.extend(it[rt]);et.push(it)}else for(rt=0;rt<at;rt++)this._projectLatlngs(tt[rt],et,nt)},_clipPoints:function(){var tt=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(tt))if(this.options.noClip)this._parts=this._rings;else{var et,nt,rt,it,ot,at,st,ct=this._parts;for(et=0,rt=0,it=this._rings.length;et<it;et++)for(nt=0,ot=(st=this._rings[et]).length;nt<ot-1;nt++)(at=clipSegment(st[nt],st[nt+1],tt,nt,!0))&&(ct[rt]=ct[rt]||[],ct[rt].push(at[0]),at[1]===st[nt+1]&&nt!==ot-2||(ct[rt].push(at[1]),rt++))}},_simplifyPoints:function(){for(var tt=this._parts,et=this.options.smoothFactor,nt=0,rt=tt.length;nt<rt;nt++)tt[nt]=simplify(tt[nt],et)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(tt,et){var nt,rt,it,ot,at,st,ct=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(tt))return!1;for(nt=0,ot=this._parts.length;nt<ot;nt++)for(rt=0,it=(at=(st=this._parts[nt]).length)-1;rt<at;it=rt++)if((et||0!==rt)&&pointToSegmentDistance(tt,st[it],st[rt])<=ct)return!0;return!1}});ac._flat=_flat;var pc=ac.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var tt,et,nt,rt,it,ot,at,st,ct,pt=this._rings[0],ft=pt.length;if(!ft)return null;for(ot=at=st=0,tt=0,et=ft-1;tt<ft;et=tt++)nt=pt[tt],rt=pt[et],it=nt.y*rt.x-rt.y*nt.x,at+=(nt.x+rt.x)*it,st+=(nt.y+rt.y)*it,ot+=3*it;return ct=0===ot?pt[0]:[at/ot,st/ot],this._map.layerPointToLatLng(ct)},_convertLatLngs:function(tt){var et=ac.prototype._convertLatLngs.call(this,tt),nt=et.length;return nt>=2&&et[0]instanceof LatLng&&et[0].equals(et[nt-1])&&et.pop(),et},_setLatLngs:function(tt){ac.prototype._setLatLngs.call(this,tt),isFlat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return isFlat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var tt=this._renderer._bounds,et=this.options.weight,nt=new Point(et,et);if(tt=new Bounds(tt.min.subtract(nt),tt.max.add(nt)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(tt))if(this.options.noClip)this._parts=this._rings;else for(var rt,it=0,ot=this._rings.length;it<ot;it++)(rt=clipPolygon(this._rings[it],tt,!0)).length&&this._parts.push(rt)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(tt){var et,nt,rt,it,ot,at,st,ct,pt=!1;if(!this._pxBounds||!this._pxBounds.contains(tt))return!1;for(it=0,st=this._parts.length;it<st;it++)for(ot=0,at=(ct=(et=this._parts[it]).length)-1;ot<ct;at=ot++)nt=et[ot],rt=et[at],nt.y>tt.y!=rt.y>tt.y&&tt.x<(rt.x-nt.x)*(tt.y-nt.y)/(rt.y-nt.y)+nt.x&&(pt=!pt);return pt||ac.prototype._containsPoint.call(this,tt,!0)}}),yc=Sl.extend({initialize:function(tt,et){setOptions(this,et),this._layers={},tt&&this.addData(tt)},addData:function(tt){var et,nt,rt,it=ot(tt)?tt:tt.features;if(it){for(et=0,nt=it.length;et<nt;et++)((rt=it[et]).geometries||rt.geometry||rt.features||rt.coordinates)&&this.addData(rt);return this}var at=this.options;if(at.filter&&!at.filter(tt))return this;var st=geometryToLayer(tt,at);return st?(st.feature=asFeature(tt),st.defaultOptions=st.options,this.resetStyle(st),at.onEachFeature&&at.onEachFeature(tt,st),this.addLayer(st)):this},resetStyle:function(tt){return void 0===tt?this.eachLayer(this.resetStyle,this):(tt.options=extend({},tt.defaultOptions),this._setLayerStyle(tt,this.options.style),this)},setStyle:function(tt){return this.eachLayer((function(et){this._setLayerStyle(et,tt)}),this)},_setLayerStyle:function(tt,et){tt.setStyle&&("function"==typeof et&&(et=et(tt.feature)),tt.setStyle(et))}});function geometryToLayer(tt,et){var nt,rt,it,ot,at="Feature"===tt.type?tt.geometry:tt,st=at?at.coordinates:null,ct=[],pt=et&&et.pointToLayer,ft=et&&et.coordsToLatLng||coordsToLatLng;if(!st&&!at)return null;switch(at.type){case"Point":return _pointToLayer(pt,tt,nt=ft(st),et);case"MultiPoint":for(it=0,ot=st.length;it<ot;it++)nt=ft(st[it]),ct.push(_pointToLayer(pt,tt,nt,et));return new Sl(ct);case"LineString":case"MultiLineString":return rt=coordsToLatLngs(st,"LineString"===at.type?0:1,ft),new ac(rt,et);case"Polygon":case"MultiPolygon":return rt=coordsToLatLngs(st,"Polygon"===at.type?1:2,ft),new pc(rt,et);case"GeometryCollection":for(it=0,ot=at.geometries.length;it<ot;it++){var dt=geometryToLayer({geometry:at.geometries[it],type:"Feature",properties:tt.properties},et);dt&&ct.push(dt)}return new Sl(ct);default:throw new Error("Invalid GeoJSON object.")}}function _pointToLayer(tt,et,nt,rt){return tt?tt(et,nt):new Al(nt,rt&&rt.markersInheritOptions&&rt)}function coordsToLatLng(tt){return new LatLng(tt[1],tt[0],tt[2])}function coordsToLatLngs(tt,et,nt){for(var rt,it=[],ot=0,at=tt.length;ot<at;ot++)rt=et?coordsToLatLngs(tt[ot],et-1,nt):(nt||coordsToLatLng)(tt[ot]),it.push(rt);return it}function latLngToCoords(tt,et){return et="number"==typeof et?et:6,void 0!==tt.alt?[formatNum(tt.lng,et),formatNum(tt.lat,et),formatNum(tt.alt,et)]:[formatNum(tt.lng,et),formatNum(tt.lat,et)]}function latLngsToCoords(tt,et,nt,rt){for(var it=[],ot=0,at=tt.length;ot<at;ot++)it.push(et?latLngsToCoords(tt[ot],et-1,nt,rt):latLngToCoords(tt[ot],rt));return!et&&nt&&it.push(it[0]),it}function getFeature(tt,et){return tt.feature?extend({},tt.feature,{geometry:et}):asFeature(et)}function asFeature(tt){return"Feature"===tt.type||"FeatureCollection"===tt.type?tt:{type:"Feature",properties:{},geometry:tt}}var _c={toGeoJSON:function(tt){return getFeature(this,{type:"Point",coordinates:latLngToCoords(this.getLatLng(),tt)})}};function geoJSON(tt,et){return new yc(tt,et)}Al.include(_c),Hl.include(_c),Fl.include(_c),ac.include({toGeoJSON:function(tt){var et=!isFlat(this._latlngs);return getFeature(this,{type:(et?"Multi":"")+"LineString",coordinates:latLngsToCoords(this._latlngs,et?1:0,!1,tt)})}}),pc.include({toGeoJSON:function(tt){var et=!isFlat(this._latlngs),nt=et&&!isFlat(this._latlngs[0]),rt=latLngsToCoords(this._latlngs,nt?2:et?1:0,!0,tt);return et||(rt=[rt]),getFeature(this,{type:(nt?"Multi":"")+"Polygon",coordinates:rt})}}),wl.include({toMultiPoint:function(tt){var et=[];return this.eachLayer((function(nt){et.push(nt.toGeoJSON(tt).geometry.coordinates)})),getFeature(this,{type:"MultiPoint",coordinates:et})},toGeoJSON:function(tt){var et=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===et)return this.toMultiPoint(tt);var nt="GeometryCollection"===et,rt=[];return this.eachLayer((function(et){if(et.toGeoJSON){var it=et.toGeoJSON(tt);if(nt)rt.push(it.geometry);else{var ot=asFeature(it);"FeatureCollection"===ot.type?rt.push.apply(rt,ot.features):rt.push(ot)}}})),nt?getFeature(this,{geometries:rt,type:"GeometryCollection"}):{type:"FeatureCollection",features:rt}}});var xc=geoJSON,bc=bl.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(tt,et,nt){this._url=tt,this._bounds=toLatLngBounds(et),setOptions(this,nt)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(tt){return this.options.opacity=tt,this._image&&this._updateOpacity(),this},setStyle:function(tt){return tt.opacity&&this.setOpacity(tt.opacity),this},bringToFront:function(){return this._map&&toFront(this._image),this},bringToBack:function(){return this._map&&toBack(this._image),this},setUrl:function(tt){return this._url=tt,this._image&&(this._image.src=tt),this},setBounds:function(tt){return this._bounds=toLatLngBounds(tt),this._map&&this._reset(),this},getEvents:function(){var tt={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(tt.zoomanim=this._animateZoom),tt},setZIndex:function(tt){return this.options.zIndex=tt,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var tt="IMG"===this._url.tagName,et=this._image=tt?this._url:create$1("img");addClass(et,"leaflet-image-layer"),this._zoomAnimated&&addClass(et,"leaflet-zoom-animated"),this.options.className&&addClass(et,this.options.className),et.onselectstart=falseFn,et.onmousemove=falseFn,et.onload=bind(this.fire,this,"load"),et.onerror=bind(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(et.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),tt?this._url=et.src:(et.src=this._url,et.alt=this.options.alt)},_animateZoom:function(tt){var et=this._map.getZoomScale(tt.zoom),nt=this._map._latLngBoundsToNewLayerBounds(this._bounds,tt.zoom,tt.center).min;setTransform(this._image,nt,et)},_reset:function(){var tt=this._image,et=new Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),nt=et.getSize();setPosition(tt,et.min),tt.style.width=nt.x+"px",tt.style.height=nt.y+"px"},_updateOpacity:function(){setOpacity(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var tt=this.options.errorOverlayUrl;tt&&this._url!==tt&&(this._url=tt,this._image.src=tt)}}),wc=bc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var tt="VIDEO"===this._url.tagName,et=this._image=tt?this._url:create$1("video");if(addClass(et,"leaflet-image-layer"),this._zoomAnimated&&addClass(et,"leaflet-zoom-animated"),this.options.className&&addClass(et,this.options.className),et.onselectstart=falseFn,et.onmousemove=falseFn,et.onloadeddata=bind(this.fire,this,"load"),tt){for(var nt=et.getElementsByTagName("source"),rt=[],it=0;it<nt.length;it++)rt.push(nt[it].src);this._url=nt.length>0?rt:[et.src]}else{ot(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&et.style.hasOwnProperty("objectFit")&&(et.style.objectFit="fill"),et.autoplay=!!this.options.autoplay,et.loop=!!this.options.loop;for(var at=0;at<this._url.length;at++){var st=create$1("source");st.src=this._url[at],et.appendChild(st)}}}}),Ec=bc.extend({_initImage:function(){var tt=this._image=this._url;addClass(tt,"leaflet-image-layer"),this._zoomAnimated&&addClass(tt,"leaflet-zoom-animated"),this.options.className&&addClass(tt,this.options.className),tt.onselectstart=falseFn,tt.onmousemove=falseFn}}),Cc=bl.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(tt,et){setOptions(this,tt),this._source=et},onAdd:function(tt){this._zoomAnimated=tt._zoomAnimated,this._container||this._initLayout(),tt._fadeAnimated&&setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),tt._fadeAnimated&&setOpacity(this._container,1),this.bringToFront()},onRemove:function(tt){tt._fadeAnimated?(setOpacity(this._container,0),this._removeTimeout=setTimeout(bind(remove,void 0,this._container),200)):remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(tt){return this._latlng=toLatLng(tt),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(tt){return this._content=tt,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var tt={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(tt.zoomanim=this._animateZoom),tt},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&toFront(this._container),this},bringToBack:function(){return this._map&&toBack(this._container),this},_prepareOpen:function(tt,et,nt){if(et instanceof bl||(nt=et,et=tt),et instanceof Sl)for(var rt in tt._layers){et=tt._layers[rt];break}if(!nt)if(et.getCenter)nt=et.getCenter();else{if(!et.getLatLng)throw new Error("Unable to get source layer LatLng.");nt=et.getLatLng()}return this._source=et,this.update(),nt},_updateContent:function(){if(this._content){var tt=this._contentNode,et="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof et)tt.innerHTML=et;else{for(;tt.hasChildNodes();)tt.removeChild(tt.firstChild);tt.appendChild(et)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var tt=this._map.latLngToLayerPoint(this._latlng),et=toPoint(this.options.offset),nt=this._getAnchor();this._zoomAnimated?setPosition(this._container,tt.add(nt)):et=et.add(tt).add(nt);var rt=this._containerBottom=-et.y,it=this._containerLeft=-Math.round(this._containerWidth/2)+et.x;this._container.style.bottom=rt+"px",this._container.style.left=it+"px"}},_getAnchor:function(){return[0,0]}}),kc=Cc.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(tt){return tt.openPopup(this),this},onAdd:function(tt){Cc.prototype.onAdd.call(this,tt),tt.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zl||this._source.on("preclick",stopPropagation))},onRemove:function(tt){Cc.prototype.onRemove.call(this,tt),tt.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zl||this._source.off("preclick",stopPropagation))},getEvents:function(){var tt=Cc.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(tt.preclick=this._close),this.options.keepInView&&(tt.moveend=this._adjustPan),tt},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var tt="leaflet-popup",et=this._container=create$1("div",tt+" "+(this.options.className||"")+" leaflet-zoom-animated"),nt=this._wrapper=create$1("div",tt+"-content-wrapper",et);if(this._contentNode=create$1("div",tt+"-content",nt),disableClickPropagation(nt),disableScrollPropagation(this._contentNode),on(nt,"contextmenu",stopPropagation),this._tipContainer=create$1("div",tt+"-tip-container",et),this._tip=create$1("div",tt+"-tip",this._tipContainer),this.options.closeButton){var rt=this._closeButton=create$1("a",tt+"-close-button",et);rt.href="#close",rt.innerHTML="&#215;",on(rt,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var tt=this._contentNode,et=tt.style;et.width="",et.whiteSpace="nowrap";var nt=tt.offsetWidth;nt=Math.min(nt,this.options.maxWidth),nt=Math.max(nt,this.options.minWidth),et.width=nt+1+"px",et.whiteSpace="",et.height="";var rt=tt.offsetHeight,it=this.options.maxHeight;it&&rt>it?(et.height=it+"px",addClass(tt,"leaflet-popup-scrolled")):removeClass(tt,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(tt){var et=this._map._latLngToNewLayerPoint(this._latlng,tt.zoom,tt.center),nt=this._getAnchor();setPosition(this._container,et.add(nt))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var tt=this._map,et=parseInt(getStyle(this._container,"marginBottom"),10)||0,nt=this._container.offsetHeight+et,rt=this._containerWidth,it=new Point(this._containerLeft,-nt-this._containerBottom);it._add(getPosition(this._container));var ot=tt.layerPointToContainerPoint(it),at=toPoint(this.options.autoPanPadding),st=toPoint(this.options.autoPanPaddingTopLeft||at),ct=toPoint(this.options.autoPanPaddingBottomRight||at),pt=tt.getSize(),ft=0,dt=0;ot.x+rt+ct.x>pt.x&&(ft=ot.x+rt-pt.x+ct.x),ot.x-ft-st.x<0&&(ft=ot.x-st.x),ot.y+nt+ct.y>pt.y&&(dt=ot.y+nt-pt.y+ct.y),ot.y-dt-st.y<0&&(dt=ot.y-st.y),(ft||dt)&&tt.fire("autopanstart").panBy([ft,dt])}},_onCloseButtonClick:function(tt){this._close(),stop(tt)},_getAnchor:function(){return toPoint(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ns.mergeOptions({closePopupOnClick:!0}),Ns.include({openPopup:function(tt,et,nt){return tt instanceof kc||(tt=new kc(nt).setContent(tt)),et&&tt.setLatLng(et),this.hasLayer(tt)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=tt,this.addLayer(tt))},closePopup:function(tt){return tt&&tt!==this._popup||(tt=this._popup,this._popup=null),tt&&this.removeLayer(tt),this}}),bl.include({bindPopup:function(tt,et){return tt instanceof kc?(setOptions(tt,et),this._popup=tt,tt._source=this):(this._popup&&!et||(this._popup=new kc(et,this)),this._popup.setContent(tt)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(tt,et){return this._popup&&this._map&&(et=this._popup._prepareOpen(this,tt,et),this._map.openPopup(this._popup,et)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(tt){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(tt)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(tt){return this._popup&&this._popup.setContent(tt),this},getPopup:function(){return this._popup},_openPopup:function(tt){var et=tt.layer||tt.target;this._popup&&this._map&&(stop(tt),et instanceof zl?this.openPopup(tt.layer||tt.target,tt.latlng):this._map.hasLayer(this._popup)&&this._popup._source===et?this.closePopup():this.openPopup(et,tt.latlng))},_movePopup:function(tt){this._popup.setLatLng(tt.latlng)},_onKeyPress:function(tt){13===tt.originalEvent.keyCode&&this._openPopup(tt)}});var Ic=Cc.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(tt){Cc.prototype.onAdd.call(this,tt),this.setOpacity(this.options.opacity),tt.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(tt){Cc.prototype.onRemove.call(this,tt),tt.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var tt=Cc.prototype.getEvents.call(this);return vo&&!this.options.permanent&&(tt.preclick=this._close),tt},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var tt="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=create$1("div",tt)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(tt){var et=this._map,nt=this._container,rt=et.latLngToContainerPoint(et.getCenter()),it=et.layerPointToContainerPoint(tt),ot=this.options.direction,at=nt.offsetWidth,st=nt.offsetHeight,ct=toPoint(this.options.offset),pt=this._getAnchor();"top"===ot?tt=tt.add(toPoint(-at/2+ct.x,-st+ct.y+pt.y,!0)):"bottom"===ot?tt=tt.subtract(toPoint(at/2-ct.x,-ct.y,!0)):"center"===ot?tt=tt.subtract(toPoint(at/2+ct.x,st/2-pt.y+ct.y,!0)):"right"===ot||"auto"===ot&&it.x<rt.x?(ot="right",tt=tt.add(toPoint(ct.x+pt.x,pt.y-st/2+ct.y,!0))):(ot="left",tt=tt.subtract(toPoint(at+pt.x-ct.x,st/2-pt.y-ct.y,!0))),removeClass(nt,"leaflet-tooltip-right"),removeClass(nt,"leaflet-tooltip-left"),removeClass(nt,"leaflet-tooltip-top"),removeClass(nt,"leaflet-tooltip-bottom"),addClass(nt,"leaflet-tooltip-"+ot),setPosition(nt,tt)},_updatePosition:function(){var tt=this._map.latLngToLayerPoint(this._latlng);this._setPosition(tt)},setOpacity:function(tt){this.options.opacity=tt,this._container&&setOpacity(this._container,tt)},_animateZoom:function(tt){var et=this._map._latLngToNewLayerPoint(this._latlng,tt.zoom,tt.center);this._setPosition(et)},_getAnchor:function(){return toPoint(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ns.include({openTooltip:function(tt,et,nt){return tt instanceof Ic||(tt=new Ic(nt).setContent(tt)),et&&tt.setLatLng(et),this.hasLayer(tt)?this:this.addLayer(tt)},closeTooltip:function(tt){return tt&&this.removeLayer(tt),this}}),bl.include({bindTooltip:function(tt,et){return tt instanceof Ic?(setOptions(tt,et),this._tooltip=tt,tt._source=this):(this._tooltip&&!et||(this._tooltip=new Ic(et,this)),this._tooltip.setContent(tt)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(tt){if(tt||!this._tooltipHandlersAdded){var et=tt?"off":"on",nt={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?nt.add=this._openTooltip:(nt.mouseover=this._openTooltip,nt.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(nt.mousemove=this._moveTooltip),vo&&(nt.click=this._openTooltip)),this[et](nt),this._tooltipHandlersAdded=!tt}},openTooltip:function(tt,et){return this._tooltip&&this._map&&(et=this._tooltip._prepareOpen(this,tt,et),this._map.openTooltip(this._tooltip,et),this._tooltip.options.interactive&&this._tooltip._container&&(addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(tt){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(tt)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(tt){return this._tooltip&&this._tooltip.setContent(tt),this},getTooltip:function(){return this._tooltip},_openTooltip:function(tt){var et=tt.layer||tt.target;this._tooltip&&this._map&&this.openTooltip(et,this._tooltip.options.sticky?tt.latlng:void 0)},_moveTooltip:function(tt){var et,nt,rt=tt.latlng;this._tooltip.options.sticky&&tt.originalEvent&&(et=this._map.mouseEventToContainerPoint(tt.originalEvent),nt=this._map.containerPointToLayerPoint(et),rt=this._map.layerPointToLatLng(nt)),this._tooltip.setLatLng(rt)}});var Ac=Cl.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(tt){var et=tt&&"DIV"===tt.tagName?tt:document.createElement("div"),nt=this.options;if(nt.html instanceof Element?(empty(et),et.appendChild(nt.html)):et.innerHTML=!1!==nt.html?nt.html:"",nt.bgPos){var rt=toPoint(nt.bgPos);et.style.backgroundPosition=-rt.x+"px "+-rt.y+"px"}return this._setIconStyles(et,"icon"),et},createShadow:function(){return null}});Cl.Default=kl;var zc=bl.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Sr,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(tt){setOptions(this,tt)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(tt){tt._addZoomLimit(this)},onRemove:function(tt){this._removeAllTiles(),remove(this._container),tt._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(tt){return this.options.opacity=tt,this._updateOpacity(),this},setZIndex:function(tt){return this.options.zIndex=tt,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var tt={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=throttle(this._onMoveEnd,this.options.updateInterval,this)),tt.move=this._onMove),this._zoomAnimated&&(tt.zoomanim=this._animateZoom),tt},createTile:function(){return document.createElement("div")},getTileSize:function(){var tt=this.options.tileSize;return tt instanceof Point?tt:new Point(tt,tt)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(tt){for(var et,nt=this.getPane().children,rt=-tt(-1/0,1/0),it=0,ot=nt.length;it<ot;it++)et=nt[it].style.zIndex,nt[it]!==this._container&&et&&(rt=tt(rt,+et));isFinite(rt)&&(this.options.zIndex=rt+tt(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!bn){setOpacity(this._container,this.options.opacity);var tt=+new Date,et=!1,nt=!1;for(var rt in this._tiles){var it=this._tiles[rt];if(it.current&&it.loaded){var ot=Math.min(1,(tt-it.loaded)/200);setOpacity(it.el,ot),ot<1?et=!0:(it.active?nt=!0:this._onOpaqueTile(it),it.active=!0)}}nt&&!this._noPrune&&this._pruneTiles(),et&&(cancelAnimFrame(this._fadeFrame),this._fadeFrame=requestAnimFrame(this._updateOpacity,this))}},_onOpaqueTile:falseFn,_initContainer:function(){this._container||(this._container=create$1("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var tt=this._tileZoom,et=this.options.maxZoom;if(void 0!==tt){for(var nt in this._levels)this._levels[nt].el.children.length||nt===tt?(this._levels[nt].el.style.zIndex=et-Math.abs(tt-nt),this._onUpdateLevel(nt)):(remove(this._levels[nt].el),this._removeTilesAtZoom(nt),this._onRemoveLevel(nt),delete this._levels[nt]);var rt=this._levels[tt],it=this._map;return rt||((rt=this._levels[tt]={}).el=create$1("div","leaflet-tile-container leaflet-zoom-animated",this._container),rt.el.style.zIndex=et,rt.origin=it.project(it.unproject(it.getPixelOrigin()),tt).round(),rt.zoom=tt,this._setZoomTransform(rt,it.getCenter(),it.getZoom()),rt.el.offsetWidth,this._onCreateLevel(rt)),this._level=rt,rt}},_onUpdateLevel:falseFn,_onRemoveLevel:falseFn,_onCreateLevel:falseFn,_pruneTiles:function(){if(this._map){var tt,et,nt=this._map.getZoom();if(nt>this.options.maxZoom||nt<this.options.minZoom)this._removeAllTiles();else{for(tt in this._tiles)(et=this._tiles[tt]).retain=et.current;for(tt in this._tiles)if((et=this._tiles[tt]).current&&!et.active){var rt=et.coords;this._retainParent(rt.x,rt.y,rt.z,rt.z-5)||this._retainChildren(rt.x,rt.y,rt.z,rt.z+2)}for(tt in this._tiles)this._tiles[tt].retain||this._removeTile(tt)}}},_removeTilesAtZoom:function(tt){for(var et in this._tiles)this._tiles[et].coords.z===tt&&this._removeTile(et)},_removeAllTiles:function(){for(var tt in this._tiles)this._removeTile(tt)},_invalidateAll:function(){for(var tt in this._levels)remove(this._levels[tt].el),this._onRemoveLevel(tt),delete this._levels[tt];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(tt,et,nt,rt){var it=Math.floor(tt/2),ot=Math.floor(et/2),at=nt-1,st=new Point(+it,+ot);st.z=+at;var ct=this._tileCoordsToKey(st),pt=this._tiles[ct];return pt&&pt.active?(pt.retain=!0,!0):(pt&&pt.loaded&&(pt.retain=!0),at>rt&&this._retainParent(it,ot,at,rt))},_retainChildren:function(tt,et,nt,rt){for(var it=2*tt;it<2*tt+2;it++)for(var ot=2*et;ot<2*et+2;ot++){var at=new Point(it,ot);at.z=nt+1;var st=this._tileCoordsToKey(at),ct=this._tiles[st];ct&&ct.active?ct.retain=!0:(ct&&ct.loaded&&(ct.retain=!0),nt+1<rt&&this._retainChildren(it,ot,nt+1,rt))}},_resetView:function(tt){var et=tt&&(tt.pinch||tt.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),et,et)},_animateZoom:function(tt){this._setView(tt.center,tt.zoom,!0,tt.noUpdate)},_clampZoom:function(tt){var et=this.options;return void 0!==et.minNativeZoom&&tt<et.minNativeZoom?et.minNativeZoom:void 0!==et.maxNativeZoom&&et.maxNativeZoom<tt?et.maxNativeZoom:tt},_setView:function(tt,et,nt,rt){var it=this._clampZoom(Math.round(et));(void 0!==this.options.maxZoom&&it>this.options.maxZoom||void 0!==this.options.minZoom&&it<this.options.minZoom)&&(it=void 0);var ot=this.options.updateWhenZooming&&it!==this._tileZoom;rt&&!ot||(this._tileZoom=it,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==it&&this._update(tt),nt||this._pruneTiles(),this._noPrune=!!nt),this._setZoomTransforms(tt,et)},_setZoomTransforms:function(tt,et){for(var nt in this._levels)this._setZoomTransform(this._levels[nt],tt,et)},_setZoomTransform:function(tt,et,nt){var rt=this._map.getZoomScale(nt,tt.zoom),it=tt.origin.multiplyBy(rt).subtract(this._map._getNewPixelOrigin(et,nt)).round();wr?setTransform(tt.el,it,rt):setPosition(tt.el,it)},_resetGrid:function(){var tt=this._map,et=tt.options.crs,nt=this._tileSize=this.getTileSize(),rt=this._tileZoom,it=this._map.getPixelWorldBounds(this._tileZoom);it&&(this._globalTileRange=this._pxBoundsToTileRange(it)),this._wrapX=et.wrapLng&&!this.options.noWrap&&[Math.floor(tt.project([0,et.wrapLng[0]],rt).x/nt.x),Math.ceil(tt.project([0,et.wrapLng[1]],rt).x/nt.y)],this._wrapY=et.wrapLat&&!this.options.noWrap&&[Math.floor(tt.project([et.wrapLat[0],0],rt).y/nt.x),Math.ceil(tt.project([et.wrapLat[1],0],rt).y/nt.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(tt){var et=this._map,nt=et._animatingZoom?Math.max(et._animateToZoom,et.getZoom()):et.getZoom(),rt=et.getZoomScale(nt,this._tileZoom),it=et.project(tt,this._tileZoom).floor(),ot=et.getSize().divideBy(2*rt);return new Bounds(it.subtract(ot),it.add(ot))},_update:function(tt){var et=this._map;if(et){var nt=this._clampZoom(et.getZoom());if(void 0===tt&&(tt=et.getCenter()),void 0!==this._tileZoom){var rt=this._getTiledPixelBounds(tt),it=this._pxBoundsToTileRange(rt),ot=it.getCenter(),at=[],st=this.options.keepBuffer,ct=new Bounds(it.getBottomLeft().subtract([st,-st]),it.getTopRight().add([st,-st]));if(!(isFinite(it.min.x)&&isFinite(it.min.y)&&isFinite(it.max.x)&&isFinite(it.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var pt in this._tiles){var ft=this._tiles[pt].coords;ft.z===this._tileZoom&&ct.contains(new Point(ft.x,ft.y))||(this._tiles[pt].current=!1)}if(Math.abs(nt-this._tileZoom)>1)this._setView(tt,nt);else{for(var dt=it.min.y;dt<=it.max.y;dt++)for(var mt=it.min.x;mt<=it.max.x;mt++){var yt=new Point(mt,dt);if(yt.z=this._tileZoom,this._isValidTile(yt)){var vt=this._tiles[this._tileCoordsToKey(yt)];vt?vt.current=!0:at.push(yt)}}if(at.sort((function(tt,et){return tt.distanceTo(ot)-et.distanceTo(ot)})),0!==at.length){this._loading||(this._loading=!0,this.fire("loading"));var Dt=document.createDocumentFragment();for(mt=0;mt<at.length;mt++)this._addTile(at[mt],Dt);this._level.el.appendChild(Dt)}}}}},_isValidTile:function(tt){var et=this._map.options.crs;if(!et.infinite){var nt=this._globalTileRange;if(!et.wrapLng&&(tt.x<nt.min.x||tt.x>nt.max.x)||!et.wrapLat&&(tt.y<nt.min.y||tt.y>nt.max.y))return!1}if(!this.options.bounds)return!0;var rt=this._tileCoordsToBounds(tt);return toLatLngBounds(this.options.bounds).overlaps(rt)},_keyToBounds:function(tt){return this._tileCoordsToBounds(this._keyToTileCoords(tt))},_tileCoordsToNwSe:function(tt){var et=this._map,nt=this.getTileSize(),rt=tt.scaleBy(nt),it=rt.add(nt);return[et.unproject(rt,tt.z),et.unproject(it,tt.z)]},_tileCoordsToBounds:function(tt){var et=this._tileCoordsToNwSe(tt),nt=new LatLngBounds(et[0],et[1]);return this.options.noWrap||(nt=this._map.wrapLatLngBounds(nt)),nt},_tileCoordsToKey:function(tt){return tt.x+":"+tt.y+":"+tt.z},_keyToTileCoords:function(tt){var et=tt.split(":"),nt=new Point(+et[0],+et[1]);return nt.z=+et[2],nt},_removeTile:function(tt){var et=this._tiles[tt];et&&(remove(et.el),delete this._tiles[tt],this.fire("tileunload",{tile:et.el,coords:this._keyToTileCoords(tt)}))},_initTile:function(tt){addClass(tt,"leaflet-tile");var et=this.getTileSize();tt.style.width=et.x+"px",tt.style.height=et.y+"px",tt.onselectstart=falseFn,tt.onmousemove=falseFn,bn&&this.options.opacity<1&&setOpacity(tt,this.options.opacity),Ln&&!In&&(tt.style.WebkitBackfaceVisibility="hidden")},_addTile:function(tt,et){var nt=this._getTilePos(tt),rt=this._tileCoordsToKey(tt),it=this.createTile(this._wrapCoords(tt),bind(this._tileReady,this,tt));this._initTile(it),this.createTile.length<2&&requestAnimFrame(bind(this._tileReady,this,tt,null,it)),setPosition(it,nt),this._tiles[rt]={el:it,coords:tt,current:!0},et.appendChild(it),this.fire("tileloadstart",{tile:it,coords:tt})},_tileReady:function(tt,et,nt){et&&this.fire("tileerror",{error:et,tile:nt,coords:tt});var rt=this._tileCoordsToKey(tt);(nt=this._tiles[rt])&&(nt.loaded=+new Date,this._map._fadeAnimated?(setOpacity(nt.el,0),cancelAnimFrame(this._fadeFrame),this._fadeFrame=requestAnimFrame(this._updateOpacity,this)):(nt.active=!0,this._pruneTiles()),et||(addClass(nt.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:nt.el,coords:tt})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),bn||!this._map._fadeAnimated?requestAnimFrame(this._pruneTiles,this):setTimeout(bind(this._pruneTiles,this),250)))},_getTilePos:function(tt){return tt.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(tt){var et=new Point(this._wrapX?wrapNum(tt.x,this._wrapX):tt.x,this._wrapY?wrapNum(tt.y,this._wrapY):tt.y);return et.z=tt.z,et},_pxBoundsToTileRange:function(tt){var et=this.getTileSize();return new Bounds(tt.min.unscaleBy(et).floor(),tt.max.unscaleBy(et).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var tt in this._tiles)if(!this._tiles[tt].loaded)return!1;return!0}}),Dc=zc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(tt,et){this._url=tt,(et=setOptions(this,et)).detectRetina&&na&&et.maxZoom>0&&(et.tileSize=Math.floor(et.tileSize/2),et.zoomReverse?(et.zoomOffset--,et.minZoom++):(et.zoomOffset++,et.maxZoom--),et.minZoom=Math.max(0,et.minZoom)),"string"==typeof et.subdomains&&(et.subdomains=et.subdomains.split("")),Ln||this.on("tileunload",this._onTileRemove)},setUrl:function(tt,et){return this._url===tt&&void 0===et&&(et=!0),this._url=tt,et||this.redraw(),this},createTile:function(tt,et){var nt=document.createElement("img");return on(nt,"load",bind(this._tileOnLoad,this,et,nt)),on(nt,"error",bind(this._tileOnError,this,et,nt)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(nt.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),nt.alt="",nt.setAttribute("role","presentation"),nt.src=this.getTileUrl(tt),nt},getTileUrl:function(tt){var et={r:na?"@2x":"",s:this._getSubdomain(tt),x:tt.x,y:tt.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var nt=this._globalTileRange.max.y-tt.y;this.options.tms&&(et.y=nt),et["-y"]=nt}return template(this._url,extend(et,this.options))},_tileOnLoad:function(tt,et){bn?setTimeout(bind(tt,this,null,et),0):tt(null,et)},_tileOnError:function(tt,et,nt){var rt=this.options.errorTileUrl;rt&&et.getAttribute("src")!==rt&&(et.src=rt),tt(nt,et)},_onTileRemove:function(tt){tt.tile.onload=null},_getZoomForUrl:function(){var tt=this._tileZoom,et=this.options.maxZoom;return this.options.zoomReverse&&(tt=et-tt),tt+this.options.zoomOffset},_getSubdomain:function(tt){var et=Math.abs(tt.x+tt.y)%this.options.subdomains.length;return this.options.subdomains[et]},_abortLoading:function(){var tt,et;for(tt in this._tiles)this._tiles[tt].coords.z!==this._tileZoom&&((et=this._tiles[tt].el).onload=falseFn,et.onerror=falseFn,et.complete||(et.src=at,remove(et),delete this._tiles[tt]))},_removeTile:function(tt){var et=this._tiles[tt];if(et)return zn||et.el.setAttribute("src",at),zc.prototype._removeTile.call(this,tt)},_tileReady:function(tt,et,nt){if(this._map&&(!nt||nt.getAttribute("src")!==at))return zc.prototype._tileReady.call(this,tt,et,nt)}});function tileLayer(tt,et){return new Dc(tt,et)}var Bc=Dc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(tt,et){this._url=tt;var nt=extend({},this.defaultWmsParams);for(var rt in et)rt in this.options||(nt[rt]=et[rt]);var it=(et=setOptions(this,et)).detectRetina&&na?2:1,ot=this.getTileSize();nt.width=ot.x*it,nt.height=ot.y*it,this.wmsParams=nt},onAdd:function(tt){this._crs=this.options.crs||tt.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var et=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[et]=this._crs.code,Dc.prototype.onAdd.call(this,tt)},getTileUrl:function(tt){var et=this._tileCoordsToNwSe(tt),nt=this._crs,rt=toBounds(nt.project(et[0]),nt.project(et[1])),it=rt.min,ot=rt.max,at=(this._wmsVersion>=1.3&&this._crs===_l?[it.y,it.x,ot.y,ot.x]:[it.x,it.y,ot.x,ot.y]).join(","),st=Dc.prototype.getTileUrl.call(this,tt);return st+getParamString(this.wmsParams,st,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+at},setParams:function(tt,et){return extend(this.wmsParams,tt),et||this.redraw(),this}});Dc.WMS=Bc,tileLayer.wms=function tileLayerWMS(tt,et){return new Bc(tt,et)};var Fc=bl.extend({options:{padding:.1,tolerance:0},initialize:function(tt){setOptions(this,tt),stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var tt={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(tt.zoomanim=this._onAnimZoom),tt},_onAnimZoom:function(tt){this._updateTransform(tt.center,tt.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(tt,et){var nt=this._map.getZoomScale(et,this._zoom),rt=getPosition(this._container),it=this._map.getSize().multiplyBy(.5+this.options.padding),ot=this._map.project(this._center,et),at=this._map.project(tt,et).subtract(ot),st=it.multiplyBy(-nt).add(rt).add(it).subtract(at);wr?setTransform(this._container,st,nt):setPosition(this._container,st)},_reset:function(){for(var tt in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[tt]._reset()},_onZoomEnd:function(){for(var tt in this._layers)this._layers[tt]._project()},_updatePaths:function(){for(var tt in this._layers)this._layers[tt]._update()},_update:function(){var tt=this.options.padding,et=this._map.getSize(),nt=this._map.containerPointToLayerPoint(et.multiplyBy(-tt)).round();this._bounds=new Bounds(nt,nt.add(et.multiplyBy(1+2*tt)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zc=Fc.extend({getEvents:function(){var tt=Fc.prototype.getEvents.call(this);return tt.viewprereset=this._onViewPreReset,tt},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fc.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var tt=this._container=document.createElement("canvas");on(tt,"mousemove",this._onMouseMove,this),on(tt,"click dblclick mousedown mouseup contextmenu",this._onClick,this),on(tt,"mouseout",this._handleMouseOut,this),this._ctx=tt.getContext("2d")},_destroyContainer:function(){cancelAnimFrame(this._redrawRequest),delete this._ctx,remove(this._container),off(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var tt in this._redrawBounds=null,this._layers)this._layers[tt]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Fc.prototype._update.call(this);var tt=this._bounds,et=this._container,nt=tt.getSize(),rt=na?2:1;setPosition(et,tt.min),et.width=rt*nt.x,et.height=rt*nt.y,et.style.width=nt.x+"px",et.style.height=nt.y+"px",na&&this._ctx.scale(2,2),this._ctx.translate(-tt.min.x,-tt.min.y),this.fire("update")}},_reset:function(){Fc.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(tt){this._updateDashArray(tt),this._layers[stamp(tt)]=tt;var et=tt._order={layer:tt,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=et),this._drawLast=et,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(tt){this._requestRedraw(tt)},_removePath:function(tt){var et=tt._order,nt=et.next,rt=et.prev;nt?nt.prev=rt:this._drawLast=rt,rt?rt.next=nt:this._drawFirst=nt,delete tt._order,delete this._layers[stamp(tt)],this._requestRedraw(tt)},_updatePath:function(tt){this._extendRedrawBounds(tt),tt._project(),tt._update(),this._requestRedraw(tt)},_updateStyle:function(tt){this._updateDashArray(tt),this._requestRedraw(tt)},_updateDashArray:function(tt){if("string"==typeof tt.options.dashArray){var et,nt,rt=tt.options.dashArray.split(/[, ]+/),it=[];for(nt=0;nt<rt.length;nt++){if(et=Number(rt[nt]),isNaN(et))return;it.push(et)}tt.options._dashArray=it}else tt.options._dashArray=tt.options.dashArray},_requestRedraw:function(tt){this._map&&(this._extendRedrawBounds(tt),this._redrawRequest=this._redrawRequest||requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(tt){if(tt._pxBounds){var et=(tt.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Bounds,this._redrawBounds.extend(tt._pxBounds.min.subtract([et,et])),this._redrawBounds.extend(tt._pxBounds.max.add([et,et]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var tt=this._redrawBounds;if(tt){var et=tt.getSize();this._ctx.clearRect(tt.min.x,tt.min.y,et.x,et.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var tt,et=this._redrawBounds;if(this._ctx.save(),et){var nt=et.getSize();this._ctx.beginPath(),this._ctx.rect(et.min.x,et.min.y,nt.x,nt.y),this._ctx.clip()}this._drawing=!0;for(var rt=this._drawFirst;rt;rt=rt.next)tt=rt.layer,(!et||tt._pxBounds&&tt._pxBounds.intersects(et))&&tt._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(tt,et){if(this._drawing){var nt,rt,it,ot,at=tt._parts,st=at.length,ct=this._ctx;if(st){for(ct.beginPath(),nt=0;nt<st;nt++){for(rt=0,it=at[nt].length;rt<it;rt++)ot=at[nt][rt],ct[rt?"lineTo":"moveTo"](ot.x,ot.y);et&&ct.closePath()}this._fillStroke(ct,tt)}}},_updateCircle:function(tt){if(this._drawing&&!tt._empty()){var et=tt._point,nt=this._ctx,rt=Math.max(Math.round(tt._radius),1),it=(Math.max(Math.round(tt._radiusY),1)||rt)/rt;1!==it&&(nt.save(),nt.scale(1,it)),nt.beginPath(),nt.arc(et.x,et.y/it,rt,0,2*Math.PI,!1),1!==it&&nt.restore(),this._fillStroke(nt,tt)}},_fillStroke:function(tt,et){var nt=et.options;nt.fill&&(tt.globalAlpha=nt.fillOpacity,tt.fillStyle=nt.fillColor||nt.color,tt.fill(nt.fillRule||"evenodd")),nt.stroke&&0!==nt.weight&&(tt.setLineDash&&tt.setLineDash(et.options&&et.options._dashArray||[]),tt.globalAlpha=nt.opacity,tt.lineWidth=nt.weight,tt.strokeStyle=nt.color,tt.lineCap=nt.lineCap,tt.lineJoin=nt.lineJoin,tt.stroke())},_onClick:function(tt){for(var et,nt,rt=this._map.mouseEventToLayerPoint(tt),it=this._drawFirst;it;it=it.next)(et=it.layer).options.interactive&&et._containsPoint(rt)&&!this._map._draggableMoved(et)&&(nt=et);nt&&(fakeStop(tt),this._fireEvent([nt],tt))},_onMouseMove:function(tt){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var et=this._map.mouseEventToLayerPoint(tt);this._handleMouseHover(tt,et)}},_handleMouseOut:function(tt){var et=this._hoveredLayer;et&&(removeClass(this._container,"leaflet-interactive"),this._fireEvent([et],tt,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(tt,et){if(!this._mouseHoverThrottled){for(var nt,rt,it=this._drawFirst;it;it=it.next)(nt=it.layer).options.interactive&&nt._containsPoint(et)&&(rt=nt);rt!==this._hoveredLayer&&(this._handleMouseOut(tt),rt&&(addClass(this._container,"leaflet-interactive"),this._fireEvent([rt],tt,"mouseover"),this._hoveredLayer=rt)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],tt),this._mouseHoverThrottled=!0,setTimeout(L.bind((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(tt,et,nt){this._map._fireDOMEvent(et,nt||et.type,tt)},_bringToFront:function(tt){var et=tt._order;if(et){var nt=et.next,rt=et.prev;nt&&(nt.prev=rt,rt?rt.next=nt:nt&&(this._drawFirst=nt),et.prev=this._drawLast,this._drawLast.next=et,et.next=null,this._drawLast=et,this._requestRedraw(tt))}},_bringToBack:function(tt){var et=tt._order;if(et){var nt=et.next,rt=et.prev;rt&&(rt.next=nt,nt?nt.prev=rt:rt&&(this._drawLast=rt),et.prev=null,et.next=this._drawFirst,this._drawFirst.prev=et,this._drawFirst=et,this._requestRedraw(tt))}}});function canvas$1(tt){return ia?new Zc(tt):null}var Hc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(tt){return document.createElement("<lvml:"+tt+' class="lvml">')}}catch(tt){return function(tt){return document.createElement("<"+tt+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Wc={_initContainer:function(){this._container=create$1("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fc.prototype._update.call(this),this.fire("update"))},_initPath:function(tt){var et=tt._container=Hc("shape");addClass(et,"leaflet-vml-shape "+(this.options.className||"")),et.coordsize="1 1",tt._path=Hc("path"),et.appendChild(tt._path),this._updateStyle(tt),this._layers[stamp(tt)]=tt},_addPath:function(tt){var et=tt._container;this._container.appendChild(et),tt.options.interactive&&tt.addInteractiveTarget(et)},_removePath:function(tt){var et=tt._container;remove(et),tt.removeInteractiveTarget(et),delete this._layers[stamp(tt)]},_updateStyle:function(tt){var et=tt._stroke,nt=tt._fill,rt=tt.options,it=tt._container;it.stroked=!!rt.stroke,it.filled=!!rt.fill,rt.stroke?(et||(et=tt._stroke=Hc("stroke")),it.appendChild(et),et.weight=rt.weight+"px",et.color=rt.color,et.opacity=rt.opacity,rt.dashArray?et.dashStyle=ot(rt.dashArray)?rt.dashArray.join(" "):rt.dashArray.replace(/( *, *)/g," "):et.dashStyle="",et.endcap=rt.lineCap.replace("butt","flat"),et.joinstyle=rt.lineJoin):et&&(it.removeChild(et),tt._stroke=null),rt.fill?(nt||(nt=tt._fill=Hc("fill")),it.appendChild(nt),nt.color=rt.fillColor||rt.color,nt.opacity=rt.fillOpacity):nt&&(it.removeChild(nt),tt._fill=null)},_updateCircle:function(tt){var et=tt._point.round(),nt=Math.round(tt._radius),rt=Math.round(tt._radiusY||nt);this._setPath(tt,tt._empty()?"M0 0":"AL "+et.x+","+et.y+" "+nt+","+rt+" 0,23592600")},_setPath:function(tt,et){tt._path.v=et},_bringToFront:function(tt){toFront(tt._container)},_bringToBack:function(tt){toBack(tt._container)}},Gc=la?Hc:svgCreate,Xc=Fc.extend({getEvents:function(){var tt=Fc.prototype.getEvents.call(this);return tt.zoomstart=this._onZoomStart,tt},_initContainer:function(){this._container=Gc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){remove(this._container),off(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Fc.prototype._update.call(this);var tt=this._bounds,et=tt.getSize(),nt=this._container;this._svgSize&&this._svgSize.equals(et)||(this._svgSize=et,nt.setAttribute("width",et.x),nt.setAttribute("height",et.y)),setPosition(nt,tt.min),nt.setAttribute("viewBox",[tt.min.x,tt.min.y,et.x,et.y].join(" ")),this.fire("update")}},_initPath:function(tt){var et=tt._path=Gc("path");tt.options.className&&addClass(et,tt.options.className),tt.options.interactive&&addClass(et,"leaflet-interactive"),this._updateStyle(tt),this._layers[stamp(tt)]=tt},_addPath:function(tt){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(tt._path),tt.addInteractiveTarget(tt._path)},_removePath:function(tt){remove(tt._path),tt.removeInteractiveTarget(tt._path),delete this._layers[stamp(tt)]},_updatePath:function(tt){tt._project(),tt._update()},_updateStyle:function(tt){var et=tt._path,nt=tt.options;et&&(nt.stroke?(et.setAttribute("stroke",nt.color),et.setAttribute("stroke-opacity",nt.opacity),et.setAttribute("stroke-width",nt.weight),et.setAttribute("stroke-linecap",nt.lineCap),et.setAttribute("stroke-linejoin",nt.lineJoin),nt.dashArray?et.setAttribute("stroke-dasharray",nt.dashArray):et.removeAttribute("stroke-dasharray"),nt.dashOffset?et.setAttribute("stroke-dashoffset",nt.dashOffset):et.removeAttribute("stroke-dashoffset")):et.setAttribute("stroke","none"),nt.fill?(et.setAttribute("fill",nt.fillColor||nt.color),et.setAttribute("fill-opacity",nt.fillOpacity),et.setAttribute("fill-rule",nt.fillRule||"evenodd")):et.setAttribute("fill","none"))},_updatePoly:function(tt,et){this._setPath(tt,pointsToPath(tt._parts,et))},_updateCircle:function(tt){var et=tt._point,nt=Math.max(Math.round(tt._radius),1),rt="a"+nt+","+(Math.max(Math.round(tt._radiusY),1)||nt)+" 0 1,0 ",it=tt._empty()?"M0 0":"M"+(et.x-nt)+","+et.y+rt+2*nt+",0 "+rt+2*-nt+",0 ";this._setPath(tt,it)},_setPath:function(tt,et){tt._path.setAttribute("d",et)},_bringToFront:function(tt){toFront(tt._path)},_bringToBack:function(tt){toBack(tt._path)}});function svg$1(tt){return sa||la?new Xc(tt):null}la&&Xc.include(Wc),Ns.include({getRenderer:function(tt){var et=tt.options.renderer||this._getPaneRenderer(tt.options.pane)||this.options.renderer||this._renderer;return et||(et=this._renderer=this._createRenderer()),this.hasLayer(et)||this.addLayer(et),et},_getPaneRenderer:function(tt){if("overlayPane"===tt||void 0===tt)return!1;var et=this._paneRenderers[tt];return void 0===et&&(et=this._createRenderer({pane:tt}),this._paneRenderers[tt]=et),et},_createRenderer:function(tt){return this.options.preferCanvas&&canvas$1(tt)||svg$1(tt)}});var $c=pc.extend({initialize:function(tt,et){pc.prototype.initialize.call(this,this._boundsToLatLngs(tt),et)},setBounds:function(tt){return this.setLatLngs(this._boundsToLatLngs(tt))},_boundsToLatLngs:function(tt){return[(tt=toLatLngBounds(tt)).getSouthWest(),tt.getNorthWest(),tt.getNorthEast(),tt.getSouthEast()]}});Xc.create=Gc,Xc.pointsToPath=pointsToPath,yc.geometryToLayer=geometryToLayer,yc.coordsToLatLng=coordsToLatLng,yc.coordsToLatLngs=coordsToLatLngs,yc.latLngToCoords=latLngToCoords,yc.latLngsToCoords=latLngsToCoords,yc.getFeature=getFeature,yc.asFeature=asFeature,Ns.mergeOptions({boxZoom:!0});var Yc=du.extend({initialize:function(tt){this._map=tt,this._container=tt._container,this._pane=tt._panes.overlayPane,this._resetStateTimeout=0,tt.on("unload",this._destroy,this)},addHooks:function(){on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){remove(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(tt){if(!tt.shiftKey||1!==tt.which&&1!==tt.button)return!1;this._clearDeferredResetState(),this._resetState(),fs(),disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(tt),on(document,{contextmenu:stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(tt){this._moved||(this._moved=!0,this._box=create$1("div","leaflet-zoom-box",this._container),addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(tt);var et=new Bounds(this._point,this._startPoint),nt=et.getSize();setPosition(this._box,et.min),this._box.style.width=nt.x+"px",this._box.style.height=nt.y+"px"},_finish:function(){this._moved&&(remove(this._box),removeClass(this._container,"leaflet-crosshair")),gs(),enableImageDrag(),off(document,{contextmenu:stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(tt){if((1===tt.which||1===tt.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(bind(this._resetState,this),0);var et=new LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(et).fire("boxzoomend",{boxZoomBounds:et})}},_onKeyDown:function(tt){27===tt.keyCode&&this._finish()}});Ns.addInitHook("addHandler","boxZoom",Yc),Ns.mergeOptions({doubleClickZoom:!0});var rp=du.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(tt){var et=this._map,nt=et.getZoom(),rt=et.options.zoomDelta,it=tt.originalEvent.shiftKey?nt-rt:nt+rt;"center"===et.options.doubleClickZoom?et.setZoom(it):et.setZoomAround(tt.containerPoint,it)}});Ns.addInitHook("addHandler","doubleClickZoom",rp),Ns.mergeOptions({dragging:!0,inertia:!In,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ip=du.extend({addHooks:function(){if(!this._draggable){var tt=this._map;this._draggable=new tl(tt._mapPane,tt._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),tt.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),tt.on("zoomend",this._onZoomEnd,this),tt.whenReady(this._onZoomEnd,this))}addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){removeClass(this._map._container,"leaflet-grab"),removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var tt=this._map;if(tt._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var et=toLatLngBounds(this._map.options.maxBounds);this._offsetLimit=toBounds(this._map.latLngToContainerPoint(et.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(et.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;tt.fire("movestart").fire("dragstart"),tt.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(tt){if(this._map.options.inertia){var et=this._lastTime=+new Date,nt=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(nt),this._times.push(et),this._prunePositions(et)}this._map.fire("move",tt).fire("drag",tt)},_prunePositions:function(tt){for(;this._positions.length>1&&tt-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var tt=this._map.getSize().divideBy(2),et=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=et.subtract(tt).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(tt,et){return tt-(tt-et)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var tt=this._draggable._newPos.subtract(this._draggable._startPos),et=this._offsetLimit;tt.x<et.min.x&&(tt.x=this._viscousLimit(tt.x,et.min.x)),tt.y<et.min.y&&(tt.y=this._viscousLimit(tt.y,et.min.y)),tt.x>et.max.x&&(tt.x=this._viscousLimit(tt.x,et.max.x)),tt.y>et.max.y&&(tt.y=this._viscousLimit(tt.y,et.max.y)),this._draggable._newPos=this._draggable._startPos.add(tt)}},_onPreDragWrap:function(){var tt=this._worldWidth,et=Math.round(tt/2),nt=this._initialWorldOffset,rt=this._draggable._newPos.x,it=(rt-et+nt)%tt+et-nt,ot=(rt+et+nt)%tt-et-nt,at=Math.abs(it+nt)<Math.abs(ot+nt)?it:ot;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=at},_onDragEnd:function(tt){var et=this._map,nt=et.options,rt=!nt.inertia||this._times.length<2;if(et.fire("dragend",tt),rt)et.fire("moveend");else{this._prunePositions(+new Date);var it=this._lastPos.subtract(this._positions[0]),ot=(this._lastTime-this._times[0])/1e3,at=nt.easeLinearity,st=it.multiplyBy(at/ot),ct=st.distanceTo([0,0]),pt=Math.min(nt.inertiaMaxSpeed,ct),ft=st.multiplyBy(pt/ct),dt=pt/(nt.inertiaDeceleration*at),mt=ft.multiplyBy(-dt/2).round();mt.x||mt.y?(mt=et._limitOffset(mt,et.options.maxBounds),requestAnimFrame((function(){et.panBy(mt,{duration:dt,easeLinearity:at,noMoveStart:!0,animate:!0})}))):et.fire("moveend")}}});Ns.addInitHook("addHandler","dragging",ip),Ns.mergeOptions({keyboard:!0,keyboardPanDelta:80});var op=du.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(tt){this._map=tt,this._setPanDelta(tt.options.keyboardPanDelta),this._setZoomDelta(tt.options.zoomDelta)},addHooks:function(){var tt=this._map._container;tt.tabIndex<=0&&(tt.tabIndex="0"),on(tt,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var tt=document.body,et=document.documentElement,nt=tt.scrollTop||et.scrollTop,rt=tt.scrollLeft||et.scrollLeft;this._map._container.focus(),window.scrollTo(rt,nt)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(tt){var et,nt,rt=this._panKeys={},it=this.keyCodes;for(et=0,nt=it.left.length;et<nt;et++)rt[it.left[et]]=[-1*tt,0];for(et=0,nt=it.right.length;et<nt;et++)rt[it.right[et]]=[tt,0];for(et=0,nt=it.down.length;et<nt;et++)rt[it.down[et]]=[0,tt];for(et=0,nt=it.up.length;et<nt;et++)rt[it.up[et]]=[0,-1*tt]},_setZoomDelta:function(tt){var et,nt,rt=this._zoomKeys={},it=this.keyCodes;for(et=0,nt=it.zoomIn.length;et<nt;et++)rt[it.zoomIn[et]]=tt;for(et=0,nt=it.zoomOut.length;et<nt;et++)rt[it.zoomOut[et]]=-tt},_addHooks:function(){on(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){off(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(tt){if(!(tt.altKey||tt.ctrlKey||tt.metaKey)){var et,nt=tt.keyCode,rt=this._map;if(nt in this._panKeys)rt._panAnim&&rt._panAnim._inProgress||(et=this._panKeys[nt],tt.shiftKey&&(et=toPoint(et).multiplyBy(3)),rt.panBy(et),rt.options.maxBounds&&rt.panInsideBounds(rt.options.maxBounds));else if(nt in this._zoomKeys)rt.setZoom(rt.getZoom()+(tt.shiftKey?3:1)*this._zoomKeys[nt]);else{if(27!==nt||!rt._popup||!rt._popup.options.closeOnEscapeKey)return;rt.closePopup()}stop(tt)}}});Ns.addInitHook("addHandler","keyboard",op),Ns.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ap=du.extend({addHooks:function(){on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(tt){var et=getWheelDelta(tt),nt=this._map.options.wheelDebounceTime;this._delta+=et,this._lastMousePos=this._map.mouseEventToContainerPoint(tt),this._startTime||(this._startTime=+new Date);var rt=Math.max(nt-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(bind(this._performZoom,this),rt),stop(tt)},_performZoom:function(){var tt=this._map,et=tt.getZoom(),nt=this._map.options.zoomSnap||0;tt._stop();var rt=this._delta/(4*this._map.options.wheelPxPerZoomLevel),it=4*Math.log(2/(1+Math.exp(-Math.abs(rt))))/Math.LN2,ot=nt?Math.ceil(it/nt)*nt:it,at=tt._limitZoom(et+(this._delta>0?ot:-ot))-et;this._delta=0,this._startTime=null,at&&("center"===tt.options.scrollWheelZoom?tt.setZoom(et+at):tt.setZoomAround(this._lastMousePos,et+at))}});Ns.addInitHook("addHandler","scrollWheelZoom",ap),Ns.mergeOptions({tap:!0,tapTolerance:15});var sp=du.extend({addHooks:function(){on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(tt){if(tt.touches){if(preventDefault(tt),this._fireClick=!0,tt.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var et=tt.touches[0],nt=et.target;this._startPos=this._newPos=new Point(et.clientX,et.clientY),nt.tagName&&"a"===nt.tagName.toLowerCase()&&addClass(nt,"leaflet-active"),this._holdTimeout=setTimeout(bind((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",et))}),this),1e3),this._simulateEvent("mousedown",et),on(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(tt){if(clearTimeout(this._holdTimeout),off(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&tt&&tt.changedTouches){var et=tt.changedTouches[0],nt=et.target;nt&&nt.tagName&&"a"===nt.tagName.toLowerCase()&&removeClass(nt,"leaflet-active"),this._simulateEvent("mouseup",et),this._isTapValid()&&this._simulateEvent("click",et)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(tt){var et=tt.touches[0];this._newPos=new Point(et.clientX,et.clientY),this._simulateEvent("mousemove",et)},_simulateEvent:function(tt,et){var nt=document.createEvent("MouseEvents");nt._simulated=!0,et.target._simulatedClick=!0,nt.initMouseEvent(tt,!0,!0,window,1,et.screenX,et.screenY,et.clientX,et.clientY,!1,!1,!1,!1,0,null),et.target.dispatchEvent(nt)}});vo&&!po&&Ns.addInitHook("addHandler","tap",sp),Ns.mergeOptions({touchZoom:vo&&!In,bounceAtZoomLimits:!0});var up=du.extend({addHooks:function(){addClass(this._map._container,"leaflet-touch-zoom"),on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){removeClass(this._map._container,"leaflet-touch-zoom"),off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(tt){var et=this._map;if(tt.touches&&2===tt.touches.length&&!et._animatingZoom&&!this._zooming){var nt=et.mouseEventToContainerPoint(tt.touches[0]),rt=et.mouseEventToContainerPoint(tt.touches[1]);this._centerPoint=et.getSize()._divideBy(2),this._startLatLng=et.containerPointToLatLng(this._centerPoint),"center"!==et.options.touchZoom&&(this._pinchStartLatLng=et.containerPointToLatLng(nt.add(rt)._divideBy(2))),this._startDist=nt.distanceTo(rt),this._startZoom=et.getZoom(),this._moved=!1,this._zooming=!0,et._stop(),on(document,"touchmove",this._onTouchMove,this),on(document,"touchend",this._onTouchEnd,this),preventDefault(tt)}},_onTouchMove:function(tt){if(tt.touches&&2===tt.touches.length&&this._zooming){var et=this._map,nt=et.mouseEventToContainerPoint(tt.touches[0]),rt=et.mouseEventToContainerPoint(tt.touches[1]),it=nt.distanceTo(rt)/this._startDist;if(this._zoom=et.getScaleZoom(it,this._startZoom),!et.options.bounceAtZoomLimits&&(this._zoom<et.getMinZoom()&&it<1||this._zoom>et.getMaxZoom()&&it>1)&&(this._zoom=et._limitZoom(this._zoom)),"center"===et.options.touchZoom){if(this._center=this._startLatLng,1===it)return}else{var ot=nt._add(rt)._divideBy(2)._subtract(this._centerPoint);if(1===it&&0===ot.x&&0===ot.y)return;this._center=et.unproject(et.project(this._pinchStartLatLng,this._zoom).subtract(ot),this._zoom)}this._moved||(et._moveStart(!0,!1),this._moved=!0),cancelAnimFrame(this._animRequest);var at=bind(et._move,et,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=requestAnimFrame(at,this,!0),preventDefault(tt)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,cancelAnimFrame(this._animRequest),off(document,"touchmove",this._onTouchMove),off(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ns.addInitHook("addHandler","touchZoom",up),Ns.BoxZoom=Yc,Ns.DoubleClickZoom=rp,Ns.Drag=ip,Ns.Keyboard=op,Ns.ScrollWheelZoom=ap,Ns.Tap=sp,Ns.TouchZoom=up,Object.freeze=et,tt.version="1.6.0",tt.Control=Vs,tt.control=control,tt.Browser=pa,tt.Evented=mt,tt.Mixin=_u,tt.Util=ft,tt.Class=Class,tt.Handler=du,tt.extend=extend,tt.bind=bind,tt.stamp=stamp,tt.setOptions=setOptions,tt.DomEvent=Bs,tt.DomUtil=As,tt.PosAnimation=Fs,tt.Draggable=tl,tt.LineUtil=ol,tt.PolyUtil=sl,tt.Point=Point,tt.point=toPoint,tt.Bounds=Bounds,tt.bounds=toBounds,tt.Transformation=Transformation,tt.transformation=toTransformation,tt.Projection=yl,tt.LatLng=LatLng,tt.latLng=toLatLng,tt.LatLngBounds=LatLngBounds,tt.latLngBounds=toLatLngBounds,tt.CRS=Dt,tt.GeoJSON=yc,tt.geoJSON=geoJSON,tt.geoJson=xc,tt.Layer=bl,tt.LayerGroup=wl,tt.layerGroup=function(tt,et){return new wl(tt,et)},tt.FeatureGroup=Sl,tt.featureGroup=function(tt){return new Sl(tt)},tt.ImageOverlay=bc,tt.imageOverlay=function(tt,et,nt){return new bc(tt,et,nt)},tt.VideoOverlay=wc,tt.videoOverlay=function videoOverlay(tt,et,nt){return new wc(tt,et,nt)},tt.SVGOverlay=Ec,tt.svgOverlay=function svgOverlay(tt,et,nt){return new Ec(tt,et,nt)},tt.DivOverlay=Cc,tt.Popup=kc,tt.popup=function(tt,et){return new kc(tt,et)},tt.Tooltip=Ic,tt.tooltip=function(tt,et){return new Ic(tt,et)},tt.Icon=Cl,tt.icon=function icon(tt){return new Cl(tt)},tt.DivIcon=Ac,tt.divIcon=function divIcon(tt){return new Ac(tt)},tt.Marker=Al,tt.marker=function marker(tt,et){return new Al(tt,et)},tt.TileLayer=Dc,tt.tileLayer=tileLayer,tt.GridLayer=zc,tt.gridLayer=function gridLayer(tt){return new zc(tt)},tt.SVG=Xc,tt.svg=svg$1,tt.Renderer=Fc,tt.Canvas=Zc,tt.canvas=canvas$1,tt.Path=zl,tt.CircleMarker=Fl,tt.circleMarker=function circleMarker(tt,et){return new Fl(tt,et)},tt.Circle=Hl,tt.circle=function circle(tt,et,nt){return new Hl(tt,et,nt)},tt.Polyline=ac,tt.polyline=function polyline(tt,et){return new ac(tt,et)},tt.Polygon=pc,tt.polygon=function polygon(tt,et){return new pc(tt,et)},tt.Rectangle=$c,tt.rectangle=function rectangle(tt,et){return new $c(tt,et)},tt.Map=Ns,tt.map=function createMap(tt,et){return new Ns(tt,et)};var lp=window.L;tt.noConflict=function(){return window.L=lp,this},window.L=tt}(et)},function(tt,et,nt){(et=nt(41)(!1)).push([tt.i,"\n.styles_wrapper-2VT{\n    width: 100vw;\n    height: 100vh;\n}\n\n\n",""]),et.locals={wrapper:"styles_wrapper-2VT"},tt.exports=et},function(tt,et){tt.exports=Array.isArray||function(tt){return"[object Array]"==Object.prototype.toString.call(tt)}},function(tt,et,nt){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt="function"==typeof Symbol&&Symbol.for,it=rt?Symbol.for("react.element"):60103,ot=rt?Symbol.for("react.portal"):60106,at=rt?Symbol.for("react.fragment"):60107,st=rt?Symbol.for("react.strict_mode"):60108,ct=rt?Symbol.for("react.profiler"):60114,pt=rt?Symbol.for("react.provider"):60109,ft=rt?Symbol.for("react.context"):60110,dt=rt?Symbol.for("react.async_mode"):60111,mt=rt?Symbol.for("react.concurrent_mode"):60111,yt=rt?Symbol.for("react.forward_ref"):60112,vt=rt?Symbol.for("react.suspense"):60113,Dt=rt?Symbol.for("react.suspense_list"):60120,Ot=rt?Symbol.for("react.memo"):60115,Rt=rt?Symbol.for("react.lazy"):60116,Bt=rt?Symbol.for("react.block"):60121,Ne=rt?Symbol.for("react.fundamental"):60117,rn=rt?Symbol.for("react.responder"):60118,vn=rt?Symbol.for("react.scope"):60119;function z(tt){if("object"==typeof tt&&null!==tt){var et=tt.$$typeof;switch(et){case it:switch(tt=tt.type){case dt:case mt:case at:case ct:case st:case vt:return tt;default:switch(tt=tt&&tt.$$typeof){case ft:case yt:case Rt:case Ot:case pt:return tt;default:return et}}case ot:return et}}}function A(tt){return z(tt)===mt}et.AsyncMode=dt,et.ConcurrentMode=mt,et.ContextConsumer=ft,et.ContextProvider=pt,et.Element=it,et.ForwardRef=yt,et.Fragment=at,et.Lazy=Rt,et.Memo=Ot,et.Portal=ot,et.Profiler=ct,et.StrictMode=st,et.Suspense=vt,et.isAsyncMode=function(tt){return A(tt)||z(tt)===dt},et.isConcurrentMode=A,et.isContextConsumer=function(tt){return z(tt)===ft},et.isContextProvider=function(tt){return z(tt)===pt},et.isElement=function(tt){return"object"==typeof tt&&null!==tt&&tt.$$typeof===it},et.isForwardRef=function(tt){return z(tt)===yt},et.isFragment=function(tt){return z(tt)===at},et.isLazy=function(tt){return z(tt)===Rt},et.isMemo=function(tt){return z(tt)===Ot},et.isPortal=function(tt){return z(tt)===ot},et.isProfiler=function(tt){return z(tt)===ct},et.isStrictMode=function(tt){return z(tt)===st},et.isSuspense=function(tt){return z(tt)===vt},et.isValidElementType=function(tt){return"string"==typeof tt||"function"==typeof tt||tt===at||tt===mt||tt===ct||tt===st||tt===vt||tt===Dt||"object"==typeof tt&&null!==tt&&(tt.$$typeof===Rt||tt.$$typeof===Ot||tt.$$typeof===pt||tt.$$typeof===ft||tt.$$typeof===yt||tt.$$typeof===Ne||tt.$$typeof===rn||tt.$$typeof===vn||tt.$$typeof===Bt)},et.typeOf=z},function(tt,et,nt){"use strict";nt.r(et);var rt=nt(0),it=nt.n(rt),ot=nt(18),at=nt(11),st=nt(8),ct=nt.n(st);function _extends(){return(_extends=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}function isAbsolute(tt){return"/"===tt.charAt(0)}function spliceOne(tt,et){for(var nt=et,rt=nt+1,it=tt.length;rt<it;nt+=1,rt+=1)tt[nt]=tt[rt];tt.pop()}var pt=function resolvePathname(tt,et){void 0===et&&(et="");var nt,rt=tt&&tt.split("/")||[],it=et&&et.split("/")||[],ot=tt&&isAbsolute(tt),at=et&&isAbsolute(et),st=ot||at;if(tt&&isAbsolute(tt)?it=rt:rt.length&&(it.pop(),it=it.concat(rt)),!it.length)return"/";if(it.length){var ct=it[it.length-1];nt="."===ct||".."===ct||""===ct}else nt=!1;for(var pt=0,ft=it.length;ft>=0;ft--){var dt=it[ft];"."===dt?spliceOne(it,ft):".."===dt?(spliceOne(it,ft),pt++):pt&&(spliceOne(it,ft),pt--)}if(!st)for(;pt--;pt)it.unshift("..");!st||""===it[0]||it[0]&&isAbsolute(it[0])||it.unshift("");var mt=it.join("/");return nt&&"/"!==mt.substr(-1)&&(mt+="/"),mt};var ft=function invariant(tt,et){if(!tt)throw new Error("Invariant failed")};function addLeadingSlash(tt){return"/"===tt.charAt(0)?tt:"/"+tt}function stripLeadingSlash(tt){return"/"===tt.charAt(0)?tt.substr(1):tt}function stripBasename(tt,et){return function hasBasename(tt,et){return 0===tt.toLowerCase().indexOf(et.toLowerCase())&&-1!=="/?#".indexOf(tt.charAt(et.length))}(tt,et)?tt.substr(et.length):tt}function stripTrailingSlash(tt){return"/"===tt.charAt(tt.length-1)?tt.slice(0,-1):tt}function createPath(tt){var et=tt.pathname,nt=tt.search,rt=tt.hash,it=et||"/";return nt&&"?"!==nt&&(it+="?"===nt.charAt(0)?nt:"?"+nt),rt&&"#"!==rt&&(it+="#"===rt.charAt(0)?rt:"#"+rt),it}function createLocation(tt,et,nt,rt){var it;"string"==typeof tt?(it=function parsePath(tt){var et=tt||"/",nt="",rt="",it=et.indexOf("#");-1!==it&&(rt=et.substr(it),et=et.substr(0,it));var ot=et.indexOf("?");return-1!==ot&&(nt=et.substr(ot),et=et.substr(0,ot)),{pathname:et,search:"?"===nt?"":nt,hash:"#"===rt?"":rt}}(tt)).state=et:(void 0===(it=_extends({},tt)).pathname&&(it.pathname=""),it.search?"?"!==it.search.charAt(0)&&(it.search="?"+it.search):it.search="",it.hash?"#"!==it.hash.charAt(0)&&(it.hash="#"+it.hash):it.hash="",void 0!==et&&void 0===it.state&&(it.state=et));try{it.pathname=decodeURI(it.pathname)}catch(tt){throw tt instanceof URIError?new URIError('Pathname "'+it.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):tt}return nt&&(it.key=nt),rt?it.pathname?"/"!==it.pathname.charAt(0)&&(it.pathname=pt(it.pathname,rt.pathname)):it.pathname=rt.pathname:it.pathname||(it.pathname="/"),it}function createTransitionManager(){var tt=null;var et=[];return{setPrompt:function setPrompt(et){return tt=et,function(){tt===et&&(tt=null)}},confirmTransitionTo:function confirmTransitionTo(et,nt,rt,it){if(null!=tt){var ot="function"==typeof tt?tt(et,nt):tt;"string"==typeof ot?"function"==typeof rt?rt(ot,it):it(!0):it(!1!==ot)}else it(!0)},appendListener:function appendListener(tt){var nt=!0;function listener(){nt&&tt.apply(void 0,arguments)}return et.push(listener),function(){nt=!1,et=et.filter((function(tt){return tt!==listener}))}},notifyListeners:function notifyListeners(){for(var tt=arguments.length,nt=new Array(tt),rt=0;rt<tt;rt++)nt[rt]=arguments[rt];et.forEach((function(tt){return tt.apply(void 0,nt)}))}}}var dt=!("undefined"==typeof window||!window.document||!window.document.createElement);function getConfirmation(tt,et){et(window.confirm(tt))}function getHistoryState(){try{return window.history.state||{}}catch(tt){return{}}}function createBrowserHistory(tt){void 0===tt&&(tt={}),dt||ft(!1);var et=window.history,nt=function supportsHistory(){var tt=window.navigator.userAgent;return(-1===tt.indexOf("Android 2.")&&-1===tt.indexOf("Android 4.0")||-1===tt.indexOf("Mobile Safari")||-1!==tt.indexOf("Chrome")||-1!==tt.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),rt=!function supportsPopStateOnHashChange(){return-1===window.navigator.userAgent.indexOf("Trident")}(),it=tt,ot=it.forceRefresh,at=void 0!==ot&&ot,st=it.getUserConfirmation,ct=void 0===st?getConfirmation:st,pt=it.keyLength,mt=void 0===pt?6:pt,yt=tt.basename?stripTrailingSlash(addLeadingSlash(tt.basename)):"";function getDOMLocation(tt){var et=tt||{},nt=et.key,rt=et.state,it=window.location,ot=it.pathname+it.search+it.hash;return yt&&(ot=stripBasename(ot,yt)),createLocation(ot,rt,nt)}function createKey(){return Math.random().toString(36).substr(2,mt)}var vt=createTransitionManager();function setState(tt){_extends(rn,tt),rn.length=et.length,vt.notifyListeners(rn.location,rn.action)}function handlePopState(tt){(function isExtraneousPopstateEvent(tt){return void 0===tt.state&&-1===navigator.userAgent.indexOf("CriOS")})(tt)||handlePop(getDOMLocation(tt.state))}function handleHashChange(){handlePop(getDOMLocation(getHistoryState()))}var Dt=!1;function handlePop(tt){if(Dt)Dt=!1,setState();else{vt.confirmTransitionTo(tt,"POP",ct,(function(et){et?setState({action:"POP",location:tt}):function revertPop(tt){var et=rn.location,nt=Rt.indexOf(et.key);-1===nt&&(nt=0);var rt=Rt.indexOf(tt.key);-1===rt&&(rt=0);var it=nt-rt;it&&(Dt=!0,go(it))}(tt)}))}}var Ot=getDOMLocation(getHistoryState()),Rt=[Ot.key];function createHref(tt){return yt+createPath(tt)}function go(tt){et.go(tt)}var Bt=0;function checkDOMListeners(tt){1===(Bt+=tt)&&1===tt?(window.addEventListener("popstate",handlePopState),rt&&window.addEventListener("hashchange",handleHashChange)):0===Bt&&(window.removeEventListener("popstate",handlePopState),rt&&window.removeEventListener("hashchange",handleHashChange))}var Ne=!1;var rn={length:et.length,action:"POP",location:Ot,createHref:createHref,push:function push(tt,rt){var it=createLocation(tt,rt,createKey(),rn.location);vt.confirmTransitionTo(it,"PUSH",ct,(function(tt){if(tt){var rt=createHref(it),ot=it.key,st=it.state;if(nt)if(et.pushState({key:ot,state:st},null,rt),at)window.location.href=rt;else{var ct=Rt.indexOf(rn.location.key),pt=Rt.slice(0,ct+1);pt.push(it.key),Rt=pt,setState({action:"PUSH",location:it})}else window.location.href=rt}}))},replace:function replace(tt,rt){var it=createLocation(tt,rt,createKey(),rn.location);vt.confirmTransitionTo(it,"REPLACE",ct,(function(tt){if(tt){var rt=createHref(it),ot=it.key,st=it.state;if(nt)if(et.replaceState({key:ot,state:st},null,rt),at)window.location.replace(rt);else{var ct=Rt.indexOf(rn.location.key);-1!==ct&&(Rt[ct]=it.key),setState({action:"REPLACE",location:it})}else window.location.replace(rt)}}))},go:go,goBack:function goBack(){go(-1)},goForward:function goForward(){go(1)},block:function block(tt){void 0===tt&&(tt=!1);var et=vt.setPrompt(tt);return Ne||(checkDOMListeners(1),Ne=!0),function(){return Ne&&(Ne=!1,checkDOMListeners(-1)),et()}},listen:function listen(tt){var et=vt.appendListener(tt);return checkDOMListeners(1),function(){checkDOMListeners(-1),et()}}};return rn}var mt={hashbang:{encodePath:function encodePath(tt){return"!"===tt.charAt(0)?tt:"!/"+stripLeadingSlash(tt)},decodePath:function decodePath(tt){return"!"===tt.charAt(0)?tt.substr(1):tt}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function stripHash(tt){var et=tt.indexOf("#");return-1===et?tt:tt.slice(0,et)}function getHashPath(){var tt=window.location.href,et=tt.indexOf("#");return-1===et?"":tt.substring(et+1)}function replaceHashPath(tt){window.location.replace(stripHash(window.location.href)+"#"+tt)}function createHashHistory(tt){void 0===tt&&(tt={}),dt||ft(!1);var et=window.history,nt=(function supportsGoWithoutReloadUsingHash(){return-1===window.navigator.userAgent.indexOf("Firefox")}(),tt),rt=nt.getUserConfirmation,it=void 0===rt?getConfirmation:rt,ot=nt.hashType,at=void 0===ot?"slash":ot,st=tt.basename?stripTrailingSlash(addLeadingSlash(tt.basename)):"",ct=mt[at],pt=ct.encodePath,yt=ct.decodePath;function getDOMLocation(){var tt=yt(getHashPath());return st&&(tt=stripBasename(tt,st)),createLocation(tt)}var vt=createTransitionManager();function setState(tt){_extends(Tn,tt),Tn.length=et.length,vt.notifyListeners(Tn.location,Tn.action)}var Dt=!1,Ot=null;function handleHashChange(){var tt=getHashPath(),et=pt(tt);if(tt!==et)replaceHashPath(et);else{var nt=getDOMLocation(),rt=Tn.location;if(!Dt&&function locationsAreEqual$$1(tt,et){return tt.pathname===et.pathname&&tt.search===et.search&&tt.hash===et.hash}(rt,nt))return;if(Ot===createPath(nt))return;Ot=null,function handlePop(tt){if(Dt)Dt=!1,setState();else{vt.confirmTransitionTo(tt,"POP",it,(function(et){et?setState({action:"POP",location:tt}):function revertPop(tt){var et=Tn.location,nt=rn.lastIndexOf(createPath(et));-1===nt&&(nt=0);var rt=rn.lastIndexOf(createPath(tt));-1===rt&&(rt=0);var it=nt-rt;it&&(Dt=!0,go(it))}(tt)}))}}(nt)}}var Rt=getHashPath(),Bt=pt(Rt);Rt!==Bt&&replaceHashPath(Bt);var Ne=getDOMLocation(),rn=[createPath(Ne)];function go(tt){et.go(tt)}var vn=0;function checkDOMListeners(tt){1===(vn+=tt)&&1===tt?window.addEventListener("hashchange",handleHashChange):0===vn&&window.removeEventListener("hashchange",handleHashChange)}var bn=!1;var Tn={length:et.length,action:"POP",location:Ne,createHref:function createHref(tt){var et=document.querySelector("base"),nt="";return et&&et.getAttribute("href")&&(nt=stripHash(window.location.href)),nt+"#"+pt(st+createPath(tt))},push:function push(tt,et){var nt=createLocation(tt,void 0,void 0,Tn.location);vt.confirmTransitionTo(nt,"PUSH",it,(function(tt){if(tt){var et=createPath(nt),rt=pt(st+et);if(getHashPath()!==rt){Ot=et,function pushHashPath(tt){window.location.hash=tt}(rt);var it=rn.lastIndexOf(createPath(Tn.location)),ot=rn.slice(0,it+1);ot.push(et),rn=ot,setState({action:"PUSH",location:nt})}else setState()}}))},replace:function replace(tt,et){var nt=createLocation(tt,void 0,void 0,Tn.location);vt.confirmTransitionTo(nt,"REPLACE",it,(function(tt){if(tt){var et=createPath(nt),rt=pt(st+et);getHashPath()!==rt&&(Ot=et,replaceHashPath(rt));var it=rn.indexOf(createPath(Tn.location));-1!==it&&(rn[it]=et),setState({action:"REPLACE",location:nt})}}))},go:go,goBack:function goBack(){go(-1)},goForward:function goForward(){go(1)},block:function block(tt){void 0===tt&&(tt=!1);var et=vt.setPrompt(tt);return bn||(checkDOMListeners(1),bn=!0),function(){return bn&&(bn=!1,checkDOMListeners(-1)),et()}},listen:function listen(tt){var et=vt.appendListener(tt);return checkDOMListeners(1),function(){checkDOMListeners(-1),et()}}};return Tn}function clamp(tt,et,nt){return Math.min(Math.max(tt,et),nt)}function createMemoryHistory(tt){void 0===tt&&(tt={});var et=tt,nt=et.getUserConfirmation,rt=et.initialEntries,it=void 0===rt?["/"]:rt,ot=et.initialIndex,at=void 0===ot?0:ot,st=et.keyLength,ct=void 0===st?6:st,pt=createTransitionManager();function setState(tt){_extends(yt,tt),yt.length=yt.entries.length,pt.notifyListeners(yt.location,yt.action)}function createKey(){return Math.random().toString(36).substr(2,ct)}var ft=clamp(at,0,it.length-1),dt=it.map((function(tt){return createLocation(tt,void 0,"string"==typeof tt?createKey():tt.key||createKey())})),mt=createPath;function go(tt){var et=clamp(yt.index+tt,0,yt.entries.length-1),rt=yt.entries[et];pt.confirmTransitionTo(rt,"POP",nt,(function(tt){tt?setState({action:"POP",location:rt,index:et}):setState()}))}var yt={length:dt.length,action:"POP",location:dt[ft],index:ft,entries:dt,createHref:mt,push:function push(tt,et){var rt=createLocation(tt,et,createKey(),yt.location);pt.confirmTransitionTo(rt,"PUSH",nt,(function(tt){if(tt){var et=yt.index+1,nt=yt.entries.slice(0);nt.length>et?nt.splice(et,nt.length-et,rt):nt.push(rt),setState({action:"PUSH",location:rt,index:et,entries:nt})}}))},replace:function replace(tt,et){var rt=createLocation(tt,et,createKey(),yt.location);pt.confirmTransitionTo(rt,"REPLACE",nt,(function(tt){tt&&(yt.entries[yt.index]=rt,setState({action:"REPLACE",location:rt}))}))},go:go,goBack:function goBack(){go(-1)},goForward:function goForward(){go(1)},canGo:function canGo(tt){var et=yt.index+tt;return et>=0&&et<yt.entries.length},block:function block(tt){return void 0===tt&&(tt=!1),pt.setPrompt(tt)},listen:function listen(tt){return pt.appendListener(tt)}};return yt}var yt=nt(58),vt=nt(59),Dt=nt.n(vt);nt(93);function _objectWithoutPropertiesLoose(tt,et){if(null==tt)return{};var nt,rt,it={},ot=Object.keys(tt);for(rt=0;rt<ot.length;rt++)nt=ot[rt],et.indexOf(nt)>=0||(it[nt]=tt[nt]);return it}var Ot=nt(96),Rt=nt.n(Ot),Bt=function createNamedContext(tt){var et=Object(yt.a)();return et.displayName=tt,et}("Router-History"),Ne=function createNamedContext(tt){var et=Object(yt.a)();return et.displayName=tt,et}("Router"),rn=function(tt){function Router(et){var nt;return(nt=tt.call(this,et)||this).state={location:et.history.location},nt._isMounted=!1,nt._pendingLocation=null,et.staticContext||(nt.unlisten=et.history.listen((function(tt){nt._isMounted?nt.setState({location:tt}):nt._pendingLocation=tt}))),nt}Object(at.a)(Router,tt),Router.computeRootMatch=function computeRootMatch(tt){return{path:"/",url:"/",params:{},isExact:"/"===tt}};var et=Router.prototype;return et.componentDidMount=function componentDidMount(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},et.componentWillUnmount=function componentWillUnmount(){this.unlisten&&this.unlisten()},et.render=function render(){return it.a.createElement(Ne.Provider,{value:{history:this.props.history,location:this.state.location,match:Router.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},it.a.createElement(Bt.Provider,{children:this.props.children||null,value:this.props.history}))},Router}(it.a.Component);it.a.Component;it.a.Component;var vn={},bn=0;function matchPath(tt,et){void 0===et&&(et={}),("string"==typeof et||Array.isArray(et))&&(et={path:et});var nt=et,rt=nt.path,it=nt.exact,ot=void 0!==it&&it,at=nt.strict,st=void 0!==at&&at,ct=nt.sensitive,pt=void 0!==ct&&ct;return[].concat(rt).reduce((function(et,nt){if(!nt&&""!==nt)return null;if(et)return et;var rt=function compilePath$1(tt,et){var nt=""+et.end+et.strict+et.sensitive,rt=vn[nt]||(vn[nt]={});if(rt[tt])return rt[tt];var it=[],ot={regexp:Dt()(tt,it,et),keys:it};return bn<1e4&&(rt[tt]=ot,bn++),ot}(nt,{end:ot,strict:st,sensitive:pt}),it=rt.regexp,at=rt.keys,ct=it.exec(tt);if(!ct)return null;var ft=ct[0],dt=ct.slice(1),mt=tt===ft;return ot&&!mt?null:{path:nt,url:"/"===nt&&""===ft?"/":ft,isExact:mt,params:at.reduce((function(tt,et,nt){return tt[et.name]=dt[nt],tt}),{})}}),null)}it.a.Component;function react_router_addLeadingSlash(tt){return"/"===tt.charAt(0)?tt:"/"+tt}function react_router_stripBasename(tt,et){if(!tt)return et;var nt=react_router_addLeadingSlash(tt);return 0!==et.pathname.indexOf(nt)?et:_extends({},et,{pathname:et.pathname.substr(nt.length)})}function createURL(tt){return"string"==typeof tt?tt:createPath(tt)}function staticHandler(tt){return function(){ft(!1)}}function noop(){}it.a.Component;it.a.Component;it.a.useContext;var Tn=function(tt){function BrowserRouter(){for(var et,nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return(et=tt.call.apply(tt,[this].concat(rt))||this).history=createBrowserHistory(et.props),et}return Object(at.a)(BrowserRouter,tt),BrowserRouter.prototype.render=function render(){return it.a.createElement(rn,{history:this.history,children:this.props.children})},BrowserRouter}(it.a.Component);it.a.Component;var Cn=function resolveToLocation(tt,et){return"function"==typeof tt?tt(et):tt},Ln=function normalizeToLocation(tt,et){return"string"==typeof tt?createLocation(tt,null,null,et):tt},In=function forwardRefShim(tt){return tt},Mn=it.a.forwardRef;void 0===Mn&&(Mn=In);var zn=Mn((function(tt,et){var nt=tt.innerRef,rt=tt.navigate,ot=tt.onClick,at=_objectWithoutPropertiesLoose(tt,["innerRef","navigate","onClick"]),st=at.target,ct=_extends({},at,{onClick:function onClick(tt){try{ot&&ot(tt)}catch(et){throw tt.preventDefault(),et}tt.defaultPrevented||0!==tt.button||st&&"_self"!==st||function isModifiedEvent(tt){return!!(tt.metaKey||tt.altKey||tt.ctrlKey||tt.shiftKey)}(tt)||(tt.preventDefault(),rt())}});return ct.ref=In!==Mn&&et||nt,it.a.createElement("a",ct)}));var Bn=Mn((function(tt,et){var nt=tt.component,rt=void 0===nt?zn:nt,ot=tt.replace,at=tt.to,st=tt.innerRef,ct=_objectWithoutPropertiesLoose(tt,["component","replace","to","innerRef"]);return it.a.createElement(Ne.Consumer,null,(function(tt){tt||ft(!1);var nt=tt.history,pt=Ln(Cn(at,tt.location),tt.location),dt=pt?nt.createHref(pt):"",mt=_extends({},ct,{href:dt,navigate:function navigate(){var et=Cn(at,tt.location);(ot?nt.replace:nt.push)(et)}});return In!==Mn?mt.ref=et||st:mt.innerRef=st,it.a.createElement(rt,mt)}))})),Fn=function forwardRefShim(tt){return tt},Nn=it.a.forwardRef;void 0===Nn&&(Nn=Fn);Nn((function(tt,et){var nt=tt["aria-current"],rt=void 0===nt?"page":nt,ot=tt.activeClassName,at=void 0===ot?"active":ot,st=tt.activeStyle,ct=tt.className,pt=tt.exact,dt=tt.isActive,mt=tt.location,yt=tt.sensitive,vt=tt.strict,Dt=tt.style,Ot=tt.to,Rt=tt.innerRef,Bt=_objectWithoutPropertiesLoose(tt,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return it.a.createElement(Ne.Consumer,null,(function(tt){tt||ft(!1);var nt=mt||tt.location,ot=Ln(Cn(Ot,nt),nt),Ne=ot.pathname,rn=Ne&&Ne.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),vn=rn?matchPath(nt.pathname,{path:rn,exact:pt,sensitive:yt,strict:vt}):null,bn=!!(dt?dt(vn,nt):vn),Tn=bn?function joinClassnames(){for(var tt=arguments.length,et=new Array(tt),nt=0;nt<tt;nt++)et[nt]=arguments[nt];return et.filter((function(tt){return tt})).join(" ")}(ct,at):ct,In=bn?_extends({},Dt,{},st):Dt,Mn=_extends({"aria-current":bn&&rt||null,className:Tn,style:In,to:ot},Bt);return Fn!==Nn?Mn.ref=et||Rt:Mn.innerRef=Rt,it.a.createElement(Bn,Mn)}))})),nt(101),nt(48),nt(133),nt(24),nt(25),nt(26),nt(27),nt(28),nt(29),nt(30),nt(31),nt(32),nt(33),nt(34),nt(35),nt(36),nt(37),nt(38),nt(39);var Vn=nt(94);function areInputsEqual(tt,et){if(tt.length!==et.length)return!1;for(var nt=0;nt<tt.length;nt++)if(tt[nt]!==et[nt])return!1;return!0}var Wn=function memoizeOne(tt,et){var nt;void 0===et&&(et=areInputsEqual);var rt,it=[],ot=!1;return function memoized(){for(var at=[],st=0;st<arguments.length;st++)at[st]=arguments[st];return ot&&nt===this&&et(at,it)||(rt=tt.apply(this,at),ot=!0,nt=this,it=at),rt}},$n=nt(95),Yn=nt.n($n);var er=function(){function StyleSheet(tt){this.isSpeedy=void 0===tt.speedy||tt.speedy,this.tags=[],this.ctr=0,this.nonce=tt.nonce,this.key=tt.key,this.container=tt.container,this.before=null}var tt=StyleSheet.prototype;return tt.insert=function insert(tt){if(this.ctr%(this.isSpeedy?65e3:1)==0){var et,nt=function createStyleElement(tt){var et=document.createElement("style");return et.setAttribute("data-emotion",tt.key),void 0!==tt.nonce&&et.setAttribute("nonce",tt.nonce),et.appendChild(document.createTextNode("")),et}(this);et=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(nt,et),this.tags.push(nt)}var rt=this.tags[this.tags.length-1];if(this.isSpeedy){var it=function sheetForTag(tt){if(tt.sheet)return tt.sheet;for(var et=0;et<document.styleSheets.length;et++)if(document.styleSheets[et].ownerNode===tt)return document.styleSheets[et]}(rt);try{var ot=105===tt.charCodeAt(1)&&64===tt.charCodeAt(0);it.insertRule(tt,ot?0:it.cssRules.length)}catch(tt){0}}else rt.appendChild(document.createTextNode(tt));this.ctr++},tt.flush=function flush(){this.tags.forEach((function(tt){return tt.parentNode.removeChild(tt)})),this.tags=[],this.ctr=0},StyleSheet}();var rr=function stylis_min(tt){function X(tt,et,nt){var rt=et.trim().split(at);et=rt;var it=rt.length,ot=tt.length;switch(ot){case 0:case 1:var st=0;for(tt=0===ot?"":tt[0]+" ";st<it;++st)et[st]=Z(tt,et[st],nt).trim();break;default:var ct=st=0;for(et=[];st<it;++st)for(var pt=0;pt<ot;++pt)et[ct++]=Z(tt[pt]+" ",rt[st],nt).trim()}return et}function Z(tt,et,nt){var rt=et.charCodeAt(0);switch(33>rt&&(rt=(et=et.trim()).charCodeAt(0)),rt){case 38:return et.replace(st,"$1"+tt.trim());case 58:return tt.trim()+et.replace(st,"$1"+tt.trim());default:if(0<1*nt&&0<et.indexOf("\f"))return et.replace(st,(58===tt.charCodeAt(0)?"":"$1")+tt.trim())}return tt+et}function P(tt,et,nt,at){var st=tt+";",ct=2*et+3*nt+4*at;if(944===ct){tt=st.indexOf(":",9)+1;var pt=st.substring(tt,st.length-1).trim();return pt=st.substring(0,tt).trim()+pt+";",1===vn||2===vn&&L(pt,1)?"-webkit-"+pt+pt:pt}if(0===vn||2===vn&&!L(st,1))return st;switch(ct){case 1015:return 97===st.charCodeAt(10)?"-webkit-"+st+st:st;case 951:return 116===st.charCodeAt(3)?"-webkit-"+st+st:st;case 963:return 110===st.charCodeAt(5)?"-webkit-"+st+st:st;case 1009:if(100!==st.charCodeAt(4))break;case 969:case 942:return"-webkit-"+st+st;case 978:return"-webkit-"+st+"-moz-"+st+st;case 1019:case 983:return"-webkit-"+st+"-moz-"+st+"-ms-"+st+st;case 883:if(45===st.charCodeAt(8))return"-webkit-"+st+st;if(0<st.indexOf("image-set(",11))return st.replace(Rt,"$1-webkit-$2")+st;break;case 932:if(45===st.charCodeAt(4))switch(st.charCodeAt(5)){case 103:return"-webkit-box-"+st.replace("-grow","")+"-webkit-"+st+"-ms-"+st.replace("grow","positive")+st;case 115:return"-webkit-"+st+"-ms-"+st.replace("shrink","negative")+st;case 98:return"-webkit-"+st+"-ms-"+st.replace("basis","preferred-size")+st}return"-webkit-"+st+"-ms-"+st+st;case 964:return"-webkit-"+st+"-ms-flex-"+st+st;case 1023:if(99!==st.charCodeAt(8))break;return"-webkit-box-pack"+(pt=st.substring(st.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+st+"-ms-flex-pack"+pt+st;case 1005:return it.test(st)?st.replace(rt,":-webkit-")+st.replace(rt,":-moz-")+st:st;case 1e3:switch(et=(pt=st.substring(13).trim()).indexOf("-")+1,pt.charCodeAt(0)+pt.charCodeAt(et)){case 226:pt=st.replace(dt,"tb");break;case 232:pt=st.replace(dt,"tb-rl");break;case 220:pt=st.replace(dt,"lr");break;default:return st}return"-webkit-"+st+"-ms-"+pt+st;case 1017:if(-1===st.indexOf("sticky",9))break;case 975:switch(et=(st=tt).length-10,ct=(pt=(33===st.charCodeAt(et)?st.substring(0,et):st).substring(tt.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|pt.charCodeAt(7))){case 203:if(111>pt.charCodeAt(8))break;case 115:st=st.replace(pt,"-webkit-"+pt)+";"+st;break;case 207:case 102:st=st.replace(pt,"-webkit-"+(102<ct?"inline-":"")+"box")+";"+st.replace(pt,"-webkit-"+pt)+";"+st.replace(pt,"-ms-"+pt+"box")+";"+st}return st+";";case 938:if(45===st.charCodeAt(5))switch(st.charCodeAt(6)){case 105:return pt=st.replace("-items",""),"-webkit-"+st+"-webkit-box-"+pt+"-ms-flex-"+pt+st;case 115:return"-webkit-"+st+"-ms-flex-item-"+st.replace(vt,"")+st;default:return"-webkit-"+st+"-ms-flex-line-pack"+st.replace("align-content","").replace(vt,"")+st}break;case 973:case 989:if(45!==st.charCodeAt(3)||122===st.charCodeAt(4))break;case 931:case 953:if(!0===Ot.test(tt))return 115===(pt=tt.substring(tt.indexOf(":")+1)).charCodeAt(0)?P(tt.replace("stretch","fill-available"),et,nt,at).replace(":fill-available",":stretch"):st.replace(pt,"-webkit-"+pt)+st.replace(pt,"-moz-"+pt.replace("fill-",""))+st;break;case 962:if(st="-webkit-"+st+(102===st.charCodeAt(5)?"-ms-"+st:"")+st,211===nt+at&&105===st.charCodeAt(13)&&0<st.indexOf("transform",10))return st.substring(0,st.indexOf(";",27)+1).replace(ot,"$1-webkit-$2")+st}return st}function L(tt,et){var nt=tt.indexOf(1===et?":":"{"),rt=tt.substring(0,3!==et?nt:10);return nt=tt.substring(nt+1,tt.length-1),Ln(2!==et?rt:rt.replace(Dt,"$1"),nt,et)}function ea(tt,et){var nt=P(et,et.charCodeAt(0),et.charCodeAt(1),et.charCodeAt(2));return nt!==et+";"?nt.replace(yt," or ($1)").substring(4):"("+et+")"}function H(tt,et,nt,rt,it,ot,at,st,ct,pt){for(var ft,dt=0,mt=et;dt<Cn;++dt)switch(ft=Tn[dt].call(B,tt,mt,nt,rt,it,ot,at,st,ct,pt)){case void 0:case!1:case!0:case null:break;default:mt=ft}if(mt!==et)return mt}function U(tt){return void 0!==(tt=tt.prefix)&&(Ln=null,tt?"function"!=typeof tt?vn=1:(vn=2,Ln=tt):vn=0),U}function B(tt,rt){var it=tt;if(33>it.charCodeAt(0)&&(it=it.trim()),it=[it],0<Cn){var ot=H(-1,rt,it,it,Ne,Bt,0,0,0,0);void 0!==ot&&"string"==typeof ot&&(rt=ot)}var at=function M(tt,rt,it,ot,at){for(var st,dt,yt,vt,Dt,Ot=0,Rt=0,Tn=0,Ln=0,Mn=0,zn=0,Bn=yt=st=0,Fn=0,Nn=0,Vn=0,Wn=0,$n=it.length,Yn=$n-1,er="",rr="",vr="",wr="";Fn<$n;){if(dt=it.charCodeAt(Fn),Fn===Yn&&0!==Rt+Ln+Tn+Ot&&(0!==Rt&&(dt=47===Rt?10:47),Ln=Tn=Ot=0,$n++,Yn++),0===Rt+Ln+Tn+Ot){if(Fn===Yn&&(0<Nn&&(er=er.replace(nt,"")),0<er.trim().length)){switch(dt){case 32:case 9:case 59:case 13:case 10:break;default:er+=it.charAt(Fn)}dt=59}switch(dt){case 123:for(st=(er=er.trim()).charCodeAt(0),yt=1,Wn=++Fn;Fn<$n;){switch(dt=it.charCodeAt(Fn)){case 123:yt++;break;case 125:yt--;break;case 47:switch(dt=it.charCodeAt(Fn+1)){case 42:case 47:t:{for(Bn=Fn+1;Bn<Yn;++Bn)switch(it.charCodeAt(Bn)){case 47:if(42===dt&&42===it.charCodeAt(Bn-1)&&Fn+2!==Bn){Fn=Bn+1;break t}break;case 10:if(47===dt){Fn=Bn+1;break t}}Fn=Bn}}break;case 91:dt++;case 40:dt++;case 34:case 39:for(;Fn++<Yn&&it.charCodeAt(Fn)!==dt;);}if(0===yt)break;Fn++}switch(yt=it.substring(Wn,Fn),0===st&&(st=(er=er.replace(et,"").trim()).charCodeAt(0)),st){case 64:switch(0<Nn&&(er=er.replace(nt,"")),dt=er.charCodeAt(1)){case 100:case 109:case 115:case 45:Nn=rt;break;default:Nn=bn}if(Wn=(yt=M(rt,Nn,yt,dt,at+1)).length,0<Cn&&(Dt=H(3,yt,Nn=X(bn,er,Vn),rt,Ne,Bt,Wn,dt,at,ot),er=Nn.join(""),void 0!==Dt&&0===(Wn=(yt=Dt.trim()).length)&&(dt=0,yt="")),0<Wn)switch(dt){case 115:er=er.replace(mt,ea);case 100:case 109:case 45:yt=er+"{"+yt+"}";break;case 107:yt=(er=er.replace(ct,"$1 $2"))+"{"+yt+"}",yt=1===vn||2===vn&&L("@"+yt,3)?"@-webkit-"+yt+"@"+yt:"@"+yt;break;default:yt=er+yt,112===ot&&(rr+=yt,yt="")}else yt="";break;default:yt=M(rt,X(rt,er,Vn),yt,ot,at+1)}vr+=yt,yt=Vn=Nn=Bn=st=0,er="",dt=it.charCodeAt(++Fn);break;case 125:case 59:if(1<(Wn=(er=(0<Nn?er.replace(nt,""):er).trim()).length))switch(0===Bn&&(st=er.charCodeAt(0),45===st||96<st&&123>st)&&(Wn=(er=er.replace(" ",":")).length),0<Cn&&void 0!==(Dt=H(1,er,rt,tt,Ne,Bt,rr.length,ot,at,ot))&&0===(Wn=(er=Dt.trim()).length)&&(er="\0\0"),st=er.charCodeAt(0),dt=er.charCodeAt(1),st){case 0:break;case 64:if(105===dt||99===dt){wr+=er+it.charAt(Fn);break}default:58!==er.charCodeAt(Wn-1)&&(rr+=P(er,st,dt,er.charCodeAt(2)))}Vn=Nn=Bn=st=0,er="",dt=it.charCodeAt(++Fn)}}switch(dt){case 13:case 10:47===Rt?Rt=0:0===1+st&&107!==ot&&0<er.length&&(Nn=1,er+="\0"),0<Cn*In&&H(0,er,rt,tt,Ne,Bt,rr.length,ot,at,ot),Bt=1,Ne++;break;case 59:case 125:if(0===Rt+Ln+Tn+Ot){Bt++;break}default:switch(Bt++,vt=it.charAt(Fn),dt){case 9:case 32:if(0===Ln+Ot+Rt)switch(Mn){case 44:case 58:case 9:case 32:vt="";break;default:32!==dt&&(vt=" ")}break;case 0:vt="\\0";break;case 12:vt="\\f";break;case 11:vt="\\v";break;case 38:0===Ln+Rt+Ot&&(Nn=Vn=1,vt="\f"+vt);break;case 108:if(0===Ln+Rt+Ot+rn&&0<Bn)switch(Fn-Bn){case 2:112===Mn&&58===it.charCodeAt(Fn-3)&&(rn=Mn);case 8:111===zn&&(rn=zn)}break;case 58:0===Ln+Rt+Ot&&(Bn=Fn);break;case 44:0===Rt+Tn+Ln+Ot&&(Nn=1,vt+="\r");break;case 34:case 39:0===Rt&&(Ln=Ln===dt?0:0===Ln?dt:Ln);break;case 91:0===Ln+Rt+Tn&&Ot++;break;case 93:0===Ln+Rt+Tn&&Ot--;break;case 41:0===Ln+Rt+Ot&&Tn--;break;case 40:if(0===Ln+Rt+Ot){if(0===st)switch(2*Mn+3*zn){case 533:break;default:st=1}Tn++}break;case 64:0===Rt+Tn+Ln+Ot+Bn+yt&&(yt=1);break;case 42:case 47:if(!(0<Ln+Ot+Tn))switch(Rt){case 0:switch(2*dt+3*it.charCodeAt(Fn+1)){case 235:Rt=47;break;case 220:Wn=Fn,Rt=42}break;case 42:47===dt&&42===Mn&&Wn+2!==Fn&&(33===it.charCodeAt(Wn+2)&&(rr+=it.substring(Wn,Fn+1)),vt="",Rt=0)}}0===Rt&&(er+=vt)}zn=Mn,Mn=dt,Fn++}if(0<(Wn=rr.length)){if(Nn=rt,0<Cn&&(void 0!==(Dt=H(2,rr,Nn,tt,Ne,Bt,Wn,ot,at,ot))&&0===(rr=Dt).length))return wr+rr+vr;if(rr=Nn.join(",")+"{"+rr+"}",0!=vn*rn){switch(2!==vn||L(rr,2)||(rn=0),rn){case 111:rr=rr.replace(ft,":-moz-$1")+rr;break;case 112:rr=rr.replace(pt,"::-webkit-input-$1")+rr.replace(pt,"::-moz-$1")+rr.replace(pt,":-ms-input-$1")+rr}rn=0}}return wr+rr+vr}(bn,it,rt,0,0);return 0<Cn&&(void 0!==(ot=H(-2,at,it,it,Ne,Bt,at.length,0,0,0))&&(at=ot)),"",rn=0,Bt=Ne=1,at}var et=/^\0+/g,nt=/[\0\r\f]/g,rt=/: */g,it=/zoo|gra/,ot=/([,: ])(transform)/g,at=/,\r+?/g,st=/([\t\r\n ])*\f?&/g,ct=/@(k\w+)\s*(\S*)\s*/,pt=/::(place)/g,ft=/:(read-only)/g,dt=/[svh]\w+-[tblr]{2}/,mt=/\(\s*(.*)\s*\)/g,yt=/([\s\S]*?);/g,vt=/-self|flex-/g,Dt=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Ot=/stretch|:\s*\w+\-(?:conte|avail)/,Rt=/([^-])(image-set\()/,Bt=1,Ne=1,rn=0,vn=1,bn=[],Tn=[],Cn=0,Ln=null,In=0;return B.use=function T(tt){switch(tt){case void 0:case null:Cn=Tn.length=0;break;default:if("function"==typeof tt)Tn[Cn++]=tt;else if("object"==typeof tt)for(var et=0,nt=tt.length;et<nt;++et)T(tt[et]);else In=0|!!tt}return T},B.set=U,void 0!==tt&&U(tt),B};function toSheet(tt){tt&&vr.current.insert(tt+"}")}var vr={current:null},wr=function ruleSheet(tt,et,nt,rt,it,ot,at,st,ct,pt){switch(tt){case 1:switch(et.charCodeAt(0)){case 64:return vr.current.insert(et+";"),"";case 108:if(98===et.charCodeAt(2))return""}break;case 2:if(0===st)return et+"/*|*/";break;case 3:switch(st){case 102:case 112:return vr.current.insert(nt[0]+et),"";default:return et+(0===pt?"/*|*/":"")}case-2:et.split("/*|*/}").forEach(toSheet)}},Sr=function createCache(tt){void 0===tt&&(tt={});var et,nt=tt.key||"css";void 0!==tt.prefix&&(et={prefix:tt.prefix});var rt=new rr(et);var it,ot={};it=tt.container||document.head;var at,st=document.querySelectorAll("style[data-emotion-"+nt+"]");Array.prototype.forEach.call(st,(function(tt){tt.getAttribute("data-emotion-"+nt).split(" ").forEach((function(tt){ot[tt]=!0})),tt.parentNode!==it&&it.appendChild(tt)})),rt.use(tt.stylisPlugins)(wr),at=function insert(tt,et,nt,it){var ot=et.name;vr.current=nt,rt(tt,et.styles),it&&(ct.inserted[ot]=!0)};var ct={key:nt,sheet:new er({key:nt,container:it,nonce:tt.nonce,speedy:tt.speedy}),nonce:tt.nonce,inserted:ot,registered:{},insert:at};return ct};function getRegisteredStyles(tt,et,nt){var rt="";return nt.split(" ").forEach((function(nt){void 0!==tt[nt]?et.push(tt[nt]):rt+=nt+" "})),rt}var ii=function insertStyles(tt,et,nt){var rt=tt.key+"-"+et.name;if(!1===nt&&void 0===tt.registered[rt]&&(tt.registered[rt]=et.styles),void 0===tt.inserted[et.name]){var it=et;do{tt.insert("."+rt,it,tt.sheet,!0);it=it.next}while(void 0!==it)}};var qi=function murmur2(tt){for(var et,nt=0,rt=0,it=tt.length;it>=4;++rt,it-=4)et=1540483477*(65535&(et=255&tt.charCodeAt(rt)|(255&tt.charCodeAt(++rt))<<8|(255&tt.charCodeAt(++rt))<<16|(255&tt.charCodeAt(++rt))<<24))+(59797*(et>>>16)<<16),nt=1540483477*(65535&(et^=et>>>24))+(59797*(et>>>16)<<16)^1540483477*(65535&nt)+(59797*(nt>>>16)<<16);switch(it){case 3:nt^=(255&tt.charCodeAt(rt+2))<<16;case 2:nt^=(255&tt.charCodeAt(rt+1))<<8;case 1:nt=1540483477*(65535&(nt^=255&tt.charCodeAt(rt)))+(59797*(nt>>>16)<<16)}return(((nt=1540483477*(65535&(nt^=nt>>>13))+(59797*(nt>>>16)<<16))^nt>>>15)>>>0).toString(36)},uo={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var po=/[A-Z]|^ms/g,vo=/_EMO_([^_]+?)_([^]*?)_EMO_/g,So=function isCustomProperty(tt){return 45===tt.charCodeAt(1)},ta=function isProcessableValue(tt){return null!=tt&&"boolean"!=typeof tt},na=function memoize(tt){var et={};return function(nt){return void 0===et[nt]&&(et[nt]=tt(nt)),et[nt]}}((function(tt){return So(tt)?tt:tt.replace(po,"-$&").toLowerCase()})),ia=function processStyleValue(tt,et){switch(tt){case"animation":case"animationName":if("string"==typeof et)return et.replace(vo,(function(tt,et,nt){return sa={name:et,styles:nt,next:sa},et}))}return 1===uo[tt]||So(tt)||"number"!=typeof et||0===et?et:et+"px"};function handleInterpolation(tt,et,nt,rt){if(null==nt)return"";if(void 0!==nt.__emotion_styles)return nt;switch(typeof nt){case"boolean":return"";case"object":if(1===nt.anim)return sa={name:nt.name,styles:nt.styles,next:sa},nt.name;if(void 0!==nt.styles){var it=nt.next;if(void 0!==it)for(;void 0!==it;)sa={name:it.name,styles:it.styles,next:sa},it=it.next;return nt.styles+";"}return function createStringFromObject(tt,et,nt){var rt="";if(Array.isArray(nt))for(var it=0;it<nt.length;it++)rt+=handleInterpolation(tt,et,nt[it],!1);else for(var ot in nt){var at=nt[ot];if("object"!=typeof at)null!=et&&void 0!==et[at]?rt+=ot+"{"+et[at]+"}":ta(at)&&(rt+=na(ot)+":"+ia(ot,at)+";");else if(!Array.isArray(at)||"string"!=typeof at[0]||null!=et&&void 0!==et[at[0]]){var st=handleInterpolation(tt,et,at,!1);switch(ot){case"animation":case"animationName":rt+=na(ot)+":"+st+";";break;default:rt+=ot+"{"+st+"}"}}else for(var ct=0;ct<at.length;ct++)ta(at[ct])&&(rt+=na(ot)+":"+ia(ot,at[ct])+";")}return rt}(tt,et,nt);case"function":if(void 0!==tt){var ot=sa,at=nt(tt);return sa=ot,handleInterpolation(tt,et,at,rt)}break;case"string":}if(null==et)return nt;var st=et[nt];return void 0===st||rt?nt:st}var sa,la=/label:\s*([^\s;\n{]+)\s*;/g;var pa=function serializeStyles(tt,et,nt){if(1===tt.length&&"object"==typeof tt[0]&&null!==tt[0]&&void 0!==tt[0].styles)return tt[0];var rt=!0,it="";sa=void 0;var ot=tt[0];null==ot||void 0===ot.raw?(rt=!1,it+=handleInterpolation(nt,et,ot,!1)):it+=ot[0];for(var at=1;at<tt.length;at++)it+=handleInterpolation(nt,et,tt[at],46===it.charCodeAt(it.length-1)),rt&&(it+=ot[at]);la.lastIndex=0;for(var st,ct="";null!==(st=la.exec(it));)ct+="-"+st[1];return{name:qi(it)+ct,styles:it,next:sa}};var fa=function css_browser_esm_css(){for(var tt=arguments.length,et=new Array(tt),nt=0;nt<tt;nt++)et[nt]=arguments[nt];return pa(et)},ga=Object(rt.createContext)("undefined"!=typeof HTMLElement?Sr():null),va=Object(rt.createContext)({}),_a=ga.Provider,wa=function withEmotionCache(tt){return Object(rt.forwardRef)((function render(et,nt){return Object(rt.createElement)(ga.Consumer,null,(function(rt){return tt(et,rt,nt)}))}))},Aa="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",os=Object.prototype.hasOwnProperty,as=function render(tt,et,nt,it){var ot=null===nt?et.css:et.css(nt);"string"==typeof ot&&void 0!==tt.registered[ot]&&(ot=tt.registered[ot]);var at=et[Aa],st=[ot],ct="";"string"==typeof et.className?ct=getRegisteredStyles(tt.registered,st,et.className):null!=et.className&&(ct=et.className+" ");var pt=pa(st);ii(tt,pt,"string"==typeof at);ct+=tt.key+"-"+pt.name;var ft={};for(var dt in et)os.call(et,dt)&&"css"!==dt&&dt!==Aa&&(ft[dt]=et[dt]);return ft.ref=it,ft.className=ct,Object(rt.createElement)(at,ft)},ss=wa((function(tt,et,nt){return"function"==typeof tt.css?Object(rt.createElement)(va.Consumer,null,(function(rt){return as(et,tt,rt,nt)})):as(et,tt,null,nt)}));var us=function jsx(tt,et){var nt=arguments;if(null==et||!os.call(et,"css"))return rt.createElement.apply(void 0,nt);var it=nt.length,ot=new Array(it);ot[0]=ss;var at={};for(var st in et)os.call(et,st)&&(at[st]=et[st]);at[Aa]=tt,ot[1]=at;for(var ct=2;ct<it;ct++)ot[ct]=nt[ct];return rt.createElement.apply(null,ot)},ls=(rt.Component,function classnames(tt){for(var et=tt.length,nt=0,rt="";nt<et;nt++){var it=tt[nt];if(null!=it){var ot=void 0;switch(typeof it){case"boolean":break;case"object":if(Array.isArray(it))ot=classnames(it);else for(var at in ot="",it)it[at]&&at&&(ot&&(ot+=" "),ot+=at);break;default:ot=it}ot&&(rt&&(rt+=" "),rt+=ot)}}return rt});function merge(tt,et,nt){var rt=[],it=getRegisteredStyles(tt,rt,nt);return rt.length<2?nt:it+et(rt)}var fs=wa((function(tt,et){return Object(rt.createElement)(va.Consumer,null,(function(nt){var rt=function css(){for(var tt=arguments.length,nt=new Array(tt),rt=0;rt<tt;rt++)nt[rt]=arguments[rt];var it=pa(nt,et.registered);return ii(et,it,!1),et.key+"-"+it.name},it={css:rt,cx:function cx(){for(var tt=arguments.length,nt=new Array(tt),it=0;it<tt;it++)nt[it]=arguments[it];return merge(et.registered,rt,ls(nt))},theme:nt},ot=tt.children(it);return!0,ot}))})),gs=function noop(){};function applyPrefixToName(tt,et){return et?"-"===et[0]?tt+et:tt+"__"+et:tt}function classNames(tt,et,nt){var rt=[nt];if(et&&tt)for(var it in et)et.hasOwnProperty(it)&&et[it]&&rt.push(""+applyPrefixToName(tt,it));return rt.filter((function(tt){return tt})).map((function(tt){return String(tt).trim()})).join(" ")}var vs=function cleanValue(tt){return Array.isArray(tt)?tt.filter(Boolean):"object"==typeof tt&&null!==tt?[tt]:[]};function isDocumentElement(tt){return[document.documentElement,document.body,window].indexOf(tt)>-1}function getScrollTop(tt){return isDocumentElement(tt)?window.pageYOffset:tt.scrollTop}function scrollTo(tt,et){isDocumentElement(tt)?window.scrollTo(0,et):tt.scrollTop=et}function animatedScrollTo(tt,et,nt,rt){void 0===nt&&(nt=200),void 0===rt&&(rt=gs);var it=getScrollTop(tt),ot=et-it,at=0;!function animateScroll(){var et=function easeOutCubic(tt,et,nt,rt){return nt*((tt=tt/rt-1)*tt*tt+1)+et}(at+=10,it,ot,nt);scrollTo(tt,et),at<nt?window.requestAnimationFrame(animateScroll):rt(tt)}()}function isTouchCapable(){try{return document.createEvent("TouchEvent"),!0}catch(tt){return!1}}var xs=nt(56),Ss=nt.n(xs);function index_4322c0ed_browser_esm_extends(){return(index_4322c0ed_browser_esm_extends=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}function _inheritsLoose(tt,et){tt.prototype=Object.create(et.prototype),tt.prototype.constructor=tt,tt.__proto__=et}function getMenuPlacement(tt){var et=tt.maxHeight,nt=tt.menuEl,rt=tt.minHeight,it=tt.placement,ot=tt.shouldScroll,at=tt.isFixedPosition,st=tt.theme.spacing,ct=function getScrollParent(tt){var et=getComputedStyle(tt),nt="absolute"===et.position,rt=/(auto|scroll)/,it=document.documentElement;if("fixed"===et.position)return it;for(var ot=tt;ot=ot.parentElement;)if(et=getComputedStyle(ot),(!nt||"static"!==et.position)&&rt.test(et.overflow+et.overflowY+et.overflowX))return ot;return it}(nt),pt={placement:"bottom",maxHeight:et};if(!nt||!nt.offsetParent)return pt;var ft=ct.getBoundingClientRect().height,dt=nt.getBoundingClientRect(),mt=dt.bottom,yt=dt.height,vt=dt.top,Dt=nt.offsetParent.getBoundingClientRect().top,Ot=window.innerHeight,Rt=getScrollTop(ct),Bt=parseInt(getComputedStyle(nt).marginBottom,10),Ne=parseInt(getComputedStyle(nt).marginTop,10),rn=Dt-Ne,vn=Ot-vt,bn=rn+Rt,Tn=ft-Rt-vt,Cn=mt-Ot+Rt+Bt,Ln=Rt+vt-Ne;switch(it){case"auto":case"bottom":if(vn>=yt)return{placement:"bottom",maxHeight:et};if(Tn>=yt&&!at)return ot&&animatedScrollTo(ct,Cn,160),{placement:"bottom",maxHeight:et};if(!at&&Tn>=rt||at&&vn>=rt)return ot&&animatedScrollTo(ct,Cn,160),{placement:"bottom",maxHeight:at?vn-Bt:Tn-Bt};if("auto"===it||at){var In=et,Mn=at?rn:bn;return Mn>=rt&&(In=Math.min(Mn-Bt-st.controlHeight,et)),{placement:"top",maxHeight:In}}if("bottom"===it)return scrollTo(ct,Cn),{placement:"bottom",maxHeight:et};break;case"top":if(rn>=yt)return{placement:"top",maxHeight:et};if(bn>=yt&&!at)return ot&&animatedScrollTo(ct,Ln,160),{placement:"top",maxHeight:et};if(!at&&bn>=rt||at&&rn>=rt){var zn=et;return(!at&&bn>=rt||at&&rn>=rt)&&(zn=at?rn-Ne:bn-Ne),ot&&animatedScrollTo(ct,Ln,160),{placement:"top",maxHeight:zn}}return{placement:"bottom",maxHeight:et};default:throw new Error('Invalid placement provided "'+it+'".')}return pt}var Es=function coercePlacement(tt){return"auto"===tt?"bottom":tt},Ps=function(tt){function MenuPlacer(){for(var et,nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return(et=tt.call.apply(tt,[this].concat(rt))||this).state={maxHeight:et.props.maxMenuHeight,placement:null},et.getPlacement=function(tt){var nt=et.props,rt=nt.minMenuHeight,it=nt.maxMenuHeight,ot=nt.menuPlacement,at=nt.menuPosition,st=nt.menuShouldScrollIntoView,ct=nt.theme,pt=et.context.getPortalPlacement;if(tt){var ft="fixed"===at,dt=getMenuPlacement({maxHeight:it,menuEl:tt,minHeight:rt,placement:ot,shouldScroll:st&&!ft,isFixedPosition:ft,theme:ct});pt&&pt(dt),et.setState(dt)}},et.getUpdatedProps=function(){var tt=et.props.menuPlacement,nt=et.state.placement||Es(tt);return index_4322c0ed_browser_esm_extends({},et.props,{placement:nt,maxHeight:et.state.maxHeight})},et}return _inheritsLoose(MenuPlacer,tt),MenuPlacer.prototype.render=function render(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})},MenuPlacer}(rt.Component);Ps.contextTypes={getPortalPlacement:ct.a.func};var Cs=function noticeCSS(tt){var et=tt.theme,nt=et.spacing.baseUnit;return{color:et.colors.neutral40,padding:2*nt+"px "+3*nt+"px",textAlign:"center"}},Ls=Cs,As=Cs,Ms=function NoOptionsMessage(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.innerProps;return us("div",index_4322c0ed_browser_esm_extends({css:it("noOptionsMessage",tt),className:rt({"menu-notice":!0,"menu-notice--no-options":!0},nt)},ot),et)};Ms.defaultProps={children:"No options"};var zs=function LoadingMessage(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.innerProps;return us("div",index_4322c0ed_browser_esm_extends({css:it("loadingMessage",tt),className:rt({"menu-notice":!0,"menu-notice--loading":!0},nt)},ot),et)};zs.defaultProps={children:"Loading..."};var Os=function(tt){function MenuPortal(){for(var et,nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return(et=tt.call.apply(tt,[this].concat(rt))||this).state={placement:null},et.getPortalPlacement=function(tt){var nt=tt.placement;nt!==Es(et.props.menuPlacement)&&et.setState({placement:nt})},et}_inheritsLoose(MenuPortal,tt);var et=MenuPortal.prototype;return et.getChildContext=function getChildContext(){return{getPortalPlacement:this.getPortalPlacement}},et.render=function render(){var tt=this.props,et=tt.appendTo,nt=tt.children,rt=tt.controlElement,it=tt.menuPlacement,at=tt.menuPosition,st=tt.getStyles,ct="fixed"===at;if(!et&&!ct||!rt)return null;var pt=this.state.placement||Es(it),ft=function getBoundingClientObj(tt){var et=tt.getBoundingClientRect();return{bottom:et.bottom,height:et.height,left:et.left,right:et.right,top:et.top,width:et.width}}(rt),dt=ct?0:window.pageYOffset,mt=ft[pt]+dt,yt=us("div",{css:st("menuPortal",{offset:mt,position:at,rect:ft})},nt);return et?Object(ot.createPortal)(yt,et):yt},MenuPortal}(rt.Component);Os.childContextTypes={getPortalPlacement:ct.a.func};var Rs=Array.isArray,Bs=Object.keys,Fs=Object.prototype.hasOwnProperty;function exportedEqual(tt,et){try{return function equal(tt,et){if(tt===et)return!0;if(tt&&et&&"object"==typeof tt&&"object"==typeof et){var nt,rt,it,ot=Rs(tt),at=Rs(et);if(ot&&at){if((rt=tt.length)!=et.length)return!1;for(nt=rt;0!=nt--;)if(!equal(tt[nt],et[nt]))return!1;return!0}if(ot!=at)return!1;var st=tt instanceof Date,ct=et instanceof Date;if(st!=ct)return!1;if(st&&ct)return tt.getTime()==et.getTime();var pt=tt instanceof RegExp,ft=et instanceof RegExp;if(pt!=ft)return!1;if(pt&&ft)return tt.toString()==et.toString();var dt=Bs(tt);if((rt=dt.length)!==Bs(et).length)return!1;for(nt=rt;0!=nt--;)if(!Fs.call(et,dt[nt]))return!1;for(nt=rt;0!=nt--;)if(!("_owner"===(it=dt[nt])&&tt.$$typeof||equal(tt[it],et[it])))return!1;return!0}return tt!=tt&&et!=et}(tt,et)}catch(tt){if(tt.message&&tt.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",tt.name,tt.message),!1;throw tt}}function _extends$1(){return(_extends$1=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}function _templateObject(){var tt=function _taggedTemplateLiteralLoose(tt,et){et||(et=tt.slice(0));return tt.raw=et,tt}(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]);return _templateObject=function _templateObject(){return tt},tt}function _extends$2(){return(_extends$2=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}var Ns={name:"19bqh2r",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;"},Vs=function Svg(tt){var et=tt.size,nt=function index_4322c0ed_browser_esm_objectWithoutPropertiesLoose(tt,et){if(null==tt)return{};var nt,rt,it={},ot=Object.keys(tt);for(rt=0;rt<ot.length;rt++)nt=ot[rt],et.indexOf(nt)>=0||(it[nt]=tt[nt]);return it}(tt,["size"]);return us("svg",_extends$2({height:et,width:et,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Ns},nt))},Us=function CrossIcon(tt){return us(Vs,_extends$2({size:20},tt),us("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},js=function DownChevron(tt){return us(Vs,_extends$2({size:20},tt),us("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Zs=function baseCSS(tt){var et=tt.isFocused,nt=tt.theme,rt=nt.spacing.baseUnit,it=nt.colors;return{label:"indicatorContainer",color:et?it.neutral60:it.neutral20,display:"flex",padding:2*rt,transition:"color 150ms",":hover":{color:et?it.neutral80:it.neutral40}}},Js=Zs,du=Zs,vu=function keyframes(){var tt=fa.apply(void 0,arguments),et="animation-"+tt.name;return{name:et,styles:"@keyframes "+et+"{"+tt.styles+"}",anim:1,toString:function toString(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(_templateObject()),_u=function LoadingDot(tt){var et=tt.delay,nt=tt.offset;return us("span",{css:fa({animation:vu+" 1s ease-in-out "+et+"ms infinite;",backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:nt?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"")})},wu=function LoadingIndicator(tt){var et=tt.className,nt=tt.cx,rt=tt.getStyles,it=tt.innerProps,ot=tt.isRtl;return us("div",_extends$2({},it,{css:rt("loadingIndicator",tt),className:nt({indicator:!0,"loading-indicator":!0},et)}),us(_u,{delay:0,offset:ot}),us(_u,{delay:160,offset:!0}),us(_u,{delay:320,offset:!ot}))};function _extends$3(){return(_extends$3=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}wu.defaultProps={size:4};function _extends$4(){return(_extends$4=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}function _extends$5(){return(_extends$5=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}var Tu=function inputStyle(tt){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:tt?0:1,outline:0,padding:0,color:"inherit"}};function _extends$6(){return(_extends$6=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}var Fu=function MultiValueGeneric(tt){var et=tt.children,nt=tt.innerProps;return us("div",nt,et)},tl=Fu,ol=Fu;var sl=function MultiValue(tt){var et=tt.children,nt=tt.className,rt=tt.components,it=tt.cx,ot=tt.data,at=tt.getStyles,st=tt.innerProps,ct=tt.isDisabled,pt=tt.removeProps,ft=tt.selectProps,dt=rt.Container,mt=rt.Label,yt=rt.Remove;return us(fs,null,(function(rt){var vt=rt.css,Dt=rt.cx;return us(dt,{data:ot,innerProps:_extends$6({},st,{className:Dt(vt(at("multiValue",tt)),it({"multi-value":!0,"multi-value--is-disabled":ct},nt))}),selectProps:ft},us(mt,{data:ot,innerProps:{className:Dt(vt(at("multiValueLabel",tt)),it({"multi-value__label":!0},nt))},selectProps:ft},et),us(yt,{data:ot,innerProps:_extends$6({className:Dt(vt(at("multiValueRemove",tt)),it({"multi-value__remove":!0},nt))},pt),selectProps:ft}))}))};function _extends$7(){return(_extends$7=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}sl.defaultProps={cropWithEllipsis:!0};function _extends$8(){return(_extends$8=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}function _extends$9(){return(_extends$9=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}function _extends$a(){return(_extends$a=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}var dl={ClearIndicator:function ClearIndicator(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.innerProps;return us("div",_extends$2({},ot,{css:it("clearIndicator",tt),className:rt({indicator:!0,"clear-indicator":!0},nt)}),et||us(Us,null))},Control:function Control(tt){var et=tt.children,nt=tt.cx,rt=tt.getStyles,it=tt.className,ot=tt.isDisabled,at=tt.isFocused,st=tt.innerRef,ct=tt.innerProps,pt=tt.menuIsOpen;return us("div",_extends$3({ref:st,css:rt("control",tt),className:nt({control:!0,"control--is-disabled":ot,"control--is-focused":at,"control--menu-is-open":pt},it)},ct),et)},DropdownIndicator:function DropdownIndicator(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.innerProps;return us("div",_extends$2({},ot,{css:it("dropdownIndicator",tt),className:rt({indicator:!0,"dropdown-indicator":!0},nt)}),et||us(js,null))},DownChevron:js,CrossIcon:Us,Group:function Group(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.Heading,at=tt.headingProps,st=tt.label,ct=tt.theme,pt=tt.selectProps;return us("div",{css:it("group",tt),className:rt({group:!0},nt)},us(ot,_extends$4({},at,{selectProps:pt,theme:ct,getStyles:it,cx:rt}),st),us("div",null,et))},GroupHeading:function GroupHeading(tt){var et=tt.className,nt=tt.cx,rt=tt.getStyles,it=tt.theme,ot=(tt.selectProps,function _objectWithoutPropertiesLoose$1(tt,et){if(null==tt)return{};var nt,rt,it={},ot=Object.keys(tt);for(rt=0;rt<ot.length;rt++)nt=ot[rt],et.indexOf(nt)>=0||(it[nt]=tt[nt]);return it}(tt,["className","cx","getStyles","theme","selectProps"]));return us("div",_extends$4({css:rt("groupHeading",_extends$4({theme:it},ot)),className:nt({"group-heading":!0},et)},ot))},IndicatorsContainer:function IndicatorsContainer(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles;return us("div",{css:it("indicatorsContainer",tt),className:rt({indicators:!0},nt)},et)},IndicatorSeparator:function IndicatorSeparator(tt){var et=tt.className,nt=tt.cx,rt=tt.getStyles,it=tt.innerProps;return us("span",_extends$2({},it,{css:rt("indicatorSeparator",tt),className:nt({"indicator-separator":!0},et)}))},Input:function Input(tt){var et=tt.className,nt=tt.cx,rt=tt.getStyles,it=tt.innerRef,ot=tt.isHidden,at=tt.isDisabled,st=tt.theme,ct=(tt.selectProps,function _objectWithoutPropertiesLoose$2(tt,et){if(null==tt)return{};var nt,rt,it={},ot=Object.keys(tt);for(rt=0;rt<ot.length;rt++)nt=ot[rt],et.indexOf(nt)>=0||(it[nt]=tt[nt]);return it}(tt,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]));return us("div",{css:rt("input",_extends$5({theme:st},ct))},us(Ss.a,_extends$5({className:nt({input:!0},et),inputRef:it,inputStyle:Tu(ot),disabled:at},ct)))},LoadingIndicator:wu,Menu:function Menu(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.innerRef,at=tt.innerProps;return us("div",index_4322c0ed_browser_esm_extends({css:it("menu",tt),className:rt({menu:!0},nt)},at,{ref:ot}),et)},MenuList:function MenuList(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.isMulti,at=tt.innerRef;return us("div",{css:it("menuList",tt),className:rt({"menu-list":!0,"menu-list--is-multi":ot},nt),ref:at},et)},MenuPortal:Os,LoadingMessage:zs,NoOptionsMessage:Ms,MultiValue:sl,MultiValueContainer:tl,MultiValueLabel:ol,MultiValueRemove:function index_4322c0ed_browser_esm_MultiValueRemove(tt){var et=tt.children,nt=tt.innerProps;return us("div",nt,et||us(Us,{size:14}))},Option:function Option(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.isDisabled,at=tt.isFocused,st=tt.isSelected,ct=tt.innerRef,pt=tt.innerProps;return us("div",_extends$7({css:it("option",tt),className:rt({option:!0,"option--is-disabled":ot,"option--is-focused":at,"option--is-selected":st},nt),ref:ct},pt),et)},Placeholder:function Placeholder(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.innerProps;return us("div",_extends$8({css:it("placeholder",tt),className:rt({placeholder:!0},nt)},ot),et)},SelectContainer:function SelectContainer(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.innerProps,at=tt.isDisabled,st=tt.isRtl;return us("div",_extends$1({css:it("container",tt),className:rt({"--is-disabled":at,"--is-rtl":st},nt)},ot),et)},SingleValue:function SingleValue(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.getStyles,ot=tt.isDisabled,at=tt.innerProps;return us("div",_extends$9({css:it("singleValue",tt),className:rt({"single-value":!0,"single-value--is-disabled":ot},nt)},at),et)},ValueContainer:function ValueContainer(tt){var et=tt.children,nt=tt.className,rt=tt.cx,it=tt.isMulti,ot=tt.getStyles,at=tt.hasValue;return us("div",{css:ot("valueContainer",tt),className:rt({"value-container":!0,"value-container--is-multi":it,"value-container--has-value":at},nt)},et)}},gl=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],yl=function stripDiacritics(tt){for(var et=0;et<gl.length;et++)tt=tt.replace(gl[et].letters,gl[et].base);return tt};function Select_9fdb8cd0_browser_esm_extends(){return(Select_9fdb8cd0_browser_esm_extends=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}var vl=function trimString(tt){return tt.replace(/^\s+|\s+$/g,"")},_l=function defaultStringify(tt){return tt.label+" "+tt.value};function Select_9fdb8cd0_browser_esm_extends$1(){return(Select_9fdb8cd0_browser_esm_extends$1=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}var xl={name:"1laao21-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;"},bl=function A11yText(tt){return us("span",Select_9fdb8cd0_browser_esm_extends$1({css:xl},tt))};function Select_9fdb8cd0_browser_esm_extends$2(){return(Select_9fdb8cd0_browser_esm_extends$2=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}function DummyInput(tt){tt.in,tt.out,tt.onExited,tt.appear,tt.enter,tt.exit;var et=tt.innerRef,nt=(tt.emotion,function Select_9fdb8cd0_browser_esm_objectWithoutPropertiesLoose(tt,et){if(null==tt)return{};var nt,rt,it={},ot=Object.keys(tt);for(rt=0;rt<ot.length;rt++)nt=ot[rt],et.indexOf(nt)>=0||(it[nt]=tt[nt]);return it}(tt,["in","out","onExited","appear","enter","exit","innerRef","emotion"]));return us("input",Select_9fdb8cd0_browser_esm_extends$2({ref:et},nt,{css:fa({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"")}))}var wl=function(tt){function NodeResolver(){return tt.apply(this,arguments)||this}!function Select_9fdb8cd0_browser_esm_inheritsLoose(tt,et){tt.prototype=Object.create(et.prototype),tt.prototype.constructor=tt,tt.__proto__=et}(NodeResolver,tt);var et=NodeResolver.prototype;return et.componentDidMount=function componentDidMount(){this.props.innerRef(Object(ot.findDOMNode)(this))},et.componentWillUnmount=function componentWillUnmount(){this.props.innerRef(null)},et.render=function render(){return this.props.children},NodeResolver}(rt.Component),Sl=["boxSizing","height","overflow","paddingRight","position"],Cl={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function preventTouchMove(tt){tt.preventDefault()}function allowTouchMove(tt){tt.stopPropagation()}function preventInertiaScroll(){var tt=this.scrollTop,et=this.scrollHeight,nt=tt+this.offsetHeight;0===tt?this.scrollTop=1:nt===et&&(this.scrollTop=tt-1)}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}var kl=!(!window.document||!window.document.createElement),Il=0,Al=function(tt){function ScrollLock(){for(var et,nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return(et=tt.call.apply(tt,[this].concat(rt))||this).originalStyles={},et.listenerOptions={capture:!1,passive:!1},et}!function _inheritsLoose$1(tt,et){tt.prototype=Object.create(et.prototype),tt.prototype.constructor=tt,tt.__proto__=et}(ScrollLock,tt);var et=ScrollLock.prototype;return et.componentDidMount=function componentDidMount(){var tt=this;if(kl){var et=this.props,nt=et.accountForScrollbars,rt=et.touchScrollTarget,it=document.body,ot=it&&it.style;if(nt&&Sl.forEach((function(et){var nt=ot&&ot[et];tt.originalStyles[et]=nt})),nt&&Il<1){var at=parseInt(this.originalStyles.paddingRight,10)||0,st=document.body?document.body.clientWidth:0,ct=window.innerWidth-st+at||0;Object.keys(Cl).forEach((function(tt){var et=Cl[tt];ot&&(ot[tt]=et)})),ot&&(ot.paddingRight=ct+"px")}it&&isTouchDevice()&&(it.addEventListener("touchmove",preventTouchMove,this.listenerOptions),rt&&(rt.addEventListener("touchstart",preventInertiaScroll,this.listenerOptions),rt.addEventListener("touchmove",allowTouchMove,this.listenerOptions))),Il+=1}},et.componentWillUnmount=function componentWillUnmount(){var tt=this;if(kl){var et=this.props,nt=et.accountForScrollbars,rt=et.touchScrollTarget,it=document.body,ot=it&&it.style;Il=Math.max(Il-1,0),nt&&Il<1&&Sl.forEach((function(et){var nt=tt.originalStyles[et];ot&&(ot[et]=nt)})),it&&isTouchDevice()&&(it.removeEventListener("touchmove",preventTouchMove,this.listenerOptions),rt&&(rt.removeEventListener("touchstart",preventInertiaScroll,this.listenerOptions),rt.removeEventListener("touchmove",allowTouchMove,this.listenerOptions)))}},et.render=function render(){return null},ScrollLock}(rt.Component);Al.defaultProps={accountForScrollbars:!0};var zl={name:"1dsbpcp",styles:"position:fixed;left:0;bottom:0;right:0;top:0;"},Fl=function(tt){function ScrollBlock(){for(var et,nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return(et=tt.call.apply(tt,[this].concat(rt))||this).state={touchScrollTarget:null},et.getScrollTarget=function(tt){tt!==et.state.touchScrollTarget&&et.setState({touchScrollTarget:tt})},et.blurSelectInput=function(){document.activeElement&&document.activeElement.blur()},et}return function _inheritsLoose$2(tt,et){tt.prototype=Object.create(et.prototype),tt.prototype.constructor=tt,tt.__proto__=et}(ScrollBlock,tt),ScrollBlock.prototype.render=function render(){var tt=this.props,et=tt.children,nt=tt.isEnabled,rt=this.state.touchScrollTarget;return nt?us("div",null,us("div",{onClick:this.blurSelectInput,css:zl}),us(wl,{innerRef:this.getScrollTarget},et),rt?us(Al,{touchScrollTarget:rt}):null):et},ScrollBlock}(rt.PureComponent);var Hl=function(tt){function ScrollCaptor(){for(var et,nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return(et=tt.call.apply(tt,[this].concat(rt))||this).isBottom=!1,et.isTop=!1,et.scrollTarget=void 0,et.touchStart=void 0,et.cancelScroll=function(tt){tt.preventDefault(),tt.stopPropagation()},et.handleEventDelta=function(tt,nt){var rt=et.props,it=rt.onBottomArrive,ot=rt.onBottomLeave,at=rt.onTopArrive,st=rt.onTopLeave,ct=et.scrollTarget,pt=ct.scrollTop,ft=ct.scrollHeight,dt=ct.clientHeight,mt=et.scrollTarget,yt=nt>0,vt=ft-dt-pt,Dt=!1;vt>nt&&et.isBottom&&(ot&&ot(tt),et.isBottom=!1),yt&&et.isTop&&(st&&st(tt),et.isTop=!1),yt&&nt>vt?(it&&!et.isBottom&&it(tt),mt.scrollTop=ft,Dt=!0,et.isBottom=!0):!yt&&-nt>pt&&(at&&!et.isTop&&at(tt),mt.scrollTop=0,Dt=!0,et.isTop=!0),Dt&&et.cancelScroll(tt)},et.onWheel=function(tt){et.handleEventDelta(tt,tt.deltaY)},et.onTouchStart=function(tt){et.touchStart=tt.changedTouches[0].clientY},et.onTouchMove=function(tt){var nt=et.touchStart-tt.changedTouches[0].clientY;et.handleEventDelta(tt,nt)},et.getScrollTarget=function(tt){et.scrollTarget=tt},et}!function _inheritsLoose$3(tt,et){tt.prototype=Object.create(et.prototype),tt.prototype.constructor=tt,tt.__proto__=et}(ScrollCaptor,tt);var et=ScrollCaptor.prototype;return et.componentDidMount=function componentDidMount(){this.startListening(this.scrollTarget)},et.componentWillUnmount=function componentWillUnmount(){this.stopListening(this.scrollTarget)},et.startListening=function startListening(tt){tt&&("function"==typeof tt.addEventListener&&tt.addEventListener("wheel",this.onWheel,!1),"function"==typeof tt.addEventListener&&tt.addEventListener("touchstart",this.onTouchStart,!1),"function"==typeof tt.addEventListener&&tt.addEventListener("touchmove",this.onTouchMove,!1))},et.stopListening=function stopListening(tt){"function"==typeof tt.removeEventListener&&tt.removeEventListener("wheel",this.onWheel,!1),"function"==typeof tt.removeEventListener&&tt.removeEventListener("touchstart",this.onTouchStart,!1),"function"==typeof tt.removeEventListener&&tt.removeEventListener("touchmove",this.onTouchMove,!1)},et.render=function render(){return it.a.createElement(wl,{innerRef:this.getScrollTarget},this.props.children)},ScrollCaptor}(rt.Component);function ScrollCaptorSwitch(tt){var et=tt.isEnabled,nt=void 0===et||et,rt=function Select_9fdb8cd0_browser_esm_objectWithoutPropertiesLoose$1(tt,et){if(null==tt)return{};var nt,rt,it={},ot=Object.keys(tt);for(rt=0;rt<ot.length;rt++)nt=ot[rt],et.indexOf(nt)>=0||(it[nt]=tt[nt]);return it}(tt,["isEnabled"]);return nt?it.a.createElement(Hl,rt):rt.children}var ac=function instructionsAriaMessage(tt,et){void 0===et&&(et={});var nt=et,rt=nt.isSearchable,it=nt.isMulti,ot=nt.label,at=nt.isDisabled;switch(tt){case"menu":return"Use Up and Down to choose options"+(at?"":", press Enter to select the currently focused option")+", press Escape to exit the menu, press Tab to select the option and exit the menu.";case"input":return(ot||"Select")+" is focused "+(rt?",type to refine list":"")+", press Down to open the menu, "+(it?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}},pc=function valueEventAriaMessage(tt,et){var nt=et.value,rt=et.isDisabled;if(nt)switch(tt){case"deselect-option":case"pop-value":case"remove-value":return"option "+nt+", deselected.";case"select-option":return rt?"option "+nt+" is disabled. Select another option.":"option "+nt+", selected."}},yc=function isOptionDisabled(tt){return!!tt.isDisabled};var _c={clearIndicator:du,container:function containerCSS(tt){var et=tt.isDisabled;return{label:"container",direction:tt.isRtl?"rtl":null,pointerEvents:et?"none":null,position:"relative"}},control:function css(tt){var et=tt.isDisabled,nt=tt.isFocused,rt=tt.theme,it=rt.colors,ot=rt.borderRadius,at=rt.spacing;return{label:"control",alignItems:"center",backgroundColor:et?it.neutral5:it.neutral0,borderColor:et?it.neutral10:nt?it.primary:it.neutral20,borderRadius:ot,borderStyle:"solid",borderWidth:1,boxShadow:nt?"0 0 0 1px "+it.primary:null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:at.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:nt?it.primary:it.neutral30}}},dropdownIndicator:Js,group:function groupCSS(tt){var et=tt.theme.spacing;return{paddingBottom:2*et.baseUnit,paddingTop:2*et.baseUnit}},groupHeading:function groupHeadingCSS(tt){var et=tt.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*et.baseUnit,paddingRight:3*et.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function indicatorsContainerCSS(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function indicatorSeparatorCSS(tt){var et=tt.isDisabled,nt=tt.theme,rt=nt.spacing.baseUnit,it=nt.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:et?it.neutral10:it.neutral20,marginBottom:2*rt,marginTop:2*rt,width:1}},input:function inputCSS(tt){var et=tt.isDisabled,nt=tt.theme,rt=nt.spacing,it=nt.colors;return{margin:rt.baseUnit/2,paddingBottom:rt.baseUnit/2,paddingTop:rt.baseUnit/2,visibility:et?"hidden":"visible",color:it.neutral80}},loadingIndicator:function loadingIndicatorCSS(tt){var et=tt.isFocused,nt=tt.size,rt=tt.theme,it=rt.colors,ot=rt.spacing.baseUnit;return{label:"loadingIndicator",color:et?it.neutral60:it.neutral20,display:"flex",padding:2*ot,transition:"color 150ms",alignSelf:"center",fontSize:nt,lineHeight:1,marginRight:nt,textAlign:"center",verticalAlign:"middle"}},loadingMessage:As,menu:function menuCSS(tt){var et,nt=tt.placement,rt=tt.theme,it=rt.borderRadius,ot=rt.spacing,at=rt.colors;return(et={label:"menu"})[function alignToControl(tt){return tt?{bottom:"top",top:"bottom"}[tt]:"bottom"}(nt)]="100%",et.backgroundColor=at.neutral0,et.borderRadius=it,et.boxShadow="0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",et.marginBottom=ot.menuGutter,et.marginTop=ot.menuGutter,et.position="absolute",et.width="100%",et.zIndex=1,et},menuList:function menuListCSS(tt){var et=tt.maxHeight,nt=tt.theme.spacing.baseUnit;return{maxHeight:et,overflowY:"auto",paddingBottom:nt,paddingTop:nt,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function menuPortalCSS(tt){var et=tt.rect,nt=tt.offset,rt=tt.position;return{left:et.left,position:rt,top:nt,width:et.width,zIndex:1}},multiValue:function multiValueCSS(tt){var et=tt.theme,nt=et.spacing,rt=et.borderRadius;return{label:"multiValue",backgroundColor:et.colors.neutral10,borderRadius:rt/2,display:"flex",margin:nt.baseUnit/2,minWidth:0}},multiValueLabel:function multiValueLabelCSS(tt){var et=tt.theme,nt=et.borderRadius,rt=et.colors,it=tt.cropWithEllipsis;return{borderRadius:nt/2,color:rt.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:it?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function multiValueRemoveCSS(tt){var et=tt.theme,nt=et.spacing,rt=et.borderRadius,it=et.colors;return{alignItems:"center",borderRadius:rt/2,backgroundColor:tt.isFocused&&it.dangerLight,display:"flex",paddingLeft:nt.baseUnit,paddingRight:nt.baseUnit,":hover":{backgroundColor:it.dangerLight,color:it.danger}}},noOptionsMessage:Ls,option:function optionCSS(tt){var et=tt.isDisabled,nt=tt.isFocused,rt=tt.isSelected,it=tt.theme,ot=it.spacing,at=it.colors;return{label:"option",backgroundColor:rt?at.primary:nt?at.primary25:"transparent",color:et?at.neutral20:rt?at.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:2*ot.baseUnit+"px "+3*ot.baseUnit+"px",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!et&&(rt?at.primary:at.primary50)}}},placeholder:function placeholderCSS(tt){var et=tt.theme,nt=et.spacing;return{label:"placeholder",color:et.colors.neutral50,marginLeft:nt.baseUnit/2,marginRight:nt.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function css(tt){var et=tt.isDisabled,nt=tt.theme,rt=nt.spacing,it=nt.colors;return{label:"singleValue",color:et?it.neutral40:it.neutral80,marginLeft:rt.baseUnit/2,marginRight:rt.baseUnit/2,maxWidth:"calc(100% - "+2*rt.baseUnit+"px)",overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function valueContainerCSS(tt){var et=tt.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:et.baseUnit/2+"px "+2*et.baseUnit+"px",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}};var xc={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}};function Select_9fdb8cd0_browser_esm_extends$4(){return(Select_9fdb8cd0_browser_esm_extends$4=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}function _assertThisInitialized(tt){if(void 0===tt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tt}var bc={backspaceRemovesValue:!0,blurInputOnSelect:isTouchCapable(),captureMenuScroll:!isTouchCapable(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function createFilter(tt){return function(et,nt){var rt=Select_9fdb8cd0_browser_esm_extends({ignoreCase:!0,ignoreAccents:!0,stringify:_l,trim:!0,matchFrom:"any"},tt),it=rt.ignoreCase,ot=rt.ignoreAccents,at=rt.stringify,st=rt.trim,ct=rt.matchFrom,pt=st?vl(nt):nt,ft=st?vl(at(et)):at(et);return it&&(pt=pt.toLowerCase(),ft=ft.toLowerCase()),ot&&(pt=yl(pt),ft=yl(ft)),"start"===ct?ft.substr(0,pt.length)===pt:ft.indexOf(pt)>-1}}(),formatGroupLabel:function formatGroupLabel(tt){return tt.label},getOptionLabel:function getOptionLabel(tt){return tt.label},getOptionValue:function getOptionValue(tt){return tt.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:yc,loadingMessage:function loadingMessage(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function isMobileDevice(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(tt){return!1}}(),noOptionsMessage:function noOptionsMessage(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function screenReaderStatus(tt){var et=tt.count;return et+" result"+(1!==et?"s":"")+" available"},styles:{},tabIndex:"0",tabSelectsValue:!0},wc=1,Ec=function(tt){function Select(et){var nt;(nt=tt.call(this,et)||this).state={ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]},nt.blockOptionHover=!1,nt.isComposing=!1,nt.clearFocusValueOnUpdate=!1,nt.commonProps=void 0,nt.components=void 0,nt.hasGroups=!1,nt.initialTouchX=0,nt.initialTouchY=0,nt.inputIsHiddenAfterUpdate=void 0,nt.instancePrefix="",nt.openAfterFocus=!1,nt.scrollToFocusedOptionOnUpdate=!1,nt.userIsDragging=void 0,nt.controlRef=null,nt.getControlRef=function(tt){nt.controlRef=tt},nt.focusedOptionRef=null,nt.getFocusedOptionRef=function(tt){nt.focusedOptionRef=tt},nt.menuListRef=null,nt.getMenuListRef=function(tt){nt.menuListRef=tt},nt.inputRef=null,nt.getInputRef=function(tt){nt.inputRef=tt},nt.cacheComponents=function(tt){nt.components=function defaultComponents(tt){return _extends$a({},dl,tt.components)}({components:tt})},nt.focus=nt.focusInput,nt.blur=nt.blurInput,nt.onChange=function(tt,et){var rt=nt.props;(0,rt.onChange)(tt,Select_9fdb8cd0_browser_esm_extends$4({},et,{name:rt.name}))},nt.setValue=function(tt,et,rt){void 0===et&&(et="set-value");var it=nt.props,ot=it.closeMenuOnSelect,at=it.isMulti;nt.onInputChange("",{action:"set-value"}),ot&&(nt.inputIsHiddenAfterUpdate=!at,nt.onMenuClose()),nt.clearFocusValueOnUpdate=!0,nt.onChange(tt,{action:et,option:rt})},nt.selectOption=function(tt){var et=nt.props,rt=et.blurInputOnSelect,it=et.isMulti,ot=nt.state.selectValue;if(it)if(nt.isOptionSelected(tt,ot)){var at=nt.getOptionValue(tt);nt.setValue(ot.filter((function(tt){return nt.getOptionValue(tt)!==at})),"deselect-option",tt),nt.announceAriaLiveSelection({event:"deselect-option",context:{value:nt.getOptionLabel(tt)}})}else nt.isOptionDisabled(tt,ot)?nt.announceAriaLiveSelection({event:"select-option",context:{value:nt.getOptionLabel(tt),isDisabled:!0}}):(nt.setValue([].concat(ot,[tt]),"select-option",tt),nt.announceAriaLiveSelection({event:"select-option",context:{value:nt.getOptionLabel(tt)}}));else nt.isOptionDisabled(tt,ot)?nt.announceAriaLiveSelection({event:"select-option",context:{value:nt.getOptionLabel(tt),isDisabled:!0}}):(nt.setValue(tt,"select-option"),nt.announceAriaLiveSelection({event:"select-option",context:{value:nt.getOptionLabel(tt)}}));rt&&nt.blurInput()},nt.removeValue=function(tt){var et=nt.state.selectValue,rt=nt.getOptionValue(tt),it=et.filter((function(tt){return nt.getOptionValue(tt)!==rt}));nt.onChange(it.length?it:null,{action:"remove-value",removedValue:tt}),nt.announceAriaLiveSelection({event:"remove-value",context:{value:tt?nt.getOptionLabel(tt):""}}),nt.focusInput()},nt.clearValue=function(){var tt=nt.props.isMulti;nt.onChange(tt?[]:null,{action:"clear"})},nt.popValue=function(){var tt=nt.state.selectValue,et=tt[tt.length-1],rt=tt.slice(0,tt.length-1);nt.announceAriaLiveSelection({event:"pop-value",context:{value:et?nt.getOptionLabel(et):""}}),nt.onChange(rt.length?rt:null,{action:"pop-value",removedValue:et})},nt.getOptionLabel=function(tt){return nt.props.getOptionLabel(tt)},nt.getOptionValue=function(tt){return nt.props.getOptionValue(tt)},nt.getStyles=function(tt,et){var rt=_c[tt](et);rt.boxSizing="border-box";var it=nt.props.styles[tt];return it?it(rt,et):rt},nt.getElementId=function(tt){return nt.instancePrefix+"-"+tt},nt.getActiveDescendentId=function(){var tt=nt.props.menuIsOpen,et=nt.state,rt=et.menuOptions,it=et.focusedOption;if(it&&tt){var ot=rt.focusable.indexOf(it),at=rt.render[ot];return at&&at.key}},nt.announceAriaLiveSelection=function(tt){var et=tt.event,rt=tt.context;nt.setState({ariaLiveSelection:pc(et,rt)})},nt.announceAriaLiveContext=function(tt){var et=tt.event,rt=tt.context;nt.setState({ariaLiveContext:ac(et,Select_9fdb8cd0_browser_esm_extends$4({},rt,{label:nt.props["aria-label"]}))})},nt.onMenuMouseDown=function(tt){0===tt.button&&(tt.stopPropagation(),tt.preventDefault(),nt.focusInput())},nt.onMenuMouseMove=function(tt){nt.blockOptionHover=!1},nt.onControlMouseDown=function(tt){var et=nt.props.openMenuOnClick;nt.state.isFocused?nt.props.menuIsOpen?"INPUT"!==tt.target.tagName&&"TEXTAREA"!==tt.target.tagName&&nt.onMenuClose():et&&nt.openMenu("first"):(et&&(nt.openAfterFocus=!0),nt.focusInput()),"INPUT"!==tt.target.tagName&&"TEXTAREA"!==tt.target.tagName&&tt.preventDefault()},nt.onDropdownIndicatorMouseDown=function(tt){if(!(tt&&"mousedown"===tt.type&&0!==tt.button||nt.props.isDisabled)){var et=nt.props,rt=et.isMulti,it=et.menuIsOpen;nt.focusInput(),it?(nt.inputIsHiddenAfterUpdate=!rt,nt.onMenuClose()):nt.openMenu("first"),tt.preventDefault(),tt.stopPropagation()}},nt.onClearIndicatorMouseDown=function(tt){tt&&"mousedown"===tt.type&&0!==tt.button||(nt.clearValue(),tt.stopPropagation(),nt.openAfterFocus=!1,"touchend"===tt.type?nt.focusInput():setTimeout((function(){return nt.focusInput()})))},nt.onScroll=function(tt){"boolean"==typeof nt.props.closeMenuOnScroll?tt.target instanceof HTMLElement&&isDocumentElement(tt.target)&&nt.props.onMenuClose():"function"==typeof nt.props.closeMenuOnScroll&&nt.props.closeMenuOnScroll(tt)&&nt.props.onMenuClose()},nt.onCompositionStart=function(){nt.isComposing=!0},nt.onCompositionEnd=function(){nt.isComposing=!1},nt.onTouchStart=function(tt){var et=tt.touches.item(0);et&&(nt.initialTouchX=et.clientX,nt.initialTouchY=et.clientY,nt.userIsDragging=!1)},nt.onTouchMove=function(tt){var et=tt.touches.item(0);if(et){var rt=Math.abs(et.clientX-nt.initialTouchX),it=Math.abs(et.clientY-nt.initialTouchY);nt.userIsDragging=rt>5||it>5}},nt.onTouchEnd=function(tt){nt.userIsDragging||(nt.controlRef&&!nt.controlRef.contains(tt.target)&&nt.menuListRef&&!nt.menuListRef.contains(tt.target)&&nt.blurInput(),nt.initialTouchX=0,nt.initialTouchY=0)},nt.onControlTouchEnd=function(tt){nt.userIsDragging||nt.onControlMouseDown(tt)},nt.onClearIndicatorTouchEnd=function(tt){nt.userIsDragging||nt.onClearIndicatorMouseDown(tt)},nt.onDropdownIndicatorTouchEnd=function(tt){nt.userIsDragging||nt.onDropdownIndicatorMouseDown(tt)},nt.handleInputChange=function(tt){var et=tt.currentTarget.value;nt.inputIsHiddenAfterUpdate=!1,nt.onInputChange(et,{action:"input-change"}),nt.onMenuOpen()},nt.onInputFocus=function(tt){var et=nt.props,rt=et.isSearchable,it=et.isMulti;nt.props.onFocus&&nt.props.onFocus(tt),nt.inputIsHiddenAfterUpdate=!1,nt.announceAriaLiveContext({event:"input",context:{isSearchable:rt,isMulti:it}}),nt.setState({isFocused:!0}),(nt.openAfterFocus||nt.props.openMenuOnFocus)&&nt.openMenu("first"),nt.openAfterFocus=!1},nt.onInputBlur=function(tt){nt.menuListRef&&nt.menuListRef.contains(document.activeElement)?nt.inputRef.focus():(nt.props.onBlur&&nt.props.onBlur(tt),nt.onInputChange("",{action:"input-blur"}),nt.onMenuClose(),nt.setState({focusedValue:null,isFocused:!1}))},nt.onOptionHover=function(tt){nt.blockOptionHover||nt.state.focusedOption===tt||nt.setState({focusedOption:tt})},nt.shouldHideSelectedOptions=function(){var tt=nt.props,et=tt.hideSelectedOptions,rt=tt.isMulti;return void 0===et?rt:et},nt.onKeyDown=function(tt){var et=nt.props,rt=et.isMulti,it=et.backspaceRemovesValue,ot=et.escapeClearsValue,at=et.inputValue,st=et.isClearable,ct=et.isDisabled,pt=et.menuIsOpen,ft=et.onKeyDown,dt=et.tabSelectsValue,mt=et.openMenuOnFocus,yt=nt.state,vt=yt.focusedOption,Dt=yt.focusedValue,Ot=yt.selectValue;if(!(ct||"function"==typeof ft&&(ft(tt),tt.defaultPrevented))){switch(nt.blockOptionHover=!0,tt.key){case"ArrowLeft":if(!rt||at)return;nt.focusValue("previous");break;case"ArrowRight":if(!rt||at)return;nt.focusValue("next");break;case"Delete":case"Backspace":if(at)return;if(Dt)nt.removeValue(Dt);else{if(!it)return;rt?nt.popValue():st&&nt.clearValue()}break;case"Tab":if(nt.isComposing)return;if(tt.shiftKey||!pt||!dt||!vt||mt&&nt.isOptionSelected(vt,Ot))return;nt.selectOption(vt);break;case"Enter":if(229===tt.keyCode)break;if(pt){if(!vt)return;if(nt.isComposing)return;nt.selectOption(vt);break}return;case"Escape":pt?(nt.inputIsHiddenAfterUpdate=!1,nt.onInputChange("",{action:"menu-close"}),nt.onMenuClose()):st&&ot&&nt.clearValue();break;case" ":if(at)return;if(!pt){nt.openMenu("first");break}if(!vt)return;nt.selectOption(vt);break;case"ArrowUp":pt?nt.focusOption("up"):nt.openMenu("last");break;case"ArrowDown":pt?nt.focusOption("down"):nt.openMenu("first");break;case"PageUp":if(!pt)return;nt.focusOption("pageup");break;case"PageDown":if(!pt)return;nt.focusOption("pagedown");break;case"Home":if(!pt)return;nt.focusOption("first");break;case"End":if(!pt)return;nt.focusOption("last");break;default:return}tt.preventDefault()}},nt.buildMenuOptions=function(tt,et){var rt=tt.inputValue,it=void 0===rt?"":rt,ot=tt.options,at=function toOption(tt,rt){var ot=nt.isOptionDisabled(tt,et),at=nt.isOptionSelected(tt,et),st=nt.getOptionLabel(tt),ct=nt.getOptionValue(tt);if(!(nt.shouldHideSelectedOptions()&&at||!nt.filterOption({label:st,value:ct,data:tt},it))){var pt=ot?void 0:function(){return nt.onOptionHover(tt)},ft=ot?void 0:function(){return nt.selectOption(tt)},dt=nt.getElementId("option")+"-"+rt;return{innerProps:{id:dt,onClick:ft,onMouseMove:pt,onMouseOver:pt,tabIndex:-1},data:tt,isDisabled:ot,isSelected:at,key:dt,label:st,type:"option",value:ct}}};return ot.reduce((function(tt,et,rt){if(et.options){nt.hasGroups||(nt.hasGroups=!0);var it=et.options.map((function(et,nt){var it=at(et,rt+"-"+nt);return it&&tt.focusable.push(et),it})).filter(Boolean);if(it.length){var ot=nt.getElementId("group")+"-"+rt;tt.render.push({type:"group",key:ot,data:et,options:it})}}else{var st=at(et,""+rt);st&&(tt.render.push(st),tt.focusable.push(et))}return tt}),{render:[],focusable:[]})};var rt=et.value;nt.cacheComponents=Wn(nt.cacheComponents,exportedEqual).bind(_assertThisInitialized(_assertThisInitialized(nt))),nt.cacheComponents(et.components),nt.instancePrefix="react-select-"+(nt.props.instanceId||++wc);var it=vs(rt);nt.buildMenuOptions=Wn(nt.buildMenuOptions,(function(tt,et){var nt=tt,rt=nt[0],it=nt[1],ot=et,at=ot[0];return exportedEqual(it,ot[1])&&exportedEqual(rt.inputValue,at.inputValue)&&exportedEqual(rt.options,at.options)})).bind(_assertThisInitialized(_assertThisInitialized(nt)));var ot=et.menuIsOpen?nt.buildMenuOptions(et,it):{render:[],focusable:[]};return nt.state.menuOptions=ot,nt.state.selectValue=it,nt}!function _inheritsLoose$4(tt,et){tt.prototype=Object.create(et.prototype),tt.prototype.constructor=tt,tt.__proto__=et}(Select,tt);var et=Select.prototype;return et.componentDidMount=function componentDidMount(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()},et.UNSAFE_componentWillReceiveProps=function UNSAFE_componentWillReceiveProps(tt){var et=this.props,nt=et.options,rt=et.value,it=et.menuIsOpen,ot=et.inputValue;if(this.cacheComponents(tt.components),tt.value!==rt||tt.options!==nt||tt.menuIsOpen!==it||tt.inputValue!==ot){var at=vs(tt.value),st=tt.menuIsOpen?this.buildMenuOptions(tt,at):{render:[],focusable:[]},ct=this.getNextFocusedValue(at),pt=this.getNextFocusedOption(st.focusable);this.setState({menuOptions:st,selectValue:at,focusedOption:pt,focusedValue:ct})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)},et.componentDidUpdate=function componentDidUpdate(tt){var et=this.props,nt=et.isDisabled,rt=et.menuIsOpen,it=this.state.isFocused;(it&&!nt&&tt.isDisabled||it&&rt&&!tt.menuIsOpen)&&this.focusInput(),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(!function scrollIntoView(tt,et){var nt=tt.getBoundingClientRect(),rt=et.getBoundingClientRect(),it=et.offsetHeight/3;rt.bottom+it>nt.bottom?scrollTo(tt,Math.min(et.offsetTop+et.clientHeight-tt.offsetHeight+it,tt.scrollHeight)):rt.top-it<nt.top&&scrollTo(tt,Math.max(et.offsetTop-it,0))}(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)},et.componentWillUnmount=function componentWillUnmount(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)},et.onMenuOpen=function onMenuOpen(){this.props.onMenuOpen()},et.onMenuClose=function onMenuClose(){var tt=this.props,et=tt.isSearchable,nt=tt.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:et,isMulti:nt}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()},et.onInputChange=function onInputChange(tt,et){this.props.onInputChange(tt,et)},et.focusInput=function focusInput(){this.inputRef&&this.inputRef.focus()},et.blurInput=function blurInput(){this.inputRef&&this.inputRef.blur()},et.openMenu=function openMenu(tt){var et=this,nt=this.state,rt=nt.selectValue,it=nt.isFocused,ot=this.buildMenuOptions(this.props,rt),at=this.props.isMulti,st="first"===tt?0:ot.focusable.length-1;if(!at){var ct=ot.focusable.indexOf(rt[0]);ct>-1&&(st=ct)}this.scrollToFocusedOptionOnUpdate=!(it&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.setState({menuOptions:ot,focusedValue:null,focusedOption:ot.focusable[st]},(function(){et.onMenuOpen(),et.announceAriaLiveContext({event:"menu"})}))},et.focusValue=function focusValue(tt){var et=this.props,nt=et.isMulti,rt=et.isSearchable,it=this.state,ot=it.selectValue,at=it.focusedValue;if(nt){this.setState({focusedOption:null});var st=ot.indexOf(at);at||(st=-1,this.announceAriaLiveContext({event:"value"}));var ct=ot.length-1,pt=-1;if(ot.length){switch(tt){case"previous":pt=0===st?0:-1===st?ct:st-1;break;case"next":st>-1&&st<ct&&(pt=st+1)}-1===pt&&this.announceAriaLiveContext({event:"input",context:{isSearchable:rt,isMulti:nt}}),this.setState({inputIsHidden:-1!==pt,focusedValue:ot[pt]})}}},et.focusOption=function focusOption(tt){void 0===tt&&(tt="first");var et=this.props.pageSize,nt=this.state,rt=nt.focusedOption,it=nt.menuOptions.focusable;if(it.length){var ot=0,at=it.indexOf(rt);rt||(at=-1,this.announceAriaLiveContext({event:"menu"})),"up"===tt?ot=at>0?at-1:it.length-1:"down"===tt?ot=(at+1)%it.length:"pageup"===tt?(ot=at-et)<0&&(ot=0):"pagedown"===tt?(ot=at+et)>it.length-1&&(ot=it.length-1):"last"===tt&&(ot=it.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:it[ot],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:yc(it[ot])}})}},et.getTheme=function getTheme(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(xc):Select_9fdb8cd0_browser_esm_extends$4({},xc,this.props.theme):xc},et.getCommonProps=function getCommonProps(){var tt=this.clearValue,et=this.getStyles,nt=this.setValue,rt=this.selectOption,it=this.props,ot=it.classNamePrefix,at=it.isMulti,st=it.isRtl,ct=it.options,pt=this.state.selectValue,ft=this.hasValue();return{cx:classNames.bind(null,ot),clearValue:tt,getStyles:et,getValue:function getValue(){return pt},hasValue:ft,isMulti:at,isRtl:st,options:ct,selectOption:rt,setValue:nt,selectProps:it,theme:this.getTheme()}},et.getNextFocusedValue=function getNextFocusedValue(tt){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var et=this.state,nt=et.focusedValue,rt=et.selectValue.indexOf(nt);if(rt>-1){if(tt.indexOf(nt)>-1)return nt;if(rt<tt.length)return tt[rt]}return null},et.getNextFocusedOption=function getNextFocusedOption(tt){var et=this.state.focusedOption;return et&&tt.indexOf(et)>-1?et:tt[0]},et.hasValue=function hasValue(){return this.state.selectValue.length>0},et.hasOptions=function hasOptions(){return!!this.state.menuOptions.render.length},et.countOptions=function countOptions(){return this.state.menuOptions.focusable.length},et.isClearable=function isClearable(){var tt=this.props,isClearable=tt.isClearable,et=tt.isMulti;return void 0===isClearable?et:isClearable},et.isOptionDisabled=function isOptionDisabled(tt,et){return"function"==typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(tt,et)},et.isOptionSelected=function isOptionSelected(tt,et){var nt=this;if(et.indexOf(tt)>-1)return!0;if("function"==typeof this.props.isOptionSelected)return this.props.isOptionSelected(tt,et);var rt=this.getOptionValue(tt);return et.some((function(tt){return nt.getOptionValue(tt)===rt}))},et.filterOption=function filterOption(tt,et){return!this.props.filterOption||this.props.filterOption(tt,et)},et.formatOptionLabel=function formatOptionLabel(tt,et){if("function"==typeof this.props.formatOptionLabel){var nt=this.props.inputValue,rt=this.state.selectValue;return this.props.formatOptionLabel(tt,{context:et,inputValue:nt,selectValue:rt})}return this.getOptionLabel(tt)},et.formatGroupLabel=function formatGroupLabel(tt){return this.props.formatGroupLabel(tt)},et.startListeningComposition=function startListeningComposition(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))},et.stopListeningComposition=function stopListeningComposition(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))},et.startListeningToTouch=function startListeningToTouch(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))},et.stopListeningToTouch=function stopListeningToTouch(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))},et.constructAriaLiveMessage=function constructAriaLiveMessage(){var tt=this.state,et=tt.ariaLiveContext,nt=tt.selectValue,rt=tt.focusedValue,it=tt.focusedOption,ot=this.props,at=ot.options,st=ot.menuIsOpen,ct=ot.inputValue,pt=ot.screenReaderStatus;return(rt?function valueFocusAriaMessage(tt){var et=tt.focusedValue,nt=tt.getOptionLabel,rt=tt.selectValue;return"value "+nt(et)+" focused, "+(rt.indexOf(et)+1)+" of "+rt.length+"."}({focusedValue:rt,getOptionLabel:this.getOptionLabel,selectValue:nt}):"")+" "+(it&&st?function optionFocusAriaMessage(tt){var et=tt.focusedOption,nt=tt.getOptionLabel,rt=tt.options;return"option "+nt(et)+" focused"+(et.isDisabled?" disabled":"")+", "+(rt.indexOf(et)+1)+" of "+rt.length+"."}({focusedOption:it,getOptionLabel:this.getOptionLabel,options:at}):"")+" "+function resultsAriaMessage(tt){var et=tt.inputValue;return tt.screenReaderMessage+(et?" for search term "+et:"")+"."}({inputValue:ct,screenReaderMessage:pt({count:this.countOptions()})})+" "+et},et.renderInput=function renderInput(){var tt=this.props,et=tt.isDisabled,nt=tt.isSearchable,rt=tt.inputId,ot=tt.inputValue,at=tt.tabIndex,st=this.components.Input,ct=this.state.inputIsHidden,pt=rt||this.getElementId("input"),ft={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};if(!nt)return it.a.createElement(DummyInput,Select_9fdb8cd0_browser_esm_extends$4({id:pt,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:gs,onFocus:this.onInputFocus,readOnly:!0,disabled:et,tabIndex:at,value:""},ft));var dt=this.commonProps,mt=dt.cx,yt=dt.theme,vt=dt.selectProps;return it.a.createElement(st,Select_9fdb8cd0_browser_esm_extends$4({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:mt,getStyles:this.getStyles,id:pt,innerRef:this.getInputRef,isDisabled:et,isHidden:ct,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:vt,spellCheck:"false",tabIndex:at,theme:yt,type:"text",value:ot},ft))},et.renderPlaceholderOrValue=function renderPlaceholderOrValue(){var tt=this,et=this.components,nt=et.MultiValue,rt=et.MultiValueContainer,ot=et.MultiValueLabel,at=et.MultiValueRemove,st=et.SingleValue,ct=et.Placeholder,pt=this.commonProps,ft=this.props,dt=ft.controlShouldRenderValue,mt=ft.isDisabled,yt=ft.isMulti,vt=ft.inputValue,Dt=ft.placeholder,Ot=this.state,Rt=Ot.selectValue,Bt=Ot.focusedValue,Ne=Ot.isFocused;if(!this.hasValue()||!dt)return vt?null:it.a.createElement(ct,Select_9fdb8cd0_browser_esm_extends$4({},pt,{key:"placeholder",isDisabled:mt,isFocused:Ne}),Dt);if(yt)return Rt.map((function(et,st){var ct=et===Bt;return it.a.createElement(nt,Select_9fdb8cd0_browser_esm_extends$4({},pt,{components:{Container:rt,Label:ot,Remove:at},isFocused:ct,isDisabled:mt,key:tt.getOptionValue(et),index:st,removeProps:{onClick:function onClick(){return tt.removeValue(et)},onTouchEnd:function onTouchEnd(){return tt.removeValue(et)},onMouseDown:function onMouseDown(tt){tt.preventDefault(),tt.stopPropagation()}},data:et}),tt.formatOptionLabel(et,"value"))}));if(vt)return null;var rn=Rt[0];return it.a.createElement(st,Select_9fdb8cd0_browser_esm_extends$4({},pt,{data:rn,isDisabled:mt}),this.formatOptionLabel(rn,"value"))},et.renderClearIndicator=function renderClearIndicator(){var tt=this.components.ClearIndicator,et=this.commonProps,nt=this.props,rt=nt.isDisabled,ot=nt.isLoading,at=this.state.isFocused;if(!this.isClearable()||!tt||rt||!this.hasValue()||ot)return null;var st={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return it.a.createElement(tt,Select_9fdb8cd0_browser_esm_extends$4({},et,{innerProps:st,isFocused:at}))},et.renderLoadingIndicator=function renderLoadingIndicator(){var tt=this.components.LoadingIndicator,et=this.commonProps,nt=this.props,rt=nt.isDisabled,ot=nt.isLoading,at=this.state.isFocused;if(!tt||!ot)return null;return it.a.createElement(tt,Select_9fdb8cd0_browser_esm_extends$4({},et,{innerProps:{"aria-hidden":"true"},isDisabled:rt,isFocused:at}))},et.renderIndicatorSeparator=function renderIndicatorSeparator(){var tt=this.components,et=tt.DropdownIndicator,nt=tt.IndicatorSeparator;if(!et||!nt)return null;var rt=this.commonProps,ot=this.props.isDisabled,at=this.state.isFocused;return it.a.createElement(nt,Select_9fdb8cd0_browser_esm_extends$4({},rt,{isDisabled:ot,isFocused:at}))},et.renderDropdownIndicator=function renderDropdownIndicator(){var tt=this.components.DropdownIndicator;if(!tt)return null;var et=this.commonProps,nt=this.props.isDisabled,rt=this.state.isFocused,ot={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return it.a.createElement(tt,Select_9fdb8cd0_browser_esm_extends$4({},et,{innerProps:ot,isDisabled:nt,isFocused:rt}))},et.renderMenu=function renderMenu(){var tt=this,et=this.components,nt=et.Group,rt=et.GroupHeading,ot=et.Menu,at=et.MenuList,st=et.MenuPortal,ct=et.LoadingMessage,pt=et.NoOptionsMessage,ft=et.Option,dt=this.commonProps,mt=this.state,yt=mt.focusedOption,vt=mt.menuOptions,Dt=this.props,Ot=Dt.captureMenuScroll,Rt=Dt.inputValue,Bt=Dt.isLoading,Ne=Dt.loadingMessage,rn=Dt.minMenuHeight,vn=Dt.maxMenuHeight,bn=Dt.menuIsOpen,Tn=Dt.menuPlacement,Cn=Dt.menuPosition,Ln=Dt.menuPortalTarget,In=Dt.menuShouldBlockScroll,Mn=Dt.menuShouldScrollIntoView,zn=Dt.noOptionsMessage,Bn=Dt.onMenuScrollToTop,Fn=Dt.onMenuScrollToBottom;if(!bn)return null;var Nn,Vn=function render(et){var nt=yt===et.data;return et.innerRef=nt?tt.getFocusedOptionRef:void 0,it.a.createElement(ft,Select_9fdb8cd0_browser_esm_extends$4({},dt,et,{isFocused:nt}),tt.formatOptionLabel(et.data,"menu"))};if(this.hasOptions())Nn=vt.render.map((function(et){if("group"===et.type){et.type;var ot=function Select_9fdb8cd0_browser_esm_objectWithoutPropertiesLoose$2(tt,et){if(null==tt)return{};var nt,rt,it={},ot=Object.keys(tt);for(rt=0;rt<ot.length;rt++)nt=ot[rt],et.indexOf(nt)>=0||(it[nt]=tt[nt]);return it}(et,["type"]),at=et.key+"-heading";return it.a.createElement(nt,Select_9fdb8cd0_browser_esm_extends$4({},dt,ot,{Heading:rt,headingProps:{id:at},label:tt.formatGroupLabel(et.data)}),et.options.map((function(tt){return Vn(tt)})))}if("option"===et.type)return Vn(et)}));else if(Bt){var Wn=Ne({inputValue:Rt});if(null===Wn)return null;Nn=it.a.createElement(ct,dt,Wn)}else{var $n=zn({inputValue:Rt});if(null===$n)return null;Nn=it.a.createElement(pt,dt,$n)}var Yn={minMenuHeight:rn,maxMenuHeight:vn,menuPlacement:Tn,menuPosition:Cn,menuShouldScrollIntoView:Mn},er=it.a.createElement(Ps,Select_9fdb8cd0_browser_esm_extends$4({},dt,Yn),(function(et){var nt=et.ref,rt=et.placerProps,st=rt.placement,ct=rt.maxHeight;return it.a.createElement(ot,Select_9fdb8cd0_browser_esm_extends$4({},dt,Yn,{innerRef:nt,innerProps:{onMouseDown:tt.onMenuMouseDown,onMouseMove:tt.onMenuMouseMove},isLoading:Bt,placement:st}),it.a.createElement(ScrollCaptorSwitch,{isEnabled:Ot,onTopArrive:Bn,onBottomArrive:Fn},it.a.createElement(Fl,{isEnabled:In},it.a.createElement(at,Select_9fdb8cd0_browser_esm_extends$4({},dt,{innerRef:tt.getMenuListRef,isLoading:Bt,maxHeight:ct}),Nn))))}));return Ln||"fixed"===Cn?it.a.createElement(st,Select_9fdb8cd0_browser_esm_extends$4({},dt,{appendTo:Ln,controlElement:this.controlRef,menuPlacement:Tn,menuPosition:Cn}),er):er},et.renderFormField=function renderFormField(){var tt=this,et=this.props,nt=et.delimiter,rt=et.isDisabled,ot=et.isMulti,at=et.name,st=this.state.selectValue;if(at&&!rt){if(ot){if(nt){var ct=st.map((function(et){return tt.getOptionValue(et)})).join(nt);return it.a.createElement("input",{name:at,type:"hidden",value:ct})}var pt=st.length>0?st.map((function(et,nt){return it.a.createElement("input",{key:"i-"+nt,name:at,type:"hidden",value:tt.getOptionValue(et)})})):it.a.createElement("input",{name:at,type:"hidden"});return it.a.createElement("div",null,pt)}var ft=st[0]?this.getOptionValue(st[0]):"";return it.a.createElement("input",{name:at,type:"hidden",value:ft})}},et.renderLiveRegion=function renderLiveRegion(){return this.state.isFocused?it.a.createElement(bl,{"aria-live":"polite"},it.a.createElement("p",{id:"aria-selection-event"},"",this.state.ariaLiveSelection),it.a.createElement("p",{id:"aria-context"},"",this.constructAriaLiveMessage())):null},et.render=function render(){var tt=this.components,et=tt.Control,nt=tt.IndicatorsContainer,rt=tt.SelectContainer,ot=tt.ValueContainer,at=this.props,st=at.className,ct=at.id,pt=at.isDisabled,ft=at.menuIsOpen,dt=this.state.isFocused,mt=this.commonProps=this.getCommonProps();return it.a.createElement(rt,Select_9fdb8cd0_browser_esm_extends$4({},mt,{className:st,innerProps:{id:ct,onKeyDown:this.onKeyDown},isDisabled:pt,isFocused:dt}),this.renderLiveRegion(),it.a.createElement(et,Select_9fdb8cd0_browser_esm_extends$4({},mt,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:pt,isFocused:dt,menuIsOpen:ft}),it.a.createElement(ot,Select_9fdb8cd0_browser_esm_extends$4({},mt,{isDisabled:pt}),this.renderPlaceholderOrValue(),this.renderInput()),it.a.createElement(nt,Select_9fdb8cd0_browser_esm_extends$4({},mt,{isDisabled:pt}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())},Select}(rt.Component);function stateManager_04f734a2_browser_esm_extends(){return(stateManager_04f734a2_browser_esm_extends=Object.assign||function(tt){for(var et=1;et<arguments.length;et++){var nt=arguments[et];for(var rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(tt[rt]=nt[rt])}return tt}).apply(this,arguments)}Ec.defaultProps=bc;var Cc={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null};rt.Component;var kc=function manageState(tt){var et,nt;return nt=et=function(et){function StateManager(){for(var tt,nt=arguments.length,rt=new Array(nt),it=0;it<nt;it++)rt[it]=arguments[it];return(tt=et.call.apply(et,[this].concat(rt))||this).select=void 0,tt.state={inputValue:void 0!==tt.props.inputValue?tt.props.inputValue:tt.props.defaultInputValue,menuIsOpen:void 0!==tt.props.menuIsOpen?tt.props.menuIsOpen:tt.props.defaultMenuIsOpen,value:void 0!==tt.props.value?tt.props.value:tt.props.defaultValue},tt.onChange=function(et,nt){tt.callProp("onChange",et,nt),tt.setState({value:et})},tt.onInputChange=function(et,nt){var rt=tt.callProp("onInputChange",et,nt);tt.setState({inputValue:void 0!==rt?rt:et})},tt.onMenuOpen=function(){tt.callProp("onMenuOpen"),tt.setState({menuIsOpen:!0})},tt.onMenuClose=function(){tt.callProp("onMenuClose"),tt.setState({menuIsOpen:!1})},tt}!function stateManager_04f734a2_browser_esm_inheritsLoose(tt,et){tt.prototype=Object.create(et.prototype),tt.prototype.constructor=tt,tt.__proto__=et}(StateManager,et);var nt=StateManager.prototype;return nt.focus=function focus(){this.select.focus()},nt.blur=function blur(){this.select.blur()},nt.getProp=function getProp(tt){return void 0!==this.props[tt]?this.props[tt]:this.state[tt]},nt.callProp=function callProp(tt){if("function"==typeof this.props[tt]){for(var et,nt=arguments.length,rt=new Array(nt>1?nt-1:0),it=1;it<nt;it++)rt[it-1]=arguments[it];return(et=this.props)[tt].apply(et,rt)}},nt.render=function render(){var et=this,nt=this.props,rt=(nt.defaultInputValue,nt.defaultMenuIsOpen,nt.defaultValue,function stateManager_04f734a2_browser_esm_objectWithoutPropertiesLoose(tt,et){if(null==tt)return{};var nt,rt,it={},ot=Object.keys(tt);for(rt=0;rt<ot.length;rt++)nt=ot[rt],et.indexOf(nt)>=0||(it[nt]=tt[nt]);return it}(nt,["defaultInputValue","defaultMenuIsOpen","defaultValue"]));return it.a.createElement(tt,stateManager_04f734a2_browser_esm_extends({},rt,{ref:function ref(tt){et.select=tt},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))},StateManager}(rt.Component),et.defaultProps=Cc,nt}(Ec);nt(19);var Ic=nt(6);function groupOptions(tt){const et=new Set([]),nt=[];for(const rt of tt){const tt=rt.label||"";et.has(tt)||(nt.push({label:tt,options:[]}),et.add(tt));nt.find(et=>et.label===tt).options.push(rt)}return nt}function Filters({baseMapLayers:tt,rasterLayers:et,vectorLayers:nt,vectorFiltersByNamesMap:rt,selectedBaseMapLayerName:ot,selectedRasterLayerName:at,selectedVectorLayerNamesSet:st,onUpdateBaseMapLayer:ct,onUpdateRasterLayer:pt,onUpdateVectorLayers:ft,onUpdateVectorFilters:dt,isLoadingVectors:mt,isLoadingRasters:yt}){function renderFilter({vectorName:tt,filterName:et,valuesSet:nt=new Set([]),selectedValuesSet:ot=new Set([])}){return it.a.createElement("div",{key:`${tt}_${et}`,className:Ic.filter},it.a.createElement("div",{className:Ic.filterName},it.a.createElement("span",null,et)),it.a.createElement(kc,{options:[...nt],value:[...ot],getOptionLabel:tt=>tt,isOptionSelected:tt=>ot.has(tt),isMulti:!0,onChange:(nt,it)=>function handleFilterChange(tt,et,nt){const{action:it,removedValue:ot,option:at}=tt,st={...rt},ct=new Set([...st[et][nt].selectedValuesSet]);switch(it){case"remove-value":ct.delete(ot);break;case"deselect-option":ct.delete(at);break;case"select-option":ct.add(at);break;case"clear":ct.clear()}dt({...rt,[et]:{...rt[et],[nt]:{...rt[et][nt],selectedValuesSet:ct}}})}(it,tt,et),hideSelectedOptions:!1,isDisabled:!nt.size,isLoading:mt&&!nt.size}))}const vt={display:"flex",alignItems:"center",justifyContent:"space-between"},Dt={backgroundColor:"#EBECF0",borderRadius:"2em",color:"#172B4D",display:"inline-block",fontSize:12,fontWeight:"normal",lineHeight:"1",minWidth:1,padding:"0.16666666666667em 0.5em",textAlign:"center"},renderGroupLabel=tt=>it.a.createElement("div",{style:vt,className:Ic.groupWrapper},it.a.createElement("span",null,tt.label),it.a.createElement("span",{style:Dt,className:Ic.groupBadge},tt.options.length));return it.a.createElement("div",{className:Ic.sideBarWrapper},it.a.createElement("div",{className:Ic.headerWrapper},it.a.createElement("h2",null,"QSEL")),it.a.createElement("div",{className:Ic.bodyWrapper},it.a.createElement("div",{className:Ic.sectionWrapper},it.a.createElement("div",{className:Ic.sectionHeader},it.a.createElement("span",null,"Base map")),it.a.createElement(kc,{options:tt,value:tt.find(({name:tt})=>tt===ot),getOptionLabel:({name:tt})=>tt,isOptionSelected:({name:tt})=>tt===ot,onChange:function handleBaseMapLayerChange(et,nt){const{action:rt}=nt;let it;switch(rt){case"select-option":it=et.name;break;case"remove-value":case"deselect-option":case"clear":it=tt[0].name}ct(it)},hideSelectedOptions:!1})),it.a.createElement("div",{className:Ic.sectionWrapper},it.a.createElement("div",{className:Ic.sectionHeader},it.a.createElement("span",null,"Rasters")),it.a.createElement(kc,{options:groupOptions(et),value:et.find(({name:tt})=>tt===at),getOptionLabel:({name:tt})=>tt,isOptionSelected:({name:tt})=>tt===at,onChange:function handleRasterLayerChange(tt,et){const{action:nt}=et;let rt;switch(nt){case"select-option":rt=tt.name;break;case"remove-value":case"deselect-option":case"clear":rt=null}pt(rt)},hideSelectedOptions:!1,isClearable:!0,placeholder:"Select raster...",isLoading:yt,isDisabled:!et.length,formatGroupLabel:renderGroupLabel})),it.a.createElement("div",{className:Ic.sectionWrapper},it.a.createElement("div",{className:Ic.sectionHeader},it.a.createElement("span",null,"Vectors")),it.a.createElement(kc,{options:groupOptions(nt),value:nt.filter(({name:tt})=>st.has(tt)),getOptionLabel:({name:tt})=>tt,isOptionSelected:({name:tt})=>st.has(tt),isMulti:!0,onChange:function handleVectorLayerChange(tt,et){const{action:nt,removedValue:rt,option:it}=et,ot=new Set([...st]);switch(nt){case"remove-value":ot.delete(rt.name);break;case"deselect-option":ot.delete(it.name);break;case"select-option":ot.add(it.name);break;case"clear":ot.clear()}ft(ot)},hideSelectedOptions:!1,isLoading:mt,isDisabled:!nt.length,formatGroupLabel:renderGroupLabel}),it.a.createElement("div",{className:Ic.vectorFiltersWrapper},it.a.createElement("div",{className:Ic.sectionHeader},it.a.createElement("span",null,"Filter by vector values")),!nt.filter(({name:tt,filterVariables:et=[]})=>st.has(tt)&&et.length).length&&it.a.createElement("span",{className:Ic.empty},"No filterable vectors selected"),nt.filter(({name:tt})=>st.has(tt)).map((function renderFilters({name:tt,filterVariables:et=[]}){if(!et.length)return null;const nt=rt[tt],ot=et.map(et=>({vectorName:tt,filterName:et.name,valuesSet:((nt||{})[et.name]||{}).valuesSet,selectedValuesSet:((nt||{})[et.name]||{}).selectedValuesSet}));return it.a.createElement("div",{key:tt,className:Ic.filterWrapper},it.a.createElement("div",{className:Ic.vectorName},it.a.createElement("span",null,tt)),it.a.createElement("div",{className:Ic.filters},ot.map(renderFilter)))}))))))}nt(80),nt(81),nt(82),nt(83),nt(84),nt(85),nt(86),nt(87),nt(88),nt(89),nt(90),nt(91),nt(92),nt(148);var Ac=nt(46),zc=nt.n(Ac),Dc=nt(57);function _defineProperty(tt,et,nt){return et in tt?Object.defineProperty(tt,et,{value:nt,enumerable:!0,configurable:!0,writable:!0}):tt[et]=nt,tt}zc.a.accessToken="pk.eyJ1IjoiaW1hdGhld3MiLCJhIjoiY2thdnl2cGVsMGtldTJ6cGl3c2tvM2NweSJ9.TXtG4gARAf4bUbnPVxk6uA";const Bc=[1,33];class MapRenderer_MapRenderer{constructor(tt,et){_defineProperty(this,"handleMoveEnd",()=>{const tt=this.map.getZoom(),et=this.map.getCenter();this.onZoomOrPan(tt,et)}),_defineProperty(this,"handleZoomEnd",()=>{const tt=this.map.getZoom(),et=this.map.getCenter();this.onZoomOrPan(tt,et),this.updateLayers(tt)}),_defineProperty(this,"updateLayers",tt=>{for(const[et,nt]of this.vectorLayers)console.log("source",this.map.getSource(et)),console.log("layer",this.map.getLayer(et)),this.map.getLayer(et)||this.map.addLayer(nt),this.minZoomByLayer.get(et)&&tt<this.minZoomByLayer.get(et)&&this.map.removeLayer(et)}),this.elem=tt,this.props={},this.map=new zc.a.Map({container:this.elem});const nt=new zc.a.ScaleControl({maxWidth:100,unit:"imperial"});this.map.addControl(nt),this.baseLayers=new Map,this.rasterLayers=new Map,this.vectorLayers=new Map,this.minZoomByLayer=new Map,this.onZoomOrPan=et.onZoomOrPan,this.map.on("load",()=>this.update(et,!0)),this.map.on("zoomend",this.handleZoomEnd),this.map.on("moveend",this.handleMoveEnd)}update({baseMapLayer:tt,rasterLayers:et,vectorLayers:nt,center:rt=Bc,zoom:it=7},ot=!1){if(console.log("mapRenderer update",this.map.isStyleLoaded()),ot&&this.map.jumpTo({center:rt,zoom:it}),!this.baseLayers.get(tt.name)){for(const[tt,et]of this.baseLayers)this.baseLayers.delete(tt);this.map.setStyle(tt.mapboxStyle),this.baseLayers.set(tt.name,tt)}if(console.log("baseLayers",this.baseLayers),this.map.isStyleLoaded()){const tt=new Set(nt.map(({name:tt})=>tt));for(const[et,nt]of this.vectorLayers)tt.has(et)||(this.map.removeLayer(et),this.map.removeSource(et),this.vectorLayers.delete(et),this.minZoomByLayer.delete(et));for(const tt of nt){let et=this.vectorLayers.get(tt.name);if(et)this.map.getSource(tt.name).setData({type:"FeatureCollection",features:tt.features});else{const nt={type:tt.mapboxSourceType,data:{type:"FeatureCollection",features:tt.features}};et={id:tt.name,type:tt.mapboxLayerType,source:tt.name,...tt.mapboxLayerOptions},console.log("add layer",tt,et),this.map.addSource(tt.name,nt),this.vectorLayers.set(tt.name,et),tt.minZoom&&this.minZoomByLayer.set(tt.name,tt.minZoom)}}this.updateLayers(this.map.getZoom())}}}function Map_defineProperty(tt,et,nt){return et in tt?Object.defineProperty(tt,et,{value:nt,enumerable:!0,configurable:!0,writable:!0}):tt[et]=nt,tt}class Map_Map extends rt.Component{componentDidMount(){this.mapRenderer=new MapRenderer_MapRenderer(this.mapElement,this.props)}componentDidUpdate(tt){this.mapRenderer.update(this.props)}render(){return it.a.createElement("div",{ref:tt=>this.mapElement=tt,className:Dc.wrapper})}}Map_defineProperty(Map_Map,"propTypes",{baseMapLayer:ct.a.object,vectorLayers:ct.a.arrayOf(ct.a.object),rasterLayers:ct.a.arrayOf(ct.a.object)}),Map_defineProperty(Map_Map,"defaultProps",{vectorLayers:[],rasterLayers:[]});class RasterSource{constructor({mapboxId:tt,isDefault:et,minZoom:nt,maxZoom:rt,minNativeZoom:it,maxNativeZoom:ot,boundingBox:at,name:st,label:ct}){this.name=st,this.label=ct,this.mapboxId=tt,this.minZoom=parseInt(nt),this.maxZoom=parseInt(rt),this.minNativeZoom=parseInt(it),this.maxNativeZoom=parseInt(ot),this.isDefault=et,at&&(at=at.split(","),this.bounds=[[parseInt(at[1]),parseInt(at[0])],[parseInt(at[3]),parseInt(at[2])]])}}var Fc=[{name:"Default Streets",mapboxStyle:"mapbox://styles/mapbox/streets-v11",isDefault:!0},{name:"Terrain_RGB_Edit1",mapboxStyle:"mapbox://styles/imathews/ckbjwd4a804cy1imp0tf8kz90"},{name:"Satellite_Basemap1",mapboxStyle:"mapbox://styles/imathews/ckbjw25s806j01ipj5fjyi9f4"},{name:"Streets_Networks_Basemap",mapboxStyle:"mapbox://styles/imathews/ckbjwv03707b21ipjjukqohfw"},{name:"Decimal",mapboxStyle:"mapbox://styles/imathews/ckbjw724006nh1ipj86huoe0s"}];class RasterSourceGroup_RasterSourceGroup{constructor({name:tt,tableIdentifier:et,mapboxIdVariable:nt,minNativeZoomVariable:rt,maxNativeZoomVariable:it,boundingBoxVariable:ot,nameVariable:at}){!function RasterSourceGroup_defineProperty(tt,et,nt){return et in tt?Object.defineProperty(tt,et,{value:nt,enumerable:!0,configurable:!0,writable:!0}):tt[et]=nt,tt}(this,"fetchData",async()=>{if(this.data)return this.data;const tt=[...new Set([this.mapboxIdVariable.name.toLowerCase(),this.minNativeZoomVariable.name.toLowerCase(),this.maxNativeZoomVariable.name.toLowerCase(),this.boundingBoxVariable.name.toLowerCase(),this.nameVariable.name.toLowerCase()])],et=await fetch(`https://redivis.com/api/v1/tables/${this.tableIdentifier}/rows?selectedVariables=${tt.join(",")}&maxResults=10000`,{method:"GET",headers:{Authorization:"Bearer AAAAXtGcJ4BCOmXb3OT+XuGr1C5NuWyX"}});if(!et.ok){const tt=await et.text();return alert(tt),[]}const nt=await et.text();return this.data=nt.split("\n").map((tt,et)=>JSON.parse(tt)).map(tt=>new RasterSource({mapboxId:tt[0],minNativeZoom:tt[1],maxNativeZoom:tt[2],boundingBox:tt[3],name:tt[4],label:this.name})),this.data}),this.name=tt,this.tableIdentifier=et,this.mapboxIdVariable=nt,this.minNativeZoomVariable=rt,this.maxNativeZoomVariable=it,this.boundingBoxVariable=ot,this.nameVariable=at}}var Zc=[new RasterSourceGroup_RasterSourceGroup({name:"Uganda",tableIdentifier:"modilab.uganda_geodata:1.raster_layer_metadata:13",mapboxIdVariable:{name:"mapbox_id"},minNativeZoomVariable:{name:"zoom_min"},maxNativeZoomVariable:{name:"zoom_max"},boundingBoxVariable:{name:"bounding_box"},nameVariable:{name:"catalog_name"}}),new RasterSourceGroup_RasterSourceGroup({name:"Ethiopia",tableIdentifier:"modilab.ethiopia_geodata:2:v1_0.raster_layer_metadata:1",mapboxIdVariable:{name:"mapbox_id"},minNativeZoomVariable:{name:"zoom_min"},maxNativeZoomVariable:{name:"zoom_max"},boundingBoxVariable:{name:"bounding_box"},nameVariable:{name:"catalog_name"}})];class VectorSource{constructor({name:tt,label:et,tableIdentifier:nt,geoVariables:rt,getGeometry:it,isDefault:ot,filterVariables:at,metadataVariables:st,leafletType:ct,mapboxSourceType:pt,mapboxLayerType:ft,mapboxLayerOptions:dt,leafletOptions:mt,minZoom:yt,maxZoom:vt}){!function VectorSource_defineProperty(tt,et,nt){return et in tt?Object.defineProperty(tt,et,{value:nt,enumerable:!0,configurable:!0,writable:!0}):tt[et]=nt,tt}(this,"fetchData",async()=>{if(this.data)return this.data;const tt=[...new Set([...this.geoVariables.map(({name:tt})=>tt.toLowerCase()),...this.filterVariables.map(({name:tt})=>tt.toLowerCase()),...this.metadataVariables.map(({name:tt})=>tt.toLowerCase())])],et=new Map;for(let nt=0;nt<tt.length;nt++)et.set(tt[nt],nt);const nt=await fetch(`https://redivis.com/api/v1/tables/${this.tableIdentifier}/rows?selectedVariables=${tt.join(",")}&maxResults=10000`,{method:"GET",headers:{Authorization:"Bearer AAAAXtGcJ4BCOmXb3OT+XuGr1C5NuWyX"}});if(!nt.ok){const tt=await nt.text();return alert(tt),[]}const rt=await nt.text();return this.data=rt.split("\n").map((tt,et)=>JSON.parse(tt)).filter(tt=>tt[0]).map(tt=>{const nt=this.getGeometry?this.getGeometry(...this.geoVariables.map(nt=>tt[et.get(nt.name.toLowerCase())])):JSON.parse(tt[et.get(this.geoVariables[0].name.toLowerCase())]),rt={};for(const nt of this.metadataVariables)rt[nt.name]=tt[et.get(nt.name.toLowerCase())];return{geometry:nt,metadata:rt,properties:rt}}),this.data}),this.name=tt,this.label=et,this.tableIdentifier=nt,this.geoVariables=rt,this.filterVariables=at,this.metadataVariables=st,this.leafletType=ct,this.mapboxSourceType=pt,this.mapboxLayerType=ft,this.mapboxLayerOptions=dt,this.leafletOptions=mt,this.minZoom=yt,this.maxZoom=vt,this.isDefault=ot,this.getGeometry=it}}var Hc=[new VectorSource({name:"Uganda Regions",label:"Uganda",isDefault:!0,tableIdentifier:"modilab.uganda_geodata:1:current.uganda_regions:8",geoVariables:[{name:"geom"}],filterVariables:[],metadataVariables:[{name:"AREA"},{name:"PERIMETER"},{name:"ID"},{name:"CAPTION"}],leafletType:"geoJSON",mapboxSourceType:"geojson",mapboxLayerType:"line",mapboxLayerOptions:{layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"black","line-width":3}},leafletOptions:{style:tt=>({color:"white",weight:2,fill:!1})}}),new VectorSource({name:"Uganda Districts",label:"Uganda",isDefault:!0,tableIdentifier:"modilab.uganda_geodata:1:current.uganda_districts:9",geoVariables:[{name:"geom"}],filterVariables:[],metadataVariables:[{name:"DNAME2016"},{name:"DNAMA2017"},{name:"DNAME2018"},{name:"DNAME2019"}],leafletType:"geoJSON",mapboxSourceType:"geojson",mapboxLayerType:"line",mapboxLayerOptions:{layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"black","line-width":3,"line-dasharray":[6,3]}},leafletOptions:{style:tt=>({color:"white",weight:2,fill:!1,dashArray:"4"})},minZoom:8}),new VectorSource({name:"Uganda Subcounties",label:"Uganda",isDefault:!1,tableIdentifier:"modilab.uganda_geodata:1:current.uganda_subcounties:11",geoVariables:[{name:"geom"}],filterVariables:[],metadataVariables:[{name:"District"},{name:"County"},{name:"Subcounty"},{name:"regions"}],leafletType:"geoJSON",mapboxSourceType:"geojson",mapboxLayerType:"line",mapboxLayerOptions:{layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"black","line-width":2,"line-dasharray":[4,2]}},leafletOptions:{style:tt=>({color:"white",weight:1,fill:!1,dashArray:"2"})},minZoom:8}),new VectorSource({name:"Uganda Parishes",label:"Uganda",isDefault:!1,tableIdentifier:"modilab.uganda_geodata:1:current.uganda_parishes:10",geoVariables:[{name:"geom"}],filterVariables:[],metadataVariables:[{name:"DName2016"},{name:"CName2016"},{name:"SName2016"}],leafletType:"geoJSON",mapboxSourceType:"geojson",mapboxLayerType:"line",mapboxLayerOptions:{layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"black","line-width":2,"line-dasharray":[2,1]}},leafletOptions:{style:tt=>({color:"white",weight:1,fill:!1,dashArray:"1"})},minZoom:8}),new VectorSource({name:"Uganda Electricity Transmission Lines",label:"Uganda",tableIdentifier:"modilab.uganda_geodata:1:current.uganda_electricity_transmission_lines:12",geoVariables:[{name:"geom"}],filterVariables:[{name:"VOLTAGE_KV"},{name:"STATUS"},{name:"INSTALLATI"},{name:"STRUCTURE_"}],metadataVariables:[{name:"OBJECTID"},{name:"LINE_ID"},{name:"LINE_NAME"},{name:"VOLTAGE_KV"},{name:"STATUS"},{name:"STATUS_DET"},{name:"YEAR_COMMI"},{name:"YEAR_UPGRA"},{name:"YEAR_DECOM"},{name:"INSTALLATI"},{name:"STRUCTURE_"},{name:"FINANCIER"},{name:"CONTRACTOR"}],leafletType:"geoJSON",mapboxSourceType:"geojson",mapboxLayerType:"line",mapboxLayerOptions:{layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"rgb(32,89,255)","line-width":2}},leafletOptions:{style:tt=>({color:"rgb(32,89,255)",weight:1})}}),new VectorSource({name:"Uganda Geosurvey Results",label:"Uganda",tableIdentifier:"modilab.uganda_geodata:1:current.uganda_geosurvey_results:1",geoVariables:[{name:"lat"},{name:"lon"}],getGeometry:(tt,et)=>[tt,et],filterVariables:[{name:"cs"},{name:"wp"},{name:"cp"}],metadataVariables:[{name:"cs"},{name:"wp"},{name:"cp"}],leafletType:"circleMarker",mapboxSourceType:"geojson",mapboxLayerType:"circle",mapboxLayerOptions:{paint:{"circle-color":"rgba(51,255,150,0.6)","circle-radius":3}},leafletOptions:{styles:tt=>({color:"rgba(51,255,150,0.6)",radius:1})},minZoom:9}),new VectorSource({name:"UMEME REA power distribution lines 2018",label:"Uganda",isDefault:!0,tableIdentifier:"modilab.uganda_geodata:1:v2_5.umeme_rea_power_distribution_lines_2018:7",geoVariables:[{name:"geom"}],filterVariables:[{name:"Voltage"},{name:"Status"},{name:"Phase"}],metadataVariables:[{name:"Voltage"},{name:"Status"},{name:"Phase"}],leafletType:"geoJSON",mapboxSourceType:"geojson",mapboxLayerType:"line",mapboxLayerOptions:{layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"rgb(255,129,255)","line-width":2}},leafletOptions:{style:tt=>({color:"rgb(255,129,255)",weight:1})}})];function App_defineProperty(tt,et,nt){return et in tt?Object.defineProperty(tt,et,{value:nt,enumerable:!0,configurable:!0,writable:!0}):tt[et]=nt,tt}const Wc=/zoom=([\d+\.]+)/,Gc=/lat=(-?[\d+\.]+)/,Xc=/lng=(-?[\d+\.]+)/;class App_App extends rt.Component{constructor(tt){super(tt),App_defineProperty(this,"loadVectors",async()=>{this.setState({isLoadingVectors:!0});const{currentVectorLayerNamesSet:tt}=this.state,et=Hc.filter(({name:et})=>tt.has(et)),nt={},rt={};await Promise.all(et.map(async tt=>{const et=await tt.fetchData();if(nt[tt.name]=et,tt.filterVariables&&tt.filterVariables.length){const nt=function getFiltersMap(tt,et){const nt={};for(const rt of tt)for(const tt in rt.metadata)et.has(tt)&&(nt[tt]||(nt[tt]={valuesSet:new Set([]),selectedValuesSet:new Set([])}),nt[tt].valuesSet.add(rt.metadata[tt]||"(null)"),nt[tt].selectedValuesSet.add(rt.metadata[tt]||"(null)"));return nt}(et,new Set(tt.filterVariables.map(({name:tt})=>tt)));rt[tt.name]=nt}})),this.setState({vectorFeaturesByNamesMap:nt,vectorFiltersByNamesMap:rt,isLoadingVectors:!1})}),App_defineProperty(this,"loadRasters",async()=>{this.setState({isLoadingRasters:!0});const tt=(await Promise.all(Zc.map(async tt=>await tt.fetchData()))).reduce((tt,et)=>tt.concat(et),[]);this.setState({rasters:tt,isLoadingRasters:!1})}),App_defineProperty(this,"handleUpdateBaseMapLayer",tt=>{this.setState({currentBaseMapLayerName:tt})}),App_defineProperty(this,"handleUpdateRasterLayer",tt=>{this.setState({currentRasterLayerName:tt})}),App_defineProperty(this,"handleUpdateVectorLayers",tt=>{this.setState({currentVectorLayerNamesSet:tt},this.loadVectors)}),App_defineProperty(this,"handleUpdateVectorFilters",tt=>{this.setState({vectorFiltersByNamesMap:tt})}),App_defineProperty(this,"filterFeatures",(tt,et)=>{const{vectorFiltersByNamesMap:nt}=this.state,rt=nt[tt],it=[];for(const tt in rt)it.push(tt);return et.filter(tt=>!tt.metadata||it.every(et=>void 0===tt.metadata[et]||rt[et].selectedValuesSet.has(tt.metadata[et]||"(null)")))}),App_defineProperty(this,"handleZoomOrPan",(tt,et)=>{const{location:{pathname:nt},history:rt}=this.props;rt.replace({pathname:nt,search:`zoom=${tt}&lat=${et.lat}&lng=${et.lng}`})}),App_defineProperty(this,"getZoomAndCenter",()=>{const{location:{search:tt}}=this.props,et=tt.match(Wc),nt=tt.match(Gc),rt=tt.match(Xc),it={};return et&&(it.zoom=parseInt(et[1],10)),nt&&rt&&(it.center=[parseFloat(nt[1]),parseFloat(rt[1])]),it});const et=Hc.filter(({isDefault:tt})=>tt),nt={},rt={};for(const tt of et)nt[tt.name]=[],rt[tt.name]={};this.state={currentBaseMapLayerName:Fc.find(({isDefault:tt})=>tt).name,currentRasterLayerName:null,currentVectorLayerNamesSet:new Set(et.map(({name:tt})=>tt)),rasters:[],vectorFeaturesByNamesMap:nt,vectorFiltersByNamesMap:rt,isLoadingVectors:!1,isLoadingRasters:!1}}componentDidMount(){this.loadVectors(),this.loadRasters()}render(){const{vectorFiltersByNamesMap:tt,vectorFeaturesByNamesMap:et,currentRasterLayerName:nt,currentVectorLayerNamesSet:rt,currentBaseMapLayerName:ot,rasters:at,isLoadingVectors:st,isLoadingRasters:ct}=this.state,{zoom:pt,center:ft}=this.getZoomAndCenter();return it.a.createElement("div",{className:Vn.appWrapper},it.a.createElement(Filters,{baseMapLayers:Fc,rasterLayers:at,vectorLayers:Hc,vectorFiltersByNamesMap:tt,selectedBaseMapLayerName:ot,selectedRasterLayerName:nt,selectedVectorLayerNamesSet:rt,onUpdateBaseMapLayer:this.handleUpdateBaseMapLayer,onUpdateRasterLayer:this.handleUpdateRasterLayer,onUpdateVectorLayers:this.handleUpdateVectorLayers,onUpdateVectorFilters:this.handleUpdateVectorFilters,isLoadingVectors:st,isLoadingRasters:ct}),it.a.createElement(Map_Map,{baseMapLayer:Fc.find(({name:tt})=>tt===ot),rasterLayers:at.filter(({name:tt})=>tt===nt),vectorLayers:Hc.filter(({name:tt})=>rt.has(tt)).map(tt=>({...tt,features:this.filterFeatures(tt.name,et[tt.name]||[])})),onZoomOrPan:this.handleZoomOrPan,zoom:pt,center:ft}))}}var $c=function withRouter(tt){var et="withRouter("+(tt.displayName||tt.name)+")",nt=function C(et){var nt=et.wrappedComponentRef,rt=_objectWithoutPropertiesLoose(et,["wrappedComponentRef"]);return it.a.createElement(Ne.Consumer,null,(function(et){return et||ft(!1),it.a.createElement(tt,_extends({},rt,et,{ref:nt}))}))};return nt.displayName=et,nt.WrappedComponent=tt,Rt()(nt,tt)}(App_App);let Yc=document.getElementById("root");Yc||(Yc=document.createElement("div"),Yc.id="root",document.body.appendChild(Yc)),Object(ot.render)(it.a.createElement(Tn,null,it.a.createElement($c,null)),Yc)}]);